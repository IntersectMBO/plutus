<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-using-plinth/cli-plutus" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.0">
<title data-rh="true">CLI tool for Plutus | Plinth and Plutus Core Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://plutus.cardano.intersectmbo.org/pr-preview/docs/pr-7092/img/docusaurus-social-card.png"><meta data-rh="true" name="twitter:image" content="https://plutus.cardano.intersectmbo.org/pr-preview/docs/pr-7092/img/docusaurus-social-card.png"><meta data-rh="true" property="og:url" content="https://plutus.cardano.intersectmbo.org/pr-preview/docs/pr-7092/using-plinth/cli-plutus"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CLI tool for Plutus | Plinth and Plutus Core Documentation"><meta data-rh="true" name="description" content="The plutus CLI tool allows you to:"><meta data-rh="true" property="og:description" content="The plutus CLI tool allows you to:"><link data-rh="true" rel="icon" href="/pr-preview/docs/pr-7092/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://plutus.cardano.intersectmbo.org/pr-preview/docs/pr-7092/using-plinth/cli-plutus"><link data-rh="true" rel="alternate" href="https://plutus.cardano.intersectmbo.org/pr-preview/docs/pr-7092/using-plinth/cli-plutus" hreflang="en"><link data-rh="true" rel="alternate" href="https://plutus.cardano.intersectmbo.org/pr-preview/docs/pr-7092/using-plinth/cli-plutus" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X6364ZT8L2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-X6364ZT8L2",{anonymize_ip:!0})</script><link rel="stylesheet" href="/pr-preview/docs/pr-7092/assets/css/styles.225deb0a.css">
<script src="/pr-preview/docs/pr-7092/assets/js/runtime~main.dddf2e7e.js" defer="defer"></script>
<script src="/pr-preview/docs/pr-7092/assets/js/main.25b51161.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pr-preview/docs/pr-7092/"><div class="navbar__logo"><img src="/pr-preview/docs/pr-7092/img/logo.svg" alt="Plutus Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pr-preview/docs/pr-7092/img/logo.svg" alt="Plutus Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Plutus</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/docs/pr-7092/">User guide</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item"><a href="https://github.com/IntersectMBO/plutus" class="github-link" target="_blank"></a></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/docs/pr-7092/">Plinth User Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/docs/pr-7092/category/essential-concepts">Essential concepts</a><button aria-label="Expand sidebar category &#x27;Essential concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/docs/pr-7092/category/example-an-auction-smart-contract">Example: An Auction Smart Contract</a><button aria-label="Expand sidebar category &#x27;Example: An Auction Smart Contract&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/docs/pr-7092/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/docs/pr-7092/haddock-documentation">Haddock Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/pr-preview/docs/pr-7092/category/using-plinth">Using Plinth</a><button aria-label="Collapse sidebar category &#x27;Using Plinth&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/environment-setup">Environment Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/compiling-plinth">Compiling Plinth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/lifting">Lifting Values into CompiledCode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/evaluating-plinth">Evaluating CompiledCode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/differences-from-haskell">Differences From Haskell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/extensions-flags-pragmas">GHC Extensions, Flags and Pragmas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/special-functions-and-types">Special Functions and Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/inspecting">Inspecting Compilation and Compiled Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pr-preview/docs/pr-7092/using-plinth/cli-plutus">CLI tool for Plutus</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/docs/pr-7092/category/working-with-scripts">Working with scripts</a><button aria-label="Expand sidebar category &#x27;Working with scripts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/docs/pr-7092/category/delve-deeper">Delve Deeper</a><button aria-label="Expand sidebar category &#x27;Delve Deeper&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/docs/pr-7092/category/upcoming-features">Upcoming Features</a><button aria-label="Expand sidebar category &#x27;Upcoming Features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/docs/pr-7092/troubleshooting">Troubleshooting</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/docs/pr-7092/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pr-preview/docs/pr-7092/category/using-plinth"><span itemprop="name">Using Plinth</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CLI tool for Plutus</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CLI tool for Plutus</h1></header>
<p>The <code>plutus</code> CLI tool allows you to:</p>
<ul>
<li><strong>check</strong> statically your plutus-related (PIR/TPLC/UPLC) program for common errors.</li>
<li><strong>compile</strong> (convert) between plutus-derived languages and code formats.</li>
<li><strong>optimise</strong> the code.</li>
<li><strong>run</strong> or interactively <strong>debug</strong> your program <em>locally</em> (without starting a Cardano Node).</li>
</ul>
<p>A pre-built executable of the <code>plutus</code> CLI
can be found on the <a href="https://github.com/IntersectMBO/plutus/releases/latest" target="_blank" rel="noopener noreferrer">Latest Release</a> page in the repository. Alternatively, you can build the tool
using Nix, specifically for your platform:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ nix build &quot;.#cabalProject.$(nix eval nixpkgs#stdenv.buildPlatform.system).hsPkgs.plutus-core.components.exes.plutus&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To consult the tool&#x27;s usage you can invoke <code>plutus --help</code> in your command line:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USAGE: plutus [--run|--debug] [-OLEVEL] FILES... [-o FILE]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In general, a <em>compiler tool</em> operates in a certain pattern:</p>
<blockquote>
<ol>
<li>Read (Parse or Deserialise) input program(s) of a <em>source</em> language
<br>↓<br></li>
<li>Check program(s) for certain errors
<br>↓<br></li>
<li>Compile to a lower-level <em>target</em> language
<br>↓<br></li>
<li>Optimise the compiled code (<em>optional</em>)
<br>↓<br></li>
<li>Write code to output (<em>optional</em>)</li>
</ol>
</blockquote>
<p>In case of <code>plutus</code> tool, <em>Step 1</em> is more or less straightforward:
the input programs are read from the specified <code>FILES...</code> in the CLI and/or from Standard Input (<code>--stdin</code> option).</p>
<p>After reading the input program(s), the tool continues
to run certain static <strong>checks</strong> on those programs (<em>Step 2</em>); currently there is no way to turn these static checks off.</p>
<p>In <em>Step 3</em> the tool will try to <strong>compile</strong> (convert) the higher-level source language (PIR, TPLC) of the input program to the lower-level target language (TPLC, UPLC).
In case the source and target languages are the same, this step is a &quot;no-op&quot; (has to be for UPLC, since it is the lowest-level Plutus language after all).</p>
<p><em>Step 4</em> (<strong>Optimising</strong> code) is optional and has to be manually turned on by using the option <code>-OLEVEL</code> where <em>LEVEL</em> is a number between zero and two.
<code>-O0</code> specifies that no optimisations should be run (basically same as omitting the <code>-OLEVEL</code> option). <code>-O1</code> applies safe optimisations (guarantees no change to the program&#x27;s semantics),
whereas <code>-O2</code> applies aggressive / unsafe optimisations (may alter program&#x27;s semantics).</p>
<p><em>Step 5</em> writes the resulting (compiled and/or optimised) code to given output specified with <code>-o FILE</code> or <code>--stdout</code>.
This step is optional: there is no program output when both options above are omitted. This is so that users can use the <code>plutus</code> tool as a background checker when developing a Plutus program
or if they want to continue with an extra <em>Step 6</em>:</p>
<blockquote>
<p>...
<br>↓<br>
5. Write code to output (<em>optional</em>)
<br>↓<br>
6. Run <em>OR</em> Debug code (<em>optional</em>)</p>
</blockquote>
<p>Users can pass a <code>--run</code> <em>or</em> <code>--debug</code> as an extra option to <strong>run</strong> or <strong>debug</strong> the resulting program of the compilation,
using the tool&#x27;s built-in interpreter and debugger, respectively.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optimising-uplc-with-the-cli">Optimising UPLC with the CLI<a href="#optimising-uplc-with-the-cli" class="hash-link" aria-label="Direct link to Optimising UPLC with the CLI" title="Direct link to Optimising UPLC with the CLI">​</a></h2>
<p>In this section we only focus on UPLC; a prerequisite is that you have already acquired (extracted) the UPLC code corresponding to your high-level source program.
The process to <em>extract</em> plutus code varies depending on the source language you are using (Plinth, Aiken, ...);
if Plinth is the source language, you can follow the instructions on <a href="/pr-preview/docs/pr-7092/using-plinth/inspecting#inspecting-the-compiled-code">how to inspect compiled code</a>.</p>
<p>Since UPLC is the lowest-level language, compiling (<em>Step 3</em>) is not applicable for UPLC input programs and thus omitted
— for actual compiling (converting) between different intermediate languages (PIR, TPLC) or serialisation formats (e.g. Flat, CBOR)
see the <a href="#converting">Advanced section</a> on converting between Plutus languages &amp; formats.
Instead, we can use the <code>plutus</code> tool to check for certain static errors in our UPLC, as in the example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;(program 1.1.0 (lam x (lam y z)))&#x27; &gt; const_err.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus const_err.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error from the PLC compiler:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Variable 2 is free at ()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After fixing the error:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;(program 1.1.0 (lam x (lam y x)))&#x27; | plutus --stdin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compilation succeeded, but no output file was written; use -o or --stdout.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can try to turn on some optimisations and write the resulting optimised code to standard output:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># no optimisations by default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;(program 1.1.0 (force (delay (con unit ()))))&#x27; | plutus --stdin --stdout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(program 1.1.0 (force (delay (con unit ()))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;(program 1.1.0 (force (delay (con unit ()))))&#x27; | plutus --stdin --stdout -O1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(program 1.1.0 (con unit ()))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When multiple input programs (files) are passed to the CLI, the <code>plutus</code> tool
will <strong>check</strong>, <strong>compile</strong> (not applicable for UPLC), and (optionally) <strong>optimise</strong> each program separately.
After this is done for <em>all</em> programs, the tool gathers the result of each compilation/optimisation and combines them into a single output program.
This is done by placing (interposing) an <code>Apply</code> term between the code of each compiled/optimised program, similar
to Haskell&#x27;s juxtaposition of a function and its series of applied arguments.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;(program 1.1.0 (lam x (lam y x)))&#x27; &gt; func.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;(program 1.1.0 (con string &quot;OK&quot;))&#x27; &gt; arg1.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;(program 1.1.0 (con bool True))&#x27; &gt; arg2.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus func.uplc arg1.uplc arg2.uplc --stdout -O2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(program 1.1.0 [ [ (lam x (lam y x)) (con string &quot;OK&quot;) ] (con bool True) ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the example above, even with all optimisations turned on (<code>-O2</code>), the <code>plutus</code> tool will not reduce
the obviously reducible function applications in the output program; this is because the input programs are optimised only <em>individually</em> (separately). You can
instruct the tool to perform an <strong>extra</strong> optimisation pass of the whole (combined) program
by passing <code>--whole-opt</code> to the CLI — the given <code>-OLEVEL</code> will be taken into account also for this final extra pass (<code>-O2</code> in this case).</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus func.uplc arg1.uplc arg2.uplc --stdout -O2 --whole-opt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(program 1.1.0 (con string &quot;OK&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="running">Running UPLC with the CLI<a href="#running" class="hash-link" aria-label="Direct link to Running UPLC with the CLI" title="Direct link to Running UPLC with the CLI">​</a></h2>
<p>Certain errors in <code>uplc</code> code cannot be caught by the static checks (<em>Step 2</em>)
because the UPLC language is untyped:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Pseudocode: 1 + True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;(program 1.1.0 [(builtin addInteger) (con integer 1) (con bool True)])&quot; &gt; typ_err.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus typ_err.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compilation succeeded, but no output file was written; use -o or --stdout.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Alternatively we can try to run the program using the tool&#x27;s built-in <em>interpreter</em> and look for any runtime (type) errors.
The <code>--run</code> option will invoke the interpreter passing to it the final output program.
An execution that raised an error will show information about the error and in which term
the error happened:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus typ_err.uplc --run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running the program: An error has occurred:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Could not unlift a value:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type mismatch: expected: integer; actual: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caused by: addInteger 1 True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Other times catching such (type) errors at runtime is not even possible. Consider the following
example program which contains a type error but the execution nevertheless succeeds with the final
evaluated result (term):</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Pseudocode: if True then &quot;&quot; else unit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;(program 1.1.0 [(force (builtin ifThenElse)) (con bool True) (con string &quot;&quot;) (con unit ())])&#x27; &gt; if.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus if.uplc --run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running the program: Execution succeeded, final term:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(con string &quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Used budget: ExBudget {exBudgetCPU = ExCPU 204149, exBudgetMemory = ExMemory 901}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>📌<!-- --> <strong>NOTE</strong>
The above example demonstrates that <code>uplc</code> — the language which actually <em>runs on the chain</em> —
is low-level and more akin to assembly. Users that are concerned about the safety of their smart contracts
are advised instead to develop in a higher-level (typed) language (e.g. Plinth) which compiles down to <code>uplc</code>.</p>
</blockquote>
<p>After plutus program&#x27;s execution is completed (either succeeded or failed), the final used budget will be printed as well.
Because the CLI tool employs the same <code>uplc</code> interpreter as the one that the Cardano node runs, you can be sure
that the program&#x27;s execution result&amp;budget match <em>precisely</em> — assuming same program
and cost model — the result&amp;budget computed by the chain.</p>
<p>You can pass a maximum <em>CPU</em> and/or <em>Memory</em> budget that is allowed to be spent with the <code>--budget=CPU</code> or <code>-budget=,MEM</code> or <code>--budget=CPU,MEM</code> options; if given budget runs out, the execution will fail and stop earlier.
If there is no CPU and/or MEM limit given, the budget is practically unlimited.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus if.uplc --run --budget=204148,903</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running the program: An error has occurred:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The machine terminated part way through evaluation due to overspending the budget.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The budget when the machine terminated was:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">({cpu: -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| mem: 2})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Negative numbers indicate the overspent budget; note that this only indicates the budget that was needed for the next step, not to run the program to completion.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus if.uplc --run --budget=,903</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running the program: Execution succeeded, final term:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(con string &quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Remaining budget: ExBudget {exBudgetCPU = ExCPU 9223372036854571658, exBudgetMemory = ExMemory 2}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Used budget: ExBudget {exBudgetCPU = ExCPU 204149, exBudgetMemory = ExMemory 901}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>📌<!-- --> <strong>NOTE</strong>
Attempting to run a <code>tplc</code> target will use the <code>tplc</code> interpreter. Although
the <code>tplc</code> interpreter behaves the same as the default <code>uplc</code> interpreter (for <em>type correct</em> programs),
it comes with caveats: cannot execute <code>uplc</code> code,
cannot have budget accounting and budget limits, runs way slower and your program must be fully type correct.
The last point is not necessarily a caveat, but it diverges from the on-chain behavior:
the <code>tplc</code> interpreter accepts less programs than the chain (and the default <code>uplc</code> interpreter) would accept.
PIR target programs cannot be directly executed.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="debugging">Debugging UPLC with the CLI <em>(Experimental)</em><a href="#debugging" class="hash-link" aria-label="Direct link to debugging" title="Direct link to debugging">​</a></h2>
<blockquote>
<p>📌<!-- --> <strong>NOTE</strong>
The debugger is in a <em>preliminary</em> , <em>experimental</em> state. What is described below is
subject to change when new features are added to the debugger.</p>
</blockquote>
<p>Another way to check for runtime errors or the execution budget
is by firing up the tool&#x27;s built-in debugger. Again, the debugger utilises underneath the same UPLC interpreter
as the one the Cardano node runs, so you can be sure about its execution results and budget costs.
The difference compared to &quot;running the code&quot; is that with the debugger you can step by step progress over the execution
over your UPLC program&#x27;s sub-terms, or interactively decide to pause the execution on specific UPLC sub-term(s) of interest.</p>
<blockquote>
<p>📌<!-- --> <strong>NOTE</strong>
Unlike the <code>--run</code> option that can execute both UPLC <em>and</em> TPLC target programs, the <code>--debug</code> option works <em>exclusively</em> for UPLC targets.</p>
</blockquote>
<p>The <code>--debug</code> option will launch the debugger after
the prior checking/compilation/optimisation steps of your input program(s) have been completed, for example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus if.uplc -O1 --debug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The debugger has a Terminal User Interface (TUI) with three windows that are kept automatically updated: (1)
the compiled/optimised target UPLC program, (2) the log/trace messages, and (3) the (current) return value.</p>
<p><img decoding="async" loading="lazy" alt="TUI Debugger Screenshot" src="/pr-preview/docs/pr-7092/assets/images/tui_debugger_screenshot-71770559a1078f4b08eb5935dcb5c2f6.png" width="1906" height="1014" class="img_ev3q"></p>
<p>You can interact (issue <strong>Commands</strong>) to the debugger by pressing keyboard shortcuts:</p>
<table><thead><tr><th>Keyboard Shortcut</th><th>Command</th></tr></thead><tbody><tr><td>?</td><td>Show help dialog</td></tr><tr><td>Esc</td><td>Quit help dialog or debugger</td></tr><tr><td>Ctrl+up/down/left/right</td><td>Resize window</td></tr><tr><td>Tab</td><td>Switch focus to other window</td></tr><tr><td>s</td><td>Step once the interpreter</td></tr></tbody></table>
<p>Unlike the <code>--run</code> option, the <code>step</code> command does not execute the program
to completion. Instead, the underlying <code>uplc</code> interpreter is moved one &quot;budgeting&quot; step forward —
the smallest step possible that gets accounted for and subtracted from the current budget.</p>
<p>After every such <code>step</code>, the debugger
highlights in window (1) the code region (sub-term) which will be executed in the future (next <code>step</code>);
A footer in the TUI screen will update to show the remaining budget.
You can combine <code>--debug</code> with the <code>--budget=CPU,MEM</code> option to limit the starting total budget:
the debugger fails the execution the moment the budget runs out, similar as to what happens with <code>--run</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="converting">Advanced: Converting between languages &amp; formats<a href="#converting" class="hash-link" aria-label="Direct link to Advanced: Converting between languages &amp; formats" title="Direct link to Advanced: Converting between languages &amp; formats">​</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus IN_FILES... -o OUT_FILE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The filename extensions of the input files and output file
determine the language and format of the <em>sources</em> and <em>target</em>, respectively.
You can take a look at the <a href="#extensions">Table of Filename Extensions</a> recognised by the <code>plutus</code> tool.
Alternatively, you can <a href="#override">manually set</a> (or override) the language&amp;format.</p>
<p>You are allowed to mix and match different input <em>sources</em> as long
as that make sense: the <em>target</em> must be a lower- or equal-level language to the sources.
All sources will be then compiled and combined to the given target, for example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus func.pir arg1.tplc arg2.uplc -o fully_applied.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus func.pir arg1.tplc -o partially_applied.tplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus partially_applied.tplc arg2.uplc -o also_fully_applied.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus arg2.uplc -o arg2.tplc # does not make sense, cannot lift to a higher level language</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus -O2 func.pir -o func_optimised.pir # makes sense for check / optimise</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is worth to re-iterate that the input files are checked/compiled/optimised <strong>separately</strong>;
this means that although the input programs are <em>individually</em> type correct, when <em>combined</em> to a specific target
they may become type incorrect:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;(program 1.1.0 (lam x (con integer) [(builtin addInteger) x (con integer 1)]))&quot; &gt; inc.pir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;(program 1.1.0 (con bool True))&quot; &gt; true.pir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus inc.pir true.pir -o applied.uplc # NO TYPE ERROR because target is untyped (UPLC)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo applied.uplc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ (lam i [ [ (builtin addInteger) (con integer 1) ] i ]) (con bool True) ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus inc.pir true.pir -o applied.pir # TYPE ERROR because PIR target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus inc.pir true.pir -o applied.tplc # TYPE ERROR because TPLC target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extensions">Filename Extensions<a href="#extensions" class="hash-link" aria-label="Direct link to Filename Extensions" title="Direct link to Filename Extensions">​</a></h3>
<p>The following table lists the recognized extensions.</p>
<table><thead><tr><th>Filename Extension</th><th>Format Type</th><th>Description</th></tr></thead><tbody><tr><td>*<em>NO-EXTENSION*</em></td><td>Textual</td><td>Untyped Plutus Core with Names</td></tr><tr><td>.uplc</td><td>Textual</td><td>Untyped Plutus Core with Names</td></tr><tr><td>.tplc</td><td>Textual</td><td>Typed Plutus Core with Names</td></tr><tr><td>.pir</td><td>Textual</td><td>PIR with Names</td></tr><tr><td>.data</td><td>Binary</td><td>Values of <code>Data</code> serialised in CBOR</td></tr><tr><td>.data-txt</td><td>Textual</td><td>Values of <code>Data</code> in Haskell&#x27;s <code>Show</code> format</td></tr><tr><td>.uplc-flat</td><td>Binary</td><td>Untyped PlutusCore with NamedDeBruijn serialised in Flat</td></tr><tr><td>.uplc-cbor</td><td>Binary</td><td>Untyped PlutusCore with DeBruijn serialised in CBOR <br> (the on-chain format)</td></tr></tbody></table>
<blockquote>
<p>📌<!-- --> <strong>NOTE</strong> If file has no extension or in case of <code>--stdin</code> / <code>--stdout</code>, the extension is assumed to be <code>.uplc</code></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="override">Manually set language&amp;format<a href="#override" class="hash-link" aria-label="Direct link to Manually set language&amp;format" title="Direct link to Manually set language&amp;format">​</a></h3>
<p>If the extension cannot be determined (missing / <code>--stdin</code> / <code>--stdout</code>)
or you would like to override the recognised extension,
you may use the <code>-x .EXTENSION</code> option (with or without the leading dot <code>.</code> taken from <a href="#extensions">Table</a> above) to manually set the
extension for the given file(s):</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus file1 -x pir file2 file3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note <code>-x</code> is positional: it applies its effect to all files after the option till the end or another <code>-x</code> is reached.
In the example above the effect (set to <code>pir</code>)  will not apply to <code>file1</code>, but will apply to <code>file2</code>, <code>file3</code> <strong>and</strong> target.
Possible filename extensions on <code>file2</code> and <code>file3</code> will be ignored. Using multiple invocations of <code>-x</code> may come handy
for mixing different sources or setting the output target. The next example sets the first two files
to be <code>pir</code>, the following two to <code>tplc</code>, and the target (the last invocation of <code>-x</code>) to <code>uplc</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus -x pir Pir_File Also_Pir -x tplc Now_Tplc Also_Tplc -x uplc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In case <code>-x</code> is not enough and the <em>format</em> is more complex because it contains a non-default variable-naming scheme or annotations,
you may extra specify the <code>-n NAMING</code> and <code>-a ANNOTATION</code> options to override the defaults.</p>
<table><thead><tr><th>-n Short Option</th><th>-n Long Option</th><th>Description</th></tr></thead><tbody><tr><td>-n n</td><td>-n name</td><td>Use descriptive textual names for variables</td></tr><tr><td>-n d</td><td>-n debruijn</td><td>Use debruijn indices for variables</td></tr><tr><td>-n nd</td><td>-n named-debruijn</td><td>Use name with debruijn index for variables: &quot;name-index&quot;</td></tr></tbody></table>
<table><thead><tr><th>-a Option</th><th>Description</th></tr></thead><tbody><tr><td>-a unit</td><td>Code does not contain any annotations (default)</td></tr><tr><td>-a srcspan</td><td>Code is annotated with source spans</td></tr></tbody></table>
<p>The <code>-n</code> and <code>-a</code> options are also positional.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pretty-printing-output">Pretty-printing output<a href="#pretty-printing-output" class="hash-link" aria-label="Direct link to Pretty-printing output" title="Direct link to Pretty-printing output">​</a></h3>
<p>If the output&#x27;s format type is <em>textual</em> (see the <a href="#extensions">Filename Extensions Table</a>) the compiled code
will be printed to the designated output (file or stdout) in a &quot;pretty&quot; format.
You can change how the output&#x27;s looks by specifying a different <code>-p STYLE</code> style (defaults to <code>classic</code>).</p>
<table><thead><tr><th>-p Option</th><th>Description</th></tr></thead><tbody><tr><td>-p classic</td><td>Lisp-like syntax with unique variable names  (default)</td></tr><tr><td>-p classic-simple</td><td>Lisp-like syntax with ambiguous (no unique) variable names</td></tr><tr><td>-p readable</td><td>Succinct syntax with unique variable names</td></tr><tr><td>-p readable-simple</td><td>Succinct syntax with ambiguous (no unique) variable names</td></tr></tbody></table>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus inc.pir -x pir --stdout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1.1.0 (lam x-0 (con integer) [ [ (builtin addInteger) x-0 ] (con integer 1) ])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ plutus inc.pir -x pir --stdout --pretty=readable-simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">program 1.1.0 (\(x : integer) -&gt; addInteger x 1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>📌<!-- --> <strong>NOTE</strong> Specifying a textual <em>output</em> with pretty style other than the default (classic) may not be possible to be read
back again (as textual <em>input</em> this time) in the CLI.</p>
</blockquote>
<p>Using the standard output to capture the (pretty-printed) output program is safe,
because the tool&#x27;s logs and error messages are sent by default to <code>stderr</code>.
You can of course silence those messages using <code>--quiet</code> option, or instead
increase their rate using <code>--verbose</code> (for tracing through the compilation process).</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/IntersectMBO/plutus/edit/master/doc/docusaurus/docs/using-plinth/cli-plutus.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/docs/pr-7092/using-plinth/inspecting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Inspecting Compilation and Compiled Code</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/docs/pr-7092/category/working-with-scripts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Working with scripts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#optimising-uplc-with-the-cli" class="table-of-contents__link toc-highlight">Optimising UPLC with the CLI</a></li><li><a href="#running" class="table-of-contents__link toc-highlight">Running UPLC with the CLI</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging UPLC with the CLI <em>(Experimental)</em></a></li><li><a href="#converting" class="table-of-contents__link toc-highlight">Advanced: Converting between languages &amp; formats</a><ul><li><a href="#extensions" class="table-of-contents__link toc-highlight">Filename Extensions</a></li><li><a href="#override" class="table-of-contents__link toc-highlight">Manually set language&amp;format</a></li><li><a href="#pretty-printing-output" class="table-of-contents__link toc-highlight">Pretty-printing output</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="footer-container"><div class="footer-left"><img class="footer-logo" src="/pr-preview/docs/pr-7092/img/logo-footer.svg" alt="Plutus"><span>Copyright ©<!-- -->2025<!-- --> IOHK. Built with Docusaurus.</span></div><div class="footer-right"><a href="/pr-preview/docs/pr-7092/">User Guide</a><a href="https://github.com/IntersectMBO/plutus" class="github-link" target="_blank"></a></div></div></footer></div>
</body>
</html>