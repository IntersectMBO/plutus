<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><link rel="stylesheet" type="text/css" href="style.css"
     /><script type="text/javascript" src="highlight.js"
    ></script
    ></head
  ><body
  ><pre
    ><span class="hs-comment"
      >-- editorconfig-checker-disable-file</span
      ><span
      >
</span
      ><span id="line-2"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE DeriveAnyClass #-}</span
      ><span
      >
</span
      ><span id="line-3"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE OverloadedStrings #-}</span
      ><span
      >
</span
      ><span id="line-4"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE Rank2Types #-}</span
      ><span
      >
</span
      ><span id="line-5"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TupleSections #-}</span
      ><span
      >
</span
      ><span id="line-6"
      ></span
      ><span
      >
</span
      ><span id="line-7"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | This module defines Haskell data types that simplify construction of PLC types and terms.</span
	></span
      ><span
      >
</span
      ><span id="line-8"
      ></span
      ><span class="hs-keyword"
      >module</span
      ><span
      > </span
      ><span class="hs-identifier"
      >PlutusCore.StdLib.Type</span
      ><span
      >
</span
      ><span id="line-9"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	><span class="hs-identifier"
	  >RecursiveType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-10"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType"
	><span class="hs-identifier"
	  >makeRecursiveType</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-11"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-12"
      ></span
      ><span
      >
</span
      ><span id="line-13"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusPrelude.html"
	><span class="hs-identifier"
	  >PlutusPrelude</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-14"
      ></span
      ><span
      >
</span
      ><span id="line-15"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Core.html"
	><span class="hs-identifier"
	  >PlutusCore.Core</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-16"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.MkPlc.html"
	><span class="hs-identifier"
	  >PlutusCore.MkPlc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-17"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html"
	><span class="hs-identifier"
	  >PlutusCore.Name.Unique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-18"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Pretty.html"
	><span class="hs-identifier"
	  >PlutusCore.Pretty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-19"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Quote.html"
	><span class="hs-identifier"
	  >PlutusCore.Quote</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-20"
      ></span
      ><span
      >
</span
      ><span id="line-21"
      ></span
      ><span class="hs-comment"
      >{- Note [Arity of patterns functors]
The arity of a pattern functor is the number of arguments the pattern functor receives in addition
to the first argument representing the recursive case. So
@f :: * -&gt; *@                           has arity 0
@f :: (k -&gt; *) -&gt; k -&gt; *@               has arity 1
@f :: (k1 -&gt; k2 -&gt; *) -&gt; k1 -&gt; k2 -&gt; *@ has arity 2
etc
-}</span
      ><span
      >
</span
      ><span id="line-29"
      ></span
      ><span
      >
</span
      ><span id="line-30"
      ></span
      ><span class="hs-comment"
      >{- Note [InterList]
This data type is much like the 'list' data type, but it receives two types arguments rather than one
and &quot;interleaves&quot; them (see 'example_InterList').

    data InterList a b
        = InterNil
        | InterCons a b (InterList b a)

    example_InterList :: InterList Char Int
    example_InterList = InterCons 'a' 1 . InterCons 2 'b' . InterCons 'c' 3 $ InterNil

The data type is interesting, because we need some way of getting

    fix2 :: ((k1 -&gt; k2 -&gt; *) -&gt; k1 -&gt; k2 -&gt; *) -&gt; k1 -&gt; k2 -&gt; *

in order to encode it directly, so we use this data type in examples in order to show admissibility
of 'fix2' which is an instance of the more generic

    fix :: (k -&gt; k) -&gt; k

I.e. we show how the more generic 'fix' can be encoded for any particular 'k' by taking
@k ~ (k1 -&gt; k2 -&gt; *)@ as example and constructing 'fix2'.
-}</span
      ><span
      >
</span
      ><span id="line-53"
      ></span
      ><span
      >
</span
      ><span id="line-54"
      ></span
      ><span class="hs-comment"
      >{- Note [Natural representation]
Having @fix :: (* -&gt; *) -&gt; *@ we can easily define the @list@ data type as a fixed point of
an appropriate pattern functor:

    listF = \(a :: *) (list :: *) -&gt; all (r :: *). r -&gt; (a -&gt; list -&gt; r) -&gt; r
    list  = \(a :: *) -&gt; fix (listF a) a

There are a few problems with this definition however:

1. In @listF@ there is no indication that @list@ is supposed to contain elements of type @a@.
So @listF@ binds both @a@ and @list@, but does not specify there is a relation between these two
things. The burden of connecting @a@ and @list@ together is on the caller, which is not a big deal,
because the only callers are @fix@, in terms of which the data type is defined, and @wrap@ that
allows to define the constructors of the data type, but still, this way the code looks strangely
structured.

2. Related to 1: such encoding diverges from what one would write having a data construction
machinery. A standard Haskell definition would be

    data List a
        = Nil
        | Cons a (List a)

In this definition we explicitly apply @List@ to @a@ in the @Cons@ case. Thus, the encoding looks
somewhat unnatural.

3. @wrap@ constructing a @list@ must carry @listF a@ in the same way @fix@ carries it. This makes
it very hard to construct terms using the AST directly as shown in
@plutus/plutus-core/docs/Holed types.md@.

4. There are data types that can't be defined this way. See Note [InterList] for one example.

There is however an approach that allows to encode data types in a &quot;natural&quot; way, does not cause
any trouble while constructing data types and can handle much more data types than what is shown
above. Here is how the @list@ example looks like with it:

    listF = \(list :: * -&gt; *) (a :: *) -&gt; all (r :: *). r -&gt; (a -&gt; list a -&gt; r) -&gt; r
    list  = \(a :: *) -&gt; fix listF a

I.e. instead of tying the knot over @list :: *@ we tie the knot over @list :: * -&gt; *@. This simple
trick solves all the problems described avove.

But the code is actually ill-kinded. The reason for this is that @fix :: (* -&gt; *) -&gt; *@ is no longer
enough, because we're taking a fixed point of a pattern functor of kind @(* -&gt; *) -&gt; * -&gt; *@
rather than just @* -&gt; *@. Hence we need a more permissive fixed-point operator.

Read next: Note [The kind of fix].
-}</span
      ><span
      >
</span
      ><span id="line-102"
      ></span
      ><span
      >
</span
      ><span id="line-103"
      ></span
      ><span class="hs-comment"
      >{- Note [The kind of fix]
In Note [Natural representation] we concluded that @fix :: (* -&gt; *) -&gt; *@ is not enough to encode
@list@ in a satisfying way. In that particular case it would be enough to have

    fix :: ((* -&gt; *) -&gt; * -&gt; *) -&gt; * -&gt; *

but what about other cases? The example from Note [InterList] requires

    fix :: ((* -&gt; * -&gt; *) -&gt; * -&gt; * -&gt; *) -&gt; * -&gt; * -&gt; *

and of course we still need

    fix :: (* -&gt; *) -&gt; *

occasionally. This suggests to change the kind signature of @fix@ to

    fix :: (k -&gt; k) -&gt; k

which covers all those cases. However, it's not clear how to implement such @fix@.
See @docs/fomega/deep-isorecursive/README.md@ for details.

But it turns out that

    ifix :: ((k -&gt; *) -&gt; k -&gt; *) -&gt; k -&gt; *

is enough for all cases.

Read next: Note [Packing n-ary pattern functors semantically].
-}</span
      ><span
      >
</span
      ><span id="line-132"
      ></span
      ><span
      >
</span
      ><span id="line-133"
      ></span
      ><span class="hs-comment"
      >{- Note [Packing n-ary pattern functors semantically]
An n-ary pattern functor has the following generic signature:

    patN :: k -&gt; k

where @k@ is of the @k1 -&gt; k2 -&gt; ... -&gt; *@ form. We need to encode 'patN' as an equivalent 1-ary
pattern functor with this signature:

    pat1 :: ((k' -&gt; *) -&gt; k' -&gt; *

because that's what 'ifix' accepts.

@plutus/docs/fomega/mutual-type-level-recursion/IFixIsEnough.agda@ describes the encoding trick
at great detail, but let's look at an example here. The pattern functor of 'InterList'
(see Note [InterList]) is defined as

    interlistF =
        \(interlist :: * -&gt; * -&gt; *) (a :: *) (b :: *) -&gt;
            all (r :: *). r -&gt; (a -&gt; b -&gt; interlist b a -&gt; r) -&gt; r

We can't pass the pattern functor to 'ifix', because it's of kind

    ((* -&gt; * -&gt; *) -&gt; * -&gt; * -&gt; *) -&gt; * -&gt; * -&gt; *

So we're going to &quot;pack&quot; the pattern functor to make it a 1-ary one. The idea is simple:
instead of passing two arguments to the recursive case, we pass a single continuation that applies
a function it receives to those two arguments. Morever, we can define the packed version of
'interlistF' in terms of 'interlistF' itself. It looks like this:

    withSpine =
        \(rec :: ((* -&gt; * -&gt; *) -&gt; *) -&gt; *) -&gt;
            \(a :: *) (b :: *) -&gt; rec (\(interlist :: * -&gt; * -&gt; *) -&gt; interlist a b)

    interlistF' =
        \(rec :: ((* -&gt; * -&gt; *) -&gt; *) -&gt; *) (spine :: (* -&gt; * -&gt; *) -&gt; *) -&gt;
            spine (\(a :: *) (b :: *) -&gt; interlistF (withSpine rec) a b)

Here 'spine' encapsulates 'a' and 'b' as arguments passed to a function 'spine' receives.
This even can be guessed from its signature:

    spine :: (* -&gt; * -&gt; *) -&gt; *

which can be read as &quot;give me a function of two arguments and I'll provide those arguments and
return the result&quot;.

'withSpine' on the other hand receives

1. a function that expects a CPS-transformed spine
2. two arguments, 'a' and 'b', which together form a spine that is not CPS-trasformed

and then 'withSpine' applies said function to the spine by CPSing it first.

So nothing interesting happens here: we just pack/unpack spines using continuations.

If we eta-contract @interlistF'@, we'll get

    interlistF' =
        \(rec :: ((* -&gt; * -&gt; *) -&gt; *) -&gt; *) (spine :: (* -&gt; * -&gt; *) -&gt; *) -&gt;
            spine (interlistF (withSpine rec))

And this can be generalized to arbitrary n-ary pattern functors:

    toPat1 =
        \(withSpine :: ((k -&gt; *) -&gt; *) -&gt; k) (patN :: k -&gt; k) -&gt;
            \(rec :: (k -&gt; *) -&gt; *) (spine :: k -&gt; *) -&gt;
                spine (pat (withSpine rec))

which reads like this: having 'withSpine' constructed for a particular 'k' and an n-ary pattern
functor of kind @k -&gt; k@ we can get a 1-ary pattern functor of kind

    ((k -&gt; *) -&gt; *) -&gt; (k -&gt; *) -&gt; *

We derive various 'withSpine's automatically on the Haskell side from 'k' itself.

Read next: Note [Generic fix].
-}</span
      ><span
      >
</span
      ><span id="line-209"
      ></span
      ><span
      >
</span
      ><span id="line-210"
      ></span
      ><span class="hs-comment"
      >{- Note [Generic fix]
Now that we know how to pack n-ary functors into 1-ary ones
(see [Packing n-ary pattern functors semantically]), only a few tiny steps remain to get the generic

    fix :: (k -&gt; k) -&gt; k

from just

    ifix :: ((i -&gt; *) -&gt; i -&gt; *) -&gt; i -&gt; *

Having @pat :: k -&gt; k@ we can pack it as

    toPat1 withSpine patN :: ((k -&gt; *) -&gt; *) -&gt; (k -&gt; *) -&gt; *

(where 'withSpine' is constructed automatically from 'k' on the Haskell side) and we can apply
'ifix' to this 1-ary pattern functor and get

    ifix (toPat1 withSpine patN) :: (k -&gt; *) -&gt; *

It only remains to turn something of kind @(k -&gt; *) -&gt; *@ into something of kind @*@, i.e. to define
a type function of kind @((k -&gt; *) -&gt; *) -&gt; k@. But we already have such a function: 'withSpine',
so the final encoding is

    fix = \(patN :: k -&gt; k) -&gt; withSpine (ifix (toPat1 withSpine patN))

The meaning of 'withSpine' here is the same as we've seen before: we use it to pack @n@ type
arguments as a single CPS-encoded spine and pass it to some function.

Summarizing, 'fix' receives an n-ary pattern functor and @n@ type arguments, the pattern functor
gets packed as a 1-ary one, the type arguments get packed into a single CPS-encoded spine and
'ifix' gets applied to the 1-ary pattern functor and the spine.

Read next: Note [Encoded InterList].
-}</span
      ><span
      >
</span
      ><span id="line-244"
      ></span
      ><span
      >
</span
      ><span id="line-245"
      ></span
      ><span class="hs-comment"
      >{- Note [Encoded InterList]
Let's now look at an example.

Recall that the pattern functor of 'interlist' is

    interlistF =
        \(interlist :: * -&gt; * -&gt; *) (a :: *) (b :: *) -&gt;
            all (r :: *). r -&gt; (a -&gt; b -&gt; interlist b a -&gt; r) -&gt; r

We can apply generic 'fix' (see Note [Generic fix]) to this pattern functor directly:

    fix interlistF :: * -&gt; *

which after eta-expansion and some reductions becomes

    \(a :: *) -&gt; withSpine (ifix (toPat1 withSpine interlistF)) a

(as per Note [Generic fix]) which after some more reductions becomes

    -- Two type arguments that the data type receives and the 'ifix' primitive.
    \(a :: *) (b -&gt; *) -&gt; ifix
        -- The variable responsible for recursion and the variable representing a CPS-encoded spine
        -- of two elements. Note that the kind of the argument that the variable responsible for
        -- recursion receives is the same as the kind of 'spine', i.e. we always instantiate
        -- recursion at some spine.
        (\(rec :: ((* -&gt; * -&gt; *) -&gt; *) -&gt; *) -&gt; \(spine :: (* -&gt; * -&gt; *) -&gt; *) -&gt;
            -- 'spine' unpacks a CPS-encoded spine and passes all its elements to a continuation.
            spine
              -- The 'interlistF' pattern functor given above applied to a function that receives
              -- two type arguments, packs them as a CPS-encoded spine and passes the spine to the
              -- variable responsible for recursion.
              (interlistF (\(a :: *) (b :: *) -&gt; rec (\(dat :: * -&gt; * -&gt; *) -&gt; dat a b)))
        )
        -- The two type arguments packed as a CPS-encoded spine.
        (\(dat :: * -&gt; * -&gt; *) -&gt; dat a b)

We've elaborated the encoding on example, but there is a problem to consider here.
Read next: Note [Denormalization]
-}</span
      ><span
      >
</span
      ><span id="line-284"
      ></span
      ><span
      >
</span
      ><span id="line-285"
      ></span
      ><span class="hs-comment"
      >{- Note [Denormalization]
Originally, we were binding 'withSpine' and 'patN' (taken from the end of Note
[Packing n-ary pattern functors semantically]) on the Plutus Core side and this
resulted in huge unreadable types being produced. Now we bind 'withSpine',
'patN' and what 'withSpine' receives on the Haskell side, i.e. we use Haskell
lambdas to bind variables and regular function application to eliminate those
lambdas which allows us to defer type reduction business to Haskell.  Here is
how the definition of 'list' looks like:

    \(a :: *) -&gt; ifix
        (\(rec :: ((* -&gt; *) -&gt; *) -&gt; *) -&gt; \(spine :: (* -&gt; *) -&gt; *) -&gt;
            spine (listF (\(a :: *) -&gt; rec (\(dat :: * -&gt; *) -&gt; dat a)))
        )
        (\(dat :: * -&gt; *) -&gt; dat a)

This is pretty readable (once you know how to read it, see Note [Encoded InterList] for a similar
example) and doesn't contain any 'withSpine' or 'patN' variables, but if we inline 'listF', we'll get

    (\(list :: * -&gt; *) -&gt; \(a :: *) -&gt; all (r :: *). r -&gt; (a -&gt; list a -&gt; r) -&gt; r)
    (\(a :: *) -&gt; rec (\(dat :: * -&gt; *) -&gt; dat a))

which is an applied lambda abstraction. This essentially means that in the pattern functor of 'list'

    \(a :: *) -&gt; all (r :: *). r -&gt; (a -&gt; list a -&gt; r) -&gt; r

'list' is defined as

    \(a :: *) -&gt; rec (\(dat :: * -&gt; *) -&gt; dat a)

This all is fine, that's how our encoding trick works, but note that we produced a type that is not
in normal form. This is a bit worrying: the user writes something that looks like it's normalized,
but in the end types are not normalized due to how the encoding works. In Plutus Core we have two
modes for type checking:

1. off-chain, type normalization is allowed
2. on-chain, type normalization is not allowed and types must already be normalized

Thus, we do care about whether types are normalized or not. In the compilation pipeline we just
explicitly normalize types whenever normalized types are required, but since this module belongs
to a library it better be general and not rely on particular details of downstream code.

Preserving properties of user-written code is generally a good idea while transforming it,
so we also do not want to remove redexes from user-written code and thus we can't just normalize
everything in sight to overcome the denormalization problem.

Then the question is whether it's possible to preserve redexes in user-written types and not to
produce new ones while encoding the types. And the answer is &quot;yes, but it's too costly&quot;.

But read Note [Spiney API] first.
-}</span
      ><span
      >
</span
      ><span id="line-335"
      ></span
      ><span
      >
</span
      ><span id="line-336"
      ></span
      ><span class="hs-comment"
      >{- Note [Spiney API]
Encoding of n-ary pattern functors into 1-ary pattern functors is hidden behind an API that pretends
our types are in head-spine form. See @plutus/docs/fomega/deep-isorecursive/alternatives.md@ for
details and discussion about the head-spine form approach.

The reasons for providing such API are

1. it's simple
2. it hides all the gory details in such a way that we can change the representation of types and
not change the API. For example, we can encode pattern functors in different ways (and we, in fact,
do this) or we even can have the head-spine form in the AST and that wouldn't affect the API

We could have an API like this: the user provides an n-ary pattern functor and we manipulate the AST
directly which may or may not involve deconstruction of the AST depending on how we perform encoding.
However the user might provide something that is not a pattern functor, but computes to a pattern
functor and everything becomes more complicated. Instead, we require that the user provides the name
of the data type being defined, a list of type variables (the ones that the pattern functor binds)
along with their kinds and the body of the pattern functor separately. Having this information is
enought to perform whatever encoding we want. Here is how it looks on the 'interlist' example:

the n-ary pattern functor of 'interlist' is

    \(interlist :: * -&gt; * -&gt; *) (a :: *) (b :: *) -&gt;
        all (r :: *). r -&gt; (a -&gt; b -&gt; interlist b a -&gt; r) -&gt; r

and we require the user (where &quot;the user&quot; means someone generating Plutus Core or writing it directly,
i.e. either someone writing a compiler to Plutus Core or one of the creators of the language) to split
this type into three components

1. &quot;interlist&quot;         -- the name of the data type
2. @[a :: *, b :: *]@  -- other type variables the pattern functors binds along with their kinds
3. @all (r :: *). r -&gt; (a -&gt; b -&gt; interlist b a -&gt; r) -&gt; r@  -- the body of the pattern functor

and pass them to the 'makeRecursiveType' function (which also receives an annotation as its first
argument just so that we have something to place in the AST when needed). Note that we do not require
to provide the kind of 'interlist', because we can compute it from the kinds of other type variables.

The code constructing the data type itself:

    -- Introduce names in scope.
    [a, b, interlist, r] &lt;- traverse freshTyName [&quot;a&quot;, &quot;b&quot;, &quot;interlist&quot;, &quot;r&quot;]

    -- Define some aliases.
    let interlistBA = mkIterTyAppNoAnn (TyVar () interlist) [TyVar () b, TyVar () a]
        nilElimTy   = TyVar () r
        consElimTy  = mkIterTyFun () [TyVar () a, TyVar () b, interlistBA] $ TyVar () r)

    -- Construct the actual data type.
    makeRecursiveType () interlist [TyVarDecl () a $ Type (), TyVarDecl () b $ Type ()]
        . TyForall () r (Type ())  -- all (r :: *).
        . TyFun () nilElimTy       --     r -&gt;
        . TyFun () consElimTy      --         (a -&gt; b -&gt; interlist b a -&gt; r) -&gt;
        $ TyVar () r               --             r

So for the user the interface this module provides is rather simple considering how much stuff is
hidden behind it.

Read next: Note [Packing n-ary pattern functors syntactically]
-}</span
      ><span
      >
</span
      ><span id="line-395"
      ></span
      ><span
      >
</span
      ><span id="line-396"
      ></span
      ><span class="hs-comment"
      >{- Note [Packing n-ary pattern functors syntactically]
Now that we know how the API looks like (see Note [Spiney API]), we can discuss a solution to
the denormalization problem (see Note [Denormalization]).

Recall (or see Note [Packing n-ary pattern functors semantically]) that if we pack the pattern
functor of 'list'

    listF = \(list :: * -&gt; *) (a :: *) -&gt; all (r :: *). r -&gt; (a -&gt; list a -&gt; r) -&gt; r

semantically and normalize the result, we'll get

    semListF =
        \(rec :: ((* -&gt; *) -&gt; *) -&gt; *) -&gt; \(spine :: (* -&gt; *) -&gt; *) -&gt;
            spine (\(a :: *) -&gt; all (r :: *). r -&gt; (a -&gt; rec (\(dat :: * -&gt; *) -&gt; dat a) -&gt; r) -&gt; r)

The question is how to get the same without full-scale normalization.

In this particular case it's easy: since we receive the body of 'listF' separately from the variables
the leading lambdas bind, we can simply enclose the body of 'listF' like this:

    \(rec :: ((* -&gt; *) -&gt; *) -&gt; *) -&gt; \(spine :: (* -&gt; *) -&gt; *) -&gt;
                spine (\(a :: *) -&gt; &lt;body_of_listF&gt;)

and replace each occurrence of @list a@ by

    rec (\(dat :: * -&gt; *) -&gt; dat a)

and that's all.

The slightly tricky part is how exactly we perform the replacement: we need to traverse each sequence
of consecutive function applications in the pattern functor, remember all encountered arguments and
if the head of consecutive applications is 'list' then rename it to 'dat' (and freshen the unique of
the variable, because it's easy and it's nice not to break the global uniqueness condition, but this
is not too important), apply 'dat' to all the remembered arguments and enclose the result by

    rec (\(dat :: * -&gt; *) -&gt; _)

But that doesn't work in the general case. The user might write

    app = \(f :: * -&gt; *) (a :: *) -&gt; f a
    listF = \(list :: * -&gt; *) (a :: *) -&gt; all (r :: *). r -&gt; (a -&gt; app list a -&gt; r) -&gt; r

i.e. a type containing a non-saturated 'list' and the outlined algorithm can't handle this case,
because it always just restores all the arguments in a sequence of applications (which we have none
in this example) while we need to generate the following:

    semAppListF =
        \(rec :: ((* -&gt; *) -&gt; *) -&gt; *) -&gt; \(spine :: (* -&gt; *) -&gt; *) -&gt;
            let list = \(a :: *) -&gt; rec (\(dat :: * -&gt; *) -&gt; dat a)
                in spine (\(a :: *) -&gt; all (r :: *). r -&gt; (a -&gt; app list a -&gt; r) -&gt; r)

(where @let list = ... in ...@ is pseudosyntax introduced for readability)
So if a recursive case is not saturated, we have to generate as many lambdas as there are missing
arguments and prepend the lambdas to the encoding of the recursive case.

This way we can preserve the user's redexes and not introduce additional ones.

Read next: Note [Comparing approaches to pattern functor packing]
-}</span
      ><span
      >
</span
      ><span id="line-455"
      ></span
      ><span
      >
</span
      ><span id="line-456"
      ></span
      ><span class="hs-comment"
      >{- Note [Comparing approaches to pattern functor packing]
Packing n-ary pattern functors semantically (see Note [Packing n-ary pattern functors semantically]):
Pros:
    1. easy to get right. Kinds match? You're all set
    2. does not require manual manipulations with syntax (which would be very error-prone)
    3. does not evaluate redexes written by the user
    4. pattern functors with more than one recursive case are smaller being encoded this way than
       when everything is fully inlined (in the latter case the overhead is O(n) where 'n' is the
       number of recursive occurrences in a pattern functor)
Cons:
    1. resulting types contain additional redexes. I.e. we can turn normalized types into
       non-normalized ones
    2. pattern functors with one recursive case are slightly bigger being encoded this way than
       when everything is fully inlined

Packing n-ary pattern functors syntactically (see Note [Packing n-ary pattern functors syntactically]):
Pros:
    1. neither introduces new redexes nor evaluates ones written by the user
Cons:
    1. super easy to get wrong. While implementing this approach, I got it wrong three times.
       I'm still not sure it's sound
    2. requires testing against the other way to encode n-ary pattern functors
    3. requires manipulations with uniques which always look fine until you get an incomprehensible
       error message after 82 generated test cases pass
    4. pattern functors with more than one recursive case are bigger being encoded this way than
       with the other approach (the overhead here is O(n) where 'n' is the number of recursive
       occurrences in a pattern functor)
    5. someone who generates Plutus Core does not care much about whether types are normalized,
       because it's a pain and if you want normalized types, just normalize what you generated
       in the end.

Therefore, the costs of encoding n-ary pattern functors as 1-ary pattern functors in normal form
are rather high while the benefits are minor, and thus we go with the semantic packing approach.
-}</span
      ><span
      >
</span
      ><span id="line-490"
      ></span
      ><span
      >
</span
      ><span id="line-491"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| A recursive type packaged along with a specified 'Wrap' that allows to construct elements
of this type. -}</span
	></span
      ><span
      >
</span
      ><span id="line-493"
      ></span
      ><span class="hs-keyword"
      >data</span
      ><span
      > </span
      ><span id="RecursiveType"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	  ><span class="hs-identifier hs-var"
	    >RecursiveType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029211"
      ><span class="annot"
	><a href="#local-6989586621682029211"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029212"
      ><span class="annot"
	><a href="#local-6989586621682029212"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029213"
      ><span class="annot"
	><a href="#local-6989586621682029213"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="RecursiveType"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	  ><span class="hs-identifier hs-var"
	    >RecursiveType</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-494"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >{</span
      ><span
      > </span
      ><span id="_recursiveType"
      ><span class="annot"
	><span class="annottext"
	  >forall (uni :: * -&gt; *) fun ann.
RecursiveType uni fun ann -&gt; Type TyName uni ann
</span
	  ><a href="PlutusCore.StdLib.Type.html#_recursiveType"
	  ><span class="hs-identifier hs-var hs-var"
	    >_recursiveType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029211"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029213"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-495"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="_recursiveWrap"
      ><span class="annot"
	><span class="annottext"
	  >forall (uni :: * -&gt; *) fun ann.
RecursiveType uni fun ann
-&gt; forall (term :: * -&gt; *).
   TermLike term TyName Name uni fun =&gt;
   [Type TyName uni ann] -&gt; term ann -&gt; term ann
</span
	  ><a href="PlutusCore.StdLib.Type.html#_recursiveWrap"
	  ><span class="hs-identifier hs-var hs-var"
	    >_recursiveWrap</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-496"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621682029220"
      ><span class="annot"
	><a href="#local-6989586621682029220"
	  ><span class="hs-identifier hs-type"
	    >term</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-497"
      ></span
      ><span
      >       </span
      ><span class="hs-operator"
      >.</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.MkPlc.html#TermLike"
	><span class="hs-identifier hs-type"
	  >TermLike</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029220"
	><span class="hs-identifier hs-type"
	  >term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029211"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029212"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-498"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029211"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029213"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029220"
	><span class="hs-identifier hs-type"
	  >term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029213"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029220"
	><span class="hs-identifier hs-type"
	  >term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029213"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-499"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-500"
      ></span
      ><span
      >
</span
      ><span id="line-501"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| This exception is thrown when @_recursiveWrap@ is applied to a spine the length of which
is not equal to the length of the spine that @_recursiveType@ contains.
This can only happen if someone writing/generating Plutus Core made a mistake. -}</span
	></span
      ><span
      >
</span
      ><span id="line-504"
      ></span
      ><span class="hs-keyword"
      >data</span
      ><span
      > </span
      ><span id="IndicesLengthsMismatchException"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#IndicesLengthsMismatchException"
	  ><span class="hs-identifier hs-var"
	    >IndicesLengthsMismatchException</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="IndicesLengthsMismatchException"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#IndicesLengthsMismatchException"
	  ><span class="hs-identifier hs-var"
	    >IndicesLengthsMismatchException</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-505"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >{</span
      ><span
      > </span
      ><span id="_indicesLengthsMismatchExceptionExpected"
      ><span class="annot"
	><span class="annottext"
	  >IndicesLengthsMismatchException -&gt; Int
</span
	  ><a href="PlutusCore.StdLib.Type.html#_indicesLengthsMismatchExceptionExpected"
	  ><span class="hs-identifier hs-var hs-var"
	    >_indicesLengthsMismatchExceptionExpected</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-506"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="_indicesLengthsMismatchExceptionActual"
      ><span class="annot"
	><span class="annottext"
	  >IndicesLengthsMismatchException -&gt; Int
</span
	  ><a href="PlutusCore.StdLib.Type.html#_indicesLengthsMismatchExceptionActual"
	  ><span class="hs-identifier hs-var hs-var"
	    >_indicesLengthsMismatchExceptionActual</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-507"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="_indicesLengthsMismatchExceptionTyName"
      ><span class="annot"
	><span class="annottext"
	  >IndicesLengthsMismatchException -&gt; TyName
</span
	  ><a href="PlutusCore.StdLib.Type.html#_indicesLengthsMismatchExceptionTyName"
	  ><span class="hs-identifier hs-var hs-var"
	    >_indicesLengthsMismatchExceptionTyName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-508"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-509"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>anyclass</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621682029405"
      ><span id="local-6989586621682029409"
	><span id="local-6989586621682029412"
	  ><span class="annot"
	    ><span class="annottext"
	      >Show IndicesLengthsMismatchException
Typeable IndicesLengthsMismatchException
(Typeable IndicesLengthsMismatchException,
 Show IndicesLengthsMismatchException) =&gt;
(IndicesLengthsMismatchException -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe IndicesLengthsMismatchException)
-&gt; (IndicesLengthsMismatchException -&gt; String)
-&gt; Exception IndicesLengthsMismatchException
SomeException -&gt; Maybe IndicesLengthsMismatchException
IndicesLengthsMismatchException -&gt; String
IndicesLengthsMismatchException -&gt; SomeException
forall e.
(Typeable e, Show e) =&gt;
(e -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe e) -&gt; (e -&gt; String) -&gt; Exception e
$ctoException :: IndicesLengthsMismatchException -&gt; SomeException
toException :: IndicesLengthsMismatchException -&gt; SomeException
$cfromException :: SomeException -&gt; Maybe IndicesLengthsMismatchException
fromException :: SomeException -&gt; Maybe IndicesLengthsMismatchException
$cdisplayException :: IndicesLengthsMismatchException -&gt; String
displayException :: IndicesLengthsMismatchException -&gt; String
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Exception.Type.html#Exception"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Exception</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-510"
      ></span
      ><span
      >
</span
      ><span id="line-511"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span id="local-6989586621682029416"
      ><span id="local-6989586621682029420"
	><span class="annot"
	  ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Show.html#Show"
	    ><span class="hs-identifier hs-type"
	      >Show</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.StdLib.Type.html#IndicesLengthsMismatchException"
	    ><span class="hs-identifier hs-type"
	      >IndicesLengthsMismatchException</span
	      ></a
	    ></span
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-512"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029442"
      ><span class="annot"
	><span class="annottext"
	  >show :: IndicesLengthsMismatchException -&gt; String
</span
	  ><a href="#local-6989586621682029442"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >show</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.StdLib.Type.html#IndicesLengthsMismatchException"
	><span class="hs-identifier hs-type"
	  >IndicesLengthsMismatchException</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621682029444"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621682029444"
	  ><span class="hs-identifier hs-var"
	    >expected</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029445"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621682029445"
	  ><span class="hs-identifier hs-var"
	    >actual</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029446"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029446"
	  ><span class="hs-identifier hs-var"
	    >tyName</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-513"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#concat"
	><span class="hs-identifier hs-var"
	  >concat</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-514"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >[</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String
</span
	><span class="hs-string"
	>&quot;Wrong number of elements\n&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-515"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String
</span
	><span class="hs-string"
	>&quot;expected: &quot;</span
	></span
      ><span
      >
</span
      ><span id="line-516"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Show.html#show"
	><span class="hs-identifier hs-var"
	  >show</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621682029444"
	><span class="hs-identifier hs-var"
	  >expected</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-517"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String
</span
	><span class="hs-string"
	>&quot; , actual: &quot;</span
	></span
      ><span
      >
</span
      ><span id="line-518"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Show.html#show"
	><span class="hs-identifier hs-var"
	  >show</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621682029445"
	><span class="hs-identifier hs-var"
	  >actual</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-519"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String
</span
	><span class="hs-string"
	>&quot;\n&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-520"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String
</span
	><span class="hs-string"
	>&quot;while constructing a &quot;</span
	></span
      ><span
      >
</span
      ><span id="line-521"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName -&gt; String
forall a str. (PrettyPlc a, Render str) =&gt; a -&gt; str
</span
	><a href="PlutusCore.Pretty.Default.html#displayPlc"
	><span class="hs-identifier hs-var"
	  >displayPlc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029446"
	><span class="hs-identifier hs-var"
	  >tyName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-522"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-523"
      ></span
      ><span
      >
</span
      ><span id="line-524"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Get the kind of a data type having the kinds of its arguments.

&gt; argKindsToDataKindN _ [k1, k2 ... kn] = k1 -&gt; k2 -&gt; ... -&gt; kn -&gt; * -}</span
	></span
      ><span
      >
</span
      ><span id="line-527"
      ></span
      ><span id="local-6989586621682029248"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#argKindsToDataKindN"
	  ><span class="hs-identifier hs-type"
	    >argKindsToDataKindN</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029248"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="hs-special"
	>[</span
	><span class="annot"
	><a href="PlutusCore.Core.Type.html#Kind"
	  ><span class="hs-identifier hs-type"
	    >Kind</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029248"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	><span class="hs-special"
	>]</span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Core.Type.html#Kind"
	  ><span class="hs-identifier hs-type"
	    >Kind</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029248"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-528"
      ></span
      ><span id="argKindsToDataKindN"
      ><span class="annot"
	><span class="annottext"
	  >argKindsToDataKindN :: forall ann. ann -&gt; [Kind ann] -&gt; Kind ann
</span
	  ><a href="PlutusCore.StdLib.Type.html#argKindsToDataKindN"
	  ><span class="hs-identifier hs-var hs-var"
	    >argKindsToDataKindN</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029450"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029450"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029451"
      ><span class="annot"
	><span class="annottext"
	  >[Kind ann]
</span
	  ><a href="#local-6989586621682029451"
	  ><span class="hs-identifier hs-var"
	    >argKinds</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; [Kind ann] -&gt; Kind ann -&gt; Kind ann
forall ann. ann -&gt; [Kind ann] -&gt; Kind ann -&gt; Kind ann
</span
	><a href="PlutusCore.MkPlc.html#mkIterKindArrow"
	><span class="hs-identifier hs-var"
	  >mkIterKindArrow</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029450"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Kind ann]
</span
	><a href="#local-6989586621682029451"
	><span class="hs-identifier hs-var"
	  >argKinds</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ann -&gt; Kind ann) -&gt; Kind ann -&gt; Kind ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029450"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-529"
      ></span
      ><span
      >
</span
      ><span id="line-530"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Get the kind of @spine@ having the kind of a data type.

&gt; dataKindToSpineKind _ dataKind = dataKind -&gt; * -}</span
	></span
      ><span
      >
</span
      ><span id="line-533"
      ></span
      ><span id="local-6989586621682029256"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#dataKindToSpineKind"
	  ><span class="hs-identifier hs-type"
	    >dataKindToSpineKind</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029256"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Core.Type.html#Kind"
	  ><span class="hs-identifier hs-type"
	    >Kind</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029256"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Core.Type.html#Kind"
	  ><span class="hs-identifier hs-type"
	    >Kind</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029256"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-534"
      ></span
      ><span id="dataKindToSpineKind"
      ><span class="annot"
	><span class="annottext"
	  >dataKindToSpineKind :: forall ann. ann -&gt; Kind ann -&gt; Kind ann
</span
	  ><a href="PlutusCore.StdLib.Type.html#dataKindToSpineKind"
	  ><span class="hs-identifier hs-var hs-var"
	    >dataKindToSpineKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029455"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029455"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029456"
      ><span class="annot"
	><span class="annottext"
	  >Kind ann
</span
	  ><a href="#local-6989586621682029456"
	  ><span class="hs-identifier hs-var"
	    >dataKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#KindArrow"
	><span class="hs-identifier hs-var"
	  >KindArrow</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029455"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029456"
	><span class="hs-identifier hs-var"
	  >dataKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ann -&gt; Kind ann) -&gt; Kind ann -&gt; Kind ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029455"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-535"
      ></span
      ><span
      >
</span
      ><span id="line-536"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Get the kind of @rec@ having the kind of @spine@.

&gt; spineKindToRecKind _ spineKind = spineKind -&gt; * -}</span
	></span
      ><span
      >
</span
      ><span id="line-539"
      ></span
      ><span id="local-6989586621682029458"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#spineKindToRecKind"
	  ><span class="hs-identifier hs-type"
	    >spineKindToRecKind</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029458"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Core.Type.html#Kind"
	  ><span class="hs-identifier hs-type"
	    >Kind</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029458"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Core.Type.html#Kind"
	  ><span class="hs-identifier hs-type"
	    >Kind</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621682029458"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-540"
      ></span
      ><span id="spineKindToRecKind"
      ><span class="annot"
	><span class="annottext"
	  >spineKindToRecKind :: forall ann. ann -&gt; Kind ann -&gt; Kind ann
</span
	  ><a href="PlutusCore.StdLib.Type.html#spineKindToRecKind"
	  ><span class="hs-identifier hs-var hs-var"
	    >spineKindToRecKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029460"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029460"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029461"
      ><span class="annot"
	><span class="annottext"
	  >Kind ann
</span
	  ><a href="#local-6989586621682029461"
	  ><span class="hs-identifier hs-var"
	    >spineKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#KindArrow"
	><span class="hs-identifier hs-var"
	  >KindArrow</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029460"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029461"
	><span class="hs-identifier hs-var"
	  >spineKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ann -&gt; Kind ann) -&gt; Kind ann -&gt; Kind ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029460"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-541"
      ></span
      ><span
      >
</span
      ><span id="line-542"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Make a function that packs a list of 'TyDecl's as a spine using the CPS trick.

&gt; getToSpine _ =
&gt;     \[a1 :: k1, a2 :: k2 ... an :: kn] -&gt; (dat :: k1 -&gt; k2 -&gt; ... kn -&gt; *) -&gt; dat a1 a2 ... an

For example,

&gt; getToSpine _ =
&gt;     \[a1 :: k1, a2 :: k2] -&gt; (dat :: k1 -&gt; k2 -&gt; *) -&gt; dat a1 a2 -}</span
	></span
      ><span
      >
</span
      ><span id="line-551"
      ></span
      ><span id="local-6989586621682029259"
      ><span id="local-6989586621682029260"
	><span class="annot"
	  ><a href="PlutusCore.StdLib.Type.html#getToSpine"
	    ><span class="hs-identifier hs-type"
	      >getToSpine</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029259"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Quote.html#Quote"
	    ><span class="hs-identifier hs-type"
	      >Quote</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="hs-special"
	  >[</span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#TyDecl"
	    ><span class="hs-identifier hs-type"
	      >TyDecl</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029260"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029259"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >]</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#Type"
	    ><span class="hs-identifier hs-type"
	      >Type</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029260"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029259"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-552"
      ></span
      ><span id="getToSpine"
      ><span class="annot"
	><span class="annottext"
	  >getToSpine :: forall ann (uni :: * -&gt; *).
ann -&gt; Quote ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#getToSpine"
	  ><span class="hs-identifier hs-var hs-var"
	    >getToSpine</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029473"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029473"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-553"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029474"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029474"
	  ><span class="hs-identifier hs-var"
	    >dat</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m TyName
</span
	><a href="PlutusCore.Quote.html#freshTyName"
	><span class="hs-identifier hs-var"
	  >freshTyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;dat&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-554"
      ></span
      ><span
      >
</span
      ><span id="line-555"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
-&gt; Quote ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
forall a. a -&gt; QuoteT Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
 -&gt; Quote ([TyDecl TyName uni ann] -&gt; Type TyName uni ann))
-&gt; ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
-&gt; Quote ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621682029476"
      ><span class="annot"
	><span class="annottext"
	  >[TyDecl TyName uni ann]
</span
	  ><a href="#local-6989586621682029476"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-556"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029473"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029474"
	><span class="hs-identifier hs-var"
	  >dat</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; [Kind ann] -&gt; Kind ann
forall ann. ann -&gt; [Kind ann] -&gt; Kind ann
</span
	><a href="PlutusCore.StdLib.Type.html#argKindsToDataKindN"
	><span class="hs-identifier hs-var"
	  >argKindsToDataKindN</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029473"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([Kind ann] -&gt; Kind ann) -&gt; [Kind ann] -&gt; Kind ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyDecl TyName uni ann -&gt; Kind ann)
-&gt; [TyDecl TyName uni ann] -&gt; [Kind ann]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#map"
	><span class="hs-identifier hs-var"
	  >map</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyDecl TyName uni ann -&gt; Kind ann
forall tyname (uni :: * -&gt; *) ann.
TyDecl tyname uni ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#_tyDeclKind"
	><span class="hs-identifier hs-var"
	  >_tyDeclKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyDecl TyName uni ann]
</span
	><a href="#local-6989586621682029476"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-557"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; ([(ann, Type TyName uni ann)] -&gt; Type TyName uni ann)
-&gt; [(ann, Type TyName uni ann)]
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; [(ann, Type TyName uni ann)] -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
Type tyname uni ann
-&gt; [(ann, Type tyname uni ann)] -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.MkPlc.html#mkIterTyApp"
	><span class="hs-identifier hs-var"
	  >mkIterTyApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; TyName -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyVar"
	><span class="hs-identifier hs-var"
	  >TyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029473"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029474"
	><span class="hs-identifier hs-var"
	  >dat</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-558"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>([(ann, Type TyName uni ann)] -&gt; Type TyName uni ann)
-&gt; [(ann, Type TyName uni ann)] -&gt; Type TyName uni ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyDecl TyName uni ann -&gt; (ann, Type TyName uni ann))
-&gt; [TyDecl TyName uni ann] -&gt; [(ann, Type TyName uni ann)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#map"
	><span class="hs-identifier hs-var"
	  >map</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029473"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; (ann, Type TyName uni ann))
-&gt; (TyDecl TyName uni ann -&gt; Type TyName uni ann)
-&gt; TyDecl TyName uni ann
-&gt; (ann, Type TyName uni ann)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyDecl TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
TyDecl tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#_tyDeclType"
	><span class="hs-identifier hs-var"
	  >_tyDeclType</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyDecl TyName uni ann]
</span
	><a href="#local-6989586621682029476"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-559"
      ></span
      ><span
      >
</span
      ><span id="line-560"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Pack a list of 'TyDecl's as a spine using the CPS trick.

&gt; getSpine _ [a1 :: k1, a2 :: k2 ... an :: kn] =
&gt;     \(dat :: k1 -&gt; k2 -&gt; ... kn -&gt; *) -&gt; dat a1 a2 ... an

For example,

&gt; getSpine _ [a1 :: k1, a2 :: k2] =
&gt;     \(dat :: k1 -&gt; k2 -&gt; *) -&gt; dat a1 a2 -}</span
	></span
      ><span
      >
</span
      ><span id="line-569"
      ></span
      ><span id="local-6989586621682029291"
      ><span id="local-6989586621682029292"
	><span class="annot"
	  ><a href="PlutusCore.StdLib.Type.html#getSpine"
	    ><span class="hs-identifier hs-type"
	      >getSpine</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029291"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >[</span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#TyDecl"
	    ><span class="hs-identifier hs-type"
	      >TyDecl</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029292"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029291"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >]</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Quote.html#Quote"
	    ><span class="hs-identifier hs-type"
	      >Quote</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#Type"
	    ><span class="hs-identifier hs-type"
	      >Type</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029292"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029291"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-570"
      ></span
      ><span id="getSpine"
      ><span class="annot"
	><span class="annottext"
	  >getSpine :: forall ann (uni :: * -&gt; *).
ann -&gt; [TyDecl TyName uni ann] -&gt; Quote (Type TyName uni ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#getSpine"
	  ><span class="hs-identifier hs-var hs-var"
	    >getSpine</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029488"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029488"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029489"
      ><span class="annot"
	><span class="annottext"
	  >[TyDecl TyName uni ann]
</span
	  ><a href="#local-6989586621682029489"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
-&gt; [TyDecl TyName uni ann] -&gt; Type TyName uni ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyDecl TyName uni ann]
</span
	><a href="#local-6989586621682029489"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
 -&gt; Type TyName uni ann)
-&gt; QuoteT Identity ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
-&gt; QuoteT Identity (Type TyName uni ann)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; QuoteT Identity ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
forall ann (uni :: * -&gt; *).
ann -&gt; Quote ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
</span
	><a href="PlutusCore.StdLib.Type.html#getToSpine"
	><span class="hs-identifier hs-var"
	  >getToSpine</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029488"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-571"
      ></span
      ><span
      >
</span
      ><span id="line-572"
      ></span
      ><span class="hs-comment"
      >-- See Note [Packing n-ary pattern functors semantically].</span
      ><span
      >
</span
      ><span id="line-573"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Having a list of type variables along with their kinds, make a function that receives

1. a function expecting a spine in CPS form
2. a sequence of types

packs the types into a CPS-encoded spine and passes the spine to the function.

&gt; getWithSpine _ [v1 :: k1, v2 :: k2 ... vn :: kn] =
&gt;     \(cont :: ((k1 -&gt; k2 -&gt; ... -&gt; kn -&gt; *) -&gt; *) -&gt; *)
&gt;      (v1 :: k1) (v2 :: k2) ... (vn :: kn) -&gt;
&gt;          cont \(dat :: k1 -&gt; k2 -&gt; ... kn -&gt; *) -&gt; dat v1 v2 ... vn

For example,

&gt; getWithSpine _ [v1 :: k1, v2 :: k2] =
&gt;     \(cont : ((k1 -&gt; k2 -&gt; *) -&gt; *) -&gt; *) (v1 :: k1) (v2 :: k2) -&gt;
&gt;          cont \(dat :: k1 -&gt; k2 -&gt; *) -&gt; dat v1 v2 -}</span
	></span
      ><span
      >
</span
      ><span id="line-590"
      ></span
      ><span id="local-6989586621682029299"
      ><span id="local-6989586621682029301"
	><span class="annot"
	  ><a href="PlutusCore.StdLib.Type.html#getWithSpine"
	    ><span class="hs-identifier hs-type"
	      >getWithSpine</span
	      ></a
	    ></span
	  ><span
	  >
</span
	  ><span id="line-591"
	  ></span
	  ><span
	  >  </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029299"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span
	  >
</span
	  ><span id="line-592"
	  ></span
	  ><span
	  >  </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >[</span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#TyVarDecl"
	    ><span class="hs-identifier hs-type"
	      >TyVarDecl</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029299"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >]</span
	  ><span
	  >
</span
	  ><span id="line-593"
	  ></span
	  ><span
	  >  </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Quote.html#Quote"
	    ><span class="hs-identifier hs-type"
	      >Quote</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#Type"
	    ><span class="hs-identifier hs-type"
	      >Type</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029301"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029299"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#Type"
	    ><span class="hs-identifier hs-type"
	      >Type</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029301"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029299"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#Type"
	    ><span class="hs-identifier hs-type"
	      >Type</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029301"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029299"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-594"
      ></span
      ><span id="getWithSpine"
      ><span class="annot"
	><span class="annottext"
	  >getWithSpine :: forall ann (uni :: * -&gt; *).
ann
-&gt; [TyVarDecl TyName ann]
-&gt; Quote
     ((Type TyName uni ann -&gt; Type TyName uni ann)
      -&gt; Type TyName uni ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#getWithSpine"
	  ><span class="hs-identifier hs-var hs-var"
	    >getWithSpine</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029495"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029495"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029496"
      ><span class="annot"
	><span class="annottext"
	  >[TyVarDecl TyName ann]
</span
	  ><a href="#local-6989586621682029496"
	  ><span class="hs-identifier hs-var"
	    >argVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-595"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029497"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029497"
	  ><span class="hs-identifier hs-var"
	    >spine</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; [TyDecl TyName uni ann] -&gt; Quote (Type TyName uni ann)
forall ann (uni :: * -&gt; *).
ann -&gt; [TyDecl TyName uni ann] -&gt; Quote (Type TyName uni ann)
</span
	><a href="PlutusCore.StdLib.Type.html#getSpine"
	><span class="hs-identifier hs-var"
	  >getSpine</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029495"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([TyDecl TyName uni ann] -&gt; Quote (Type TyName uni ann))
-&gt; [TyDecl TyName uni ann] -&gt; Quote (Type TyName uni ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyVarDecl TyName ann -&gt; TyDecl TyName uni ann)
-&gt; [TyVarDecl TyName ann] -&gt; [TyDecl TyName uni ann]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#map"
	><span class="hs-identifier hs-var"
	  >map</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann -&gt; TyDecl TyName uni ann
forall tyname ann (uni :: * -&gt; *).
TyVarDecl tyname ann -&gt; TyDecl tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#tyDeclVar"
	><span class="hs-identifier hs-var"
	  >tyDeclVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029496"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-596"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>((Type TyName uni ann -&gt; Type TyName uni ann)
 -&gt; Type TyName uni ann)
-&gt; Quote
     ((Type TyName uni ann -&gt; Type TyName uni ann)
      -&gt; Type TyName uni ann)
forall a. a -&gt; QuoteT Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(((Type TyName uni ann -&gt; Type TyName uni ann)
  -&gt; Type TyName uni ann)
 -&gt; Quote
      ((Type TyName uni ann -&gt; Type TyName uni ann)
       -&gt; Type TyName uni ann))
-&gt; ((Type TyName uni ann -&gt; Type TyName uni ann)
    -&gt; Type TyName uni ann)
-&gt; Quote
     ((Type TyName uni ann -&gt; Type TyName uni ann)
      -&gt; Type TyName uni ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621682029499"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann -&gt; Type TyName uni ann
</span
	  ><a href="#local-6989586621682029499"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
-&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname ann (uni :: * -&gt; *).
[TyVarDecl tyname ann]
-&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.MkPlc.html#mkIterTyLam"
	><span class="hs-identifier hs-var"
	  >mkIterTyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029496"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ann
</span
	><a href="#local-6989586621682029499"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029497"
	><span class="hs-identifier hs-var"
	  >spine</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-597"
      ></span
      ><span
      >
</span
      ><span id="line-598"
      ></span
      ><span class="hs-comment"
      >-- See Note [Spiney API].</span
      ><span
      >
</span
      ><span id="line-599"
      ></span
      ><span class="hs-keyword"
      >type</span
      ><span
      > </span
      ><span id="FromDataPieces"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#FromDataPieces"
	  ><span class="hs-identifier hs-var"
	    >FromDataPieces</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029501"
      ><span class="annot"
	><a href="#local-6989586621682029501"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029502"
      ><span class="annot"
	><a href="#local-6989586621682029502"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029503"
      ><span class="annot"
	><a href="#local-6989586621682029503"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-600"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="#local-6989586621682029502"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-601"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="hs-comment"
	>-- ^ An annotation placed everywhere we do not have annotations.</span
	></span
      ><span
      >
</span
      ><span id="line-602"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-603"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="hs-comment"
	>-- ^ The name of the data type being defined.</span
	></span
      ><span
      >
</span
      ><span id="line-604"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="PlutusCore.Core.Type.html#TyVarDecl"
	><span class="hs-identifier hs-type"
	  >TyVarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029502"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-605"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="hs-comment"
	>-- ^ A list of @n@ type variables bound in a pattern functor.</span
	></span
      ><span
      >
</span
      ><span id="line-606"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029501"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029502"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-607"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="hs-comment"
	>-- ^ The body of the n-ary pattern functor.</span
	></span
      ><span
      >
</span
      ><span id="line-608"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Quote.html#Quote"
	><span class="hs-identifier hs-type"
	  >Quote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029503"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-609"
      ></span
      ><span
      >
</span
      ><span id="line-610"
      ></span
      ><span class="hs-comment"
      >-- See Note [Packing n-ary pattern functors semantically].</span
      ><span
      >
</span
      ><span id="line-611"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Pack the body of an n-ary pattern functor and make the corresponding 1-ary pattern functor.

&gt; packPatternFunctorBodyN _ dataName [v1 :: k1, v2 :: k2 ... vn :: kn] patBodyN =
&gt;     let patN = \(dataName :: k1 -&gt; k2 -&gt; ... -&gt; kn -&gt; *) (v1 :: k1) (v2 :: k2) ... (vn :: kn) -&gt;
&gt;                     patBodyN
&gt;         in \(rec :: ((k1 -&gt; k2 -&gt; ... kn -&gt; *) -&gt; *) -&gt; *)
&gt;             (spine :: (k1 -&gt; k2 -&gt; ... -&gt; kn -&gt; *) -&gt; *) -&gt;
&gt;                 spine (patN (withSpine rec))

For example,

&gt; packPatternFunctorBodyN _ dataName [v1 :: k1, v2 :: k2] patBodyN =
&gt;     let patN = \(dataName :: k1 -&gt; k2 -&gt; *) (v1 :: k1) (v2 :: k2) -&gt;
&gt;                     patBodyN
&gt;         in \(rec :: ((k1 -&gt; k2 -&gt; *) -&gt; *) -&gt; *)
&gt;             (spine :: (k1 -&gt; k2 -&gt; *) -&gt; *) -&gt;
&gt;                 spine (patN (withSpine rec)) -}</span
	></span
      ><span
      >
</span
      ><span id="line-628"
      ></span
      ><span id="local-6989586621682029310"
      ><span id="local-6989586621682029311"
	><span class="annot"
	  ><a href="PlutusCore.StdLib.Type.html#packPatternFunctorBodyN"
	    ><span class="hs-identifier hs-type"
	      >packPatternFunctorBodyN</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.StdLib.Type.html#FromDataPieces"
	    ><span class="hs-identifier hs-type"
	      >FromDataPieces</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029310"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029311"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#Type"
	    ><span class="hs-identifier hs-type"
	      >Type</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029310"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029311"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-629"
      ></span
      ><span id="packPatternFunctorBodyN"
      ><span class="annot"
	><span class="annottext"
	  >packPatternFunctorBodyN :: forall (uni :: * -&gt; *) ann.
FromDataPieces uni ann (Type TyName uni ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#packPatternFunctorBodyN"
	  ><span class="hs-identifier hs-var hs-var"
	    >packPatternFunctorBodyN</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029514"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029514"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029515"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029515"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029516"
      ><span class="annot"
	><span class="annottext"
	  >[TyVarDecl TyName ann]
</span
	  ><a href="#local-6989586621682029516"
	  ><span class="hs-identifier hs-var"
	    >argVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029517"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029517"
	  ><span class="hs-identifier hs-var"
	    >patBodyN</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-630"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621682029518"
      ><span class="annot"
	><span class="annottext"
	  >dataKind :: Kind ann
</span
	  ><a href="#local-6989586621682029518"
	  ><span class="hs-identifier hs-var hs-var"
	    >dataKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; [Kind ann] -&gt; Kind ann
forall ann. ann -&gt; [Kind ann] -&gt; Kind ann
</span
	><a href="PlutusCore.StdLib.Type.html#argKindsToDataKindN"
	><span class="hs-identifier hs-var"
	  >argKindsToDataKindN</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([Kind ann] -&gt; Kind ann) -&gt; [Kind ann] -&gt; Kind ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyVarDecl TyName ann -&gt; Kind ann)
-&gt; [TyVarDecl TyName ann] -&gt; [Kind ann]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#map"
	><span class="hs-identifier hs-var"
	  >map</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann -&gt; Kind ann
forall tyname ann. TyVarDecl tyname ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#_tyVarDeclKind"
	><span class="hs-identifier hs-var"
	  >_tyVarDeclKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029516"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-631"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029520"
      ><span class="annot"
	><span class="annottext"
	  >spineKind :: Kind ann
</span
	  ><a href="#local-6989586621682029520"
	  ><span class="hs-identifier hs-var hs-var"
	    >spineKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann -&gt; Kind ann
</span
	><a href="PlutusCore.StdLib.Type.html#dataKindToSpineKind"
	><span class="hs-identifier hs-var"
	  >dataKindToSpineKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029518"
	><span class="hs-identifier hs-var"
	  >dataKind</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-632"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029521"
      ><span class="annot"
	><span class="annottext"
	  >recKind :: Kind ann
</span
	  ><a href="#local-6989586621682029521"
	  ><span class="hs-identifier hs-var hs-var"
	    >recKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann -&gt; Kind ann
</span
	><a href="PlutusCore.StdLib.Type.html#spineKindToRecKind"
	><span class="hs-identifier hs-var"
	  >spineKindToRecKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029520"
	><span class="hs-identifier hs-var"
	  >spineKind</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-633"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029522"
      ><span class="annot"
	><span class="annottext"
	  >vDat :: TyVarDecl TyName ann
</span
	  ><a href="#local-6989586621682029522"
	  ><span class="hs-identifier hs-var hs-var"
	    >vDat</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; TyName -&gt; Kind ann -&gt; TyVarDecl TyName ann
forall tyname ann.
ann -&gt; tyname -&gt; Kind ann -&gt; TyVarDecl tyname ann
</span
	><a href="PlutusCore.Core.Type.html#TyVarDecl"
	><span class="hs-identifier hs-var"
	  >TyVarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029515"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029518"
	><span class="hs-identifier hs-var"
	  >dataKind</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-634"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029524"
      ><span class="annot"
	><span class="annottext"
	  >patN :: Type TyName uni ann
</span
	  ><a href="#local-6989586621682029524"
	  ><span class="hs-identifier hs-var hs-var"
	    >patN</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
-&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname ann (uni :: * -&gt; *).
[TyVarDecl tyname ann]
-&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.MkPlc.html#mkIterTyLam"
	><span class="hs-identifier hs-var"
	  >mkIterTyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><a href="#local-6989586621682029522"
	><span class="hs-identifier hs-var"
	  >vDat</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
-&gt; [TyVarDecl TyName ann] -&gt; [TyVarDecl TyName ann]
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029516"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029517"
	><span class="hs-identifier hs-var"
	  >patBodyN</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-635"
      ></span
      ><span
      >
</span
      ><span id="line-636"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029525"
      ><span class="annot"
	><span class="annottext"
	  >(Type TyName uni ann -&gt; Type TyName uni ann) -&gt; Type TyName uni ann
</span
	  ><a href="#local-6989586621682029525"
	  ><span class="hs-identifier hs-var"
	    >withSpine</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; [TyVarDecl TyName ann]
-&gt; Quote
     ((Type TyName uni ann -&gt; Type TyName uni ann)
      -&gt; Type TyName uni ann)
forall ann (uni :: * -&gt; *).
ann
-&gt; [TyVarDecl TyName ann]
-&gt; Quote
     ((Type TyName uni ann -&gt; Type TyName uni ann)
      -&gt; Type TyName uni ann)
</span
	><a href="PlutusCore.StdLib.Type.html#getWithSpine"
	><span class="hs-identifier hs-var"
	  >getWithSpine</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029516"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-637"
      ></span
      ><span
      >
</span
      ><span id="line-638"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029526"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029526"
	  ><span class="hs-identifier hs-var"
	    >rec</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m TyName
</span
	><a href="PlutusCore.Quote.html#freshTyName"
	><span class="hs-identifier hs-var"
	  >freshTyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;rec&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-639"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029527"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029527"
	  ><span class="hs-identifier hs-var"
	    >spine</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m TyName
</span
	><a href="PlutusCore.Quote.html#freshTyName"
	><span class="hs-identifier hs-var"
	  >freshTyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;spine&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-640"
      ></span
      ><span
      >
</span
      ><span id="line-641"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Quote (Type TyName uni ann)
forall a. a -&gt; QuoteT Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-642"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Quote (Type TyName uni ann))
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Quote (Type TyName uni ann)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029526"
	><span class="hs-identifier hs-var"
	  >rec</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029521"
	><span class="hs-identifier hs-var"
	  >recKind</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-643"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029527"
	><span class="hs-identifier hs-var"
	  >spine</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029520"
	><span class="hs-identifier hs-var"
	  >spineKind</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-644"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyApp"
	><span class="hs-identifier hs-var"
	  >TyApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; TyName -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyVar"
	><span class="hs-identifier hs-var"
	  >TyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029527"
	><span class="hs-identifier hs-var"
	  >spine</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-645"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyApp"
	><span class="hs-identifier hs-var"
	  >TyApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029524"
	><span class="hs-identifier hs-var"
	  >patN</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-646"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann) -&gt; Type TyName uni ann
</span
	><a href="#local-6989586621682029525"
	><span class="hs-identifier hs-var"
	  >withSpine</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-647"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>((Type TyName uni ann -&gt; Type TyName uni ann)
 -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann
    -&gt; Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyApp"
	><span class="hs-identifier hs-var"
	  >TyApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-648"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Quote (Type TyName uni ann))
-&gt; Type TyName uni ann -&gt; Quote (Type TyName uni ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; TyName -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyVar"
	><span class="hs-identifier hs-var"
	  >TyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029514"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029526"
	><span class="hs-identifier hs-var"
	  >rec</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-649"
      ></span
      ><span
      >
</span
      ><span id="line-650"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Construct a data type out of pieces.</span
	></span
      ><span
      >
</span
      ><span id="line-651"
      ></span
      ><span id="local-6989586621682029529"
      ><span id="local-6989586621682029530"
	><span class="annot"
	  ><a href="PlutusCore.StdLib.Type.html#getPackedType"
	    ><span class="hs-identifier hs-type"
	      >getPackedType</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.StdLib.Type.html#FromDataPieces"
	    ><span class="hs-identifier hs-type"
	      >FromDataPieces</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029529"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029530"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="PlutusCore.Core.Type.html#Type"
	    ><span class="hs-identifier hs-type"
	      >Type</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#TyName"
	    ><span class="hs-identifier hs-type"
	      >TyName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029529"
	    ><span class="hs-identifier hs-type"
	      >uni</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621682029530"
	    ><span class="hs-identifier hs-type"
	      >ann</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-652"
      ></span
      ><span id="getPackedType"
      ><span class="annot"
	><span class="annottext"
	  >getPackedType :: forall (uni :: * -&gt; *) ann.
FromDataPieces uni ann (Type TyName uni ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#getPackedType"
	  ><span class="hs-identifier hs-var hs-var"
	    >getPackedType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029536"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029536"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029537"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029537"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029538"
      ><span class="annot"
	><span class="annottext"
	  >[TyVarDecl TyName ann]
</span
	  ><a href="#local-6989586621682029538"
	  ><span class="hs-identifier hs-var"
	    >argVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029539"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029539"
	  ><span class="hs-identifier hs-var"
	    >patBodyN</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-653"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029540"
      ><span class="annot"
	><span class="annottext"
	  >(Type TyName uni ann -&gt; Type TyName uni ann) -&gt; Type TyName uni ann
</span
	  ><a href="#local-6989586621682029540"
	  ><span class="hs-identifier hs-var"
	    >withSpine</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; [TyVarDecl TyName ann]
-&gt; Quote
     ((Type TyName uni ann -&gt; Type TyName uni ann)
      -&gt; Type TyName uni ann)
forall ann (uni :: * -&gt; *).
ann
-&gt; [TyVarDecl TyName ann]
-&gt; Quote
     ((Type TyName uni ann -&gt; Type TyName uni ann)
      -&gt; Type TyName uni ann)
</span
	><a href="PlutusCore.StdLib.Type.html#getWithSpine"
	><span class="hs-identifier hs-var"
	  >getWithSpine</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029536"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029538"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-654"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann) -&gt; Type TyName uni ann
</span
	><a href="#local-6989586621682029540"
	><span class="hs-identifier hs-var"
	  >withSpine</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Type TyName uni ann -&gt; Type TyName uni ann)
 -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann
    -&gt; Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyIFix"
	><span class="hs-identifier hs-var"
	  >TyIFix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029536"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Quote (Type TyName uni ann) -&gt; Quote (Type TyName uni ann)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>FromDataPieces uni ann (Type TyName uni ann)
forall (uni :: * -&gt; *) ann.
FromDataPieces uni ann (Type TyName uni ann)
</span
	><a href="PlutusCore.StdLib.Type.html#packPatternFunctorBodyN"
	><span class="hs-identifier hs-var"
	  >packPatternFunctorBodyN</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029536"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029537"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029538"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029539"
	><span class="hs-identifier hs-var"
	  >patBodyN</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-655"
      ></span
      ><span
      >
</span
      ><span id="line-656"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| An auxiliary type for returning a polymorphic @wrap@. Haskell's support for impredicative
polymorphism isn't good enough to do without this. -}</span
	></span
      ><span
      >
</span
      ><span id="line-658"
      ></span
      ><span class="hs-keyword"
      >newtype</span
      ><span
      > </span
      ><span id="PolyWrap"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#PolyWrap"
	  ><span class="hs-identifier hs-var"
	    >PolyWrap</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029335"
      ><span class="annot"
	><a href="#local-6989586621682029335"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029336"
      ><span class="annot"
	><a href="#local-6989586621682029336"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029337"
      ><span class="annot"
	><a href="#local-6989586621682029337"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-659"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="PolyWrap"
      ><span class="annot"
	><a href="PlutusCore.StdLib.Type.html#PolyWrap"
	  ><span class="hs-identifier hs-var"
	    >PolyWrap</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-660"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621682029334"
      ><span class="annot"
	><a href="#local-6989586621682029334"
	  ><span class="hs-identifier hs-type"
	    >term</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.MkPlc.html#TermLike"
	><span class="hs-identifier hs-type"
	  >TermLike</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029334"
	><span class="hs-identifier hs-type"
	  >term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029335"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029336"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029335"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029337"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029334"
	><span class="hs-identifier hs-type"
	  >term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029337"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029334"
	><span class="hs-identifier hs-type"
	  >term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621682029337"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-661"
      ></span
      ><span
      >
</span
      ><span id="line-662"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Make a generic @wrap@ that takes a spine of type arguments and the rest of a term, packs
the spine using the CPS trick and passes the spine and the term to 'IWrap' along with a 1-ary
pattern functor constructed from pieces of a data type passed as arguments to 'getWrap'. -}</span
	></span
      ><span
      >
</span
      ><span id="line-665"
      ></span
      ><span id="local-6989586621682029321"
      ><span id="local-6989586621682029322"
	><span id="local-6989586621682029323"
	  ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#getPackedWrap"
	      ><span class="hs-identifier hs-type"
		>getPackedWrap</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="hs-glyph"
	    >::</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#FromDataPieces"
	      ><span class="hs-identifier hs-type"
		>FromDataPieces</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029321"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029322"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="hs-special"
	    >(</span
	    ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#PolyWrap"
	      ><span class="hs-identifier hs-type"
		>PolyWrap</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029321"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029323"
	      ><span class="hs-identifier hs-type"
		>fun</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029322"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span class="hs-special"
	    >)</span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-666"
      ></span
      ><span id="getPackedWrap"
      ><span class="annot"
	><span class="annottext"
	  >getPackedWrap :: forall (uni :: * -&gt; *) ann fun.
FromDataPieces uni ann (PolyWrap uni fun ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#getPackedWrap"
	  ><span class="hs-identifier hs-var hs-var"
	    >getPackedWrap</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029549"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029549"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029550"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029550"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029551"
      ><span class="annot"
	><span class="annottext"
	  >[TyVarDecl TyName ann]
</span
	  ><a href="#local-6989586621682029551"
	  ><span class="hs-identifier hs-var"
	    >argVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029552"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029552"
	  ><span class="hs-identifier hs-var"
	    >patBodyN</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-667"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029553"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029553"
	  ><span class="hs-identifier hs-var"
	    >pat1</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>FromDataPieces uni ann (Type TyName uni ann)
forall (uni :: * -&gt; *) ann.
FromDataPieces uni ann (Type TyName uni ann)
</span
	><a href="PlutusCore.StdLib.Type.html#packPatternFunctorBodyN"
	><span class="hs-identifier hs-var"
	  >packPatternFunctorBodyN</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029549"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029550"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029551"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029552"
	><span class="hs-identifier hs-var"
	  >patBodyN</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-668"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029554"
      ><span class="annot"
	><span class="annottext"
	  >[TyDecl TyName uni ann] -&gt; Type TyName uni ann
</span
	  ><a href="#local-6989586621682029554"
	  ><span class="hs-identifier hs-var"
	    >toSpine</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Quote ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
forall ann (uni :: * -&gt; *).
ann -&gt; Quote ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
</span
	><a href="PlutusCore.StdLib.Type.html#getToSpine"
	><span class="hs-identifier hs-var"
	  >getToSpine</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029549"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-669"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621682029555"
      ><span class="annot"
	><span class="annottext"
	  >instVar :: TyVarDecl tyname ann
-&gt; Type tyname uni ann -&gt; TyDecl tyname uni ann
</span
	  ><a href="#local-6989586621682029555"
	  ><span class="hs-identifier hs-var hs-var"
	    >instVar</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029556"
      ><span class="annot"
	><span class="annottext"
	  >TyVarDecl tyname ann
</span
	  ><a href="#local-6989586621682029556"
	  ><span class="hs-identifier hs-var"
	    >v</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029557"
      ><span class="annot"
	><span class="annottext"
	  >Type tyname uni ann
</span
	  ><a href="#local-6989586621682029557"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Type tyname uni ann -&gt; Kind ann -&gt; TyDecl tyname uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; Type tyname uni ann -&gt; Kind ann -&gt; TyDecl tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyDecl"
	><span class="hs-identifier hs-var"
	  >TyDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029549"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni ann
</span
	><a href="#local-6989586621682029557"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ann -&gt; TyDecl tyname uni ann)
-&gt; Kind ann -&gt; TyDecl tyname uni ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl tyname ann -&gt; Kind ann
forall tyname ann. TyVarDecl tyname ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#_tyVarDeclKind"
	><span class="hs-identifier hs-var"
	  >_tyVarDeclKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl tyname ann
</span
	><a href="#local-6989586621682029556"
	><span class="hs-identifier hs-var"
	  >v</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-670"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>PolyWrap uni fun ann -&gt; Quote (PolyWrap uni fun ann)
forall a. a -&gt; QuoteT Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PolyWrap uni fun ann -&gt; Quote (PolyWrap uni fun ann))
-&gt; PolyWrap uni fun ann -&gt; Quote (PolyWrap uni fun ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(forall (term :: * -&gt; *).
 TermLike term TyName Name uni fun =&gt;
 [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; PolyWrap uni fun ann
forall (uni :: * -&gt; *) fun ann.
(forall (term :: * -&gt; *).
 TermLike term TyName Name uni fun =&gt;
 [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; PolyWrap uni fun ann
</span
	><a href="PlutusCore.StdLib.Type.html#PolyWrap"
	><span class="hs-identifier hs-var"
	  >PolyWrap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((forall (term :: * -&gt; *).
  TermLike term TyName Name uni fun =&gt;
  [Type TyName uni ann] -&gt; term ann -&gt; term ann)
 -&gt; PolyWrap uni fun ann)
-&gt; (forall (term :: * -&gt; *).
    TermLike term TyName Name uni fun =&gt;
    [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; PolyWrap uni fun ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621682029563"
      ><span class="annot"
	><span class="annottext"
	  >[Type TyName uni ann]
</span
	  ><a href="#local-6989586621682029563"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-671"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621682029565"
      ><span class="annot"
	><span class="annottext"
	  >argVarsLen :: Int
</span
	  ><a href="#local-6989586621682029565"
	  ><span class="hs-identifier hs-var hs-var"
	    >argVarsLen</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029551"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-672"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621682029568"
      ><span class="annot"
	><span class="annottext"
	  >argsLen :: Int
</span
	  ><a href="#local-6989586621682029568"
	  ><span class="hs-identifier hs-var hs-var"
	    >argsLen</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann]
</span
	><a href="#local-6989586621682029563"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-673"
      ></span
      ><span
      >     </span
      ><span class="hs-keyword"
      >in</span
      ><span
      > </span
      ><span class="hs-keyword"
      >if</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621682029565"
	><span class="hs-identifier hs-var"
	  >argVarsLen</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621682029568"
	><span class="hs-identifier hs-var"
	  >argsLen</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-674"
      ></span
      ><span
      >          </span
      ><span class="hs-keyword"
      >then</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; term ann
-&gt; term ann
forall ann.
ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; term ann
-&gt; term ann
forall (term :: * -&gt; *) tyname name (uni :: * -&gt; *) fun ann.
TermLike term tyname name uni fun =&gt;
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; term ann
-&gt; term ann
</span
	><a href="PlutusCore.MkPlc.html#iWrap"
	><span class="hs-identifier hs-var"
	  >iWrap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029549"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029553"
	><span class="hs-identifier hs-var"
	  >pat1</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; term ann -&gt; term ann)
-&gt; ([TyDecl TyName uni ann] -&gt; Type TyName uni ann)
-&gt; [TyDecl TyName uni ann]
-&gt; term ann
-&gt; term ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyDecl TyName uni ann] -&gt; Type TyName uni ann
</span
	><a href="#local-6989586621682029554"
	><span class="hs-identifier hs-var"
	  >toSpine</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([TyDecl TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; [TyDecl TyName uni ann] -&gt; term ann -&gt; term ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyVarDecl TyName ann
 -&gt; Type TyName uni ann -&gt; TyDecl TyName uni ann)
-&gt; [TyVarDecl TyName ann]
-&gt; [Type TyName uni ann]
-&gt; [TyDecl TyName uni ann]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.List.html#zipWith"
	><span class="hs-identifier hs-var"
	  >zipWith</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
-&gt; Type TyName uni ann -&gt; TyDecl TyName uni ann
forall {tyname} {tyname} {uni :: * -&gt; *}.
TyVarDecl tyname ann
-&gt; Type tyname uni ann -&gt; TyDecl tyname uni ann
</span
	><a href="#local-6989586621682029555"
	><span class="hs-identifier hs-var"
	  >instVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029551"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann]
</span
	><a href="#local-6989586621682029563"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-675"
      ></span
      ><span
      >          </span
      ><span class="hs-keyword"
      >else</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>IndicesLengthsMismatchException -&gt; term ann -&gt; term ann
forall a e. Exception e =&gt; e -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Exception.html#throw"
	><span class="hs-identifier hs-var"
	  >throw</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(IndicesLengthsMismatchException -&gt; term ann -&gt; term ann)
-&gt; (TyName -&gt; IndicesLengthsMismatchException)
-&gt; TyName
-&gt; term ann
-&gt; term ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; TyName -&gt; IndicesLengthsMismatchException
</span
	><a href="PlutusCore.StdLib.Type.html#IndicesLengthsMismatchException"
	><span class="hs-identifier hs-var"
	  >IndicesLengthsMismatchException</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621682029565"
	><span class="hs-identifier hs-var"
	  >argVarsLen</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621682029568"
	><span class="hs-identifier hs-var"
	  >argsLen</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyName -&gt; term ann -&gt; term ann) -&gt; TyName -&gt; term ann -&gt; term ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029550"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-676"
      ></span
      ><span
      >
</span
      ><span id="line-677"
      ></span
      ><span class="hs-comment"
      >{- Note [Special cases]
The notes above describe how the general case is compiled, however for the 0-ary and 1-ary cases
there are more efficient compilation schemes.

Compiled generally, @fix0 (pat :: * -&gt; *)@ looks like this:

    ifix
        (\(rec :: (* -&gt; *) -&gt; *) (spine :: * -&gt; *) -&gt; spine (pat (rec (\(dat :: *) -&gt; dat))))
        (\(dat :: *) -&gt; dat)

A more efficient compilation scheme is

    ifix
        (\(rec :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) -&gt; f (rec f))
        pat

This is the one that we use in 'makeRecursiveType0'. Note however that 'makeRecursiveType*'
functions always receive the body of a pattern functor and not the pattern functor itself,
so in the 0-ary case we turn the body of the pattern functor into the pattern functor by
prepending a lambda binding a variable with the same name as that of the data type being
defined. Note also that the pattern functor of the resulting 'ifix' is always the same --
it's the index that differs.

Compiled generally, @fix1 (pat :: (k -&gt; *) -&gt; k -&gt; *) (arg :: *)@ looks like this:

    \(v :: k) -&gt;
        ifix
            (\(rec :: (* -&gt; *) -&gt; *) (spine :: * -&gt; *) -&gt;
                spine (pat (\(x :: v) -&gt; rec (\(dat :: k -&gt; *) -&gt; dat v))))
            (\(dat :: k -&gt; *) -&gt; dat v)

But we clearly don't need to represent a single type argument as a CPS-encoded spine,
because the only point of representing things like that is to get a single type argument out of
@n@ type arguments and when @n = 1@ no such tricks are needed.

So the encoding that we use is

    \(v :: k) -&gt; ifix pat v

And as in the 0-ary case we need to turn the body of a pattern functor into a pattern functor,
this time not only by prepending a lambda binding a variable with the same name as that of
the data type being defined, but also by prepending a lambda binding a variable representing the
index.
-}</span
      ><span
      >
</span
      ><span id="line-721"
      ></span
      ><span
      >
</span
      ><span id="line-722"
      ></span
      ><span class="hs-comment"
      >-- See Note [Special cases].</span
      ><span
      >
</span
      ><span id="line-723"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Construct a 'RecursiveType' by passing a 0-ary pattern functor to 'TyIFix' and 'IWrap'
/as an index/. -}</span
	></span
      ><span
      >
</span
      ><span id="line-725"
      ></span
      ><span id="local-6989586621682029354"
      ><span id="local-6989586621682029355"
	><span id="local-6989586621682029356"
	  ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType0"
	      ><span class="hs-identifier hs-type"
		>makeRecursiveType0</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-726"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >::</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029354"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-727"
	    ></span
	    ><span
	    >  </span
	    ><span class="annot"
	    ><span class="hs-comment"
	      >-- ^ An annotation placed everywhere we do not have annotations.</span
	      ></span
	    ><span
	    >
</span
	    ><span id="line-728"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >-&gt;</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Name.Unique.html#TyName"
	      ><span class="hs-identifier hs-type"
		>TyName</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-729"
	    ></span
	    ><span
	    >  </span
	    ><span class="annot"
	    ><span class="hs-comment"
	      >-- ^ The name of the data type being defined.</span
	      ></span
	    ><span
	    >
</span
	    ><span id="line-730"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >-&gt;</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Core.Type.html#Type"
	      ><span class="hs-identifier hs-type"
		>Type</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Name.Unique.html#TyName"
	      ><span class="hs-identifier hs-type"
		>TyName</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029355"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029354"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-731"
	    ></span
	    ><span
	    >  </span
	    ><span class="annot"
	    ><span class="hs-comment"
	      >-- ^ The body of the pattern functor.</span
	      ></span
	    ><span
	    >
</span
	    ><span id="line-732"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >-&gt;</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Quote.html#Quote"
	      ><span class="hs-identifier hs-type"
		>Quote</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="hs-special"
	    >(</span
	    ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	      ><span class="hs-identifier hs-type"
		>RecursiveType</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029355"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029356"
	      ><span class="hs-identifier hs-type"
		>fun</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029354"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span class="hs-special"
	    >)</span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-733"
      ></span
      ><span id="makeRecursiveType0"
      ><span class="annot"
	><span class="annottext"
	  >makeRecursiveType0 :: forall ann (uni :: * -&gt; *) fun.
ann
-&gt; TyName
-&gt; Type TyName uni ann
-&gt; Quote (RecursiveType uni fun ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType0"
	  ><span class="hs-identifier hs-var hs-var"
	    >makeRecursiveType0</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029581"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029581"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029582"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029582"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029583"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029583"
	  ><span class="hs-identifier hs-var"
	    >patBody0</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-734"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029584"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029584"
	  ><span class="hs-identifier hs-var"
	    >rec</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m TyName
</span
	><a href="PlutusCore.Quote.html#freshTyName"
	><span class="hs-identifier hs-var"
	  >freshTyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;rec&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-735"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029585"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029585"
	  ><span class="hs-identifier hs-var"
	    >f</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m TyName
</span
	><a href="PlutusCore.Quote.html#freshTyName"
	><span class="hs-identifier hs-var"
	  >freshTyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;f&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-736"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621682029586"
      ><span class="annot"
	><span class="annottext"
	  >argKind :: Kind ann
</span
	  ><a href="#local-6989586621682029586"
	  ><span class="hs-identifier hs-var hs-var"
	    >argKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#KindArrow"
	><span class="hs-identifier hs-var"
	  >KindArrow</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ann -&gt; Kind ann) -&gt; Kind ann -&gt; Kind ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-737"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029587"
      ><span class="annot"
	><span class="annottext"
	  >recKind :: Kind ann
</span
	  ><a href="#local-6989586621682029587"
	  ><span class="hs-identifier hs-var hs-var"
	    >recKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#KindArrow"
	><span class="hs-identifier hs-var"
	  >KindArrow</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029586"
	><span class="hs-identifier hs-var"
	  >argKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ann -&gt; Kind ann) -&gt; Kind ann -&gt; Kind ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-738"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029588"
      ><span class="annot"
	><span class="annottext"
	  >pat1 :: Type TyName uni ann
</span
	  ><a href="#local-6989586621682029588"
	  ><span class="hs-identifier hs-var hs-var"
	    >pat1</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-739"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029584"
	><span class="hs-identifier hs-var"
	  >rec</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029587"
	><span class="hs-identifier hs-var"
	  >recKind</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-740"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029585"
	><span class="hs-identifier hs-var"
	  >f</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029586"
	><span class="hs-identifier hs-var"
	  >argKind</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-741"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyApp"
	><span class="hs-identifier hs-var"
	  >TyApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; TyName -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyVar"
	><span class="hs-identifier hs-var"
	  >TyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029585"
	><span class="hs-identifier hs-var"
	  >f</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-742"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyApp"
	><span class="hs-identifier hs-var"
	  >TyApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; TyName -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyVar"
	><span class="hs-identifier hs-var"
	  >TyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029584"
	><span class="hs-identifier hs-var"
	  >rec</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-743"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; TyName -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyVar"
	><span class="hs-identifier hs-var"
	  >TyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029585"
	><span class="hs-identifier hs-var"
	  >f</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-744"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029589"
      ><span class="annot"
	><span class="annottext"
	  >arg :: Type TyName uni ann
</span
	  ><a href="#local-6989586621682029589"
	  ><span class="hs-identifier hs-var hs-var"
	    >arg</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029582"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029583"
	><span class="hs-identifier hs-var"
	  >patBody0</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-745"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- recType =</span
      ><span
      >
</span
      ><span id="line-746"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >--     ifix</span
      ><span
      >
</span
      ><span id="line-747"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >--         (\(rec :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) -&gt; f (rec f))</span
      ><span
      >
</span
      ><span id="line-748"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >--         (\(dataName :: *) -&gt; patBody0)</span
      ><span
      >
</span
      ><span id="line-749"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029590"
      ><span class="annot"
	><span class="annottext"
	  >recType :: Type TyName uni ann
</span
	  ><a href="#local-6989586621682029590"
	  ><span class="hs-identifier hs-var hs-var"
	    >recType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyIFix"
	><span class="hs-identifier hs-var"
	  >TyIFix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
forall {uni :: * -&gt; *}. Type TyName uni ann
</span
	><a href="#local-6989586621682029588"
	><span class="hs-identifier hs-var"
	  >pat1</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029589"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-750"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029595"
      ><span class="annot"
	><span class="annottext"
	  >wrap :: [a] -&gt; term ann -&gt; term ann
</span
	  ><a href="#local-6989586621682029595"
	  ><span class="hs-identifier hs-var hs-var"
	    >wrap</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029596"
      ><span class="annot"
	><span class="annottext"
	  >[a]
</span
	  ><a href="#local-6989586621682029596"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[a]
</span
	><a href="#local-6989586621682029596"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-751"
      ></span
      ><span
      >        </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; term ann
-&gt; term ann
forall ann.
ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; term ann
-&gt; term ann
forall (term :: * -&gt; *) tyname name (uni :: * -&gt; *) fun ann.
TermLike term tyname name uni fun =&gt;
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; term ann
-&gt; term ann
</span
	><a href="PlutusCore.MkPlc.html#iWrap"
	><span class="hs-identifier hs-var"
	  >iWrap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029581"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
forall {uni :: * -&gt; *}. Type TyName uni ann
</span
	><a href="#local-6989586621682029588"
	><span class="hs-identifier hs-var"
	  >pat1</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029589"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-752"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>[a]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>IndicesLengthsMismatchException -&gt; term ann -&gt; term ann
forall a e. Exception e =&gt; e -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Exception.html#throw"
	><span class="hs-identifier hs-var"
	  >throw</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(IndicesLengthsMismatchException -&gt; term ann -&gt; term ann)
-&gt; (TyName -&gt; IndicesLengthsMismatchException)
-&gt; TyName
-&gt; term ann
-&gt; term ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; TyName -&gt; IndicesLengthsMismatchException
</span
	><a href="PlutusCore.StdLib.Type.html#IndicesLengthsMismatchException"
	><span class="hs-identifier hs-var"
	  >IndicesLengthsMismatchException</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>0</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[a] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[a]
</span
	><a href="#local-6989586621682029596"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyName -&gt; term ann -&gt; term ann) -&gt; TyName -&gt; term ann -&gt; term ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029582"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-753"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann)
forall a. a -&gt; QuoteT Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann))
-&gt; RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; (forall (term :: * -&gt; *).
    TermLike term TyName Name uni fun =&gt;
    [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; RecursiveType uni fun ann
forall (uni :: * -&gt; *) fun ann.
Type TyName uni ann
-&gt; (forall (term :: * -&gt; *).
    TermLike term TyName Name uni fun =&gt;
    [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; RecursiveType uni fun ann
</span
	><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	><span class="hs-identifier hs-var"
	  >RecursiveType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029590"
	><span class="hs-identifier hs-var"
	  >recType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann] -&gt; term ann -&gt; term ann
forall (term :: * -&gt; *).
TermLike term TyName Name uni fun =&gt;
[Type TyName uni ann] -&gt; term ann -&gt; term ann
forall {term :: * -&gt; *} {name} {fun} {a}.
TermLike term TyName name uni fun =&gt;
[a] -&gt; term ann -&gt; term ann
</span
	><a href="#local-6989586621682029595"
	><span class="hs-identifier hs-var"
	  >wrap</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-754"
      ></span
      ><span
      >
</span
      ><span id="line-755"
      ></span
      ><span class="hs-comment"
      >-- See Note [Special cases].</span
      ><span
      >
</span
      ><span id="line-756"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Construct a 'RecursiveType' by passing a 1-ary pattern functor to 'TyIFix' and 'IWrap'.</span
	></span
      ><span
      >
</span
      ><span id="line-757"
      ></span
      ><span id="local-6989586621682029366"
      ><span id="local-6989586621682029367"
	><span id="local-6989586621682029368"
	  ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType1"
	      ><span class="hs-identifier hs-type"
		>makeRecursiveType1</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-758"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >::</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029366"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-759"
	    ></span
	    ><span
	    >  </span
	    ><span class="annot"
	    ><span class="hs-comment"
	      >-- ^ An annotation placed everywhere we do not have annotations.</span
	      ></span
	    ><span
	    >
</span
	    ><span id="line-760"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >-&gt;</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Name.Unique.html#TyName"
	      ><span class="hs-identifier hs-type"
		>TyName</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-761"
	    ></span
	    ><span
	    >  </span
	    ><span class="annot"
	    ><span class="hs-comment"
	      >-- ^ The name of the data type being defined.</span
	      ></span
	    ><span
	    >
</span
	    ><span id="line-762"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >-&gt;</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Core.Type.html#TyVarDecl"
	      ><span class="hs-identifier hs-type"
		>TyVarDecl</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Name.Unique.html#TyName"
	      ><span class="hs-identifier hs-type"
		>TyName</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029366"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-763"
	    ></span
	    ><span
	    >  </span
	    ><span class="annot"
	    ><span class="hs-comment"
	      >-- ^ The index type variable.</span
	      ></span
	    ><span
	    >
</span
	    ><span id="line-764"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >-&gt;</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Core.Type.html#Type"
	      ><span class="hs-identifier hs-type"
		>Type</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Name.Unique.html#TyName"
	      ><span class="hs-identifier hs-type"
		>TyName</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029367"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029366"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span
	    >
</span
	    ><span id="line-765"
	    ></span
	    ><span
	    >  </span
	    ><span class="annot"
	    ><span class="hs-comment"
	      >-- ^ The body of the pattern functor.</span
	      ></span
	    ><span
	    >
</span
	    ><span id="line-766"
	    ></span
	    ><span
	    >  </span
	    ><span class="hs-glyph"
	    >-&gt;</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.Quote.html#Quote"
	      ><span class="hs-identifier hs-type"
		>Quote</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="hs-special"
	    >(</span
	    ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	      ><span class="hs-identifier hs-type"
		>RecursiveType</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029367"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029368"
	      ><span class="hs-identifier hs-type"
		>fun</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029366"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span class="hs-special"
	    >)</span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-767"
      ></span
      ><span id="makeRecursiveType1"
      ><span class="annot"
	><span class="annottext"
	  >makeRecursiveType1 :: forall ann (uni :: * -&gt; *) fun.
ann
-&gt; TyName
-&gt; TyVarDecl TyName ann
-&gt; Type TyName uni ann
-&gt; Quote (RecursiveType uni fun ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType1"
	  ><span class="hs-identifier hs-var hs-var"
	    >makeRecursiveType1</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029604"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029604"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029605"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029605"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029606"
      ><span class="annot"
	><span class="annottext"
	  >TyVarDecl TyName ann
</span
	  ><a href="#local-6989586621682029606"
	  ><span class="hs-identifier hs-var"
	    >argVar</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029607"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029607"
	  ><span class="hs-identifier hs-var"
	    >patBody1</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-768"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621682029608"
      ><span class="annot"
	><span class="annottext"
	  >varName :: TyName
</span
	  ><a href="#local-6989586621682029608"
	  ><span class="hs-identifier hs-var hs-var"
	    >varName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann -&gt; TyName
forall tyname ann. TyVarDecl tyname ann -&gt; tyname
</span
	><a href="PlutusCore.Core.Type.html#_tyVarDeclName"
	><span class="hs-identifier hs-var"
	  >_tyVarDeclName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><a href="#local-6989586621682029606"
	><span class="hs-identifier hs-var"
	  >argVar</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-769"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621682029610"
      ><span class="annot"
	><span class="annottext"
	  >varKind :: Kind ann
</span
	  ><a href="#local-6989586621682029610"
	  ><span class="hs-identifier hs-var hs-var"
	    >varKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann -&gt; Kind ann
forall tyname ann. TyVarDecl tyname ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#_tyVarDeclKind"
	><span class="hs-identifier hs-var"
	  >_tyVarDeclKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><a href="#local-6989586621682029606"
	><span class="hs-identifier hs-var"
	  >argVar</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-770"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029611"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029611"
	  ><span class="hs-identifier hs-var"
	    >varName'</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; TyName -&gt; m TyName
</span
	><a href="PlutusCore.Quote.html#freshenTyName"
	><span class="hs-identifier hs-var"
	  >freshenTyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029608"
	><span class="hs-identifier hs-var"
	  >varName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-771"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      >
</span
      ><span id="line-772"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621682029613"
      ><span class="annot"
	><span class="annottext"
	  >recKind :: Kind ann
</span
	  ><a href="#local-6989586621682029613"
	  ><span class="hs-identifier hs-var hs-var"
	    >recKind</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#KindArrow"
	><span class="hs-identifier hs-var"
	  >KindArrow</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029604"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029610"
	><span class="hs-identifier hs-var"
	  >varKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ann -&gt; Kind ann) -&gt; Kind ann -&gt; Kind ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Kind ann
forall ann. ann -&gt; Kind ann
</span
	><a href="PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029604"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-773"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621682029614"
      ><span class="annot"
	><span class="annottext"
	  >pat1 :: Type TyName uni ann
</span
	  ><a href="#local-6989586621682029614"
	  ><span class="hs-identifier hs-var hs-var"
	    >pat1</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029604"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029605"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029613"
	><span class="hs-identifier hs-var"
	  >recKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029604"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029608"
	><span class="hs-identifier hs-var"
	  >varName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029610"
	><span class="hs-identifier hs-var"
	  >varKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029607"
	><span class="hs-identifier hs-var"
	  >patBody1</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-774"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- recType = \(v :: k) -&gt; ifix (\(dataName :: k -&gt; *) (v :: k) -&gt; patBody1) v</span
      ><span
      >
</span
      ><span id="line-775"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621682029615"
      ><span class="annot"
	><span class="annottext"
	  >recType :: Type TyName uni ann
</span
	  ><a href="#local-6989586621682029615"
	  ><span class="hs-identifier hs-var hs-var"
	    >recType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName -&gt; Kind ann -&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyLam"
	><span class="hs-identifier hs-var"
	  >TyLam</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029604"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029611"
	><span class="hs-identifier hs-var"
	  >varName'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621682029610"
	><span class="hs-identifier hs-var"
	  >varKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; (Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyIFix"
	><span class="hs-identifier hs-var"
	  >TyIFix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029604"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029614"
	><span class="hs-identifier hs-var"
	  >pat1</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ann)
-&gt; Type TyName uni ann -&gt; Type TyName uni ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; TyName -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span
	><a href="PlutusCore.Core.Type.html#TyVar"
	><span class="hs-identifier hs-var"
	  >TyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029604"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029611"
	><span class="hs-identifier hs-var"
	  >varName'</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-776"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621682029620"
      ><span class="annot"
	><span class="annottext"
	  >wrap :: [Type TyName uni ann] -&gt; term ann -&gt; term ann
</span
	  ><a href="#local-6989586621682029620"
	  ><span class="hs-identifier hs-var hs-var"
	    >wrap</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029621"
      ><span class="annot"
	><span class="annottext"
	  >[Type TyName uni ann]
</span
	  ><a href="#local-6989586621682029621"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann]
</span
	><a href="#local-6989586621682029621"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-777"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >[</span
      ><span id="local-6989586621682029622"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029622"
	  ><span class="hs-identifier hs-var"
	    >arg</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; term ann
-&gt; term ann
forall ann.
ann
-&gt; Type TyName uni ann
-&gt; Type TyName uni ann
-&gt; term ann
-&gt; term ann
forall (term :: * -&gt; *) tyname name (uni :: * -&gt; *) fun ann.
TermLike term tyname name uni fun =&gt;
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; term ann
-&gt; term ann
</span
	><a href="PlutusCore.MkPlc.html#iWrap"
	><span class="hs-identifier hs-var"
	  >iWrap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029604"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029614"
	><span class="hs-identifier hs-var"
	  >pat1</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029622"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-778"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>IndicesLengthsMismatchException -&gt; term ann -&gt; term ann
forall a e. Exception e =&gt; e -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Exception.html#throw"
	><span class="hs-identifier hs-var"
	  >throw</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(IndicesLengthsMismatchException -&gt; term ann -&gt; term ann)
-&gt; (TyName -&gt; IndicesLengthsMismatchException)
-&gt; TyName
-&gt; term ann
-&gt; term ann
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; TyName -&gt; IndicesLengthsMismatchException
</span
	><a href="PlutusCore.StdLib.Type.html#IndicesLengthsMismatchException"
	><span class="hs-identifier hs-var"
	  >IndicesLengthsMismatchException</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann]
</span
	><a href="#local-6989586621682029621"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyName -&gt; term ann -&gt; term ann) -&gt; TyName -&gt; term ann -&gt; term ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029605"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-779"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann)
forall a. a -&gt; QuoteT Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann))
-&gt; RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; (forall (term :: * -&gt; *).
    TermLike term TyName Name uni fun =&gt;
    [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; RecursiveType uni fun ann
forall (uni :: * -&gt; *) fun ann.
Type TyName uni ann
-&gt; (forall (term :: * -&gt; *).
    TermLike term TyName Name uni fun =&gt;
    [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; RecursiveType uni fun ann
</span
	><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	><span class="hs-identifier hs-var"
	  >RecursiveType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029615"
	><span class="hs-identifier hs-var"
	  >recType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann] -&gt; term ann -&gt; term ann
forall (term :: * -&gt; *).
TermLike term TyName Name uni fun =&gt;
[Type TyName uni ann] -&gt; term ann -&gt; term ann
forall {term :: * -&gt; *} {name} {fun}.
TermLike term TyName name uni fun =&gt;
[Type TyName uni ann] -&gt; term ann -&gt; term ann
</span
	><a href="#local-6989586621682029620"
	><span class="hs-identifier hs-var"
	  >wrap</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-780"
      ></span
      ><span
      >
</span
      ><span id="line-781"
      ></span
      ><span class="hs-comment"
      >-- See all the Notes above.</span
      ><span
      >
</span
      ><span id="line-782"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Construct a 'RecursiveType' by encoding an n-ary pattern functor as the corresponding 1-ary one
and passing it to 'TyIFix' and 'IWrap'. @n@ type arguments get packaged together as a CPS-encoded
spine. -}</span
	></span
      ><span
      >
</span
      ><span id="line-785"
      ></span
      ><span id="local-6989586621682029379"
      ><span id="local-6989586621682029380"
	><span id="local-6989586621682029381"
	  ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#makeRecursiveTypeN"
	      ><span class="hs-identifier hs-type"
		>makeRecursiveTypeN</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="hs-glyph"
	    >::</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#FromDataPieces"
	      ><span class="hs-identifier hs-type"
		>FromDataPieces</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029379"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029380"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="hs-special"
	    >(</span
	    ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	      ><span class="hs-identifier hs-type"
		>RecursiveType</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029379"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029381"
	      ><span class="hs-identifier hs-type"
		>fun</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029380"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span class="hs-special"
	    >)</span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-786"
      ></span
      ><span id="makeRecursiveTypeN"
      ><span class="annot"
	><span class="annottext"
	  >makeRecursiveTypeN :: forall (uni :: * -&gt; *) ann fun.
FromDataPieces uni ann (RecursiveType uni fun ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#makeRecursiveTypeN"
	  ><span class="hs-identifier hs-var hs-var"
	    >makeRecursiveTypeN</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029630"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029630"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029631"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029631"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029632"
      ><span class="annot"
	><span class="annottext"
	  >[TyVarDecl TyName ann]
</span
	  ><a href="#local-6989586621682029632"
	  ><span class="hs-identifier hs-var"
	    >argVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029633"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029633"
	  ><span class="hs-identifier hs-var"
	    >patBodyN</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-787"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621682029634"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621682029634"
	  ><span class="hs-identifier hs-var"
	    >recType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>FromDataPieces uni ann (Type TyName uni ann)
forall (uni :: * -&gt; *) ann.
FromDataPieces uni ann (Type TyName uni ann)
</span
	><a href="PlutusCore.StdLib.Type.html#getPackedType"
	><span class="hs-identifier hs-var"
	  >getPackedType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029630"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029631"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029632"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029633"
	><span class="hs-identifier hs-var"
	  >patBodyN</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-788"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusCore.StdLib.Type.html#PolyWrap"
	><span class="hs-identifier hs-type"
	  >PolyWrap</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621682029635"
      ><span class="annot"
	><span class="annottext"
	  >forall (term :: * -&gt; *).
TermLike term TyName Name uni fun =&gt;
[Type TyName uni ann] -&gt; term ann -&gt; term ann
</span
	  ><a href="#local-6989586621682029635"
	  ><span class="hs-identifier hs-var"
	    >wrap</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>FromDataPieces uni ann (PolyWrap uni fun ann)
forall (uni :: * -&gt; *) ann fun.
FromDataPieces uni ann (PolyWrap uni fun ann)
</span
	><a href="PlutusCore.StdLib.Type.html#getPackedWrap"
	><span class="hs-identifier hs-var"
	  >getPackedWrap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029630"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029631"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029632"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029633"
	><span class="hs-identifier hs-var"
	  >patBodyN</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-789"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann)
forall a. a -&gt; QuoteT Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann))
-&gt; RecursiveType uni fun ann -&gt; Quote (RecursiveType uni fun ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; (forall (term :: * -&gt; *).
    TermLike term TyName Name uni fun =&gt;
    [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; RecursiveType uni fun ann
forall (uni :: * -&gt; *) fun ann.
Type TyName uni ann
-&gt; (forall (term :: * -&gt; *).
    TermLike term TyName Name uni fun =&gt;
    [Type TyName uni ann] -&gt; term ann -&gt; term ann)
-&gt; RecursiveType uni fun ann
</span
	><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	><span class="hs-identifier hs-var"
	  >RecursiveType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621682029634"
	><span class="hs-identifier hs-var"
	  >recType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann] -&gt; term ann -&gt; term ann
forall (term :: * -&gt; *).
TermLike term TyName Name uni fun =&gt;
[Type TyName uni ann] -&gt; term ann -&gt; term ann
</span
	><a href="#local-6989586621682029635"
	><span class="hs-identifier hs-var"
	  >wrap</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-790"
      ></span
      ><span
      >
</span
      ><span id="line-791"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Construct a 'RecursiveType' out of its name, variables bound in its pattern functor
and the body of the pattern functor. The 0- and 1-ary pattern functors are special-cased,
while in the general case the pattern functor and type arguments get encoded into a 1-ary
form first. -}</span
	></span
      ><span
      >
</span
      ><span id="line-795"
      ></span
      ><span id="local-6989586621682029638"
      ><span id="local-6989586621682029639"
	><span id="local-6989586621682029640"
	  ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType"
	      ><span class="hs-identifier hs-type"
		>makeRecursiveType</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="hs-glyph"
	    >::</span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#FromDataPieces"
	      ><span class="hs-identifier hs-type"
		>FromDataPieces</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029638"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029639"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="hs-special"
	    >(</span
	    ><span class="annot"
	    ><a href="PlutusCore.StdLib.Type.html#RecursiveType"
	      ><span class="hs-identifier hs-type"
		>RecursiveType</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029638"
	      ><span class="hs-identifier hs-type"
		>uni</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029640"
	      ><span class="hs-identifier hs-type"
		>fun</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621682029639"
	      ><span class="hs-identifier hs-type"
		>ann</span
		></a
	      ></span
	    ><span class="hs-special"
	    >)</span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-796"
      ></span
      ><span id="makeRecursiveType"
      ><span class="annot"
	><span class="annottext"
	  >makeRecursiveType :: forall (uni :: * -&gt; *) ann fun.
FromDataPieces uni ann (RecursiveType uni fun ann)
</span
	  ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType"
	  ><span class="hs-identifier hs-var hs-var"
	    >makeRecursiveType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029641"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029641"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029642"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029642"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName
-&gt; Type TyName uni ann
-&gt; Quote (RecursiveType uni fun ann)
forall ann (uni :: * -&gt; *) fun.
ann
-&gt; TyName
-&gt; Type TyName uni ann
-&gt; Quote (RecursiveType uni fun ann)
</span
	><a href="PlutusCore.StdLib.Type.html#makeRecursiveType0"
	><span class="hs-identifier hs-var"
	  >makeRecursiveType0</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029641"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029642"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-797"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType"
	><span class="hs-identifier hs-var"
	  >makeRecursiveType</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621682029643"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029643"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029644"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029644"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span id="local-6989586621682029645"
      ><span class="annot"
	><span class="annottext"
	  >TyVarDecl TyName ann
</span
	  ><a href="#local-6989586621682029645"
	  ><span class="hs-identifier hs-var"
	    >argVar</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; TyName
-&gt; TyVarDecl TyName ann
-&gt; Type TyName uni ann
-&gt; Quote (RecursiveType uni fun ann)
forall ann (uni :: * -&gt; *) fun.
ann
-&gt; TyName
-&gt; TyVarDecl TyName ann
-&gt; Type TyName uni ann
-&gt; Quote (RecursiveType uni fun ann)
</span
	><a href="PlutusCore.StdLib.Type.html#makeRecursiveType1"
	><span class="hs-identifier hs-var"
	  >makeRecursiveType1</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029643"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029644"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><a href="#local-6989586621682029645"
	><span class="hs-identifier hs-var"
	  >argVar</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-798"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.StdLib.Type.html#makeRecursiveType"
	><span class="hs-identifier hs-var"
	  >makeRecursiveType</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621682029646"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621682029646"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029647"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621682029647"
	  ><span class="hs-identifier hs-var"
	    >dataName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621682029648"
      ><span class="annot"
	><span class="annottext"
	  >[TyVarDecl TyName ann]
</span
	  ><a href="#local-6989586621682029648"
	  ><span class="hs-identifier hs-var"
	    >argVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>FromDataPieces uni ann (RecursiveType uni fun ann)
forall (uni :: * -&gt; *) ann fun.
FromDataPieces uni ann (RecursiveType uni fun ann)
</span
	><a href="PlutusCore.StdLib.Type.html#makeRecursiveTypeN"
	><span class="hs-identifier hs-var"
	  >makeRecursiveTypeN</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621682029646"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621682029647"
	><span class="hs-identifier hs-var"
	  >dataName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621682029648"
	><span class="hs-identifier hs-var"
	  >argVars</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-799"
      ></span
      ></pre
    ></body
  ></html
>
