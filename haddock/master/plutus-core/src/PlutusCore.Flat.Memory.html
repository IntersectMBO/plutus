<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><link rel="stylesheet" type="text/css" href="style.css"
     /><script type="text/javascript" src="highlight.js"
    ></script
    ></head
  ><body
  ><pre
    ><span class="hs-pragma"
      >{-# LANGUAGE BangPatterns  #-}</span
      ><span
      >
</span
      ><span id="line-2"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE MagicHash     #-}</span
      ><span
      >
</span
      ><span id="line-3"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TypeFamilies  #-}</span
      ><span
      >
</span
      ><span id="line-4"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE UnboxedTuples #-}</span
      ><span
      >
</span
      ><span id="line-5"
      ></span
      ><span
      >
</span
      ><span id="line-6"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- |
Memory access primitives.

Includes code from the [store-core](https://hackage.haskell.org/package/store-core) package.
-}</span
	></span
      ><span
      >
</span
      ><span id="line-11"
      ></span
      ><span class="hs-keyword"
      >module</span
      ><span
      > </span
      ><span class="hs-identifier"
      >PlutusCore.Flat.Memory</span
      ><span
      >
</span
      ><span id="line-12"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#chunksToByteString"
	><span class="hs-identifier"
	  >chunksToByteString</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-13"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#chunksToByteArray"
	><span class="hs-identifier"
	  >chunksToByteArray</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-14"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Array.Byte.html#ByteArray"
	><span class="hs-identifier"
	  >ByteArray</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-15"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#pokeByteArray"
	><span class="hs-identifier"
	  >pokeByteArray</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-16"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#pokeByteString"
	><span class="hs-identifier"
	  >pokeByteString</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-17"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#unsafeCreateUptoN%27"
	><span class="hs-identifier"
	  >unsafeCreateUptoN'</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-18"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#minusPtr"
	><span class="hs-identifier"
	  >minusPtr</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-19"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#peekByteString"
	><span class="hs-identifier"
	  >peekByteString</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-20"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-21"
      ></span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-22"
      ></span
      ><span
      >
</span
      ><span id="line-23"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Monad.html"
	><span class="hs-identifier"
	  >Control.Monad</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Monad.html#foldM_"
	><span class="hs-identifier"
	  >foldM_</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#when"
	><span class="hs-identifier"
	  >when</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-24"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/primitive-0.9.1.0/docs/src/Control.Monad.Primitive.html"
	><span class="hs-identifier"
	  >Control.Monad.Primitive</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/primitive-0.9.1.0/docs/src/Control.Monad.Primitive.html#PrimMonad"
	><span class="hs-identifier"
	  >PrimMonad</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-25"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.html"
	><span class="hs-identifier"
	  >Data.ByteString</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>B</span
	></span
      ><span
      >
</span
      ><span id="line-26"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.html"
	><span class="hs-identifier"
	  >Data.ByteString.Internal</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>BS</span
	></span
      ><span
      >
</span
      ><span id="line-27"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/primitive-0.9.1.0/docs/src/Data.Primitive.ByteArray.html"
	><span class="hs-identifier"
	  >Data.Primitive.ByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Array.Byte.html#ByteArray"
	><span class="hs-identifier"
	  >ByteArray</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html#ByteArray%23"
	><span class="hs-identifier"
	  >ByteArray#</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Array.Byte.html#MutableByteArray"
	><span class="hs-identifier"
	  >MutableByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/primitive-0.9.1.0/docs/src/Data.Primitive.ByteArray.html#newByteArray"
	><span class="hs-identifier"
	  >newByteArray</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-28"
      ></span
      ><span
      >                                 </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/primitive-0.9.1.0/docs/src/Data.Primitive.ByteArray.html#unsafeFreezeByteArray"
	><span class="hs-identifier"
	  >unsafeFreezeByteArray</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-29"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Foreign.html"
	><span class="hs-identifier"
	  >Foreign</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier"
	  >Ptr</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	><span class="hs-identifier"
	  >Word8</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#minusPtr"
	><span class="hs-identifier"
	  >minusPtr</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#plusPtr"
	><span class="hs-identifier"
	  >plusPtr</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.ForeignPtr.html#withForeignPtr"
	><span class="hs-identifier"
	  >withForeignPtr</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-30"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Foreign.Marshal.Utils.html"
	><span class="hs-identifier"
	  >Foreign.Marshal.Utils</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Foreign.Marshal.Utils.html#copyBytes"
	><span class="hs-identifier"
	  >copyBytes</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-31"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html"
	><span class="hs-identifier"
	  >GHC.Prim</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html#copyAddrToByteArray%23"
	><span class="hs-identifier"
	  >copyAddrToByteArray#</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html#copyByteArrayToAddr%23"
	><span class="hs-identifier"
	  >copyByteArrayToAddr#</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-32"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html"
	><span class="hs-identifier"
	  >GHC.Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-33"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html"
	><span class="hs-identifier"
	  >GHC.Types</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	><span class="hs-identifier"
	  >IO</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier"
	  >Int</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-34"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/System.IO.Unsafe.html"
	><span class="hs-identifier"
	  >System.IO.Unsafe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.IO.Unsafe.html#unsafeDupablePerformIO"
	><span class="hs-identifier"
	  >unsafeDupablePerformIO</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.IO.Unsafe.html#unsafePerformIO"
	><span class="hs-identifier"
	  >unsafePerformIO</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-35"
      ></span
      ><span
      >
</span
      ><span id="line-36"
      ></span
      ><span id="local-6989586621679100471"
      ><span class="annot"
	><a href="PlutusCore.Flat.Memory.html#unsafeCreateUptoN%27"
	  ><span class="hs-identifier hs-type"
	    >unsafeCreateUptoN'</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	  ><span class="hs-identifier hs-type"
	    >Int</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	  ><span class="hs-identifier hs-type"
	    >Ptr</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	  ><span class="hs-identifier hs-type"
	    >Word8</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	  ><span class="hs-identifier hs-type"
	    >IO</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	  ><span class="hs-identifier hs-type"
	    >Int</span
	    ></a
	  ></span
	><span class="hs-special"
	>,</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679100471"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span class="hs-special"
	>)</span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#ByteString"
	  ><span class="hs-identifier hs-type"
	    >BS.ByteString</span
	    ></a
	  ></span
	><span class="hs-special"
	>,</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679100471"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	></span
      ><span
      >
</span
      ><span id="line-37"
      ></span
      ><span id="unsafeCreateUptoN%27"
      ><span class="annot"
	><span class="annottext"
	  >unsafeCreateUptoN' :: forall a. Int -&gt; (Ptr Word8 -&gt; IO (Int, a)) -&gt; (ByteString, a)
</span
	  ><a href="PlutusCore.Flat.Memory.html#unsafeCreateUptoN%27"
	  ><span class="hs-identifier hs-var hs-var"
	    >unsafeCreateUptoN'</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100563"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100563"
	  ><span class="hs-identifier hs-var"
	    >l</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100564"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8 -&gt; IO (Int, a)
</span
	  ><a href="#local-6989586621679100564"
	  ><span class="hs-identifier hs-var"
	    >f</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>IO (ByteString, a) -&gt; (ByteString, a)
forall a. IO a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.IO.Unsafe.html#unsafeDupablePerformIO"
	><span class="hs-identifier hs-var"
	  >unsafeDupablePerformIO</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; (Ptr Word8 -&gt; IO (Int, a)) -&gt; IO (ByteString, a)
forall a. Int -&gt; (Ptr Word8 -&gt; IO (Int, a)) -&gt; IO (ByteString, a)
</span
	><a href="PlutusCore.Flat.Memory.html#createUptoN%27"
	><span class="hs-identifier hs-var"
	  >createUptoN'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100563"
	><span class="hs-identifier hs-var"
	  >l</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; IO (Int, a)
</span
	><a href="#local-6989586621679100564"
	><span class="hs-identifier hs-var"
	  >f</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-38"
      ></span
      ><span class="hs-pragma"
      >{-# INLINE</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#unsafeCreateUptoN%27"
	><span class="hs-pragma hs-type"
	  >unsafeCreateUptoN'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-pragma"
      >#-}</span
      ><span
      >
</span
      ><span id="line-39"
      ></span
      ><span
      >
</span
      ><span id="line-40"
      ></span
      ><span id="local-6989586621679100475"
      ><span class="annot"
	><a href="PlutusCore.Flat.Memory.html#createUptoN%27"
	  ><span class="hs-identifier hs-type"
	    >createUptoN'</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	  ><span class="hs-identifier hs-type"
	    >Int</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	  ><span class="hs-identifier hs-type"
	    >Ptr</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	  ><span class="hs-identifier hs-type"
	    >Word8</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	  ><span class="hs-identifier hs-type"
	    >IO</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	  ><span class="hs-identifier hs-type"
	    >Int</span
	    ></a
	  ></span
	><span class="hs-special"
	>,</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679100475"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span class="hs-special"
	>)</span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	  ><span class="hs-identifier hs-type"
	    >IO</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#ByteString"
	  ><span class="hs-identifier hs-type"
	    >BS.ByteString</span
	    ></a
	  ></span
	><span class="hs-special"
	>,</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679100475"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	></span
      ><span
      >
</span
      ><span id="line-41"
      ></span
      ><span id="createUptoN%27"
      ><span class="annot"
	><span class="annottext"
	  >createUptoN' :: forall a. Int -&gt; (Ptr Word8 -&gt; IO (Int, a)) -&gt; IO (ByteString, a)
</span
	  ><a href="PlutusCore.Flat.Memory.html#createUptoN%27"
	  ><span class="hs-identifier hs-var hs-var"
	    >createUptoN'</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100579"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100579"
	  ><span class="hs-identifier hs-var"
	    >l</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100580"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8 -&gt; IO (Int, a)
</span
	  ><a href="#local-6989586621679100580"
	  ><span class="hs-identifier hs-var"
	    >f</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-42"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679100581"
      ><span class="annot"
	><span class="annottext"
	  >ForeignPtr Word8
</span
	  ><a href="#local-6989586621679100581"
	  ><span class="hs-identifier hs-var"
	    >fp</span
	    ></a
	  ></span
	></span
      ><span
      >        </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; IO (ForeignPtr Word8)
forall a. Int -&gt; IO (ForeignPtr a)
</span
	><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#mallocByteString"
	><span class="hs-identifier hs-var"
	  >BS.mallocByteString</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100579"
	><span class="hs-identifier hs-var"
	  >l</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-43"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679100583"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100583"
	  ><span class="hs-identifier hs-var"
	    >l'</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679100584"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679100584"
	  ><span class="hs-identifier hs-var"
	    >res</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ForeignPtr Word8 -&gt; (Ptr Word8 -&gt; IO (Int, a)) -&gt; IO (Int, a)
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.ForeignPtr.html#withForeignPtr"
	><span class="hs-identifier hs-var"
	  >withForeignPtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ForeignPtr Word8
</span
	><a href="#local-6989586621679100581"
	><span class="hs-identifier hs-var"
	  >fp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Ptr Word8 -&gt; IO (Int, a)) -&gt; IO (Int, a))
-&gt; (Ptr Word8 -&gt; IO (Int, a)) -&gt; IO (Int, a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679100585"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100585"
	  ><span class="hs-identifier hs-var"
	    >p</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; IO (Int, a)
</span
	><a href="#local-6989586621679100580"
	><span class="hs-identifier hs-var"
	  >f</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100585"
	><span class="hs-identifier hs-var"
	  >p</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-44"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >--print (unwords [&quot;Buffer allocated:&quot;,show l,&quot;bytes, used:&quot;,show l',&quot;bytes&quot;])</span
      ><span
      >
</span
      ><span id="line-45"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#when"
	><span class="hs-identifier hs-var"
	  >when</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100583"
	><span class="hs-identifier hs-var"
	  >l'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3E"
	><span class="hs-operator hs-var"
	  >&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100579"
	><span class="hs-identifier hs-var"
	  >l</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Char] -&gt; IO ()
forall a. HasCallStack =&gt; [Char] -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Err.html#error"
	><span class="hs-identifier hs-var"
	  >error</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-46"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[[Char]] -&gt; [Char]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#unwords"
	><span class="hs-identifier hs-var"
	  >unwords</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-47"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>[Char]
</span
	><span class="hs-string"
	>&quot;Buffer overflow, allocated:&quot;</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Show.html#show"
	><span class="hs-identifier hs-var"
	  >show</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100579"
	><span class="hs-identifier hs-var"
	  >l</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Char]
</span
	><span class="hs-string"
	>&quot;bytes, used:&quot;</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Show.html#show"
	><span class="hs-identifier hs-var"
	  >show</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100583"
	><span class="hs-identifier hs-var"
	  >l'</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Char]
</span
	><span class="hs-string"
	>&quot;bytes&quot;</span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-48"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-49"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>(ByteString, a) -&gt; IO (ByteString, a)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span
	><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#PS"
	><span class="hs-identifier hs-var"
	  >BS.PS</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ForeignPtr Word8
</span
	><a href="#local-6989586621679100581"
	><span class="hs-identifier hs-var"
	  >fp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>0</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100583"
	><span class="hs-identifier hs-var"
	  >l'</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679100584"
	><span class="hs-identifier hs-var"
	  >res</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-comment"
      >-- , minusPtr l')</span
      ><span
      >
</span
      ><span id="line-50"
      ></span
      ><span class="hs-pragma"
      >{-# INLINE</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#createUptoN%27"
	><span class="hs-pragma hs-type"
	  >createUptoN'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-pragma"
      >#-}</span
      ><span
      >
</span
      ><span id="line-51"
      ></span
      ><span
      >
</span
      ><span id="line-52"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- |Copy bytestring to given pointer, returns new pointer</span
	></span
      ><span
      >
</span
      ><span id="line-53"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#pokeByteString"
	><span class="hs-identifier hs-type"
	  >pokeByteString</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#ByteString"
	><span class="hs-identifier hs-type"
	  >B.ByteString</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	><span class="hs-identifier hs-type"
	  >Word8</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	><span class="hs-identifier hs-type"
	  >IO</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	><span class="hs-identifier hs-type"
	  >Word8</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-54"
      ></span
      ><span id="pokeByteString"
      ><span class="annot"
	><span class="annottext"
	  >pokeByteString :: ByteString -&gt; Ptr Word8 -&gt; IO (Ptr Word8)
</span
	  ><a href="PlutusCore.Flat.Memory.html#pokeByteString"
	  ><span class="hs-identifier hs-var hs-var"
	    >pokeByteString</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#PS"
	><span class="hs-identifier hs-type"
	  >BS.PS</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679100591"
      ><span class="annot"
	><span class="annottext"
	  >ForeignPtr Word8
</span
	  ><a href="#local-6989586621679100591"
	  ><span class="hs-identifier hs-var"
	    >foreignPointer</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100592"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100592"
	  ><span class="hs-identifier hs-var"
	    >sourceOffset</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100593"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100593"
	  ><span class="hs-identifier hs-var"
	    >sourceLength</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621679100594"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100594"
	  ><span class="hs-identifier hs-var"
	    >destPointer</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-55"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-56"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>ForeignPtr Word8 -&gt; (Ptr Word8 -&gt; IO ()) -&gt; IO ()
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.ForeignPtr.html#withForeignPtr"
	><span class="hs-identifier hs-var"
	  >withForeignPtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ForeignPtr Word8
</span
	><a href="#local-6989586621679100591"
	><span class="hs-identifier hs-var"
	  >foreignPointer</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Ptr Word8 -&gt; IO ()) -&gt; IO ()) -&gt; (Ptr Word8 -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679100595"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100595"
	  ><span class="hs-identifier hs-var"
	    >sourcePointer</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Ptr Word8 -&gt; Int -&gt; IO ()
forall a. Ptr a -&gt; Ptr a -&gt; Int -&gt; IO ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Foreign.Marshal.Utils.html#copyBytes"
	><span class="hs-identifier hs-var"
	  >copyBytes</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-57"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100594"
	><span class="hs-identifier hs-var"
	  >destPointer</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-58"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100595"
	><span class="hs-identifier hs-var"
	  >sourcePointer</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Int -&gt; Ptr Word8
forall a b. Ptr a -&gt; Int -&gt; Ptr b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#plusPtr"
	><span class="hs-operator hs-var"
	  >`plusPtr`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100592"
	><span class="hs-identifier hs-var"
	  >sourceOffset</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-59"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100593"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-60"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; IO (Ptr Word8)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100594"
	><span class="hs-identifier hs-var"
	  >destPointer</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Int -&gt; Ptr Word8
forall a b. Ptr a -&gt; Int -&gt; Ptr b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#plusPtr"
	><span class="hs-operator hs-var"
	  >`plusPtr`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100593"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-61"
      ></span
      ><span
      >
</span
      ><span id="line-62"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Create a new bytestring, copying sourceLen bytes from sourcePtr

@since 0.6
-}</span
	></span
      ><span
      >
</span
      ><span id="line-66"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#peekByteString"
	><span class="hs-identifier hs-type"
	  >peekByteString</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-67"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	><span class="hs-identifier hs-type"
	  >Word8</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-comment"
	>-- ^ sourcePtr</span
	></span
      ><span
      >
</span
      ><span id="line-68"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-comment"
	>-- ^ sourceLen</span
	></span
      ><span
      >
</span
      ><span id="line-69"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#ByteString"
	><span class="hs-identifier hs-type"
	  >BS.ByteString</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-70"
      ></span
      ><span id="peekByteString"
      ><span class="annot"
	><span class="annottext"
	  >peekByteString :: Ptr Word8 -&gt; Int -&gt; ByteString
</span
	  ><a href="PlutusCore.Flat.Memory.html#peekByteString"
	  ><span class="hs-identifier hs-var hs-var"
	    >peekByteString</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100596"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100596"
	  ><span class="hs-identifier hs-var"
	    >sourcePtr</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100597"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100597"
	  ><span class="hs-identifier hs-var"
	    >sourceLength</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; (Ptr Word8 -&gt; IO ()) -&gt; ByteString
</span
	><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#unsafeCreate"
	><span class="hs-identifier hs-var"
	  >BS.unsafeCreate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100597"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Ptr Word8 -&gt; IO ()) -&gt; ByteString)
-&gt; (Ptr Word8 -&gt; IO ()) -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679100599"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100599"
	  ><span class="hs-identifier hs-var"
	    >destPointer</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Ptr Word8 -&gt; Int -&gt; IO ()
forall a. Ptr a -&gt; Ptr a -&gt; Int -&gt; IO ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Foreign.Marshal.Utils.html#copyBytes"
	><span class="hs-identifier hs-var"
	  >copyBytes</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100599"
	><span class="hs-identifier hs-var"
	  >destPointer</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100596"
	><span class="hs-identifier hs-var"
	  >sourcePtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100597"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-71"
      ></span
      ><span
      >
</span
      ><span id="line-72"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- |Copy ByteArray to given pointer, returns new pointer</span
	></span
      ><span
      >
</span
      ><span id="line-73"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#pokeByteArray"
	><span class="hs-identifier hs-type"
	  >pokeByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html#ByteArray%23"
	><span class="hs-identifier hs-type"
	  >ByteArray#</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	><span class="hs-identifier hs-type"
	  >Word8</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	><span class="hs-identifier hs-type"
	  >IO</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	><span class="hs-identifier hs-type"
	  >Word8</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-74"
      ></span
      ><span id="pokeByteArray"
      ><span class="annot"
	><span class="annottext"
	  >pokeByteArray :: ByteArray# -&gt; Int -&gt; Int -&gt; Ptr Word8 -&gt; IO (Ptr Word8)
</span
	  ><a href="PlutusCore.Flat.Memory.html#pokeByteArray"
	  ><span class="hs-identifier hs-var hs-var"
	    >pokeByteArray</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100600"
      ><span class="annot"
	><span class="annottext"
	  >ByteArray#
</span
	  ><a href="#local-6989586621679100600"
	  ><span class="hs-identifier hs-var"
	    >sourceArr</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100601"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100601"
	  ><span class="hs-identifier hs-var"
	    >sourceOffset</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100602"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100602"
	  ><span class="hs-identifier hs-var"
	    >len</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100603"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100603"
	  ><span class="hs-identifier hs-var"
	    >dest</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-75"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>ByteArray# -&gt; Int -&gt; Ptr Word8 -&gt; Int -&gt; IO ()
forall a. ByteArray# -&gt; Int -&gt; Ptr a -&gt; Int -&gt; IO ()
</span
	><a href="PlutusCore.Flat.Memory.html#copyByteArrayToAddr"
	><span class="hs-identifier hs-var"
	  >copyByteArrayToAddr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ByteArray#
</span
	><a href="#local-6989586621679100600"
	><span class="hs-identifier hs-var"
	  >sourceArr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100601"
	><span class="hs-identifier hs-var"
	  >sourceOffset</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100603"
	><span class="hs-identifier hs-var"
	  >dest</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100602"
	><span class="hs-identifier hs-var"
	  >len</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-76"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span class="hs-glyph"
      >!</span
      ><span id="local-6989586621679100605"
      ><span class="annot"
	><span class="annottext"
	  >dest' :: Ptr Word8
</span
	  ><a href="#local-6989586621679100605"
	  ><span class="hs-identifier hs-var hs-var"
	    >dest'</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100603"
	><span class="hs-identifier hs-var"
	  >dest</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Int -&gt; Ptr Word8
forall a b. Ptr a -&gt; Int -&gt; Ptr b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#plusPtr"
	><span class="hs-operator hs-var"
	  >`plusPtr`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100602"
	><span class="hs-identifier hs-var"
	  >len</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-77"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; IO (Ptr Word8)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100605"
	><span class="hs-identifier hs-var"
	  >dest'</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-78"
      ></span
      ><span class="hs-pragma"
      >{-# INLINE</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#pokeByteArray"
	><span class="hs-pragma hs-type"
	  >pokeByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-pragma"
      >#-}</span
      ><span
      >
</span
      ><span id="line-79"
      ></span
      ><span
      >
</span
      ><span id="line-80"
      ></span
      ><span
      >
</span
      ><span id="line-81"
      ></span
      ><span class="hs-comment"
      >-- | Wrapper around @copyByteArrayToAddr#@ primop.</span
      ><span
      >
</span
      ><span id="line-82"
      ></span
      ><span class="hs-comment"
      >--</span
      ><span
      >
</span
      ><span id="line-83"
      ></span
      ><span class="hs-comment"
      >-- Copied from the store-core package</span
      ><span
      >
</span
      ><span id="line-84"
      ></span
      ><span id="local-6989586621679100495"
      ><span class="annot"
	><a href="PlutusCore.Flat.Memory.html#copyByteArrayToAddr"
	  ><span class="hs-identifier hs-type"
	    >copyByteArrayToAddr</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html#ByteArray%23"
	  ><span class="hs-identifier hs-type"
	    >ByteArray#</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	  ><span class="hs-identifier hs-type"
	    >Int</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	  ><span class="hs-identifier hs-type"
	    >Ptr</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679100495"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	  ><span class="hs-identifier hs-type"
	    >Int</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	  ><span class="hs-identifier hs-type"
	    >IO</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="hs-special"
	>)</span
	></span
      ><span
      >
</span
      ><span id="line-85"
      ></span
      ><span id="copyByteArrayToAddr"
      ><span class="annot"
	><span class="annottext"
	  >copyByteArrayToAddr :: forall a. ByteArray# -&gt; Int -&gt; Ptr a -&gt; Int -&gt; IO ()
</span
	  ><a href="PlutusCore.Flat.Memory.html#copyByteArrayToAddr"
	  ><span class="hs-identifier hs-var hs-var"
	    >copyByteArrayToAddr</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679100606"
      ><span class="annot"
	><span class="annottext"
	  >ByteArray#
</span
	  ><a href="#local-6989586621679100606"
	  ><span class="hs-identifier hs-var"
	    >arr</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#I%23"
	><span class="hs-identifier hs-type"
	  >I#</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679100607"
      ><span class="annot"
	><span class="annottext"
	  >Int#
</span
	  ><a href="#local-6989586621679100607"
	  ><span class="hs-identifier hs-var"
	    >offset</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679100609"
      ><span class="annot"
	><span class="annottext"
	  >Addr#
</span
	  ><a href="#local-6989586621679100609"
	  ><span class="hs-identifier hs-var"
	    >addr</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#I%23"
	><span class="hs-identifier hs-type"
	  >I#</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679100610"
      ><span class="annot"
	><span class="annottext"
	  >Int#
</span
	  ><a href="#local-6989586621679100610"
	  ><span class="hs-identifier hs-var"
	    >len</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-86"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>(State# RealWorld -&gt; (# State# RealWorld, () #)) -&gt; IO ()
forall a. (State# RealWorld -&gt; (# State# RealWorld, a #)) -&gt; IO a
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	><span class="hs-identifier hs-var"
	  >IO</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679100611"
      ><span class="annot"
	><span class="annottext"
	  >State# RealWorld
</span
	  ><a href="#local-6989586621679100611"
	  ><span class="hs-identifier hs-var"
	    >s</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >(#</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ByteArray#
-&gt; Int# -&gt; Addr# -&gt; Int# -&gt; State# RealWorld -&gt; State# RealWorld
forall d.
ByteArray# -&gt; Int# -&gt; Addr# -&gt; Int# -&gt; State# d -&gt; State# d
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html#copyByteArrayToAddr%23"
	><span class="hs-identifier hs-var"
	  >copyByteArrayToAddr#</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ByteArray#
</span
	><a href="#local-6989586621679100606"
	><span class="hs-identifier hs-var"
	  >arr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int#
</span
	><a href="#local-6989586621679100607"
	><span class="hs-identifier hs-var"
	  >offset</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Addr#
</span
	><a href="#local-6989586621679100609"
	><span class="hs-identifier hs-var"
	  >addr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int#
</span
	><a href="#local-6989586621679100610"
	><span class="hs-identifier hs-var"
	  >len</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State# RealWorld
</span
	><a href="#local-6989586621679100611"
	><span class="hs-identifier hs-var"
	  >s</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >#)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-87"
      ></span
      ><span class="hs-pragma"
      >{-# INLINE</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#copyByteArrayToAddr"
	><span class="hs-pragma hs-type"
	  >copyByteArrayToAddr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-pragma"
      >#-}</span
      ><span
      >
</span
      ><span id="line-88"
      ></span
      ><span
      >
</span
      ><span id="line-89"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#chunksToByteString"
	><span class="hs-identifier hs-type"
	  >chunksToByteString</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	><span class="hs-identifier hs-type"
	  >Word8</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#ByteString"
	><span class="hs-identifier hs-type"
	  >BS.ByteString</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-90"
      ></span
      ><span id="chunksToByteString"
      ><span class="annot"
	><span class="annottext"
	  >chunksToByteString :: (Ptr Word8, [Int]) -&gt; ByteString
</span
	  ><a href="PlutusCore.Flat.Memory.html#chunksToByteString"
	  ><span class="hs-identifier hs-var hs-var"
	    >chunksToByteString</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679100612"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100612"
	  ><span class="hs-identifier hs-var"
	    >sourcePtr0</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679100613"
      ><span class="annot"
	><span class="annottext"
	  >[Int]
</span
	  ><a href="#local-6989586621679100613"
	  ><span class="hs-identifier hs-var"
	    >lens</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-91"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; (Ptr Word8 -&gt; IO ()) -&gt; ByteString
</span
	><a href="https://hackage.haskell.org/package/bytestring-0.11.5.4/docs/src/Data.ByteString.Internal.Type.html#unsafeCreate"
	><span class="hs-identifier hs-var"
	  >BS.unsafeCreate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#sum"
	><span class="hs-identifier hs-var"
	  >sum</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Int]
</span
	><a href="#local-6989586621679100613"
	><span class="hs-identifier hs-var"
	  >lens</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Ptr Word8 -&gt; IO ()) -&gt; ByteString)
-&gt; (Ptr Word8 -&gt; IO ()) -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679100615"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100615"
	  ><span class="hs-identifier hs-var"
	    >destPtr0</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Ptr Word8, Ptr Word8) -&gt; Int -&gt; IO (Ptr Word8, Ptr Word8))
-&gt; (Ptr Word8, Ptr Word8) -&gt; [Int] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Monad.html#foldM_"
	><span class="hs-identifier hs-var"
	  >foldM_</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-92"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679100616"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100616"
	  ><span class="hs-identifier hs-var"
	    >destPtr</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679100617"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100617"
	  ><span class="hs-identifier hs-var"
	    >sourcePtr</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621679100618"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100618"
	  ><span class="hs-identifier hs-var"
	    >sourceLength</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-93"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Ptr Word8 -&gt; Int -&gt; IO ()
forall a. Ptr a -&gt; Ptr a -&gt; Int -&gt; IO ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Foreign.Marshal.Utils.html#copyBytes"
	><span class="hs-identifier hs-var"
	  >copyBytes</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100616"
	><span class="hs-identifier hs-var"
	  >destPtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100617"
	><span class="hs-identifier hs-var"
	  >sourcePtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100618"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-94"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>IO () -&gt; IO (Ptr Word8, Ptr Word8) -&gt; IO (Ptr Word8, Ptr Word8)
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3E%3E"
	><span class="hs-operator hs-var"
	  >&gt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Ptr Word8, Ptr Word8) -&gt; IO (Ptr Word8, Ptr Word8)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-95"
      ></span
      ><span
      >             </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100616"
	><span class="hs-identifier hs-var"
	  >destPtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Int -&gt; Ptr Word8
forall a b. Ptr a -&gt; Int -&gt; Ptr b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#plusPtr"
	><span class="hs-operator hs-var"
	  >`plusPtr`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100618"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-96"
      ></span
      ><span
      >             </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100617"
	><span class="hs-identifier hs-var"
	  >sourcePtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Int -&gt; Ptr Word8
forall a b. Ptr a -&gt; Int -&gt; Ptr b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#plusPtr"
	><span class="hs-operator hs-var"
	  >`plusPtr`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100618"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-97"
      ></span
      ><span
      >             </span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-98"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-99"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100615"
	><span class="hs-identifier hs-var"
	  >destPtr0</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100612"
	><span class="hs-identifier hs-var"
	  >sourcePtr0</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-100"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>[Int]
</span
	><a href="#local-6989586621679100613"
	><span class="hs-identifier hs-var"
	  >lens</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-101"
      ></span
      ><span
      >
</span
      ><span id="line-102"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#chunksToByteArray"
	><span class="hs-identifier hs-type"
	  >chunksToByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Word.html#Word8"
	><span class="hs-identifier hs-type"
	  >Word8</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Array.Byte.html#ByteArray"
	><span class="hs-identifier hs-type"
	  >ByteArray</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-103"
      ></span
      ><span id="chunksToByteArray"
      ><span class="annot"
	><span class="annottext"
	  >chunksToByteArray :: (Ptr Word8, [Int]) -&gt; (ByteArray, Int)
</span
	  ><a href="PlutusCore.Flat.Memory.html#chunksToByteArray"
	  ><span class="hs-identifier hs-var hs-var"
	    >chunksToByteArray</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679100620"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100620"
	  ><span class="hs-identifier hs-var"
	    >sourcePtr0</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679100621"
      ><span class="annot"
	><span class="annottext"
	  >[Int]
</span
	  ><a href="#local-6989586621679100621"
	  ><span class="hs-identifier hs-var"
	    >lens</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>IO (ByteArray, Int) -&gt; (ByteArray, Int)
forall a. IO a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.IO.Unsafe.html#unsafePerformIO"
	><span class="hs-identifier hs-var"
	  >unsafePerformIO</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(IO (ByteArray, Int) -&gt; (ByteArray, Int))
-&gt; IO (ByteArray, Int) -&gt; (ByteArray, Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-104"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679100622"
      ><span class="annot"
	><span class="annottext"
	  >len :: Int
</span
	  ><a href="#local-6989586621679100622"
	  ><span class="hs-identifier hs-var hs-var"
	    >len</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#sum"
	><span class="hs-identifier hs-var"
	  >sum</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Int]
</span
	><a href="#local-6989586621679100621"
	><span class="hs-identifier hs-var"
	  >lens</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-105"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679100623"
      ><span class="annot"
	><span class="annottext"
	  >MutableByteArray RealWorld
</span
	  ><a href="#local-6989586621679100623"
	  ><span class="hs-identifier hs-var"
	    >arr</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; IO (MutableByteArray (PrimState IO))
forall (m :: * -&gt; *).
PrimMonad m =&gt;
Int -&gt; m (MutableByteArray (PrimState m))
</span
	><a href="https://hackage.haskell.org/package/primitive-0.9.1.0/docs/src/Data.Primitive.ByteArray.html#newByteArray"
	><span class="hs-identifier hs-var"
	  >newByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100622"
	><span class="hs-identifier hs-var"
	  >len</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-106"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>((Int, Ptr Word8) -&gt; Int -&gt; IO (Int, Ptr Word8))
-&gt; (Int, Ptr Word8) -&gt; [Int] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Monad.html#foldM_"
	><span class="hs-identifier hs-var"
	  >foldM_</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-107"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679100624"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100624"
	  ><span class="hs-identifier hs-var"
	    >destOff</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679100625"
      ><span class="annot"
	><span class="annottext"
	  >Ptr Word8
</span
	  ><a href="#local-6989586621679100625"
	  ><span class="hs-identifier hs-var"
	    >sourcePtr</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621679100626"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679100626"
	  ><span class="hs-identifier hs-var"
	    >sourceLength</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-108"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; MutableByteArray (PrimState IO) -&gt; Int -&gt; Int -&gt; IO ()
forall a.
Ptr a -&gt; MutableByteArray (PrimState IO) -&gt; Int -&gt; Int -&gt; IO ()
</span
	><a href="PlutusCore.Flat.Memory.html#copyAddrToByteArray"
	><span class="hs-identifier hs-var"
	  >copyAddrToByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100625"
	><span class="hs-identifier hs-var"
	  >sourcePtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>MutableByteArray RealWorld
MutableByteArray (PrimState IO)
</span
	><a href="#local-6989586621679100623"
	><span class="hs-identifier hs-var"
	  >arr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100624"
	><span class="hs-identifier hs-var"
	  >destOff</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100626"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>IO () -&gt; IO (Int, Ptr Word8) -&gt; IO (Int, Ptr Word8)
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3E%3E"
	><span class="hs-operator hs-var"
	  >&gt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Int, Ptr Word8) -&gt; IO (Int, Ptr Word8)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-109"
      ></span
      ><span
      >        </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100624"
	><span class="hs-identifier hs-var"
	  >destOff</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100626"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100625"
	><span class="hs-identifier hs-var"
	  >sourcePtr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8 -&gt; Int -&gt; Ptr Word8
forall a b. Ptr a -&gt; Int -&gt; Ptr b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#plusPtr"
	><span class="hs-operator hs-var"
	  >`plusPtr`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100626"
	><span class="hs-identifier hs-var"
	  >sourceLength</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-110"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-111"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>0</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ptr Word8
</span
	><a href="#local-6989586621679100620"
	><span class="hs-identifier hs-var"
	  >sourcePtr0</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-112"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>[Int]
</span
	><a href="#local-6989586621679100621"
	><span class="hs-identifier hs-var"
	  >lens</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-113"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679100628"
      ><span class="annot"
	><span class="annottext"
	  >ByteArray
</span
	  ><a href="#local-6989586621679100628"
	  ><span class="hs-identifier hs-var"
	    >farr</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>MutableByteArray (PrimState IO) -&gt; IO ByteArray
forall (m :: * -&gt; *).
PrimMonad m =&gt;
MutableByteArray (PrimState m) -&gt; m ByteArray
</span
	><a href="https://hackage.haskell.org/package/primitive-0.9.1.0/docs/src/Data.Primitive.ByteArray.html#unsafeFreezeByteArray"
	><span class="hs-identifier hs-var"
	  >unsafeFreezeByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>MutableByteArray RealWorld
MutableByteArray (PrimState IO)
</span
	><a href="#local-6989586621679100623"
	><span class="hs-identifier hs-var"
	  >arr</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-114"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>(ByteArray, Int) -&gt; IO (ByteArray, Int)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ByteArray
</span
	><a href="#local-6989586621679100628"
	><span class="hs-identifier hs-var"
	  >farr</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679100622"
	><span class="hs-identifier hs-var"
	  >len</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-115"
      ></span
      ><span
      >
</span
      ><span id="line-116"
      ></span
      ><span
      >
</span
      ><span id="line-117"
      ></span
      ><span class="hs-comment"
      >-- | Wrapper around @copyAddrToByteArray#@ primop.</span
      ><span
      >
</span
      ><span id="line-118"
      ></span
      ><span class="hs-comment"
      >--</span
      ><span
      >
</span
      ><span id="line-119"
      ></span
      ><span class="hs-comment"
      >-- Copied from the store-core package</span
      ><span
      >
</span
      ><span id="line-120"
      ></span
      ><span id="local-6989586621679100512"
      ><span class="annot"
	><a href="PlutusCore.Flat.Memory.html#copyAddrToByteArray"
	  ><span class="hs-identifier hs-type"
	    >copyAddrToByteArray</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-121"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	  ><span class="hs-identifier hs-type"
	    >Ptr</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679100512"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Array.Byte.html#MutableByteArray"
	  ><span class="hs-identifier hs-type"
	    >MutableByteArray</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/primitive-0.9.1.0/docs/src/Control.Monad.Primitive.html#PrimState"
	  ><span class="hs-identifier hs-type"
	    >PrimState</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	  ><span class="hs-identifier hs-type"
	    >IO</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	  ><span class="hs-identifier hs-type"
	    >Int</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	  ><span class="hs-identifier hs-type"
	    >Int</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	  ><span class="hs-identifier hs-type"
	    >IO</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="hs-special"
	>)</span
	></span
      ><span
      >
</span
      ><span id="line-122"
      ></span
      ><span id="copyAddrToByteArray"
      ><span class="annot"
	><span class="annottext"
	  >copyAddrToByteArray :: forall a.
Ptr a -&gt; MutableByteArray (PrimState IO) -&gt; Int -&gt; Int -&gt; IO ()
</span
	  ><a href="PlutusCore.Flat.Memory.html#copyAddrToByteArray"
	  ><span class="hs-identifier hs-var hs-var"
	    >copyAddrToByteArray</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Ptr.html#Ptr"
	><span class="hs-identifier hs-type"
	  >Ptr</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679100629"
      ><span class="annot"
	><span class="annottext"
	  >Addr#
</span
	  ><a href="#local-6989586621679100629"
	  ><span class="hs-identifier hs-var"
	    >addr</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Array.Byte.html#MutableByteArray"
	><span class="hs-identifier hs-type"
	  >MutableByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679100631"
      ><span class="annot"
	><span class="annottext"
	  >MutableByteArray# (PrimState IO)
</span
	  ><a href="#local-6989586621679100631"
	  ><span class="hs-identifier hs-var"
	    >arr</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#I%23"
	><span class="hs-identifier hs-type"
	  >I#</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679100632"
      ><span class="annot"
	><span class="annottext"
	  >Int#
</span
	  ><a href="#local-6989586621679100632"
	  ><span class="hs-identifier hs-var"
	    >offset</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#I%23"
	><span class="hs-identifier hs-type"
	  >I#</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679100633"
      ><span class="annot"
	><span class="annottext"
	  >Int#
</span
	  ><a href="#local-6989586621679100633"
	  ><span class="hs-identifier hs-var"
	    >len</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-123"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>(State# RealWorld -&gt; (# State# RealWorld, () #)) -&gt; IO ()
forall a. (State# RealWorld -&gt; (# State# RealWorld, a #)) -&gt; IO a
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#IO"
	><span class="hs-identifier hs-var"
	  >IO</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679100634"
      ><span class="annot"
	><span class="annottext"
	  >State# RealWorld
</span
	  ><a href="#local-6989586621679100634"
	  ><span class="hs-identifier hs-var"
	    >s</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >(#</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Addr#
-&gt; MutableByteArray# RealWorld
-&gt; Int#
-&gt; Int#
-&gt; State# RealWorld
-&gt; State# RealWorld
forall d.
Addr#
-&gt; MutableByteArray# d -&gt; Int# -&gt; Int# -&gt; State# d -&gt; State# d
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html#copyAddrToByteArray%23"
	><span class="hs-identifier hs-var"
	  >copyAddrToByteArray#</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Addr#
</span
	><a href="#local-6989586621679100629"
	><span class="hs-identifier hs-var"
	  >addr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>MutableByteArray# RealWorld
MutableByteArray# (PrimState IO)
</span
	><a href="#local-6989586621679100631"
	><span class="hs-identifier hs-var"
	  >arr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int#
</span
	><a href="#local-6989586621679100632"
	><span class="hs-identifier hs-var"
	  >offset</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int#
</span
	><a href="#local-6989586621679100633"
	><span class="hs-identifier hs-var"
	  >len</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State# RealWorld
</span
	><a href="#local-6989586621679100634"
	><span class="hs-identifier hs-var"
	  >s</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >#)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-124"
      ></span
      ><span class="hs-pragma"
      >{-# INLINE</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Flat.Memory.html#copyAddrToByteArray"
	><span class="hs-pragma hs-type"
	  >copyAddrToByteArray</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-pragma"
      >#-}</span
      ><span
      >
</span
      ><span id="line-125"
      ></span
      ></pre
    ></body
  ></html
>
