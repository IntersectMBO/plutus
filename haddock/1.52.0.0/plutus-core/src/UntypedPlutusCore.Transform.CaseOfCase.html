<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><link rel="stylesheet" type="text/css" href="style.css"
     /><script type="text/javascript" src="highlight.js"
    ></script
    ></head
  ><body
  ><pre
    ><span class="hs-pragma"
      >{-# LANGUAGE LambdaCase    #-}</span
      ><span
      >
</span
      ><span id="line-2"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TypeFamilies  #-}</span
      ><span
      >
</span
      ><span id="line-3"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TypeOperators #-}</span
      ><span
      >
</span
      ><span id="line-4"
      ></span
      ><span
      >
</span
      ><span id="line-5"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- |
Perform the case-of-case transformation. This pushes
case expressions into the case branches of other case
expressions, which can often yield optimization opportunities.

Example:
@
    case (case s of { C1 a -&gt; x; C2 b -&gt; y; }) of
      D1 -&gt; w
      D2 -&gt; z

    --&gt;

    case s of
      C1 a -&gt; case x of { D1 -&gt; w; D2 -&gt; z; }
      C2 b -&gt; case y of { D1 -&gt; w; D2 -&gt; z; }
@

We also transform

@
    case ((force ifThenElse) b (constr t) (constr f)) alts
@

into

@
    force (force ifThenElse b (delay (case (constr t) alts)) (delay (case (constr f) alts)))
@

This is always an improvement.
-}</span
	></span
      ><span
      >
</span
      ><span id="line-37"
      ></span
      ><span class="hs-keyword"
      >module</span
      ><span
      > </span
      ><span class="hs-identifier"
      >UntypedPlutusCore.Transform.CaseOfCase</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.CaseOfCase.html#caseOfCase"
	><span class="hs-identifier"
	  >caseOfCase</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-38"
      ></span
      ><span
      >
</span
      ><span id="line-39"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusPrelude.html"
	><span class="hs-identifier"
	  >PlutusPrelude</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-40"
      ></span
      ><span
      >
</span
      ><span id="line-41"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.html"
	><span class="hs-identifier"
	  >PlutusCore</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PLC</span
	></span
      ><span
      >
</span
      ><span id="line-42"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Builtin.html"
	><span class="hs-identifier"
	  >PlutusCore.Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Builtin.Case.html#CaseBuiltin"
	><span class="hs-identifier"
	  >CaseBuiltin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-43"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.MkPlc.html"
	><span class="hs-identifier"
	  >PlutusCore.MkPlc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.MkPlc.html#mkIterApp"
	><span class="hs-identifier"
	  >mkIterApp</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-44"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.html"
	><span class="hs-identifier"
	  >UntypedPlutusCore.Core</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-45"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.CaseReduce.html"
	><span class="hs-identifier"
	  >UntypedPlutusCore.Transform.CaseReduce</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>CaseReduce</span
	></span
      ><span
      >
</span
      ><span id="line-46"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html"
	><span class="hs-identifier"
	  >UntypedPlutusCore.Transform.Simplifier</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html#SimplifierStage"
	><span class="hs-identifier"
	  >SimplifierStage</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html#CaseOfCase"
	><span class="hs-identifier"
	  >CaseOfCase</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html#SimplifierT"
	><span class="hs-identifier"
	  >SimplifierT</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-47"
      ></span
      ><span
      >                                               </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html#recordSimplification"
	><span class="hs-identifier"
	  >recordSimplification</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-48"
      ></span
      ><span
      >
</span
      ><span id="line-49"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Control.Lens</span
	></span
      ><span
      >
</span
      ><span id="line-50"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.List.html"
	><span class="hs-identifier"
	  >Data.List</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#nub"
	><span class="hs-identifier"
	  >nub</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-51"
      ></span
      ><span
      >
</span
      ><span id="line-52"
      ></span
      ><span id="local-6989586621681966223"
      ><span id="local-6989586621681966225"
	><span id="local-6989586621681966226"
	  ><span id="local-6989586621681966231"
	    ><span id="local-6989586621681966232"
	      ><span class="annot"
		><a href="UntypedPlutusCore.Transform.CaseOfCase.html#caseOfCase"
		  ><span class="hs-identifier hs-type"
		    >caseOfCase</span
		    ></a
		  ></span
		><span
		>
</span
		><span id="line-53"
		></span
		><span
		>    </span
		><span class="hs-glyph"
		>::</span
		><span
		> </span
		><span class="hs-special"
		>(</span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966223"
		  ><span class="hs-identifier hs-type"
		    >fun</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#~"
		  ><span class="hs-operator hs-type"
		    >~</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="PlutusCore.Default.Builtins.html#DefaultFun"
		  ><span class="hs-identifier hs-type"
		    >PLC.DefaultFun</span
		    ></a
		  ></span
		><span class="hs-special"
		>,</span
		><span
		> </span
		><span class="annot"
		><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#Monad"
		  ><span class="hs-identifier hs-type"
		    >Monad</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966225"
		  ><span class="hs-identifier hs-type"
		    >m</span
		    ></a
		  ></span
		><span class="hs-special"
		>,</span
		><span
		> </span
		><span class="annot"
		><a href="PlutusCore.Builtin.Case.html#CaseBuiltin"
		  ><span class="hs-identifier hs-type"
		    >CaseBuiltin</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966226"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span
		>
</span
		><span id="line-54"
		></span
		><span
		>       </span
		><span class="hs-special"
		>,</span
		><span
		> </span
		><span class="annot"
		><a href="https://hackage.haskell.org/package/some-1.0.6/docs/src/Data.GADT.Internal.html#GEq"
		  ><span class="hs-identifier hs-type"
		    >PLC.GEq</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966226"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span class="hs-special"
		>,</span
		><span
		> </span
		><span class="annot"
		><a href="Universe.Core.html#Closed"
		  ><span class="hs-identifier hs-type"
		    >PLC.Closed</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966226"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span class="hs-special"
		>,</span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966226"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="Universe.Core.html#Everywhere"
		  ><span class="hs-operator hs-type"
		    >`PLC.Everywhere`</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
		  ><span class="hs-identifier hs-type"
		    >Eq</span
		    ></a
		  ></span
		><span
		>
</span
		><span id="line-55"
		></span
		><span
		>       </span
		><span class="hs-special"
		>)</span
		><span
		>
</span
		><span id="line-56"
		></span
		><span
		>    </span
		><span class="hs-glyph"
		>=&gt;</span
		><span
		> </span
		><span class="annot"
		><a href="UntypedPlutusCore.Core.Type.html#Term"
		  ><span class="hs-identifier hs-type"
		    >Term</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966231"
		  ><span class="hs-identifier hs-type"
		    >name</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966226"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966223"
		  ><span class="hs-identifier hs-type"
		    >fun</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966232"
		  ><span class="hs-identifier hs-type"
		    >a</span
		    ></a
		  ></span
		><span
		>
</span
		><span id="line-57"
		></span
		><span
		>    </span
		><span class="hs-glyph"
		>-&gt;</span
		><span
		> </span
		><span class="annot"
		><a href="UntypedPlutusCore.Transform.Simplifier.html#SimplifierT"
		  ><span class="hs-identifier hs-type"
		    >SimplifierT</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966231"
		  ><span class="hs-identifier hs-type"
		    >name</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966226"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966223"
		  ><span class="hs-identifier hs-type"
		    >fun</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966232"
		  ><span class="hs-identifier hs-type"
		    >a</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966225"
		  ><span class="hs-identifier hs-type"
		    >m</span
		    ></a
		  ></span
		><span
		> </span
		><span class="hs-special"
		>(</span
		><span class="annot"
		><a href="UntypedPlutusCore.Core.Type.html#Term"
		  ><span class="hs-identifier hs-type"
		    >Term</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966231"
		  ><span class="hs-identifier hs-type"
		    >name</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966226"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966223"
		  ><span class="hs-identifier hs-type"
		    >fun</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621681966232"
		  ><span class="hs-identifier hs-type"
		    >a</span
		    ></a
		  ></span
		><span class="hs-special"
		>)</span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-58"
      ></span
      ><span id="caseOfCase"
      ><span class="annot"
	><span class="annottext"
	  >caseOfCase :: forall fun (m :: * -&gt; *) (uni :: * -&gt; *) name a.
(fun ~ DefaultFun, Monad m, CaseBuiltin uni, GEq uni, Closed uni,
 Everywhere uni Eq) =&gt;
Term name uni fun a
-&gt; SimplifierT name uni fun a m (Term name uni fun a)
</span
	  ><a href="UntypedPlutusCore.Transform.CaseOfCase.html#caseOfCase"
	  ><span class="hs-identifier hs-var hs-var"
	    >caseOfCase</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681966360"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun a
</span
	  ><a href="#local-6989586621681966360"
	  ><span class="hs-identifier hs-var"
	    >term</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-59"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621681966361"
      ><span class="annot"
	><span class="annottext"
	  >result :: Term name uni fun a
</span
	  ><a href="#local-6989586621681966361"
	  ><span class="hs-identifier hs-var hs-var"
	    >result</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ASetter
  (Term name uni fun a)
  (Term name uni fun a)
  (Term name uni fun a)
  (Term name uni fun a)
-&gt; (Term name uni fun a -&gt; Term name uni fun a)
-&gt; Term name uni fun a
-&gt; Term name uni fun a
forall a b. ASetter a b a b -&gt; (b -&gt; b) -&gt; a -&gt; b
</span
	><span class="hs-identifier hs-var"
	>transformOf</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ASetter
  (Term name uni fun a)
  (Term name uni fun a)
  (Term name uni fun a)
  (Term name uni fun a)
forall name (uni :: * -&gt; *) fun ann (f :: * -&gt; *).
Applicative f =&gt;
(Term name uni fun ann -&gt; f (Term name uni fun ann))
-&gt; Term name uni fun ann -&gt; f (Term name uni fun ann)
</span
	><a href="UntypedPlutusCore.Core.Plated.html#termSubterms"
	><span class="hs-identifier hs-var"
	  >termSubterms</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a -&gt; Term name uni fun a
forall fun (uni :: * -&gt; *) name a.
(fun ~ DefaultFun, CaseBuiltin uni, GEq uni, Closed uni,
 Everywhere uni Eq) =&gt;
Term name uni fun a -&gt; Term name uni fun a
</span
	><a href="UntypedPlutusCore.Transform.CaseOfCase.html#processTerm"
	><span class="hs-identifier hs-var"
	  >processTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966360"
	><span class="hs-identifier hs-var"
	  >term</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-60"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
-&gt; SimplifierStage
-&gt; Term name uni fun a
-&gt; SimplifierT name uni fun a m ()
forall (m :: * -&gt; *) name (uni :: * -&gt; *) fun a.
Monad m =&gt;
Term name uni fun a
-&gt; SimplifierStage
-&gt; Term name uni fun a
-&gt; SimplifierT name uni fun a m ()
</span
	><a href="UntypedPlutusCore.Transform.Simplifier.html#recordSimplification"
	><span class="hs-identifier hs-var"
	  >recordSimplification</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966360"
	><span class="hs-identifier hs-var"
	  >term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SimplifierStage
</span
	><a href="UntypedPlutusCore.Transform.Simplifier.html#CaseOfCase"
	><span class="hs-identifier hs-var"
	  >CaseOfCase</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966361"
	><span class="hs-identifier hs-var"
	  >result</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-61"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
-&gt; SimplifierT name uni fun a m (Term name uni fun a)
forall a. a -&gt; SimplifierT name uni fun a m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966361"
	><span class="hs-identifier hs-var"
	  >result</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-62"
      ></span
      ><span
      >
</span
      ><span id="line-63"
      ></span
      ><span id="local-6989586621681966257"
      ><span id="local-6989586621681966258"
	><span id="local-6989586621681966259"
	  ><span id="local-6989586621681966260"
	    ><span class="annot"
	      ><a href="UntypedPlutusCore.Transform.CaseOfCase.html#processTerm"
		><span class="hs-identifier hs-type"
		  >processTerm</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-64"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966257"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#~"
		><span class="hs-operator hs-type"
		  >~</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Default.Builtins.html#DefaultFun"
		><span class="hs-identifier hs-type"
		  >PLC.DefaultFun</span
		  ></a
		></span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Builtin.Case.html#CaseBuiltin"
		><span class="hs-identifier hs-type"
		  >CaseBuiltin</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966258"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-65"
	      ></span
	      ><span
	      >       </span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/some-1.0.6/docs/src/Data.GADT.Internal.html#GEq"
		><span class="hs-identifier hs-type"
		  >PLC.GEq</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966258"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="Universe.Core.html#Closed"
		><span class="hs-identifier hs-type"
		  >PLC.Closed</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966258"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966258"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="Universe.Core.html#Everywhere"
		><span class="hs-operator hs-type"
		  >`PLC.Everywhere`</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
		><span class="hs-identifier hs-type"
		  >Eq</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-66"
	      ></span
	      ><span
	      >       </span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      >
</span
	      ><span id="line-67"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966259"
		><span class="hs-identifier hs-type"
		  >name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966258"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966257"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966260"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966259"
		><span class="hs-identifier hs-type"
		  >name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966258"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966257"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681966260"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-68"
      ></span
      ><span id="processTerm"
      ><span class="annot"
	><span class="annottext"
	  >processTerm :: forall fun (uni :: * -&gt; *) name a.
(fun ~ DefaultFun, CaseBuiltin uni, GEq uni, Closed uni,
 Everywhere uni Eq) =&gt;
Term name uni fun a -&gt; Term name uni fun a
</span
	  ><a href="UntypedPlutusCore.Transform.CaseOfCase.html#processTerm"
	  ><span class="hs-identifier hs-var hs-var"
	    >processTerm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-glyph"
      >case</span
      ><span
      >
</span
      ><span id="line-69"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-type"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681966407"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621681966407"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681966408"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun a
</span
	  ><a href="#local-6989586621681966408"
	  ><span class="hs-identifier hs-var"
	    >scrut</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681966409"
      ><span class="annot"
	><span class="annottext"
	  >Vector (Term name uni fun a)
</span
	  ><a href="#local-6989586621681966409"
	  ><span class="hs-identifier hs-var"
	    >alts</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-70"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span id="local-6989586621681966410"
      ><span class="annot"
	><span class="annottext"
	  >ite :: Term name uni fun a
</span
	  ><a href="#local-6989586621681966410"
	  ><span class="hs-identifier hs-var"
	    >ite</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Force"
	><span class="hs-identifier hs-type"
	  >Force</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681966412"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621681966412"
	  ><span class="hs-identifier hs-var"
	    >a</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Builtin"
	><span class="hs-identifier hs-type"
	  >Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>fun
DefaultFun
</span
	><a href="PlutusCore.Default.Builtins.html#IfThenElse"
	><span class="hs-identifier hs-var"
	  >PLC.IfThenElse</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-71"
      ></span
      ><span
      >        </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span id="local-6989586621681966415"
      ><span class="annot"
	><span class="annottext"
	  >(a, Term name uni fun a)
</span
	  ><a href="#local-6989586621681966415"
	  ><span class="hs-identifier hs-var"
	    >cond</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681966416"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621681966416"
	  ><span class="hs-identifier hs-var"
	    >trueAnn</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681966417"
      ><span class="annot"
	><span class="annottext"
	  >true :: Term name uni fun a
</span
	  ><a href="#local-6989586621681966417"
	  ><span class="hs-identifier hs-var"
	    >true</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Constr"
	><span class="hs-identifier hs-type"
	  >Constr</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="hs-special"
      >}</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681966419"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621681966419"
	  ><span class="hs-identifier hs-var"
	    >falseAnn</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681966420"
      ><span class="annot"
	><span class="annottext"
	  >false :: Term name uni fun a
</span
	  ><a href="#local-6989586621681966420"
	  ><span class="hs-identifier hs-var"
	    >false</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Constr"
	><span class="hs-identifier hs-type"
	  >Constr</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="hs-special"
      >}</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-72"
      ></span
      ><span
      >        </span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      >
</span
      ><span id="line-73"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
-&gt; (Term name uni fun a, [(a, Term name uni fun a)])
forall name (uni :: * -&gt; *) fun a.
Term name uni fun a
-&gt; (Term name uni fun a, [(a, Term name uni fun a)])
</span
	><a href="UntypedPlutusCore.Core.html#splitApplication"
	><span class="hs-identifier hs-var"
	  >splitApplication</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966408"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-74"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Term name uni fun a -&gt; Term name uni fun a
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Force"
	><span class="hs-identifier hs-var"
	  >Force</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966412"
	><span class="hs-identifier hs-var"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun a -&gt; Term name uni fun a)
-&gt; Term name uni fun a -&gt; Term name uni fun a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-75"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
-&gt; [(a, Term name uni fun a)] -&gt; Term name uni fun a
forall (term :: * -&gt; *) tyname name (uni :: * -&gt; *) fun ann.
TermLike term tyname name uni fun =&gt;
term ann -&gt; [(ann, term ann)] -&gt; term ann
</span
	><a href="PlutusCore.MkPlc.html#mkIterApp"
	><span class="hs-identifier hs-var"
	  >mkIterApp</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-76"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966410"
	><span class="hs-identifier hs-var"
	  >ite</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-77"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >[</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(a, Term name uni fun a)
</span
	><a href="#local-6989586621681966415"
	><span class="hs-identifier hs-var"
	  >cond</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-78"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- Here we call a single step of case-reduce in order to immediately clean up the</span
      ><span
      >
</span
      ><span id="line-79"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- duplication of @alts@. Otherwise optimizing case-of-case-of-case-of... would create</span
      ><span
      >
</span
      ><span id="line-80"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- exponential blowup of the case branches, which would eventually get deduplicated</span
      ><span
      >
</span
      ><span id="line-81"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- with case-reduce, but only after that exponential blowup has already slowed the</span
      ><span
      >
</span
      ><span id="line-82"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- optimizer down unnecessarily.</span
      ><span
      >
</span
      ><span id="line-83"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966416"
	><span class="hs-identifier hs-var"
	  >trueAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Term name uni fun a -&gt; Term name uni fun a
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Delay"
	><span class="hs-identifier hs-var"
	  >Delay</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966416"
	><span class="hs-identifier hs-var"
	  >trueAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun a -&gt; Term name uni fun a)
-&gt; (Term name uni fun a -&gt; Term name uni fun a)
-&gt; Term name uni fun a
-&gt; Term name uni fun a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a -&gt; Term name uni fun a
forall (uni :: * -&gt; *) name fun a.
CaseBuiltin uni =&gt;
Term name uni fun a -&gt; Term name uni fun a
</span
	><a href="UntypedPlutusCore.Transform.CaseReduce.html#processTerm"
	><span class="hs-identifier hs-var"
	  >CaseReduce.processTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun a -&gt; Term name uni fun a)
-&gt; Term name uni fun a -&gt; Term name uni fun a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
-&gt; Term name uni fun a
-&gt; Vector (Term name uni fun a)
-&gt; Term name uni fun a
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Vector (Term name uni fun ann)
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-var"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966407"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966417"
	><span class="hs-identifier hs-var"
	  >true</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term name uni fun a)
</span
	><a href="#local-6989586621681966409"
	><span class="hs-identifier hs-var"
	  >alts</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-84"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966419"
	><span class="hs-identifier hs-var"
	  >falseAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Term name uni fun a -&gt; Term name uni fun a
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Delay"
	><span class="hs-identifier hs-var"
	  >Delay</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966419"
	><span class="hs-identifier hs-var"
	  >falseAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun a -&gt; Term name uni fun a)
-&gt; (Term name uni fun a -&gt; Term name uni fun a)
-&gt; Term name uni fun a
-&gt; Term name uni fun a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a -&gt; Term name uni fun a
forall (uni :: * -&gt; *) name fun a.
CaseBuiltin uni =&gt;
Term name uni fun a -&gt; Term name uni fun a
</span
	><a href="UntypedPlutusCore.Transform.CaseReduce.html#processTerm"
	><span class="hs-identifier hs-var"
	  >CaseReduce.processTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun a -&gt; Term name uni fun a)
-&gt; Term name uni fun a -&gt; Term name uni fun a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
-&gt; Term name uni fun a
-&gt; Vector (Term name uni fun a)
-&gt; Term name uni fun a
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Vector (Term name uni fun ann)
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-var"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966407"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966420"
	><span class="hs-identifier hs-var"
	  >false</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term name uni fun a)
</span
	><a href="#local-6989586621681966409"
	><span class="hs-identifier hs-var"
	  >alts</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-85"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-86"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681966425"
      ><span class="annot"
	><span class="annottext"
	  >original :: Term name uni fun a
</span
	  ><a href="#local-6989586621681966425"
	  ><span class="hs-identifier hs-var"
	    >original</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-type"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681966426"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621681966426"
	  ><span class="hs-identifier hs-var"
	    >annOuter</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-type"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681966427"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621681966427"
	  ><span class="hs-identifier hs-var"
	    >annInner</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681966428"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun a
</span
	  ><a href="#local-6989586621681966428"
	  ><span class="hs-identifier hs-var"
	    >scrut</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681966429"
      ><span class="annot"
	><span class="annottext"
	  >Vector (Term name uni fun a)
</span
	  ><a href="#local-6989586621681966429"
	  ><span class="hs-identifier hs-var"
	    >altsInner</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621681966430"
      ><span class="annot"
	><span class="annottext"
	  >Vector (Term name uni fun a)
</span
	  ><a href="#local-6989586621681966430"
	  ><span class="hs-identifier hs-var"
	    >altsOuter</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-87"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
-&gt; (Vector (Term name uni fun a) -&gt; Term name uni fun a)
-&gt; Maybe (Vector (Term name uni fun a))
-&gt; Term name uni fun a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Maybe.html#maybe"
	><span class="hs-identifier hs-var"
	  >maybe</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-88"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966425"
	><span class="hs-identifier hs-var"
	  >original</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-89"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a
-&gt; Term name uni fun a
-&gt; Vector (Term name uni fun a)
-&gt; Term name uni fun a
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Vector (Term name uni fun ann)
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-var"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966427"
	><span class="hs-identifier hs-var"
	  >annInner</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966428"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-90"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-91"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621681966432"
      ><span class="annot"
	><span class="annottext"
	  >Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
</span
	  ><a href="#local-6989586621681966432"
	  ><span class="hs-identifier hs-var"
	    >constrs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term name uni fun a)
-&gt; (Term name uni fun a
    -&gt; Maybe (Either Word64 (Some (ValueOf uni)), Term name uni fun a))
-&gt; Maybe
     (Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#for"
	><span class="hs-identifier hs-var"
	  >for</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term name uni fun a)
</span
	><a href="#local-6989586621681966429"
	><span class="hs-identifier hs-var"
	  >altsInner</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Term name uni fun a
  -&gt; Maybe (Either Word64 (Some (ValueOf uni)), Term name uni fun a))
 -&gt; Maybe
      (Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a)))
-&gt; (Term name uni fun a
    -&gt; Maybe (Either Word64 (Some (ValueOf uni)), Term name uni fun a))
-&gt; Maybe
     (Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-glyph"
      >case</span
      ><span
      >
</span
      ><span id="line-92"
      ></span
      ><span
      >          </span
      ><span id="local-6989586621681966434"
      ><span class="annot"
	><span class="annottext"
	  >c :: Term name uni fun a
</span
	  ><a href="#local-6989586621681966434"
	  ><span class="hs-identifier hs-var"
	    >c</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Constr"
	><span class="hs-identifier hs-type"
	  >Constr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621681966435"
      ><span class="annot"
	><span class="annottext"
	  >Word64
</span
	  ><a href="#local-6989586621681966435"
	  ><span class="hs-identifier hs-var"
	    >i</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term name uni fun a]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >   </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Either Word64 (Some (ValueOf uni)), Term name uni fun a)
-&gt; Maybe (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
forall a. a -&gt; Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-var"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Word64 -&gt; Either Word64 (Some (ValueOf uni))
forall a b. a -&gt; Either a b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Either.html#Left"
	><span class="hs-identifier hs-var"
	  >Left</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><a href="#local-6989586621681966435"
	><span class="hs-identifier hs-var"
	  >i</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966434"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-93"
      ></span
      ><span
      >          </span
      ><span id="local-6989586621681966436"
      ><span class="annot"
	><span class="annottext"
	  >c :: Term name uni fun a
</span
	  ><a href="#local-6989586621681966436"
	  ><span class="hs-identifier hs-var"
	    >c</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Constant"
	><span class="hs-identifier hs-type"
	  >Constant</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621681966438"
      ><span class="annot"
	><span class="annottext"
	  >Some (ValueOf uni)
</span
	  ><a href="#local-6989586621681966438"
	  ><span class="hs-identifier hs-var"
	    >val</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Either Word64 (Some (ValueOf uni)), Term name uni fun a)
-&gt; Maybe (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
forall a. a -&gt; Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-var"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Some (ValueOf uni) -&gt; Either Word64 (Some (ValueOf uni))
forall a b. b -&gt; Either a b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Either.html#Right"
	><span class="hs-identifier hs-var"
	  >Right</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Some (ValueOf uni)
</span
	><a href="#local-6989586621681966438"
	><span class="hs-identifier hs-var"
	  >val</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966436"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-94"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      >                  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
forall a. Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-95"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- See Note [Case-of-case and duplicating code].</span
      ><span
      >
</span
      ><span id="line-96"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Monad.html#guard"
	><span class="hs-identifier hs-var"
	  >guard</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Bool -&gt; Maybe ()) -&gt; Bool -&gt; Maybe ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Either Word64 (Some (ValueOf uni))] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[Either Word64 (Some (ValueOf uni))]
-&gt; [Either Word64 (Some (ValueOf uni))]
forall a. Eq a =&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#nub"
	><span class="hs-identifier hs-var"
	  >nub</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([Either Word64 (Some (ValueOf uni))]
 -&gt; [Either Word64 (Some (ValueOf uni))])
-&gt; (Vector (Either Word64 (Some (ValueOf uni)))
    -&gt; [Either Word64 (Some (ValueOf uni))])
-&gt; Vector (Either Word64 (Some (ValueOf uni)))
-&gt; [Either Word64 (Some (ValueOf uni))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Either Word64 (Some (ValueOf uni)))
-&gt; [Either Word64 (Some (ValueOf uni))]
forall a. Vector a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#toList"
	><span class="hs-identifier hs-var"
	  >toList</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Vector (Either Word64 (Some (ValueOf uni)))
 -&gt; [Either Word64 (Some (ValueOf uni))])
-&gt; Vector (Either Word64 (Some (ValueOf uni)))
-&gt; [Either Word64 (Some (ValueOf uni))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Either Word64 (Some (ValueOf uni)), Term name uni fun a)
 -&gt; Either Word64 (Some (ValueOf uni)))
-&gt; Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
-&gt; Vector (Either Word64 (Some (ValueOf uni)))
forall a b. (a -&gt; b) -&gt; Vector a -&gt; Vector b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#fmap"
	><span class="hs-identifier hs-var"
	  >fmap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Either Word64 (Some (ValueOf uni)), Term name uni fun a)
-&gt; Either Word64 (Some (ValueOf uni))
forall a b. (a, b) -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Tuple.html#fst"
	><span class="hs-identifier hs-var"
	  >fst</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
</span
	><a href="#local-6989586621681966432"
	><span class="hs-identifier hs-var"
	  >constrs</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
-&gt; Int
forall a. Vector a -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
</span
	><a href="#local-6989586621681966432"
	><span class="hs-identifier hs-var"
	  >constrs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-97"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term name uni fun a)
-&gt; Maybe (Vector (Term name uni fun a))
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Vector (Term name uni fun a)
 -&gt; Maybe (Vector (Term name uni fun a)))
-&gt; Vector (Term name uni fun a)
-&gt; Maybe (Vector (Term name uni fun a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
</span
	><a href="#local-6989586621681966432"
	><span class="hs-identifier hs-var"
	  >constrs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Either Word64 (Some (ValueOf uni)), Term name uni fun a)
-&gt; ((Either Word64 (Some (ValueOf uni)), Term name uni fun a)
    -&gt; Term name uni fun a)
-&gt; Vector (Term name uni fun a)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%26%3E"
	><span class="hs-operator hs-var"
	  >&lt;&amp;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Either Word64 (Some (ValueOf uni))
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681966443"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun a
</span
	  ><a href="#local-6989586621681966443"
	  ><span class="hs-identifier hs-var"
	    >c</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a -&gt; Term name uni fun a
forall (uni :: * -&gt; *) name fun a.
CaseBuiltin uni =&gt;
Term name uni fun a -&gt; Term name uni fun a
</span
	><a href="UntypedPlutusCore.Transform.CaseReduce.html#processTerm"
	><span class="hs-identifier hs-var"
	  >CaseReduce.processTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun a -&gt; Term name uni fun a)
-&gt; Term name uni fun a -&gt; Term name uni fun a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
-&gt; Term name uni fun a
-&gt; Vector (Term name uni fun a)
-&gt; Term name uni fun a
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Vector (Term name uni fun ann)
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-var"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621681966426"
	><span class="hs-identifier hs-var"
	  >annOuter</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966443"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term name uni fun a)
</span
	><a href="#local-6989586621681966430"
	><span class="hs-identifier hs-var"
	  >altsOuter</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-98"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681966444"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun a
</span
	  ><a href="#local-6989586621681966444"
	  ><span class="hs-identifier hs-var"
	    >other</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun a
</span
	><a href="#local-6989586621681966444"
	><span class="hs-identifier hs-var"
	  >other</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-99"
      ></span
      ></pre
    ></body
  ></html
>
