<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><link rel="stylesheet" type="text/css" href="style.css"
     /><script type="text/javascript" src="highlight.js"
    ></script
    ></head
  ><body
  ><pre
    ><span class="hs-pragma"
      >{-# LANGUAGE DeriveAnyClass        #-}</span
      ><span
      >
</span
      ><span id="line-2"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE FlexibleInstances     #-}</span
      ><span
      >
</span
      ><span id="line-3"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE LambdaCase            #-}</span
      ><span
      >
</span
      ><span id="line-4"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE MultiParamTypeClasses #-}</span
      ><span
      >
</span
      ><span id="line-5"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE OverloadedStrings     #-}</span
      ><span
      >
</span
      ><span id="line-6"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TemplateHaskell       #-}</span
      ><span
      >
</span
      ><span id="line-7"
      ></span
      ><span class="hs-comment"
      >-- This fires on GHC-9.2.4 for some reason, not entirely sure</span
      ><span
      >
</span
      ><span id="line-8"
      ></span
      ><span class="hs-comment"
      >-- what's going on</span
      ><span
      >
</span
      ><span id="line-9"
      ></span
      ><span class="hs-pragma"
      >{-# OPTIONS_GHC -Wno-identities #-}</span
      ><span
      >
</span
      ><span id="line-10"
      ></span
      ><span
      >
</span
      ><span id="line-11"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Support for using de Bruijn indices for term and type names.</span
	></span
      ><span
      >
</span
      ><span id="line-12"
      ></span
      ><span class="hs-keyword"
      >module</span
      ><span
      > </span
      ><span class="hs-identifier"
      >PlutusCore.DeBruijn.Internal</span
      ><span
      >
</span
      ><span id="line-13"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier"
	  >Index</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-14"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#HasIndex"
	><span class="hs-identifier"
	  >HasIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-15"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-16"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-17"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- we follow the same approach as Renamed: expose the constructor from Internal module,</span
      ><span
      >
</span
      ><span id="line-18"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- but hide it in the parent module.</span
      ><span
      >
</span
      ><span id="line-19"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#FakeNamedDeBruijn"
	><span class="hs-identifier"
	  >FakeNamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-20"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	><span class="hs-identifier"
	  >TyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-21"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	><span class="hs-identifier"
	  >NamedTyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-22"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#FreeVariableError"
	><span class="hs-identifier"
	  >FreeVariableError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-23"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#AsFreeVariableError"
	><span class="hs-identifier"
	  >AsFreeVariableError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-24"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-25"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-26"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#declareUnique"
	><span class="hs-identifier"
	  >declareUnique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-27"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#declareBinder"
	><span class="hs-identifier"
	  >declareBinder</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-28"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#withScope"
	><span class="hs-identifier"
	  >withScope</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-29"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#getIndex"
	><span class="hs-identifier"
	  >getIndex</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-30"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#getUnique"
	><span class="hs-identifier"
	  >getUnique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-31"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#unNameDeBruijn"
	><span class="hs-identifier"
	  >unNameDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-32"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#unNameTyDeBruijn"
	><span class="hs-identifier"
	  >unNameTyDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-33"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#fakeNameDeBruijn"
	><span class="hs-identifier"
	  >fakeNameDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-34"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#fakeTyNameDeBruijn"
	><span class="hs-identifier"
	  >fakeTyNameDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-35"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#nameToDeBruijn"
	><span class="hs-identifier"
	  >nameToDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-36"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#tyNameToDeBruijn"
	><span class="hs-identifier"
	  >tyNameToDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-37"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#deBruijnToName"
	><span class="hs-identifier"
	  >deBruijnToName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-38"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#deBruijnToTyName"
	><span class="hs-identifier"
	  >deBruijnToTyName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-39"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#freeIndexThrow"
	><span class="hs-identifier"
	  >freeIndexThrow</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-40"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#freeIndexAsConsistentLevel"
	><span class="hs-identifier"
	  >freeIndexAsConsistentLevel</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-41"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#freeUniqueThrow"
	><span class="hs-identifier"
	  >freeUniqueThrow</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-42"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#runDeBruijnT"
	><span class="hs-identifier"
	  >runDeBruijnT</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-43"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#deBruijnInitIndex"
	><span class="hs-identifier"
	  >deBruijnInitIndex</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-44"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#toFake"
	><span class="hs-identifier"
	  >toFake</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-45"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#fromFake"
	><span class="hs-identifier"
	  >fromFake</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-46"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-47"
      ></span
      ><span
      >
</span
      ><span id="line-48"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html"
	><span class="hs-identifier"
	  >PlutusCore.Name.Unique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-49"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Pretty.html"
	><span class="hs-identifier"
	  >PlutusCore.Pretty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-50"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Quote.html"
	><span class="hs-identifier"
	  >PlutusCore.Quote</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-51"
      ></span
      ><span
      >
</span
      ><span id="line-52"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Control.Exception.html"
	><span class="hs-identifier"
	  >Control.Exception</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-53"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Control.Lens</span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >hiding</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="hs-identifier"
	>Index</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Level</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>index</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>ix</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-54"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Control.Monad.Error.Lens</span
	></span
      ><span
      >
</span
      ><span id="line-55"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Except.html"
	><span class="hs-identifier"
	  >Control.Monad.Except</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-56"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.html"
	><span class="hs-identifier"
	  >Control.Monad.Reader</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-57"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.State.html"
	><span class="hs-identifier"
	  >Control.Monad.State</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-58"
      ></span
      ><span
      >
</span
      ><span id="line-59"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Data.Bimap</span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>BM</span
	></span
      ><span
      >
</span
      ><span id="line-60"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.html"
	><span class="hs-identifier"
	  >Data.Hashable</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-61"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/containers-0.6.7/docs/src/Data.Map.html"
	><span class="hs-identifier"
	  >Data.Map</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>M</span
	></span
      ><span
      >
</span
      ><span id="line-62"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.html"
	><span class="hs-identifier"
	  >Data.Text</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>T</span
	></span
      ><span
      >
</span
      ><span id="line-63"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Word.html"
	><span class="hs-identifier"
	  >Data.Word</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-64"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.html"
	><span class="hs-identifier"
	  >Prettyprinter</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-65"
      ></span
      ><span
      >
</span
      ><span id="line-66"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html"
	><span class="hs-identifier"
	  >Control.DeepSeq</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html#NFData"
	><span class="hs-identifier"
	  >NFData</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-67"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Coerce.html"
	><span class="hs-identifier"
	  >Data.Coerce</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-68"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Generics.html"
	><span class="hs-identifier"
	  >GHC.Generics</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-69"
      ></span
      ><span
      >
</span
      ><span id="line-70"
      ></span
      ><span class="hs-comment"
      >{- Note [Why newtype FakeNamedDeBruijn]
We use a newtype wrapper to optimize away the expensive re-traversing of the deserialized Term
for adding fake names everywhere --- the CEK works on names, but the scripts on ledger
don't have names for size reduction.

Specifically the expensive pipeline:

```
decode @(Term DeBruijn)
&gt;&gt;&gt; term-Map-Names(FakeNamedDeBruijn)
&gt;&gt;&gt; cekExecute
```

is optimized to to the faster:

```
decode @(Term FakeNamedDeBruijn)
&gt;&gt;&gt; coerce @(Term FakeNamedDeBruijn) @(Term NamedDeBruijn)
&gt;&gt;&gt; cekExecute
```

To achieve this we make sure:
- to use `coerce` since its 0-cost
- not to GeneralizeNewtypeDeriving the`Flat FakeNamedDeBruijn` instance, but &quot;derive via&quot;
the optimized `Flat DeBruijn` instance. This is ok, because `FND&lt;-&gt;D` are
isomorphic.
-}</span
      ><span
      >
</span
      ><span id="line-97"
      ></span
      ><span
      >
</span
      ><span id="line-98"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | A relative index used for de Bruijn identifiers.

FIXME: downside of using newtype+Num instead of type-synonym is that `-Woverflowed-literals`
does not work, e.g.: `DeBruijn (-1)` has no warning. To trigger the warning you have to bypass
the Num and write `DeBruijn (Index -1)`. This can be revisited when we implement PLT-1053.
Tracked by: https://github.com/IntersectMBO/plutus-private/issues/1552
-}</span
	></span
      ><span
      >
</span
      ><span id="line-105"
      ></span
      ><span class="hs-keyword"
      >newtype</span
      ><span
      > </span
      ><span id="Index"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-var"
	    >Index</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="Index"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-var"
	    >Index</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Word.html#Word64"
	><span class="hs-identifier hs-type"
	  >Word64</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-106"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>stock</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866149"
      ><span id="local-6989586621681866151"
	><span class="annot"
	  ><span class="annottext"
	    >(forall x. Index -&gt; Rep Index x)
-&gt; (forall x. Rep Index x -&gt; Index) -&gt; Generic Index
forall x. Rep Index x -&gt; Index
forall x. Index -&gt; Rep Index x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. Index -&gt; Rep Index x
from :: forall x. Index -&gt; Rep Index x
$cto :: forall x. Rep Index x -&gt; Index
to :: forall x. Rep Index x -&gt; Index
</span
	    ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Generics.html#Generic"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Generic</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-107"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>newtype</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866155"
      ><span id="local-6989586621681866160"
	><span id="local-6989586621681866164"
	  ><span class="annot"
	    ><span class="annottext"
	      >Int -&gt; Index -&gt; ShowS
[Index] -&gt; ShowS
Index -&gt; String
(Int -&gt; Index -&gt; ShowS)
-&gt; (Index -&gt; String) -&gt; ([Index] -&gt; ShowS) -&gt; Show Index
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Index -&gt; ShowS
showsPrec :: Int -&gt; Index -&gt; ShowS
$cshow :: Index -&gt; String
show :: Index -&gt; String
$cshowList :: [Index] -&gt; ShowS
showList :: [Index] -&gt; ShowS
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#Show"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Show</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866170"
      ><span id="local-6989586621681866175"
	><span id="local-6989586621681866179"
	  ><span id="local-6989586621681866183"
	    ><span id="local-6989586621681866187"
	      ><span id="local-6989586621681866191"
		><span id="local-6989586621681866195"
		  ><span class="annot"
		    ><span class="annottext"
		      >Integer -&gt; Index
Index -&gt; Index
Index -&gt; Index -&gt; Index
(Index -&gt; Index -&gt; Index)
-&gt; (Index -&gt; Index -&gt; Index)
-&gt; (Index -&gt; Index -&gt; Index)
-&gt; (Index -&gt; Index)
-&gt; (Index -&gt; Index)
-&gt; (Index -&gt; Index)
-&gt; (Integer -&gt; Index)
-&gt; Num Index
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
$c+ :: Index -&gt; Index -&gt; Index
+ :: Index -&gt; Index -&gt; Index
$c- :: Index -&gt; Index -&gt; Index
- :: Index -&gt; Index -&gt; Index
$c* :: Index -&gt; Index -&gt; Index
* :: Index -&gt; Index -&gt; Index
$cnegate :: Index -&gt; Index
negate :: Index -&gt; Index
$cabs :: Index -&gt; Index
abs :: Index -&gt; Index
$csignum :: Index -&gt; Index
signum :: Index -&gt; Index
$cfromInteger :: Integer -&gt; Index
fromInteger :: Integer -&gt; Index
</span
		      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Num.html#Num"
		      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			>Num</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866200"
      ><span id="local-6989586621681866205"
	><span id="local-6989586621681866209"
	  ><span id="local-6989586621681866213"
	    ><span id="local-6989586621681866217"
	      ><span id="local-6989586621681866221"
		><span id="local-6989586621681866225"
		  ><span id="local-6989586621681866229"
		    ><span class="annot"
		      ><span class="annottext"
			>Int -&gt; Index
Index -&gt; Int
Index -&gt; [Index]
Index -&gt; Index
Index -&gt; Index -&gt; [Index]
Index -&gt; Index -&gt; Index -&gt; [Index]
(Index -&gt; Index)
-&gt; (Index -&gt; Index)
-&gt; (Int -&gt; Index)
-&gt; (Index -&gt; Int)
-&gt; (Index -&gt; [Index])
-&gt; (Index -&gt; Index -&gt; [Index])
-&gt; (Index -&gt; Index -&gt; [Index])
-&gt; (Index -&gt; Index -&gt; Index -&gt; [Index])
-&gt; Enum Index
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
$csucc :: Index -&gt; Index
succ :: Index -&gt; Index
$cpred :: Index -&gt; Index
pred :: Index -&gt; Index
$ctoEnum :: Int -&gt; Index
toEnum :: Int -&gt; Index
$cfromEnum :: Index -&gt; Int
fromEnum :: Index -&gt; Int
$cenumFrom :: Index -&gt; [Index]
enumFrom :: Index -&gt; [Index]
$cenumFromThen :: Index -&gt; Index -&gt; [Index]
enumFromThen :: Index -&gt; Index -&gt; [Index]
$cenumFromTo :: Index -&gt; Index -&gt; [Index]
enumFromTo :: Index -&gt; Index -&gt; [Index]
$cenumFromThenTo :: Index -&gt; Index -&gt; Index -&gt; [Index]
enumFromThenTo :: Index -&gt; Index -&gt; Index -&gt; [Index]
</span
			><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Enum.html#Enum"
			><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			  >Enum</span
			  ></a
			></span
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866240"
      ><span class="annot"
	><span class="annottext"
	  >Num Index
Ord Index
(Num Index, Ord Index) =&gt; (Index -&gt; Rational) -&gt; Real Index
Index -&gt; Rational
forall a. (Num a, Ord a) =&gt; (a -&gt; Rational) -&gt; Real a
$ctoRational :: Index -&gt; Rational
toRational :: Index -&gt; Rational
</span
	  ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Real.html#Real"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	    >Real</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866251"
      ><span id="local-6989586621681866256"
	><span id="local-6989586621681866260"
	  ><span id="local-6989586621681866264"
	    ><span id="local-6989586621681866268"
	      ><span id="local-6989586621681866272"
		><span id="local-6989586621681866276"
		  ><span class="annot"
		    ><span class="annottext"
		      >Enum Index
Real Index
(Real Index, Enum Index) =&gt;
(Index -&gt; Index -&gt; Index)
-&gt; (Index -&gt; Index -&gt; Index)
-&gt; (Index -&gt; Index -&gt; Index)
-&gt; (Index -&gt; Index -&gt; Index)
-&gt; (Index -&gt; Index -&gt; (Index, Index))
-&gt; (Index -&gt; Index -&gt; (Index, Index))
-&gt; (Index -&gt; Integer)
-&gt; Integral Index
Index -&gt; Integer
Index -&gt; Index -&gt; (Index, Index)
Index -&gt; Index -&gt; Index
forall a.
(Real a, Enum a) =&gt;
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; (a, a))
-&gt; (a -&gt; a -&gt; (a, a))
-&gt; (a -&gt; Integer)
-&gt; Integral a
$cquot :: Index -&gt; Index -&gt; Index
quot :: Index -&gt; Index -&gt; Index
$crem :: Index -&gt; Index -&gt; Index
rem :: Index -&gt; Index -&gt; Index
$cdiv :: Index -&gt; Index -&gt; Index
div :: Index -&gt; Index -&gt; Index
$cmod :: Index -&gt; Index -&gt; Index
mod :: Index -&gt; Index -&gt; Index
$cquotRem :: Index -&gt; Index -&gt; (Index, Index)
quotRem :: Index -&gt; Index -&gt; (Index, Index)
$cdivMod :: Index -&gt; Index -&gt; (Index, Index)
divMod :: Index -&gt; Index -&gt; (Index, Index)
$ctoInteger :: Index -&gt; Integer
toInteger :: Index -&gt; Integer
</span
		      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Real.html#Integral"
		      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			>Integral</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866281"
      ><span id="local-6989586621681866286"
	><span class="annot"
	  ><span class="annottext"
	    >Index -&gt; Index -&gt; Bool
(Index -&gt; Index -&gt; Bool) -&gt; (Index -&gt; Index -&gt; Bool) -&gt; Eq Index
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Index -&gt; Index -&gt; Bool
== :: Index -&gt; Index -&gt; Bool
$c/= :: Index -&gt; Index -&gt; Bool
/= :: Index -&gt; Index -&gt; Bool
</span
	    ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Eq</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866294"
      ><span id="local-6989586621681866299"
	><span id="local-6989586621681866303"
	  ><span id="local-6989586621681866307"
	    ><span id="local-6989586621681866311"
	      ><span id="local-6989586621681866315"
		><span id="local-6989586621681866319"
		  ><span class="annot"
		    ><span class="annottext"
		      >Eq Index
Eq Index =&gt;
(Index -&gt; Index -&gt; Ordering)
-&gt; (Index -&gt; Index -&gt; Bool)
-&gt; (Index -&gt; Index -&gt; Bool)
-&gt; (Index -&gt; Index -&gt; Bool)
-&gt; (Index -&gt; Index -&gt; Bool)
-&gt; (Index -&gt; Index -&gt; Index)
-&gt; (Index -&gt; Index -&gt; Index)
-&gt; Ord Index
Index -&gt; Index -&gt; Bool
Index -&gt; Index -&gt; Ordering
Index -&gt; Index -&gt; Index
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Index -&gt; Index -&gt; Ordering
compare :: Index -&gt; Index -&gt; Ordering
$c&lt; :: Index -&gt; Index -&gt; Bool
&lt; :: Index -&gt; Index -&gt; Bool
$c&lt;= :: Index -&gt; Index -&gt; Bool
&lt;= :: Index -&gt; Index -&gt; Bool
$c&gt; :: Index -&gt; Index -&gt; Bool
&gt; :: Index -&gt; Index -&gt; Bool
$c&gt;= :: Index -&gt; Index -&gt; Bool
&gt;= :: Index -&gt; Index -&gt; Bool
$cmax :: Index -&gt; Index -&gt; Index
max :: Index -&gt; Index -&gt; Index
$cmin :: Index -&gt; Index -&gt; Index
min :: Index -&gt; Index -&gt; Index
</span
		      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Ord"
		      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			>Ord</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866326"
      ><span id="local-6989586621681866331"
	><span class="annot"
	  ><span class="annottext"
	    >Eq Index
Eq Index =&gt;
(Int -&gt; Index -&gt; Int) -&gt; (Index -&gt; Int) -&gt; Hashable Index
Int -&gt; Index -&gt; Int
Index -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
$chashWithSalt :: Int -&gt; Index -&gt; Int
hashWithSalt :: Int -&gt; Index -&gt; Int
$chash :: Index -&gt; Int
hash :: Index -&gt; Int
</span
	    ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.Class.html#Hashable"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Hashable</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866337"
      ><span id="local-6989586621681866342"
	><span class="annot"
	  ><span class="annottext"
	    >(forall ann. Index -&gt; Doc ann)
-&gt; (forall ann. [Index] -&gt; Doc ann) -&gt; Pretty Index
forall ann. [Index] -&gt; Doc ann
forall ann. Index -&gt; Doc ann
forall a.
(forall ann. a -&gt; Doc ann)
-&gt; (forall ann. [a] -&gt; Doc ann) -&gt; Pretty a
$cpretty :: forall ann. Index -&gt; Doc ann
pretty :: forall ann. Index -&gt; Doc ann
$cprettyList :: forall ann. [Index] -&gt; Doc ann
prettyList :: forall ann. [Index] -&gt; Doc ann
</span
	    ><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#Pretty"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Pretty</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866348"
      ><span class="annot"
	><span class="annottext"
	  >Index -&gt; ()
(Index -&gt; ()) -&gt; NFData Index
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: Index -&gt; ()
rnf :: Index -&gt; ()
</span
	  ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html#NFData"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >NFData</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866355"
      ><span id="local-6989586621681866360"
	><span id="local-6989586621681866364"
	  ><span id="local-6989586621681866368"
	    ><span class="annot"
	      ><span class="annottext"
		>ReadPrec [Index]
ReadPrec Index
Int -&gt; ReadS Index
ReadS [Index]
(Int -&gt; ReadS Index)
-&gt; ReadS [Index]
-&gt; ReadPrec Index
-&gt; ReadPrec [Index]
-&gt; Read Index
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS Index
readsPrec :: Int -&gt; ReadS Index
$creadList :: ReadS [Index]
readList :: ReadS [Index]
$creadPrec :: ReadPrec Index
readPrec :: ReadPrec Index
$creadListPrec :: ReadPrec [Index]
readListPrec :: ReadPrec [Index]
</span
		><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Read.html#Read"
		><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		  >Read</span
		  ></a
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-108"
      ></span
      ><span
      >
</span
      ><span id="line-109"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | The LamAbs index (for debruijn indices) and the starting level of DeBruijn monad</span
	></span
      ><span
      >
</span
      ><span id="line-110"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#deBruijnInitIndex"
	><span class="hs-identifier hs-type"
	  >deBruijnInitIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-111"
      ></span
      ><span id="deBruijnInitIndex"
      ><span class="annot"
	><span class="annottext"
	  >deBruijnInitIndex :: Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#deBruijnInitIndex"
	  ><span class="hs-identifier hs-var hs-var"
	    >deBruijnInitIndex</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><span class="hs-number"
	>0</span
	></span
      ><span
      >
</span
      ><span id="line-112"
      ></span
      ><span
      >
</span
      ><span id="line-113"
      ></span
      ><span class="hs-comment"
      >-- The bangs gave us a speedup of 6%.</span
      ><span
      >
</span
      ><span id="line-114"
      ></span
      ><span
      >
</span
      ><span id="line-115"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | A term name as a de Bruijn index.</span
	></span
      ><span
      >
</span
      ><span id="line-116"
      ></span
      ><span class="hs-keyword"
      >data</span
      ><span
      > </span
      ><span id="NamedDeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	  ><span class="hs-identifier hs-var"
	    >NamedDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="NamedDeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	  ><span class="hs-identifier hs-var"
	    >NamedDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >{</span
      ><span id="ndbnString"
      ><span class="annot"
	><span class="annottext"
	  >NamedDeBruijn -&gt; Text
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#ndbnString"
	  ><span class="hs-identifier hs-var hs-var"
	    >ndbnString</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-glyph"
      >!</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.Internal.html#Text"
	><span class="hs-identifier hs-type"
	  >T.Text</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="ndbnIndex"
      ><span class="annot"
	><span class="annottext"
	  >NamedDeBruijn -&gt; Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#ndbnIndex"
	  ><span class="hs-identifier hs-var hs-var"
	    >ndbnIndex</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-glyph"
      >!</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-117"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>stock</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866377"
      ><span id="local-6989586621681866384"
	><span id="local-6989586621681866388"
	  ><span class="annot"
	    ><span class="annottext"
	      >Int -&gt; NamedDeBruijn -&gt; ShowS
[NamedDeBruijn] -&gt; ShowS
NamedDeBruijn -&gt; String
(Int -&gt; NamedDeBruijn -&gt; ShowS)
-&gt; (NamedDeBruijn -&gt; String)
-&gt; ([NamedDeBruijn] -&gt; ShowS)
-&gt; Show NamedDeBruijn
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; NamedDeBruijn -&gt; ShowS
showsPrec :: Int -&gt; NamedDeBruijn -&gt; ShowS
$cshow :: NamedDeBruijn -&gt; String
show :: NamedDeBruijn -&gt; String
$cshowList :: [NamedDeBruijn] -&gt; ShowS
showList :: [NamedDeBruijn] -&gt; ShowS
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#Show"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Show</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866391"
      ><span id="local-6989586621681866393"
	><span class="annot"
	  ><span class="annottext"
	    >(forall x. NamedDeBruijn -&gt; Rep NamedDeBruijn x)
-&gt; (forall x. Rep NamedDeBruijn x -&gt; NamedDeBruijn)
-&gt; Generic NamedDeBruijn
forall x. Rep NamedDeBruijn x -&gt; NamedDeBruijn
forall x. NamedDeBruijn -&gt; Rep NamedDeBruijn x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. NamedDeBruijn -&gt; Rep NamedDeBruijn x
from :: forall x. NamedDeBruijn -&gt; Rep NamedDeBruijn x
$cto :: forall x. Rep NamedDeBruijn x -&gt; NamedDeBruijn
to :: forall x. Rep NamedDeBruijn x -&gt; NamedDeBruijn
</span
	    ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Generics.html#Generic"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Generic</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866396"
      ><span id="local-6989586621681866400"
	><span id="local-6989586621681866403"
	  ><span id="local-6989586621681866416"
	    ><span class="annot"
	      ><span class="annottext"
		>ReadPrec [NamedDeBruijn]
ReadPrec NamedDeBruijn
Int -&gt; ReadS NamedDeBruijn
ReadS [NamedDeBruijn]
(Int -&gt; ReadS NamedDeBruijn)
-&gt; ReadS [NamedDeBruijn]
-&gt; ReadPrec NamedDeBruijn
-&gt; ReadPrec [NamedDeBruijn]
-&gt; Read NamedDeBruijn
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS NamedDeBruijn
readsPrec :: Int -&gt; ReadS NamedDeBruijn
$creadList :: ReadS [NamedDeBruijn]
readList :: ReadS [NamedDeBruijn]
$creadPrec :: ReadPrec NamedDeBruijn
readPrec :: ReadPrec NamedDeBruijn
$creadListPrec :: ReadPrec [NamedDeBruijn]
readListPrec :: ReadPrec [NamedDeBruijn]
</span
		><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Read.html#Read"
		><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		  >Read</span
		  ></a
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-118"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>anyclass</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866422"
      ><span id="local-6989586621681866429"
	><span class="annot"
	  ><span class="annottext"
	    >Eq NamedDeBruijn
Eq NamedDeBruijn =&gt;
(Int -&gt; NamedDeBruijn -&gt; Int)
-&gt; (NamedDeBruijn -&gt; Int) -&gt; Hashable NamedDeBruijn
Int -&gt; NamedDeBruijn -&gt; Int
NamedDeBruijn -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
$chashWithSalt :: Int -&gt; NamedDeBruijn -&gt; Int
hashWithSalt :: Int -&gt; NamedDeBruijn -&gt; Int
$chash :: NamedDeBruijn -&gt; Int
hash :: NamedDeBruijn -&gt; Int
</span
	    ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.Class.html#Hashable"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Hashable</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866444"
      ><span class="annot"
	><span class="annottext"
	  >NamedDeBruijn -&gt; ()
(NamedDeBruijn -&gt; ()) -&gt; NFData NamedDeBruijn
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: NamedDeBruijn -&gt; ()
rnf :: NamedDeBruijn -&gt; ()
</span
	  ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html#NFData"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >NFData</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-119"
      ></span
      ><span
      >
</span
      ><span id="line-120"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | A wrapper around `NamedDeBruijn` that *must* hold the invariant of name=`fakeName`.

We do not export the `FakeNamedDeBruijn` constructor: the projection `FND-&gt;ND` is safe
but injection `ND-&gt;FND` is unsafe, thus they are not isomorphic.

See Note [Why newtype FakeNamedDeBruijn]
-}</span
	></span
      ><span
      >
</span
      ><span id="line-127"
      ></span
      ><span class="hs-keyword"
      >newtype</span
      ><span
      > </span
      ><span id="FakeNamedDeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#FakeNamedDeBruijn"
	  ><span class="hs-identifier hs-var"
	    >FakeNamedDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="FakeNamedDeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#FakeNamedDeBruijn"
	  ><span class="hs-identifier hs-var"
	    >FakeNamedDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >{</span
      ><span id="unFakeNamedDeBruijn"
      ><span class="annot"
	><span class="annottext"
	  >FakeNamedDeBruijn -&gt; NamedDeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#unFakeNamedDeBruijn"
	  ><span class="hs-identifier hs-var hs-var"
	    >unFakeNamedDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-128"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>newtype</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866466"
      ><span id="local-6989586621681866470"
	><span id="local-6989586621681866474"
	  ><span class="annot"
	    ><span class="annottext"
	      >Int -&gt; FakeNamedDeBruijn -&gt; ShowS
[FakeNamedDeBruijn] -&gt; ShowS
FakeNamedDeBruijn -&gt; String
(Int -&gt; FakeNamedDeBruijn -&gt; ShowS)
-&gt; (FakeNamedDeBruijn -&gt; String)
-&gt; ([FakeNamedDeBruijn] -&gt; ShowS)
-&gt; Show FakeNamedDeBruijn
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; FakeNamedDeBruijn -&gt; ShowS
showsPrec :: Int -&gt; FakeNamedDeBruijn -&gt; ShowS
$cshow :: FakeNamedDeBruijn -&gt; String
show :: FakeNamedDeBruijn -&gt; String
$cshowList :: [FakeNamedDeBruijn] -&gt; ShowS
showList :: [FakeNamedDeBruijn] -&gt; ShowS
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#Show"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Show</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866479"
      ><span id="local-6989586621681866483"
	><span class="annot"
	  ><span class="annottext"
	    >FakeNamedDeBruijn -&gt; FakeNamedDeBruijn -&gt; Bool
(FakeNamedDeBruijn -&gt; FakeNamedDeBruijn -&gt; Bool)
-&gt; (FakeNamedDeBruijn -&gt; FakeNamedDeBruijn -&gt; Bool)
-&gt; Eq FakeNamedDeBruijn
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FakeNamedDeBruijn -&gt; FakeNamedDeBruijn -&gt; Bool
== :: FakeNamedDeBruijn -&gt; FakeNamedDeBruijn -&gt; Bool
$c/= :: FakeNamedDeBruijn -&gt; FakeNamedDeBruijn -&gt; Bool
/= :: FakeNamedDeBruijn -&gt; FakeNamedDeBruijn -&gt; Bool
</span
	    ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Eq</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866490"
      ><span id="local-6989586621681866494"
	><span class="annot"
	  ><span class="annottext"
	    >Eq FakeNamedDeBruijn
Eq FakeNamedDeBruijn =&gt;
(Int -&gt; FakeNamedDeBruijn -&gt; Int)
-&gt; (FakeNamedDeBruijn -&gt; Int) -&gt; Hashable FakeNamedDeBruijn
Int -&gt; FakeNamedDeBruijn -&gt; Int
FakeNamedDeBruijn -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
$chashWithSalt :: Int -&gt; FakeNamedDeBruijn -&gt; Int
hashWithSalt :: Int -&gt; FakeNamedDeBruijn -&gt; Int
$chash :: FakeNamedDeBruijn -&gt; Int
hash :: FakeNamedDeBruijn -&gt; Int
</span
	    ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.Class.html#Hashable"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Hashable</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866499"
      ><span class="annot"
	><span class="annottext"
	  >FakeNamedDeBruijn -&gt; ()
(FakeNamedDeBruijn -&gt; ()) -&gt; NFData FakeNamedDeBruijn
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: FakeNamedDeBruijn -&gt; ()
rnf :: FakeNamedDeBruijn -&gt; ()
</span
	  ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html#NFData"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >NFData</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866503"
      ><span id="local-6989586621681866506"
	><span id="local-6989586621681866511"
	  ><span class="annot"
	    ><a href="https://hackage.haskell.org/package/prettyprinter-configurable-1.36.0.0/docs/src/Text.PrettyBy.Internal.html#PrettyBy"
	      ><span class="hs-identifier hs-type"
		>PrettyBy</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621681866503"
	      ><span class="hs-identifier hs-type"
		>config</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-129"
      ></span
      ><span
      >
</span
      ><span id="line-130"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#toFake"
	><span class="hs-identifier hs-type"
	  >toFake</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#FakeNamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >FakeNamedDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-131"
      ></span
      ><span id="toFake"
      ><span class="annot"
	><span class="annottext"
	  >toFake :: DeBruijn -&gt; FakeNamedDeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#toFake"
	  ><span class="hs-identifier hs-var hs-var"
	    >toFake</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866517"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681866517"
	  ><span class="hs-identifier hs-var"
	    >ix</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn -&gt; FakeNamedDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#FakeNamedDeBruijn"
	><span class="hs-identifier hs-var"
	  >FakeNamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(NamedDeBruijn -&gt; FakeNamedDeBruijn)
-&gt; NamedDeBruijn -&gt; FakeNamedDeBruijn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Index -&gt; NamedDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-var"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><a href="PlutusCore.DeBruijn.Internal.html#fakeName"
	><span class="hs-identifier hs-var"
	  >fakeName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681866517"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-132"
      ></span
      ><span
      >
</span
      ><span id="line-133"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#fromFake"
	><span class="hs-identifier hs-type"
	  >fromFake</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#FakeNamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >FakeNamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-134"
      ></span
      ><span id="fromFake"
      ><span class="annot"
	><span class="annottext"
	  >fromFake :: FakeNamedDeBruijn -&gt; DeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#fromFake"
	  ><span class="hs-identifier hs-var hs-var"
	    >fromFake</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#FakeNamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >FakeNamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866518"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681866518"
	  ><span class="hs-identifier hs-var"
	    >ix</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; DeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-var"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681866518"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-135"
      ></span
      ><span
      >
</span
      ><span id="line-136"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Arbitrarily-chosen text to represent a missing textual representation of a debruijn index</span
	></span
      ><span
      >
</span
      ><span id="line-137"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#fakeName"
	><span class="hs-identifier hs-type"
	  >fakeName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.Internal.html#Text"
	><span class="hs-identifier hs-type"
	  >T.Text</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-138"
      ></span
      ><span id="fakeName"
      ><span class="annot"
	><span class="annottext"
	  >fakeName :: Text
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#fakeName"
	  ><span class="hs-identifier hs-var hs-var"
	    >fakeName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;i&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-139"
      ></span
      ><span
      >
</span
      ><span id="line-140"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span id="local-6989586621681866521"
      ><span class="annot"
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	  ><span class="hs-identifier hs-type"
	    >Eq</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >NamedDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-141"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- ignoring actual names and only relying solely on debruijn indices</span
      ><span
      >
</span
      ><span id="line-142"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866524"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681866524"
	  ><span class="hs-identifier hs-var"
	    >ix1</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621681866525"
      ><span class="annot"
	><span class="annottext"
	  >== :: NamedDeBruijn -&gt; NamedDeBruijn -&gt; Bool
</span
	  ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	  ><span class="hs-operator hs-var hs-var hs-var hs-var"
	    >==</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866526"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681866526"
	  ><span class="hs-identifier hs-var"
	    >ix2</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681866524"
	><span class="hs-identifier hs-var"
	  >ix1</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; Index -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681866526"
	><span class="hs-identifier hs-var"
	  >ix2</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-143"
      ></span
      ><span
      >
</span
      ><span id="line-144"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | A term name as a de Bruijn index, without the name string.</span
	></span
      ><span
      >
</span
      ><span id="line-145"
      ></span
      ><span class="hs-keyword"
      >newtype</span
      ><span
      > </span
      ><span id="DeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	  ><span class="hs-identifier hs-var"
	    >DeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="DeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	  ><span class="hs-identifier hs-var"
	    >DeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >{</span
      ><span id="dbnIndex"
      ><span class="annot"
	><span class="annottext"
	  >DeBruijn -&gt; Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#dbnIndex"
	  ><span class="hs-identifier hs-var hs-var"
	    >dbnIndex</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-146"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>stock</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866529"
      ><span id="local-6989586621681866533"
	><span id="local-6989586621681866537"
	  ><span class="annot"
	    ><span class="annottext"
	      >Int -&gt; DeBruijn -&gt; ShowS
[DeBruijn] -&gt; ShowS
DeBruijn -&gt; String
(Int -&gt; DeBruijn -&gt; ShowS)
-&gt; (DeBruijn -&gt; String) -&gt; ([DeBruijn] -&gt; ShowS) -&gt; Show DeBruijn
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; DeBruijn -&gt; ShowS
showsPrec :: Int -&gt; DeBruijn -&gt; ShowS
$cshow :: DeBruijn -&gt; String
show :: DeBruijn -&gt; String
$cshowList :: [DeBruijn] -&gt; ShowS
showList :: [DeBruijn] -&gt; ShowS
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#Show"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Show</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866540"
      ><span id="local-6989586621681866542"
	><span class="annot"
	  ><span class="annottext"
	    >(forall x. DeBruijn -&gt; Rep DeBruijn x)
-&gt; (forall x. Rep DeBruijn x -&gt; DeBruijn) -&gt; Generic DeBruijn
forall x. Rep DeBruijn x -&gt; DeBruijn
forall x. DeBruijn -&gt; Rep DeBruijn x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. DeBruijn -&gt; Rep DeBruijn x
from :: forall x. DeBruijn -&gt; Rep DeBruijn x
$cto :: forall x. Rep DeBruijn x -&gt; DeBruijn
to :: forall x. Rep DeBruijn x -&gt; DeBruijn
</span
	    ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Generics.html#Generic"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Generic</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866545"
      ><span id="local-6989586621681866548"
	><span class="annot"
	  ><span class="annottext"
	    >DeBruijn -&gt; DeBruijn -&gt; Bool
(DeBruijn -&gt; DeBruijn -&gt; Bool)
-&gt; (DeBruijn -&gt; DeBruijn -&gt; Bool) -&gt; Eq DeBruijn
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DeBruijn -&gt; DeBruijn -&gt; Bool
== :: DeBruijn -&gt; DeBruijn -&gt; Bool
$c/= :: DeBruijn -&gt; DeBruijn -&gt; Bool
/= :: DeBruijn -&gt; DeBruijn -&gt; Bool
</span
	    ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Eq</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-147"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>newtype</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866554"
      ><span id="local-6989586621681866558"
	><span class="annot"
	  ><span class="annottext"
	    >Eq DeBruijn
Eq DeBruijn =&gt;
(Int -&gt; DeBruijn -&gt; Int) -&gt; (DeBruijn -&gt; Int) -&gt; Hashable DeBruijn
Int -&gt; DeBruijn -&gt; Int
DeBruijn -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
$chashWithSalt :: Int -&gt; DeBruijn -&gt; Int
hashWithSalt :: Int -&gt; DeBruijn -&gt; Int
$chash :: DeBruijn -&gt; Int
hash :: DeBruijn -&gt; Int
</span
	    ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.Class.html#Hashable"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Hashable</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866563"
      ><span class="annot"
	><span class="annottext"
	  >DeBruijn -&gt; ()
(DeBruijn -&gt; ()) -&gt; NFData DeBruijn
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: DeBruijn -&gt; ()
rnf :: DeBruijn -&gt; ()
</span
	  ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html#NFData"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >NFData</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-148"
      ></span
      ><span
      >
</span
      ><span id="line-149"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | A type name as a de Bruijn index.</span
	></span
      ><span
      >
</span
      ><span id="line-150"
      ></span
      ><span class="hs-keyword"
      >newtype</span
      ><span
      > </span
      ><span id="NamedTyDeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	  ><span class="hs-identifier hs-var"
	    >NamedTyDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="NamedTyDeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	  ><span class="hs-identifier hs-var"
	    >NamedTyDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-151"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>stock</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866569"
      ><span id="local-6989586621681866573"
	><span id="local-6989586621681866577"
	  ><span class="annot"
	    ><span class="annottext"
	      >Int -&gt; NamedTyDeBruijn -&gt; ShowS
[NamedTyDeBruijn] -&gt; ShowS
NamedTyDeBruijn -&gt; String
(Int -&gt; NamedTyDeBruijn -&gt; ShowS)
-&gt; (NamedTyDeBruijn -&gt; String)
-&gt; ([NamedTyDeBruijn] -&gt; ShowS)
-&gt; Show NamedTyDeBruijn
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; NamedTyDeBruijn -&gt; ShowS
showsPrec :: Int -&gt; NamedTyDeBruijn -&gt; ShowS
$cshow :: NamedTyDeBruijn -&gt; String
show :: NamedTyDeBruijn -&gt; String
$cshowList :: [NamedTyDeBruijn] -&gt; ShowS
showList :: [NamedTyDeBruijn] -&gt; ShowS
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#Show"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Show</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866580"
      ><span id="local-6989586621681866582"
	><span class="annot"
	  ><span class="annottext"
	    >(forall x. NamedTyDeBruijn -&gt; Rep NamedTyDeBruijn x)
-&gt; (forall x. Rep NamedTyDeBruijn x -&gt; NamedTyDeBruijn)
-&gt; Generic NamedTyDeBruijn
forall x. Rep NamedTyDeBruijn x -&gt; NamedTyDeBruijn
forall x. NamedTyDeBruijn -&gt; Rep NamedTyDeBruijn x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. NamedTyDeBruijn -&gt; Rep NamedTyDeBruijn x
from :: forall x. NamedTyDeBruijn -&gt; Rep NamedTyDeBruijn x
$cto :: forall x. Rep NamedTyDeBruijn x -&gt; NamedTyDeBruijn
to :: forall x. Rep NamedTyDeBruijn x -&gt; NamedTyDeBruijn
</span
	    ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Generics.html#Generic"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Generic</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-152"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>newtype</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866584"
      ><span id="local-6989586621681866587"
	><span id="local-6989586621681866591"
	  ><span class="annot"
	    ><a href="https://hackage.haskell.org/package/prettyprinter-configurable-1.36.0.0/docs/src/Text.PrettyBy.Internal.html#PrettyBy"
	      ><span class="hs-identifier hs-type"
		>PrettyBy</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621681866584"
	      ><span class="hs-identifier hs-type"
		>config</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866596"
      ><span class="annot"
	><span class="annottext"
	  >NamedTyDeBruijn -&gt; ()
(NamedTyDeBruijn -&gt; ()) -&gt; NFData NamedTyDeBruijn
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: NamedTyDeBruijn -&gt; ()
rnf :: NamedTyDeBruijn -&gt; ()
</span
	  ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html#NFData"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >NFData</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-153"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- ignoring actual names and only relying solely on debruijn indices</span
      ><span
      >
</span
      ><span id="line-154"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866601"
      ><span id="local-6989586621681866605"
	><span class="annot"
	  ><span class="annottext"
	    >NamedTyDeBruijn -&gt; NamedTyDeBruijn -&gt; Bool
(NamedTyDeBruijn -&gt; NamedTyDeBruijn -&gt; Bool)
-&gt; (NamedTyDeBruijn -&gt; NamedTyDeBruijn -&gt; Bool)
-&gt; Eq NamedTyDeBruijn
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: NamedTyDeBruijn -&gt; NamedTyDeBruijn -&gt; Bool
== :: NamedTyDeBruijn -&gt; NamedTyDeBruijn -&gt; Bool
$c/= :: NamedTyDeBruijn -&gt; NamedTyDeBruijn -&gt; Bool
/= :: NamedTyDeBruijn -&gt; NamedTyDeBruijn -&gt; Bool
</span
	    ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Eq</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >via</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-155"
      ></span
      ><span
      >
</span
      ><span id="line-156"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span id="local-6989586621681866610"
      ><span class="annot"
	><span class="hs-identifier hs-type"
	  >Wrapped</span
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >NamedTyDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-157"
      ></span
      ><span
      >
</span
      ><span id="line-158"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | A type name as a de Bruijn index, without the name string.</span
	></span
      ><span
      >
</span
      ><span id="line-159"
      ></span
      ><span class="hs-keyword"
      >newtype</span
      ><span
      > </span
      ><span id="TyDeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	  ><span class="hs-identifier hs-var"
	    >TyDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="TyDeBruijn"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	  ><span class="hs-identifier hs-var"
	    >TyDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-160"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>stock</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866625"
      ><span id="local-6989586621681866629"
	><span id="local-6989586621681866633"
	  ><span class="annot"
	    ><span class="annottext"
	      >Int -&gt; TyDeBruijn -&gt; ShowS
[TyDeBruijn] -&gt; ShowS
TyDeBruijn -&gt; String
(Int -&gt; TyDeBruijn -&gt; ShowS)
-&gt; (TyDeBruijn -&gt; String)
-&gt; ([TyDeBruijn] -&gt; ShowS)
-&gt; Show TyDeBruijn
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TyDeBruijn -&gt; ShowS
showsPrec :: Int -&gt; TyDeBruijn -&gt; ShowS
$cshow :: TyDeBruijn -&gt; String
show :: TyDeBruijn -&gt; String
$cshowList :: [TyDeBruijn] -&gt; ShowS
showList :: [TyDeBruijn] -&gt; ShowS
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#Show"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Show</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866636"
      ><span id="local-6989586621681866638"
	><span class="annot"
	  ><span class="annottext"
	    >(forall x. TyDeBruijn -&gt; Rep TyDeBruijn x)
-&gt; (forall x. Rep TyDeBruijn x -&gt; TyDeBruijn) -&gt; Generic TyDeBruijn
forall x. Rep TyDeBruijn x -&gt; TyDeBruijn
forall x. TyDeBruijn -&gt; Rep TyDeBruijn x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. TyDeBruijn -&gt; Rep TyDeBruijn x
from :: forall x. TyDeBruijn -&gt; Rep TyDeBruijn x
$cto :: forall x. Rep TyDeBruijn x -&gt; TyDeBruijn
to :: forall x. Rep TyDeBruijn x -&gt; TyDeBruijn
</span
	    ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Generics.html#Generic"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Generic</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-161"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>newtype</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866641"
      ><span class="annot"
	><span class="annottext"
	  >TyDeBruijn -&gt; ()
(TyDeBruijn -&gt; ()) -&gt; NFData TyDeBruijn
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: TyDeBruijn -&gt; ()
rnf :: TyDeBruijn -&gt; ()
</span
	  ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html#NFData"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >NFData</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866645"
      ><span id="local-6989586621681866648"
	><span id="local-6989586621681866653"
	  ><span class="annot"
	    ><a href="https://hackage.haskell.org/package/prettyprinter-configurable-1.36.0.0/docs/src/Text.PrettyBy.Internal.html#PrettyBy"
	      ><span class="hs-identifier hs-type"
		>PrettyBy</span
		></a
	      ></span
	    ><span
	    > </span
	    ><span class="annot"
	    ><a href="#local-6989586621681866645"
	      ><span class="hs-identifier hs-type"
		>config</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-162"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866658"
      ><span id="local-6989586621681866662"
	><span class="annot"
	  ><span class="annottext"
	    >TyDeBruijn -&gt; TyDeBruijn -&gt; Bool
(TyDeBruijn -&gt; TyDeBruijn -&gt; Bool)
-&gt; (TyDeBruijn -&gt; TyDeBruijn -&gt; Bool) -&gt; Eq TyDeBruijn
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TyDeBruijn -&gt; TyDeBruijn -&gt; Bool
== :: TyDeBruijn -&gt; TyDeBruijn -&gt; Bool
$c/= :: TyDeBruijn -&gt; TyDeBruijn -&gt; Bool
/= :: TyDeBruijn -&gt; TyDeBruijn -&gt; Bool
</span
	    ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Eq</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >via</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-163"
      ></span
      ><span
      >
</span
      ><span id="line-164"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span id="local-6989586621681866667"
      ><span class="annot"
	><span class="hs-identifier hs-type"
	  >Wrapped</span
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >TyDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-165"
      ></span
      ><span
      >
</span
      ><span id="line-166"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span id="local-6989586621681865924"
      ><span id="local-6989586621681866682"
	><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="PlutusCore.Pretty.ConfigName.html#HasPrettyConfigName"
	    ><span class="hs-identifier hs-type"
	      >HasPrettyConfigName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681865924"
	    ><span class="hs-identifier hs-type"
	      >config</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >=&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="https://hackage.haskell.org/package/prettyprinter-configurable-1.36.0.0/docs/src/Text.PrettyBy.Internal.html#PrettyBy"
	    ><span class="hs-identifier hs-type"
	      >PrettyBy</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681865924"
	    ><span class="hs-identifier hs-type"
	      >config</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	    ><span class="hs-identifier hs-type"
	      >NamedDeBruijn</span
	      ></a
	    ></span
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-167"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681866694"
      ><span class="annot"
	><span class="annottext"
	  >prettyBy :: forall ann. config -&gt; NamedDeBruijn -&gt; Doc ann
</span
	  ><a href="#local-6989586621681866694"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >prettyBy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866696"
      ><span class="annot"
	><span class="annottext"
	  >config
</span
	  ><a href="#local-6989586621681866696"
	  ><span class="hs-identifier hs-var"
	    >config</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866697"
      ><span class="annot"
	><span class="annottext"
	  >Text
</span
	  ><a href="#local-6989586621681866697"
	  ><span class="hs-identifier hs-var"
	    >txt</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866698"
      ><span class="annot"
	><span class="annottext"
	  >Word64
</span
	  ><a href="#local-6989586621681866698"
	  ><span class="hs-identifier hs-var"
	    >ix</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-168"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621681866699"
	><span class="hs-identifier hs-var"
	  >showsUnique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#pretty"
	><span class="hs-identifier hs-var"
	  >pretty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Doc ann) -&gt; Text -&gt; Doc ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text
</span
	><a href="PlutusCore.Name.Unique.html#toPrintedName"
	><span class="hs-identifier hs-var"
	  >toPrintedName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><a href="#local-6989586621681866697"
	><span class="hs-identifier hs-var"
	  >txt</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;!&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Doc Any -&gt; Text
forall ann. Doc ann -&gt; Text
forall str ann. Render str =&gt; Doc ann -&gt; str
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-configurable-1.36.0.0/docs/src/Text.PrettyBy.Default.html#render"
	><span class="hs-identifier hs-var"
	  >render</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Word64 -&gt; Doc Any
forall ann. Word64 -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#pretty"
	><span class="hs-identifier hs-var"
	  >pretty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><a href="#local-6989586621681866698"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-169"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#otherwise"
	><span class="hs-identifier hs-var"
	  >otherwise</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Doc ann
forall ann. Text -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#pretty"
	><span class="hs-identifier hs-var"
	  >pretty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Doc ann) -&gt; Text -&gt; Doc ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text
</span
	><a href="PlutusCore.Name.Unique.html#toPrintedName"
	><span class="hs-identifier hs-var"
	  >toPrintedName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><a href="#local-6989586621681866697"
	><span class="hs-identifier hs-var"
	  >txt</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-170"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-171"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="PlutusCore.Pretty.ConfigName.html#PrettyConfigName"
	><span class="hs-identifier hs-type"
	  >PrettyConfigName</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866699"
      ><span class="annot"
	><span class="annottext"
	  >Bool
</span
	  ><a href="#local-6989586621681866699"
	  ><span class="hs-identifier hs-var"
	    >showsUnique</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>config -&gt; PrettyConfigName
forall config.
HasPrettyConfigName config =&gt;
config -&gt; PrettyConfigName
</span
	><a href="PlutusCore.Pretty.ConfigName.html#toPrettyConfigName"
	><span class="hs-identifier hs-var"
	  >toPrettyConfigName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>config
</span
	><a href="#local-6989586621681866696"
	><span class="hs-identifier hs-var"
	  >config</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-172"
      ></span
      ><span
      >
</span
      ><span id="line-173"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span id="local-6989586621681865947"
      ><span id="local-6989586621681866709"
	><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="PlutusCore.Pretty.ConfigName.html#HasPrettyConfigName"
	    ><span class="hs-identifier hs-type"
	      >HasPrettyConfigName</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681865947"
	    ><span class="hs-identifier hs-type"
	      >config</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >=&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="https://hackage.haskell.org/package/prettyprinter-configurable-1.36.0.0/docs/src/Text.PrettyBy.Internal.html#PrettyBy"
	    ><span class="hs-identifier hs-type"
	      >PrettyBy</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681865947"
	    ><span class="hs-identifier hs-type"
	      >config</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	    ><span class="hs-identifier hs-type"
	      >DeBruijn</span
	      ></a
	    ></span
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-174"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681866717"
      ><span class="annot"
	><span class="annottext"
	  >prettyBy :: forall ann. config -&gt; DeBruijn -&gt; Doc ann
</span
	  ><a href="https://hackage.haskell.org/package/prettyprinter-configurable-1.36.0.0/docs/src/Text.PrettyBy.Internal.html#prettyBy"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >prettyBy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866718"
      ><span class="annot"
	><span class="annottext"
	  >config
</span
	  ><a href="#local-6989586621681866718"
	  ><span class="hs-identifier hs-var"
	    >config</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866719"
      ><span class="annot"
	><span class="annottext"
	  >Word64
</span
	  ><a href="#local-6989586621681866719"
	  ><span class="hs-identifier hs-var"
	    >ix</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-175"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621681866720"
	><span class="hs-identifier hs-var"
	  >showsUnique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Doc ann
</span
	><span class="hs-string"
	>&quot;!&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64 -&gt; Doc ann
forall ann. Word64 -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#pretty"
	><span class="hs-identifier hs-var"
	  >pretty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><a href="#local-6989586621681866719"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-176"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#otherwise"
	><span class="hs-identifier hs-var"
	  >otherwise</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Doc ann
</span
	><span class="hs-string"
	>&quot;&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-177"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-178"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="PlutusCore.Pretty.ConfigName.html#PrettyConfigName"
	><span class="hs-identifier hs-type"
	  >PrettyConfigName</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866720"
      ><span class="annot"
	><span class="annottext"
	  >Bool
</span
	  ><a href="#local-6989586621681866720"
	  ><span class="hs-identifier hs-var"
	    >showsUnique</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>config -&gt; PrettyConfigName
forall config.
HasPrettyConfigName config =&gt;
config -&gt; PrettyConfigName
</span
	><a href="PlutusCore.Pretty.ConfigName.html#toPrettyConfigName"
	><span class="hs-identifier hs-var"
	  >toPrettyConfigName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>config
</span
	><a href="#local-6989586621681866718"
	><span class="hs-identifier hs-var"
	  >config</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-179"
      ></span
      ><span
      >
</span
      ><span id="line-180"
      ></span
      ><span class="hs-keyword"
      >class</span
      ><span
      > </span
      ><span id="HasIndex"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#HasIndex"
	  ><span class="hs-identifier hs-var"
	    >HasIndex</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681865965"
      ><span class="annot"
	><a href="#local-6989586621681865965"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-181"
      ></span
      ><span
      >  </span
      ><span id="index"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#index"
	  ><span class="hs-identifier hs-type"
	    >index</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier hs-type"
	>Lens'</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681865965"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-182"
      ></span
      ><span
      >
</span
      ><span id="line-183"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#HasIndex"
	><span class="hs-identifier hs-type"
	  >HasIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-184"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681866728"
      ><span class="annot"
	><span class="annottext"
	  >index :: Lens' NamedDeBruijn Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#index"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >index</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(NamedDeBruijn -&gt; Index)
-&gt; (NamedDeBruijn -&gt; Index -&gt; NamedDeBruijn)
-&gt; Lens' NamedDeBruijn Index
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span
	><span class="hs-identifier hs-var"
	>lens</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn -&gt; Index
</span
	><a href="#local-6989586621681866730"
	><span class="hs-identifier hs-var"
	  >g</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn -&gt; Index -&gt; NamedDeBruijn
</span
	><a href="#local-6989586621681866731"
	><span class="hs-identifier hs-var"
	  >s</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-185"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-186"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621681866730"
      ><span class="annot"
	><span class="annottext"
	  >g :: NamedDeBruijn -&gt; Index
</span
	  ><a href="#local-6989586621681866730"
	  ><span class="hs-identifier hs-var hs-var"
	    >g</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn -&gt; Index
</span
	><a href="PlutusCore.DeBruijn.Internal.html#ndbnIndex"
	><span class="hs-identifier hs-var"
	  >ndbnIndex</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-187"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621681866731"
      ><span class="annot"
	><span class="annottext"
	  >s :: NamedDeBruijn -&gt; Index -&gt; NamedDeBruijn
</span
	  ><a href="#local-6989586621681866731"
	  ><span class="hs-identifier hs-var hs-var"
	    >s</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866732"
      ><span class="annot"
	><span class="annottext"
	  >NamedDeBruijn
</span
	  ><a href="#local-6989586621681866732"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866733"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681866733"
	  ><span class="hs-identifier hs-var"
	    >i</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn
</span
	><a href="#local-6989586621681866732"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#ndbnIndex"
	><span class="hs-identifier hs-var"
	  >ndbnIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681866733"
	><span class="hs-identifier hs-type"
	  >i</span
	  ></a
	></span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-188"
      ></span
      ><span
      >
</span
      ><span id="line-189"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#HasIndex"
	><span class="hs-identifier hs-type"
	  >HasIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-190"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681866738"
      ><span class="annot"
	><span class="annottext"
	  >index :: Lens' DeBruijn Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#index"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >index</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(DeBruijn -&gt; Index)
-&gt; (DeBruijn -&gt; Index -&gt; DeBruijn) -&gt; Lens' DeBruijn Index
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span
	><span class="hs-identifier hs-var"
	>lens</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DeBruijn -&gt; Index
</span
	><a href="#local-6989586621681866739"
	><span class="hs-identifier hs-var"
	  >g</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DeBruijn -&gt; Index -&gt; DeBruijn
</span
	><a href="#local-6989586621681866740"
	><span class="hs-identifier hs-var"
	  >s</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-191"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-192"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621681866739"
      ><span class="annot"
	><span class="annottext"
	  >g :: DeBruijn -&gt; Index
</span
	  ><a href="#local-6989586621681866739"
	  ><span class="hs-identifier hs-var hs-var"
	    >g</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DeBruijn -&gt; Index
</span
	><a href="PlutusCore.DeBruijn.Internal.html#dbnIndex"
	><span class="hs-identifier hs-var"
	  >dbnIndex</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-193"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621681866740"
      ><span class="annot"
	><span class="annottext"
	  >s :: DeBruijn -&gt; Index -&gt; DeBruijn
</span
	  ><a href="#local-6989586621681866740"
	  ><span class="hs-identifier hs-var hs-var"
	    >s</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866741"
      ><span class="annot"
	><span class="annottext"
	  >DeBruijn
</span
	  ><a href="#local-6989586621681866741"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866742"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681866742"
	  ><span class="hs-identifier hs-var"
	    >i</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DeBruijn
</span
	><a href="#local-6989586621681866741"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#dbnIndex"
	><span class="hs-identifier hs-var"
	  >dbnIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681866742"
	><span class="hs-identifier hs-type"
	  >i</span
	  ></a
	></span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-194"
      ></span
      ><span
      >
</span
      ><span id="line-195"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#HasIndex"
	><span class="hs-identifier hs-type"
	  >HasIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedTyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-196"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681866753"
      ><span class="annot"
	><span class="annottext"
	  >index :: Lens' NamedTyDeBruijn Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#index"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >index</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Unwrapped NamedTyDeBruijn -&gt; f (Unwrapped NamedTyDeBruijn))
-&gt; NamedTyDeBruijn -&gt; f NamedTyDeBruijn
forall s. Wrapped s =&gt; Iso' s (Unwrapped s)
Iso' NamedTyDeBruijn (Unwrapped NamedTyDeBruijn)
</span
	><span class="hs-identifier hs-var"
	>_Wrapped'</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Unwrapped NamedTyDeBruijn -&gt; f (Unwrapped NamedTyDeBruijn))
 -&gt; NamedTyDeBruijn -&gt; f NamedTyDeBruijn)
-&gt; ((Index -&gt; f Index)
    -&gt; Unwrapped NamedTyDeBruijn -&gt; f (Unwrapped NamedTyDeBruijn))
-&gt; (Index -&gt; f Index)
-&gt; NamedTyDeBruijn
-&gt; f NamedTyDeBruijn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Index -&gt; f Index)
-&gt; Unwrapped NamedTyDeBruijn -&gt; f (Unwrapped NamedTyDeBruijn)
forall a. HasIndex a =&gt; Lens' a Index
Lens' (Unwrapped NamedTyDeBruijn) Index
</span
	><a href="PlutusCore.DeBruijn.Internal.html#index"
	><span class="hs-identifier hs-var"
	  >index</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-197"
      ></span
      ><span
      >
</span
      ><span id="line-198"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#HasIndex"
	><span class="hs-identifier hs-type"
	  >HasIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	><span class="hs-identifier hs-type"
	  >TyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-199"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681866765"
      ><span class="annot"
	><span class="annottext"
	  >index :: Lens' TyDeBruijn Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#index"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >index</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Unwrapped TyDeBruijn -&gt; f (Unwrapped TyDeBruijn))
-&gt; TyDeBruijn -&gt; f TyDeBruijn
forall s. Wrapped s =&gt; Iso' s (Unwrapped s)
Iso' TyDeBruijn (Unwrapped TyDeBruijn)
</span
	><span class="hs-identifier hs-var"
	>_Wrapped'</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Unwrapped TyDeBruijn -&gt; f (Unwrapped TyDeBruijn))
 -&gt; TyDeBruijn -&gt; f TyDeBruijn)
-&gt; ((Index -&gt; f Index)
    -&gt; Unwrapped TyDeBruijn -&gt; f (Unwrapped TyDeBruijn))
-&gt; (Index -&gt; f Index)
-&gt; TyDeBruijn
-&gt; f TyDeBruijn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Index -&gt; f Index)
-&gt; Unwrapped TyDeBruijn -&gt; f (Unwrapped TyDeBruijn)
forall a. HasIndex a =&gt; Lens' a Index
Lens' (Unwrapped TyDeBruijn) Index
</span
	><a href="PlutusCore.DeBruijn.Internal.html#index"
	><span class="hs-identifier hs-var"
	  >index</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-200"
      ></span
      ><span
      >
</span
      ><span id="line-201"
      ></span
      ><span class="hs-comment"
      >-- Converting from normal names to DeBruijn indices, and vice versa</span
      ><span
      >
</span
      ><span id="line-202"
      ></span
      ><span
      >
</span
      ><span id="line-203"
      ></span
      ><span class="hs-comment"
      >{- Note [Levels and indices]
The indices ('Index') that we actually store as our de Bruijn indices in the program
are *relative* - that is, they say how many levels above the *current* level to look for
the binder.

However, when doing conversions it is easier to record the  *absolute* level of a variable,
in our state, since that way we don't have to adjust our mapping when we go under a binder
(whereas for relative indices we would need to increment them all by one, as the current
level has increased).

However, this means that we *do* need to do an adjustment when we store an index as a level
or extract a level to use it as an index. The adjustment is fairly straightforward:
- An index `i` points to a binder `i` levels above (smaller than) the current level, so the level
  of `i` is `current - i`.
- A level `l` which is `i` levels above (smaller than) the current level has an index of `i`, so it
  is also calculated as `current - l`.

We use a newtype to keep these separate, since getting it wrong will lead to annoying bugs.
-}</span
      ><span
      >
</span
      ><span id="line-222"
      ></span
      ><span
      >
</span
      ><span id="line-223"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | An absolute level in the program.</span
	></span
      ><span
      >
</span
      ><span id="line-224"
      ></span
      ><span class="hs-keyword"
      >newtype</span
      ><span
      > </span
      ><span id="Level"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Level"
	  ><span class="hs-identifier hs-var"
	    >Level</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="Level"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Level"
	  ><span class="hs-identifier hs-var"
	    >Level</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-bignum-1.3/docs/src/GHC.Num.Integer.html#Integer"
	><span class="hs-identifier hs-type"
	  >Integer</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>newtype</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866768"
      ><span id="local-6989586621681866773"
	><span class="annot"
	  ><span class="annottext"
	    >Level -&gt; Level -&gt; Bool
(Level -&gt; Level -&gt; Bool) -&gt; (Level -&gt; Level -&gt; Bool) -&gt; Eq Level
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Level -&gt; Level -&gt; Bool
== :: Level -&gt; Level -&gt; Bool
$c/= :: Level -&gt; Level -&gt; Bool
/= :: Level -&gt; Level -&gt; Bool
</span
	    ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Eq</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866780"
      ><span id="local-6989586621681866785"
	><span id="local-6989586621681866789"
	  ><span id="local-6989586621681866793"
	    ><span id="local-6989586621681866797"
	      ><span id="local-6989586621681866801"
		><span id="local-6989586621681866805"
		  ><span class="annot"
		    ><span class="annottext"
		      >Eq Level
Eq Level =&gt;
(Level -&gt; Level -&gt; Ordering)
-&gt; (Level -&gt; Level -&gt; Bool)
-&gt; (Level -&gt; Level -&gt; Bool)
-&gt; (Level -&gt; Level -&gt; Bool)
-&gt; (Level -&gt; Level -&gt; Bool)
-&gt; (Level -&gt; Level -&gt; Level)
-&gt; (Level -&gt; Level -&gt; Level)
-&gt; Ord Level
Level -&gt; Level -&gt; Bool
Level -&gt; Level -&gt; Ordering
Level -&gt; Level -&gt; Level
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Level -&gt; Level -&gt; Ordering
compare :: Level -&gt; Level -&gt; Ordering
$c&lt; :: Level -&gt; Level -&gt; Bool
&lt; :: Level -&gt; Level -&gt; Bool
$c&lt;= :: Level -&gt; Level -&gt; Bool
&lt;= :: Level -&gt; Level -&gt; Bool
$c&gt; :: Level -&gt; Level -&gt; Bool
&gt; :: Level -&gt; Level -&gt; Bool
$c&gt;= :: Level -&gt; Level -&gt; Bool
&gt;= :: Level -&gt; Level -&gt; Bool
$cmax :: Level -&gt; Level -&gt; Level
max :: Level -&gt; Level -&gt; Level
$cmin :: Level -&gt; Level -&gt; Level
min :: Level -&gt; Level -&gt; Level
</span
		      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Ord"
		      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			>Ord</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866810"
      ><span id="local-6989586621681866814"
	><span id="local-6989586621681866818"
	  ><span id="local-6989586621681866822"
	    ><span id="local-6989586621681866826"
	      ><span id="local-6989586621681866830"
		><span id="local-6989586621681866834"
		  ><span class="annot"
		    ><span class="annottext"
		      >Integer -&gt; Level
Level -&gt; Level
Level -&gt; Level -&gt; Level
(Level -&gt; Level -&gt; Level)
-&gt; (Level -&gt; Level -&gt; Level)
-&gt; (Level -&gt; Level -&gt; Level)
-&gt; (Level -&gt; Level)
-&gt; (Level -&gt; Level)
-&gt; (Level -&gt; Level)
-&gt; (Integer -&gt; Level)
-&gt; Num Level
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
$c+ :: Level -&gt; Level -&gt; Level
+ :: Level -&gt; Level -&gt; Level
$c- :: Level -&gt; Level -&gt; Level
- :: Level -&gt; Level -&gt; Level
$c* :: Level -&gt; Level -&gt; Level
* :: Level -&gt; Level -&gt; Level
$cnegate :: Level -&gt; Level
negate :: Level -&gt; Level
$cabs :: Level -&gt; Level
abs :: Level -&gt; Level
$csignum :: Level -&gt; Level
signum :: Level -&gt; Level
$cfromInteger :: Integer -&gt; Level
fromInteger :: Integer -&gt; Level
</span
		      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Num.html#Num"
		      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			>Num</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866843"
      ><span class="annot"
	><span class="annottext"
	  >Num Level
Ord Level
(Num Level, Ord Level) =&gt; (Level -&gt; Rational) -&gt; Real Level
Level -&gt; Rational
forall a. (Num a, Ord a) =&gt; (a -&gt; Rational) -&gt; Real a
$ctoRational :: Level -&gt; Rational
toRational :: Level -&gt; Rational
</span
	  ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Real.html#Real"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	    >Real</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866849"
      ><span id="local-6989586621681866854"
	><span id="local-6989586621681866858"
	  ><span id="local-6989586621681866862"
	    ><span id="local-6989586621681866866"
	      ><span id="local-6989586621681866870"
		><span id="local-6989586621681866874"
		  ><span id="local-6989586621681866878"
		    ><span class="annot"
		      ><span class="annottext"
			>Int -&gt; Level
Level -&gt; Int
Level -&gt; [Level]
Level -&gt; Level
Level -&gt; Level -&gt; [Level]
Level -&gt; Level -&gt; Level -&gt; [Level]
(Level -&gt; Level)
-&gt; (Level -&gt; Level)
-&gt; (Int -&gt; Level)
-&gt; (Level -&gt; Int)
-&gt; (Level -&gt; [Level])
-&gt; (Level -&gt; Level -&gt; [Level])
-&gt; (Level -&gt; Level -&gt; [Level])
-&gt; (Level -&gt; Level -&gt; Level -&gt; [Level])
-&gt; Enum Level
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
$csucc :: Level -&gt; Level
succ :: Level -&gt; Level
$cpred :: Level -&gt; Level
pred :: Level -&gt; Level
$ctoEnum :: Int -&gt; Level
toEnum :: Int -&gt; Level
$cfromEnum :: Level -&gt; Int
fromEnum :: Level -&gt; Int
$cenumFrom :: Level -&gt; [Level]
enumFrom :: Level -&gt; [Level]
$cenumFromThen :: Level -&gt; Level -&gt; [Level]
enumFromThen :: Level -&gt; Level -&gt; [Level]
$cenumFromTo :: Level -&gt; Level -&gt; [Level]
enumFromTo :: Level -&gt; Level -&gt; [Level]
$cenumFromThenTo :: Level -&gt; Level -&gt; Level -&gt; [Level]
enumFromThenTo :: Level -&gt; Level -&gt; Level -&gt; [Level]
</span
			><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Enum.html#Enum"
			><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			  >Enum</span
			  ></a
			></span
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866887"
      ><span id="local-6989586621681866892"
	><span id="local-6989586621681866896"
	  ><span id="local-6989586621681866900"
	    ><span id="local-6989586621681866904"
	      ><span id="local-6989586621681866908"
		><span id="local-6989586621681866912"
		  ><span class="annot"
		    ><span class="annottext"
		      >Enum Level
Real Level
(Real Level, Enum Level) =&gt;
(Level -&gt; Level -&gt; Level)
-&gt; (Level -&gt; Level -&gt; Level)
-&gt; (Level -&gt; Level -&gt; Level)
-&gt; (Level -&gt; Level -&gt; Level)
-&gt; (Level -&gt; Level -&gt; (Level, Level))
-&gt; (Level -&gt; Level -&gt; (Level, Level))
-&gt; (Level -&gt; Integer)
-&gt; Integral Level
Level -&gt; Integer
Level -&gt; Level -&gt; (Level, Level)
Level -&gt; Level -&gt; Level
forall a.
(Real a, Enum a) =&gt;
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; (a, a))
-&gt; (a -&gt; a -&gt; (a, a))
-&gt; (a -&gt; Integer)
-&gt; Integral a
$cquot :: Level -&gt; Level -&gt; Level
quot :: Level -&gt; Level -&gt; Level
$crem :: Level -&gt; Level -&gt; Level
rem :: Level -&gt; Level -&gt; Level
$cdiv :: Level -&gt; Level -&gt; Level
div :: Level -&gt; Level -&gt; Level
$cmod :: Level -&gt; Level -&gt; Level
mod :: Level -&gt; Level -&gt; Level
$cquotRem :: Level -&gt; Level -&gt; (Level, Level)
quotRem :: Level -&gt; Level -&gt; (Level, Level)
$cdivMod :: Level -&gt; Level -&gt; (Level, Level)
divMod :: Level -&gt; Level -&gt; (Level, Level)
$ctoInteger :: Level -&gt; Integer
toInteger :: Level -&gt; Integer
</span
		      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Real.html#Integral"
		      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			>Integral</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-225"
      ></span
      ><span
      >
</span
      ><span id="line-226"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | During visiting the AST we hold a reader &quot;state&quot; of current level and a current
scoping (levelMapping).
Invariant-A: the current level is positive and greater than all levels in the levelMapping.
Invariant-B: only positive levels are stored in the levelMapping.
-}</span
	></span
      ><span
      >
</span
      ><span id="line-231"
      ></span
      ><span class="hs-keyword"
      >data</span
      ><span
      > </span
      ><span id="LevelInfo"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-var"
	    >LevelInfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="LevelInfo"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-var"
	    >LevelInfo</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-232"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >{</span
      ><span
      > </span
      ><span id="currentLevel"
      ><span class="annot"
	><span class="annottext"
	  >LevelInfo -&gt; Level
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#currentLevel"
	  ><span class="hs-identifier hs-var hs-var"
	    >currentLevel</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-233"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="levelMapping"
      ><span class="annot"
	><span class="annottext"
	  >LevelInfo -&gt; Bimap Unique Level
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#levelMapping"
	  ><span class="hs-identifier hs-var hs-var"
	    >levelMapping</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier hs-type"
	>BM.Bimap</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Unique"
	><span class="hs-identifier hs-type"
	  >Unique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-234"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-235"
      ></span
      ><span
      >
</span
      ><span id="line-236"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Declare a name with a unique, recording the mapping to a 'Level'.</span
	></span
      ><span
      >
</span
      ><span id="line-237"
      ></span
      ><span id="local-6989586621681865982"
      ><span id="local-6989586621681865984"
	><span id="local-6989586621681865985"
	  ><span id="local-6989586621681865987"
	    ><span class="annot"
	      ><a href="PlutusCore.DeBruijn.Internal.html#declareUnique"
		><span class="hs-identifier hs-type"
		  >declareUnique</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
		><span class="hs-identifier hs-type"
		  >MonadReader</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
		><span class="hs-identifier hs-type"
		  >LevelInfo</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681865982"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Name.Unique.html#HasUnique"
		><span class="hs-identifier hs-type"
		  >HasUnique</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681865984"
		><span class="hs-identifier hs-type"
		  >name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681865985"
		><span class="hs-identifier hs-type"
		  >unique</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681865984"
		><span class="hs-identifier hs-type"
		  >name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681865982"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681865987"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681865982"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681865987"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-238"
      ></span
      ><span id="declareUnique"
      ><span class="annot"
	><span class="annottext"
	  >declareUnique :: forall (m :: * -&gt; *) name unique a.
(MonadReader LevelInfo m, HasUnique name unique) =&gt;
name -&gt; m a -&gt; m a
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#declareUnique"
	  ><span class="hs-identifier hs-var hs-var"
	    >declareUnique</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866928"
      ><span class="annot"
	><span class="annottext"
	  >name
</span
	  ><a href="#local-6989586621681866928"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-239"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>(LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a
forall a. (LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#local"
	><span class="hs-identifier hs-var"
	  >local</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a)
-&gt; (LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-type"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866930"
      ><span class="annot"
	><span class="annottext"
	  >Level
</span
	  ><a href="#local-6989586621681866930"
	  ><span class="hs-identifier hs-var"
	    >current</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866931"
      ><span class="annot"
	><span class="annottext"
	  >Bimap Unique Level
</span
	  ><a href="#local-6989586621681866931"
	  ><span class="hs-identifier hs-var"
	    >ls</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Bimap Unique Level -&gt; LevelInfo
</span
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-var"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681866930"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Bimap Unique Level -&gt; LevelInfo)
-&gt; Bimap Unique Level -&gt; LevelInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; Level -&gt; Bimap Unique Level -&gt; Bimap Unique Level
forall a b. (Ord a, Ord b) =&gt; a -&gt; b -&gt; Bimap a b -&gt; Bimap a b
</span
	><span class="hs-identifier hs-var"
	>BM.insert</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>name
</span
	><a href="#local-6989586621681866928"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>name -&gt; Getting Unique name Unique -&gt; Unique
forall s a. s -&gt; Getting a s a -&gt; a
</span
	><span class="hs-operator hs-var"
	>^.</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Getting Unique name Unique
forall name unique. HasUnique name unique =&gt; Lens' name Unique
Lens' name Unique
</span
	><a href="PlutusCore.Name.Unique.html#theUnique"
	><span class="hs-identifier hs-var"
	  >theUnique</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681866930"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bimap Unique Level
</span
	><a href="#local-6989586621681866931"
	><span class="hs-identifier hs-var"
	  >ls</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-240"
      ></span
      ><span
      >
</span
      ><span id="line-241"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | Declares a new binder by assigning a fresh unique to the *current level*.
Maintains invariant-B of 'LevelInfo' (that only positive levels are stored),
since current level is always positive (invariant-A).
See Note [DeBruijn indices of Binders]
-}</span
	></span
      ><span
      >
</span
      ><span id="line-246"
      ></span
      ><span id="local-6989586621681866004"
      ><span id="local-6989586621681866006"
	><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#declareBinder"
	    ><span class="hs-identifier hs-type"
	      >declareBinder</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	    ><span class="hs-identifier hs-type"
	      >MonadReader</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	    ><span class="hs-identifier hs-type"
	      >LevelInfo</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866004"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >,</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Quote.html#MonadQuote"
	    ><span class="hs-identifier hs-type"
	      >MonadQuote</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866004"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >=&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866004"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866006"
	    ><span class="hs-identifier hs-type"
	      >a</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866004"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866006"
	    ><span class="hs-identifier hs-type"
	      >a</span
	      ></a
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-247"
      ></span
      ><span id="declareBinder"
      ><span class="annot"
	><span class="annottext"
	  >declareBinder :: forall (m :: * -&gt; *) a.
(MonadReader LevelInfo m, MonadQuote m) =&gt;
m a -&gt; m a
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#declareBinder"
	  ><span class="hs-identifier hs-var hs-var"
	    >declareBinder</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866944"
      ><span class="annot"
	><span class="annottext"
	  >m a
</span
	  ><a href="#local-6989586621681866944"
	  ><span class="hs-identifier hs-var"
	    >act</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-248"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681866945"
      ><span class="annot"
	><span class="annottext"
	  >Unique
</span
	  ><a href="#local-6989586621681866945"
	  ><span class="hs-identifier hs-var"
	    >newU</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m Unique
forall (m :: * -&gt; *). MonadQuote m =&gt; m Unique
</span
	><a href="PlutusCore.Quote.html#freshUnique"
	><span class="hs-identifier hs-var"
	  >freshUnique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-249"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>(LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a
forall a. (LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#local"
	><span class="hs-identifier hs-var"
	  >local</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-type"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866947"
      ><span class="annot"
	><span class="annottext"
	  >Level
</span
	  ><a href="#local-6989586621681866947"
	  ><span class="hs-identifier hs-var"
	    >current</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866948"
      ><span class="annot"
	><span class="annottext"
	  >Bimap Unique Level
</span
	  ><a href="#local-6989586621681866948"
	  ><span class="hs-identifier hs-var"
	    >ls</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Bimap Unique Level -&gt; LevelInfo
</span
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-var"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681866947"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Bimap Unique Level -&gt; LevelInfo)
-&gt; Bimap Unique Level -&gt; LevelInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; Level -&gt; Bimap Unique Level -&gt; Bimap Unique Level
forall a b. (Ord a, Ord b) =&gt; a -&gt; b -&gt; Bimap a b -&gt; Bimap a b
</span
	><span class="hs-identifier hs-var"
	>BM.insert</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681866945"
	><span class="hs-identifier hs-var"
	  >newU</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681866947"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bimap Unique Level
</span
	><a href="#local-6989586621681866948"
	><span class="hs-identifier hs-var"
	  >ls</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m a
</span
	><a href="#local-6989586621681866944"
	><span class="hs-identifier hs-var"
	  >act</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-250"
      ></span
      ><span
      >
</span
      ><span id="line-251"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | Enter a scope, incrementing the current 'Level' by one
Maintains invariant-A (that the current level is positive).
-}</span
	></span
      ><span
      >
</span
      ><span id="line-254"
      ></span
      ><span id="local-6989586621681866010"
      ><span id="local-6989586621681866011"
	><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#withScope"
	    ><span class="hs-identifier hs-type"
	      >withScope</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	    ><span class="hs-identifier hs-type"
	      >MonadReader</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	    ><span class="hs-identifier hs-type"
	      >LevelInfo</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866010"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >=&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866010"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866011"
	    ><span class="hs-identifier hs-type"
	      >a</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866010"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866011"
	    ><span class="hs-identifier hs-type"
	      >a</span
	      ></a
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-255"
      ></span
      ><span id="withScope"
      ><span class="annot"
	><span class="annottext"
	  >withScope :: forall (m :: * -&gt; *) a. MonadReader LevelInfo m =&gt; m a -&gt; m a
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#withScope"
	  ><span class="hs-identifier hs-var hs-var"
	    >withScope</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a
forall a. (LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#local"
	><span class="hs-identifier hs-var"
	  >local</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a)
-&gt; (LevelInfo -&gt; LevelInfo) -&gt; m a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-type"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681866953"
      ><span class="annot"
	><span class="annottext"
	  >Level
</span
	  ><a href="#local-6989586621681866953"
	  ><span class="hs-identifier hs-var"
	    >current</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681866954"
      ><span class="annot"
	><span class="annottext"
	  >Bimap Unique Level
</span
	  ><a href="#local-6989586621681866954"
	  ><span class="hs-identifier hs-var"
	    >ls</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Bimap Unique Level -&gt; LevelInfo
</span
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-var"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681866953"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Level -&gt; Level
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bimap Unique Level
</span
	><a href="#local-6989586621681866954"
	><span class="hs-identifier hs-var"
	  >ls</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-256"
      ></span
      ><span
      >
</span
      ><span id="line-257"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | We cannot do a correct translation to or from de Bruijn indices if the program is
not well-scoped. So we throw an error in such a case.
-}</span
	></span
      ><span
      >
</span
      ><span id="line-260"
      ></span
      ><span class="hs-keyword"
      >data</span
      ><span
      > </span
      ><span id="FreeVariableError"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#FreeVariableError"
	  ><span class="hs-identifier hs-var"
	    >FreeVariableError</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-261"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="FreeUnique"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#FreeUnique"
	  ><span class="hs-identifier hs-var"
	    >FreeUnique</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >!</span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Unique"
	><span class="hs-identifier hs-type"
	  >Unique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-262"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span id="FreeIndex"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#FreeIndex"
	  ><span class="hs-identifier hs-var"
	    >FreeIndex</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >!</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-263"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>stock</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681866959"
      ><span id="local-6989586621681866966"
	><span id="local-6989586621681866970"
	  ><span class="annot"
	    ><span class="annottext"
	      >Int -&gt; FreeVariableError -&gt; ShowS
[FreeVariableError] -&gt; ShowS
FreeVariableError -&gt; String
(Int -&gt; FreeVariableError -&gt; ShowS)
-&gt; (FreeVariableError -&gt; String)
-&gt; ([FreeVariableError] -&gt; ShowS)
-&gt; Show FreeVariableError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; FreeVariableError -&gt; ShowS
showsPrec :: Int -&gt; FreeVariableError -&gt; ShowS
$cshow :: FreeVariableError -&gt; String
show :: FreeVariableError -&gt; String
$cshowList :: [FreeVariableError] -&gt; ShowS
showList :: [FreeVariableError] -&gt; ShowS
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#Show"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Show</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866973"
      ><span id="local-6989586621681866978"
	><span class="annot"
	  ><span class="annottext"
	    >FreeVariableError -&gt; FreeVariableError -&gt; Bool
(FreeVariableError -&gt; FreeVariableError -&gt; Bool)
-&gt; (FreeVariableError -&gt; FreeVariableError -&gt; Bool)
-&gt; Eq FreeVariableError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
== :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
$c/= :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
/= :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
</span
	    ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Eq</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681866984"
      ><span id="local-6989586621681866988"
	><span id="local-6989586621681866992"
	  ><span id="local-6989586621681866996"
	    ><span id="local-6989586621681866999"
	      ><span id="local-6989586621681867002"
		><span id="local-6989586621681867005"
		  ><span class="annot"
		    ><span class="annottext"
		      >Eq FreeVariableError
Eq FreeVariableError =&gt;
(FreeVariableError -&gt; FreeVariableError -&gt; Ordering)
-&gt; (FreeVariableError -&gt; FreeVariableError -&gt; Bool)
-&gt; (FreeVariableError -&gt; FreeVariableError -&gt; Bool)
-&gt; (FreeVariableError -&gt; FreeVariableError -&gt; Bool)
-&gt; (FreeVariableError -&gt; FreeVariableError -&gt; Bool)
-&gt; (FreeVariableError -&gt; FreeVariableError -&gt; FreeVariableError)
-&gt; (FreeVariableError -&gt; FreeVariableError -&gt; FreeVariableError)
-&gt; Ord FreeVariableError
FreeVariableError -&gt; FreeVariableError -&gt; Bool
FreeVariableError -&gt; FreeVariableError -&gt; Ordering
FreeVariableError -&gt; FreeVariableError -&gt; FreeVariableError
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: FreeVariableError -&gt; FreeVariableError -&gt; Ordering
compare :: FreeVariableError -&gt; FreeVariableError -&gt; Ordering
$c&lt; :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
&lt; :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
$c&lt;= :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
&lt;= :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
$c&gt; :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
&gt; :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
$c&gt;= :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
&gt;= :: FreeVariableError -&gt; FreeVariableError -&gt; Bool
$cmax :: FreeVariableError -&gt; FreeVariableError -&gt; FreeVariableError
max :: FreeVariableError -&gt; FreeVariableError -&gt; FreeVariableError
$cmin :: FreeVariableError -&gt; FreeVariableError -&gt; FreeVariableError
min :: FreeVariableError -&gt; FreeVariableError -&gt; FreeVariableError
</span
		      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Ord"
		      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
			>Ord</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681867008"
      ><span id="local-6989586621681867010"
	><span class="annot"
	  ><span class="annottext"
	    >(forall x. FreeVariableError -&gt; Rep FreeVariableError x)
-&gt; (forall x. Rep FreeVariableError x -&gt; FreeVariableError)
-&gt; Generic FreeVariableError
forall x. Rep FreeVariableError x -&gt; FreeVariableError
forall x. FreeVariableError -&gt; Rep FreeVariableError x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. FreeVariableError -&gt; Rep FreeVariableError x
from :: forall x. FreeVariableError -&gt; Rep FreeVariableError x
$cto :: forall x. Rep FreeVariableError x -&gt; FreeVariableError
to :: forall x. Rep FreeVariableError x -&gt; FreeVariableError
</span
	    ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Generics.html#Generic"
	    ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var"
	      >Generic</span
	      ></a
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-264"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >deriving</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-keyword"
	>anyclass</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681867017"
      ><span id="local-6989586621681867021"
	><span id="local-6989586621681867024"
	  ><span class="annot"
	    ><span class="annottext"
	      >Show FreeVariableError
Typeable FreeVariableError
(Typeable FreeVariableError, Show FreeVariableError) =&gt;
(FreeVariableError -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe FreeVariableError)
-&gt; (FreeVariableError -&gt; String)
-&gt; Exception FreeVariableError
SomeException -&gt; Maybe FreeVariableError
FreeVariableError -&gt; String
FreeVariableError -&gt; SomeException
forall e.
(Typeable e, Show e) =&gt;
(e -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe e) -&gt; (e -&gt; String) -&gt; Exception e
$ctoException :: FreeVariableError -&gt; SomeException
toException :: FreeVariableError -&gt; SomeException
$cfromException :: SomeException -&gt; Maybe FreeVariableError
fromException :: SomeException -&gt; Maybe FreeVariableError
$cdisplayException :: FreeVariableError -&gt; String
displayException :: FreeVariableError -&gt; String
</span
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Exception.Type.html#Exception"
	      ><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var"
		>Exception</span
		></a
	      ></span
	    ></span
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681867028"
      ><span class="annot"
	><span class="annottext"
	  >FreeVariableError -&gt; ()
(FreeVariableError -&gt; ()) -&gt; NFData FreeVariableError
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: FreeVariableError -&gt; ()
rnf :: FreeVariableError -&gt; ()
</span
	  ><a href="https://hackage.haskell.org/package/deepseq-1.4.8.1/docs/src/Control.DeepSeq.html#NFData"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >NFData</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-265"
      ></span
      ><span
      >
</span
      ><span id="line-266"
      ></span
      ><span class="hs-keyword"
      >instance</span
      ><span
      > </span
      ><span id="local-6989586621681867047"
      ><span class="annot"
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#Pretty"
	  ><span class="hs-identifier hs-type"
	    >Pretty</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#FreeVariableError"
	  ><span class="hs-identifier hs-type"
	    >FreeVariableError</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-267"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681867055"
      ><span class="annot"
	><span class="annottext"
	  >pretty :: forall ann. FreeVariableError -&gt; Doc ann
</span
	  ><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#pretty"
	  ><span class="hs-identifier hs-var hs-var hs-var hs-var"
	    >pretty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#FreeUnique"
	><span class="hs-identifier hs-type"
	  >FreeUnique</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867056"
      ><span class="annot"
	><span class="annottext"
	  >Unique
</span
	  ><a href="#local-6989586621681867056"
	  ><span class="hs-identifier hs-var"
	    >u</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Doc ann
</span
	><span class="hs-string"
	>&quot;Free unique:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
forall ann. Unique -&gt; Doc ann
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#pretty"
	><span class="hs-identifier hs-var"
	  >pretty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681867056"
	><span class="hs-identifier hs-var"
	  >u</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-268"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#pretty"
	><span class="hs-identifier hs-var"
	  >pretty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#FreeIndex"
	><span class="hs-identifier hs-type"
	  >FreeIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867058"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681867058"
	  ><span class="hs-identifier hs-var"
	    >i</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >  </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Doc ann
</span
	><span class="hs-string"
	>&quot;Free index:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
forall ann. Index -&gt; Doc ann
</span
	><a href="https://hackage.haskell.org/package/prettyprinter-1.7.1/docs/src/Prettyprinter.Internal.html#pretty"
	><span class="hs-identifier hs-var"
	  >pretty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681867058"
	><span class="hs-identifier hs-var"
	  >i</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-269"
      ></span
      ><span id="AsFreeVariableError"
      ><span id="local-6989586621681866025"
	><span id="local-6989586621681867060"
	  ><span id="local-6989586621681867070"
	    ><span id="local-6989586621681867080"
	      ><span id="local-6989586621681867084"
		><span id="local-6989586621681867090"
		  ><span id="_FreeVariableError"
		    ><span id="_FreeUnique"
		      ><span id="_FreeIndex"
			><span class="hs-identifier"
			  >makeClassyPrisms</span
			  ><span
			  > </span
			  ><span class="hs-special"
			  >''</span
			  ><span class="hs-identifier"
			  >FreeVariableError</span
			  ></span
			></span
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-270"
      ></span
      ><span
      >
</span
      ><span id="line-271"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | Get the 'Index' corresponding to a given 'Unique'.
Uses supplied handler for free names (uniques).
-}</span
	></span
      ><span
      >
</span
      ><span id="line-274"
      ></span
      ><span id="local-6989586621681866045"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#getIndex"
	  ><span class="hs-identifier hs-type"
	    >getIndex</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	  ><span class="hs-identifier hs-type"
	    >MonadReader</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-type"
	    >LevelInfo</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866045"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	> </span
	><span class="hs-glyph"
	>=&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866045"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866045"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-275"
      ></span
      ><span id="getIndex"
      ><span class="annot"
	><span class="annottext"
	  >getIndex :: forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
Unique -&gt; (Unique -&gt; m Index) -&gt; m Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#getIndex"
	  ><span class="hs-identifier hs-var hs-var"
	    >getIndex</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867122"
      ><span class="annot"
	><span class="annottext"
	  >Unique
</span
	  ><a href="#local-6989586621681867122"
	  ><span class="hs-identifier hs-var"
	    >u</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867123"
      ><span class="annot"
	><span class="annottext"
	  >Unique -&gt; m Index
</span
	  ><a href="#local-6989586621681867123"
	  ><span class="hs-identifier hs-var"
	    >h</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-276"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-type"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867124"
      ><span class="annot"
	><span class="annottext"
	  >Level
</span
	  ><a href="#local-6989586621681867124"
	  ><span class="hs-identifier hs-var"
	    >current</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867125"
      ><span class="annot"
	><span class="annottext"
	  >Bimap Unique Level
</span
	  ><a href="#local-6989586621681867125"
	  ><span class="hs-identifier hs-var"
	    >ls</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m LevelInfo
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#ask"
	><span class="hs-identifier hs-var"
	  >ask</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-277"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; Bimap Unique Level -&gt; Maybe Level
forall a b (m :: * -&gt; *).
(Ord a, Ord b, MonadThrow m) =&gt;
a -&gt; Bimap a b -&gt; m b
</span
	><span class="hs-identifier hs-var"
	>BM.lookup</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681867122"
	><span class="hs-identifier hs-var"
	  >u</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bimap Unique Level
</span
	><a href="#local-6989586621681867125"
	><span class="hs-identifier hs-var"
	  >ls</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-278"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867128"
      ><span class="annot"
	><span class="annottext"
	  >Level
</span
	  ><a href="#local-6989586621681867128"
	  ><span class="hs-identifier hs-var"
	    >foundlvl</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; m Index
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Index -&gt; m Index) -&gt; Index -&gt; m Index
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Level -&gt; Index
</span
	><a href="#local-6989586621681867129"
	><span class="hs-identifier hs-var"
	  >levelToIx</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681867124"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681867128"
	><span class="hs-identifier hs-var"
	  >foundlvl</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-279"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- This call should return an index greater than the current level,</span
      ><span
      >
</span
      ><span id="line-280"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- otherwise it will map unbound variables to bound variables.</span
      ><span
      >
</span
      ><span id="line-281"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe Level
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      >       </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; m Index
</span
	><a href="#local-6989586621681867123"
	><span class="hs-identifier hs-var"
	  >h</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681867122"
	><span class="hs-identifier hs-var"
	  >u</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-282"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-283"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- Compute the relative 'Index' of a absolute 'Level' relative to the current 'Level'.</span
      ><span
      >
</span
      ><span id="line-284"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621681867129"
	><span class="hs-identifier hs-type"
	  >levelToIx</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-285"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681867129"
      ><span class="annot"
	><span class="annottext"
	  >levelToIx :: Level -&gt; Level -&gt; Index
</span
	  ><a href="#local-6989586621681867129"
	  ><span class="hs-identifier hs-var hs-var"
	    >levelToIx</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867130"
      ><span class="annot"
	><span class="annottext"
	  >Integer
</span
	  ><a href="#local-6989586621681867130"
	  ><span class="hs-identifier hs-var"
	    >current</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867131"
      ><span class="annot"
	><span class="annottext"
	  >Integer
</span
	  ><a href="#local-6989586621681867131"
	  ><span class="hs-identifier hs-var"
	    >foundLvl</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-286"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- Thanks to invariant-A, we can be sure that 'level &gt;= foundLvl ', since foundLvl</span
      ><span
      >
</span
      ><span id="line-287"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- is in the levelMapping and thus the computation 'current-foundLvl' is '&gt;=0' and</span
      ><span
      >
</span
      ><span id="line-288"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- its conversion to Natural will not lead to arithmetic underflow.</span
      ><span
      >
</span
      ><span id="line-289"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Integer -&gt; Index
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Real.html#fromIntegral"
	><span class="hs-identifier hs-var"
	  >fromIntegral</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Integer -&gt; Index) -&gt; Integer -&gt; Index
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Integer
</span
	><a href="#local-6989586621681867130"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Num.html#-"
	><span class="hs-glyph hs-var"
	  >-</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Integer
</span
	><a href="#local-6989586621681867131"
	><span class="hs-identifier hs-var"
	  >foundLvl</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-290"
      ></span
      ><span
      >
</span
      ><span id="line-291"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | Get the 'Unique' corresponding to a given 'Index'.
Uses supplied handler for free debruijn indices.
-}</span
	></span
      ><span
      >
</span
      ><span id="line-294"
      ></span
      ><span id="local-6989586621681866056"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#getUnique"
	  ><span class="hs-identifier hs-type"
	    >getUnique</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	  ><span class="hs-identifier hs-type"
	    >MonadReader</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-type"
	    >LevelInfo</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866056"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	> </span
	><span class="hs-glyph"
	>=&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866056"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866056"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-295"
      ></span
      ><span id="getUnique"
      ><span class="annot"
	><span class="annottext"
	  >getUnique :: forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
Index -&gt; (Index -&gt; m Unique) -&gt; m Unique
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#getUnique"
	  ><span class="hs-identifier hs-var hs-var"
	    >getUnique</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867141"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681867141"
	  ><span class="hs-identifier hs-var"
	    >ix</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867142"
      ><span class="annot"
	><span class="annottext"
	  >Index -&gt; m Unique
</span
	  ><a href="#local-6989586621681867142"
	  ><span class="hs-identifier hs-var"
	    >h</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-296"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-type"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867143"
      ><span class="annot"
	><span class="annottext"
	  >Level
</span
	  ><a href="#local-6989586621681867143"
	  ><span class="hs-identifier hs-var"
	    >current</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867144"
      ><span class="annot"
	><span class="annottext"
	  >Bimap Unique Level
</span
	  ><a href="#local-6989586621681867144"
	  ><span class="hs-identifier hs-var"
	    >ls</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m LevelInfo
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#ask"
	><span class="hs-identifier hs-var"
	  >ask</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-297"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Bimap Unique Level -&gt; Maybe Unique
forall a b (m :: * -&gt; *).
(Ord a, Ord b, MonadThrow m) =&gt;
b -&gt; Bimap a b -&gt; m a
</span
	><span class="hs-identifier hs-var"
	>BM.lookupR</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Index -&gt; Level
</span
	><a href="PlutusCore.DeBruijn.Internal.html#ixToLevel"
	><span class="hs-identifier hs-var"
	  >ixToLevel</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681867143"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681867141"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bimap Unique Level
</span
	><a href="#local-6989586621681867144"
	><span class="hs-identifier hs-var"
	  >ls</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-298"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- Because of invariant-B, the levelMapping contains only positive (absolute) levels.</span
      ><span
      >
</span
      ><span id="line-299"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867147"
      ><span class="annot"
	><span class="annottext"
	  >Unique
</span
	  ><a href="#local-6989586621681867147"
	  ><span class="hs-identifier hs-var"
	    >u</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; m Unique
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681867147"
	><span class="hs-identifier hs-var"
	  >u</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-300"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- This call should return a free/unbound unique,</span
      ><span
      >
</span
      ><span id="line-301"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- otherwise it will map unbound variables to bound variables.</span
      ><span
      >
</span
      ><span id="line-302"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe Unique
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-303"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- the lookup failed, meaning the index corresponds to a strictly-negative</span
      ><span
      >
</span
      ><span id="line-304"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- (absolute) level.</span
      ><span
      >
</span
      ><span id="line-305"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; m Unique
</span
	><a href="#local-6989586621681867142"
	><span class="hs-identifier hs-var"
	  >h</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681867141"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-306"
      ></span
      ><span
      >
</span
      ><span id="line-307"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#unNameDeBruijn"
	><span class="hs-identifier hs-type"
	  >unNameDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-308"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-309"
      ></span
      ><span id="unNameDeBruijn"
      ><span class="annot"
	><span class="annottext"
	  >unNameDeBruijn :: NamedDeBruijn -&gt; DeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#unNameDeBruijn"
	  ><span class="hs-identifier hs-var hs-var"
	    >unNameDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867148"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681867148"
	  ><span class="hs-identifier hs-var"
	    >ix</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; DeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-var"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681867148"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-310"
      ></span
      ><span
      >
</span
      ><span id="line-311"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#unNameTyDeBruijn"
	><span class="hs-identifier hs-type"
	  >unNameTyDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-312"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedTyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	><span class="hs-identifier hs-type"
	  >TyDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-313"
      ></span
      ><span id="unNameTyDeBruijn"
      ><span class="annot"
	><span class="annottext"
	  >unNameTyDeBruijn :: NamedTyDeBruijn -&gt; TyDeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#unNameTyDeBruijn"
	  ><span class="hs-identifier hs-var hs-var"
	    >unNameTyDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedTyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867149"
      ><span class="annot"
	><span class="annottext"
	  >NamedDeBruijn
</span
	  ><a href="#local-6989586621681867149"
	  ><span class="hs-identifier hs-var"
	    >db</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DeBruijn -&gt; TyDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	><span class="hs-identifier hs-var"
	  >TyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(DeBruijn -&gt; TyDeBruijn) -&gt; DeBruijn -&gt; TyDeBruijn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn -&gt; DeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#unNameDeBruijn"
	><span class="hs-identifier hs-var"
	  >unNameDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn
</span
	><a href="#local-6989586621681867149"
	><span class="hs-identifier hs-var"
	  >db</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-314"
      ></span
      ><span
      >
</span
      ><span id="line-315"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#fakeNameDeBruijn"
	><span class="hs-identifier hs-type"
	  >fakeNameDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#DeBruijn"
	><span class="hs-identifier hs-type"
	  >DeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-316"
      ></span
      ><span id="fakeNameDeBruijn"
      ><span class="annot"
	><span class="annottext"
	  >fakeNameDeBruijn :: DeBruijn -&gt; NamedDeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#fakeNameDeBruijn"
	  ><span class="hs-identifier hs-var hs-var"
	    >fakeNameDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>FakeNamedDeBruijn -&gt; NamedDeBruijn
forall a b. Coercible a b =&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Prim.html#coerce"
	><span class="hs-identifier hs-var"
	  >coerce</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(FakeNamedDeBruijn -&gt; NamedDeBruijn)
-&gt; (DeBruijn -&gt; FakeNamedDeBruijn) -&gt; DeBruijn -&gt; NamedDeBruijn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DeBruijn -&gt; FakeNamedDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#toFake"
	><span class="hs-identifier hs-var"
	  >toFake</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-317"
      ></span
      ><span
      >
</span
      ><span id="line-318"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#fakeTyNameDeBruijn"
	><span class="hs-identifier hs-type"
	  >fakeTyNameDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	><span class="hs-identifier hs-type"
	  >TyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedTyDeBruijn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-319"
      ></span
      ><span id="fakeTyNameDeBruijn"
      ><span class="annot"
	><span class="annottext"
	  >fakeTyNameDeBruijn :: TyDeBruijn -&gt; NamedTyDeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#fakeTyNameDeBruijn"
	  ><span class="hs-identifier hs-var hs-var"
	    >fakeTyNameDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#TyDeBruijn"
	><span class="hs-identifier hs-type"
	  >TyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867150"
      ><span class="annot"
	><span class="annottext"
	  >DeBruijn
</span
	  ><a href="#local-6989586621681867150"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn -&gt; NamedTyDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	><span class="hs-identifier hs-var"
	  >NamedTyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(NamedDeBruijn -&gt; NamedTyDeBruijn)
-&gt; NamedDeBruijn -&gt; NamedTyDeBruijn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DeBruijn -&gt; NamedDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#fakeNameDeBruijn"
	><span class="hs-identifier hs-var"
	  >fakeNameDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DeBruijn
</span
	><a href="#local-6989586621681867150"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-320"
      ></span
      ><span
      >
</span
      ><span id="line-321"
      ></span
      ><span id="local-6989586621681866061"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#nameToDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >nameToDeBruijn</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-322"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	  ><span class="hs-identifier hs-type"
	    >MonadReader</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-type"
	    >LevelInfo</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866061"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-323"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>=&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866061"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-324"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Name"
	  ><span class="hs-identifier hs-type"
	    >Name</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-325"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866061"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >NamedDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-326"
      ></span
      ><span id="nameToDeBruijn"
      ><span class="annot"
	><span class="annottext"
	  >nameToDeBruijn :: forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
(Unique -&gt; m Index) -&gt; Name -&gt; m NamedDeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#nameToDeBruijn"
	  ><span class="hs-identifier hs-var hs-var"
	    >nameToDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867158"
      ><span class="annot"
	><span class="annottext"
	  >Unique -&gt; m Index
</span
	  ><a href="#local-6989586621681867158"
	  ><span class="hs-identifier hs-var"
	    >h</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867160"
      ><span class="annot"
	><span class="annottext"
	  >Text
</span
	  ><a href="#local-6989586621681867160"
	  ><span class="hs-identifier hs-var"
	    >str</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867161"
      ><span class="annot"
	><span class="annottext"
	  >Unique
</span
	  ><a href="#local-6989586621681867161"
	  ><span class="hs-identifier hs-var"
	    >u</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Index -&gt; NamedDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-var"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><a href="#local-6989586621681867160"
	><span class="hs-identifier hs-var"
	  >str</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Index -&gt; NamedDeBruijn) -&gt; m Index -&gt; m NamedDeBruijn
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; (Unique -&gt; m Index) -&gt; m Index
forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
Unique -&gt; (Unique -&gt; m Index) -&gt; m Index
</span
	><a href="PlutusCore.DeBruijn.Internal.html#getIndex"
	><span class="hs-identifier hs-var"
	  >getIndex</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681867161"
	><span class="hs-identifier hs-var"
	  >u</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; m Index
</span
	><a href="#local-6989586621681867158"
	><span class="hs-identifier hs-var"
	  >h</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-327"
      ></span
      ><span
      >
</span
      ><span id="line-328"
      ></span
      ><span id="local-6989586621681866067"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#tyNameToDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >tyNameToDeBruijn</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-329"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	  ><span class="hs-identifier hs-type"
	    >MonadReader</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-type"
	    >LevelInfo</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866067"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-330"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>=&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866067"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-331"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#TyName"
	  ><span class="hs-identifier hs-type"
	    >TyName</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-332"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866067"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >NamedTyDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-333"
      ></span
      ><span id="tyNameToDeBruijn"
      ><span class="annot"
	><span class="annottext"
	  >tyNameToDeBruijn :: forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
(Unique -&gt; m Index) -&gt; TyName -&gt; m NamedTyDeBruijn
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#tyNameToDeBruijn"
	  ><span class="hs-identifier hs-var hs-var"
	    >tyNameToDeBruijn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867169"
      ><span class="annot"
	><span class="annottext"
	  >Unique -&gt; m Index
</span
	  ><a href="#local-6989586621681867169"
	  ><span class="hs-identifier hs-var"
	    >h</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867171"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621681867171"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn -&gt; NamedTyDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	><span class="hs-identifier hs-var"
	  >NamedTyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(NamedDeBruijn -&gt; NamedTyDeBruijn)
-&gt; m NamedDeBruijn -&gt; m NamedTyDeBruijn
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Unique -&gt; m Index) -&gt; Name -&gt; m NamedDeBruijn
forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
(Unique -&gt; m Index) -&gt; Name -&gt; m NamedDeBruijn
</span
	><a href="PlutusCore.DeBruijn.Internal.html#nameToDeBruijn"
	><span class="hs-identifier hs-var"
	  >nameToDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; m Index
</span
	><a href="#local-6989586621681867169"
	><span class="hs-identifier hs-var"
	  >h</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621681867171"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-334"
      ></span
      ><span
      >
</span
      ><span id="line-335"
      ></span
      ><span id="local-6989586621681866070"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#deBruijnToName"
	  ><span class="hs-identifier hs-type"
	    >deBruijnToName</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-336"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	  ><span class="hs-identifier hs-type"
	    >MonadReader</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-type"
	    >LevelInfo</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866070"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-337"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>=&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866070"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-338"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >NamedDeBruijn</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-339"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866070"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Name"
	  ><span class="hs-identifier hs-type"
	    >Name</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-340"
      ></span
      ><span id="deBruijnToName"
      ><span class="annot"
	><span class="annottext"
	  >deBruijnToName :: forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
(Index -&gt; m Unique) -&gt; NamedDeBruijn -&gt; m Name
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#deBruijnToName"
	  ><span class="hs-identifier hs-var hs-var"
	    >deBruijnToName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867178"
      ><span class="annot"
	><span class="annottext"
	  >Index -&gt; m Unique
</span
	  ><a href="#local-6989586621681867178"
	  ><span class="hs-identifier hs-var"
	    >h</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867179"
      ><span class="annot"
	><span class="annottext"
	  >Text
</span
	  ><a href="#local-6989586621681867179"
	  ><span class="hs-identifier hs-var"
	    >str</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867180"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681867180"
	  ><span class="hs-identifier hs-var"
	    >ix</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Unique -&gt; Name
</span
	><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-var"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><a href="#local-6989586621681867179"
	><span class="hs-identifier hs-var"
	  >str</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Unique -&gt; Name) -&gt; m Unique -&gt; m Name
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; (Index -&gt; m Unique) -&gt; m Unique
forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
Index -&gt; (Index -&gt; m Unique) -&gt; m Unique
</span
	><a href="PlutusCore.DeBruijn.Internal.html#getUnique"
	><span class="hs-identifier hs-var"
	  >getUnique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681867180"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; m Unique
</span
	><a href="#local-6989586621681867178"
	><span class="hs-identifier hs-var"
	  >h</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-341"
      ></span
      ><span
      >
</span
      ><span id="line-342"
      ></span
      ><span id="local-6989586621681866072"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#deBruijnToTyName"
	  ><span class="hs-identifier hs-type"
	    >deBruijnToTyName</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-343"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	  ><span class="hs-identifier hs-type"
	    >MonadReader</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-type"
	    >LevelInfo</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866072"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-344"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>=&gt;</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866072"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-345"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	  ><span class="hs-identifier hs-type"
	    >NamedTyDeBruijn</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-346"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866072"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#TyName"
	  ><span class="hs-identifier hs-type"
	    >TyName</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-347"
      ></span
      ><span id="deBruijnToTyName"
      ><span class="annot"
	><span class="annottext"
	  >deBruijnToTyName :: forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
(Index -&gt; m Unique) -&gt; NamedTyDeBruijn -&gt; m TyName
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#deBruijnToTyName"
	  ><span class="hs-identifier hs-var hs-var"
	    >deBruijnToTyName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867187"
      ><span class="annot"
	><span class="annottext"
	  >Index -&gt; m Unique
</span
	  ><a href="#local-6989586621681867187"
	  ><span class="hs-identifier hs-var"
	    >h</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#NamedTyDeBruijn"
	><span class="hs-identifier hs-type"
	  >NamedTyDeBruijn</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867188"
      ><span class="annot"
	><span class="annottext"
	  >NamedDeBruijn
</span
	  ><a href="#local-6989586621681867188"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; TyName
</span
	><a href="PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-var"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Name -&gt; TyName) -&gt; m Name -&gt; m TyName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Index -&gt; m Unique) -&gt; NamedDeBruijn -&gt; m Name
forall (m :: * -&gt; *).
MonadReader LevelInfo m =&gt;
(Index -&gt; m Unique) -&gt; NamedDeBruijn -&gt; m Name
</span
	><a href="PlutusCore.DeBruijn.Internal.html#deBruijnToName"
	><span class="hs-identifier hs-var"
	  >deBruijnToName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; m Unique
</span
	><a href="#local-6989586621681867187"
	><span class="hs-identifier hs-var"
	  >h</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NamedDeBruijn
</span
	><a href="#local-6989586621681867188"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-348"
      ></span
      ><span
      >
</span
      ><span id="line-349"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | The default handler of throwing an error upon encountering a free name (unique).</span
	></span
      ><span
      >
</span
      ><span id="line-350"
      ></span
      ><span id="local-6989586621681866074"
      ><span id="local-6989586621681866075"
	><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#freeUniqueThrow"
	    ><span class="hs-identifier hs-type"
	      >freeUniqueThrow</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#AsFreeVariableError"
	    ><span class="hs-identifier hs-type"
	      >AsFreeVariableError</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866074"
	    ><span class="hs-identifier hs-type"
	      >e</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >,</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#MonadError"
	    ><span class="hs-identifier hs-type"
	      >MonadError</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866074"
	    ><span class="hs-identifier hs-type"
	      >e</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866075"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >=&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#Unique"
	    ><span class="hs-identifier hs-type"
	      >Unique</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866075"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	    ><span class="hs-identifier hs-type"
	      >Index</span
	      ></a
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-351"
      ></span
      ><span id="freeUniqueThrow"
      ><span class="annot"
	><span class="annottext"
	  >freeUniqueThrow :: forall e (m :: * -&gt; *).
(AsFreeVariableError e, MonadError e m) =&gt;
Unique -&gt; m Index
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#freeUniqueThrow"
	  ><span class="hs-identifier hs-var hs-var"
	    >freeUniqueThrow</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-352"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>AReview e FreeVariableError -&gt; FreeVariableError -&gt; m Index
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span
	><span class="hs-identifier hs-var"
	>throwing</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AReview e FreeVariableError
forall r. AsFreeVariableError r =&gt; Prism' r FreeVariableError
Prism' e FreeVariableError
</span
	><a href="PlutusCore.DeBruijn.Internal.html#_FreeVariableError"
	><span class="hs-identifier hs-var"
	  >_FreeVariableError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(FreeVariableError -&gt; m Index)
-&gt; (Unique -&gt; FreeVariableError) -&gt; Unique -&gt; m Index
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; FreeVariableError
</span
	><a href="PlutusCore.DeBruijn.Internal.html#FreeUnique"
	><span class="hs-identifier hs-var"
	  >FreeUnique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-353"
      ></span
      ><span
      >
</span
      ><span id="line-354"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | The default handler of throwing an error upon encountering a free debruijn index.</span
	></span
      ><span
      >
</span
      ><span id="line-355"
      ></span
      ><span id="local-6989586621681866086"
      ><span id="local-6989586621681866087"
	><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#freeIndexThrow"
	    ><span class="hs-identifier hs-type"
	      >freeIndexThrow</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="hs-special"
	  >(</span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#AsFreeVariableError"
	    ><span class="hs-identifier hs-type"
	      >AsFreeVariableError</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866086"
	    ><span class="hs-identifier hs-type"
	      >e</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >,</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#MonadError"
	    ><span class="hs-identifier hs-type"
	      >MonadError</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866086"
	    ><span class="hs-identifier hs-type"
	      >e</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866087"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span class="hs-special"
	  >)</span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >=&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	    ><span class="hs-identifier hs-type"
	      >Index</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866087"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.Name.Unique.html#Unique"
	    ><span class="hs-identifier hs-type"
	      >Unique</span
	      ></a
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-356"
      ></span
      ><span id="freeIndexThrow"
      ><span class="annot"
	><span class="annottext"
	  >freeIndexThrow :: forall e (m :: * -&gt; *).
(AsFreeVariableError e, MonadError e m) =&gt;
Index -&gt; m Unique
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#freeIndexThrow"
	  ><span class="hs-identifier hs-var hs-var"
	    >freeIndexThrow</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-357"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>AReview e FreeVariableError -&gt; FreeVariableError -&gt; m Unique
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span
	><span class="hs-identifier hs-var"
	>throwing</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AReview e FreeVariableError
forall r. AsFreeVariableError r =&gt; Prism' r FreeVariableError
Prism' e FreeVariableError
</span
	><a href="PlutusCore.DeBruijn.Internal.html#_FreeVariableError"
	><span class="hs-identifier hs-var"
	  >_FreeVariableError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(FreeVariableError -&gt; m Unique)
-&gt; (Index -&gt; FreeVariableError) -&gt; Index -&gt; m Unique
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; FreeVariableError
</span
	><a href="PlutusCore.DeBruijn.Internal.html#FreeIndex"
	><span class="hs-identifier hs-var"
	  >FreeIndex</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-358"
      ></span
      ><span
      >
</span
      ><span id="line-359"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | A different implementation of a handler,  where &quot;free&quot; debruijn indices do not throw an error
but are instead gracefully converted to fresh uniques.
These generated uniques remain free; i.e.  if the original term was open, it will remain open
after applying this handler.
These generated free uniques are consistent across the open term (by using a state cache).
-}</span
	></span
      ><span
      >
</span
      ><span id="line-365"
      ></span
      ><span id="local-6989586621681866090"
      ><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#freeIndexAsConsistentLevel"
	  ><span class="hs-identifier hs-type"
	    >freeIndexAsConsistentLevel</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-366"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#MonadReader"
	  ><span class="hs-identifier hs-type"
	    >MonadReader</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	  ><span class="hs-identifier hs-type"
	    >LevelInfo</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866090"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>,</span
	><span
	> </span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.State.Class.html#MonadState"
	  ><span class="hs-identifier hs-type"
	    >MonadState</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-special"
	>(</span
	><span class="annot"
	><a href="https://hackage.haskell.org/package/containers-0.6.7/docs/src/Data.Map.Internal.html#Map"
	  ><span class="hs-identifier hs-type"
	    >M.Map</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Level"
	  ><span class="hs-identifier hs-type"
	    >Level</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866090"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>,</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Quote.html#MonadQuote"
	  ><span class="hs-identifier hs-type"
	    >MonadQuote</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866090"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span class="hs-special"
	>)</span
	><span
	>
</span
	><span id="line-367"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>=&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.DeBruijn.Internal.html#Index"
	  ><span class="hs-identifier hs-type"
	    >Index</span
	    ></a
	  ></span
	><span
	>
</span
	><span id="line-368"
	></span
	><span
	>  </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621681866090"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="PlutusCore.Name.Unique.html#Unique"
	  ><span class="hs-identifier hs-type"
	    >Unique</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-369"
      ></span
      ><span id="freeIndexAsConsistentLevel"
      ><span class="annot"
	><span class="annottext"
	  >freeIndexAsConsistentLevel :: forall (m :: * -&gt; *).
(MonadReader LevelInfo m, MonadState (Map Level Unique) m,
 MonadQuote m) =&gt;
Index -&gt; m Unique
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#freeIndexAsConsistentLevel"
	  ><span class="hs-identifier hs-var hs-var"
	    >freeIndexAsConsistentLevel</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681867221"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681867221"
	  ><span class="hs-identifier hs-var"
	    >ix</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-370"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681867222"
      ><span class="annot"
	><span class="annottext"
	  >Map Level Unique
</span
	  ><a href="#local-6989586621681867222"
	  ><span class="hs-identifier hs-var"
	    >cache</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m (Map Level Unique)
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.State.Class.html#get"
	><span class="hs-identifier hs-var"
	  >get</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-371"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-type"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867224"
      ><span class="annot"
	><span class="annottext"
	  >Level
</span
	  ><a href="#local-6989586621681867224"
	  ><span class="hs-identifier hs-var"
	    >current</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bimap Unique Level
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m LevelInfo
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#ask"
	><span class="hs-identifier hs-var"
	  >ask</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-372"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- the absolute level is strictly-negative</span
      ><span
      >
</span
      ><span id="line-373"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621681867225"
      ><span class="annot"
	><span class="annottext"
	  >absoluteLevel :: Level
</span
	  ><a href="#local-6989586621681867225"
	  ><span class="hs-identifier hs-var hs-var"
	    >absoluteLevel</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Index -&gt; Level
</span
	><a href="PlutusCore.DeBruijn.Internal.html#ixToLevel"
	><span class="hs-identifier hs-var"
	  >ixToLevel</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681867224"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681867221"
	><span class="hs-identifier hs-var"
	  >ix</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-374"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Map Level Unique -&gt; Maybe Unique
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span
	><a href="https://hackage.haskell.org/package/containers-0.6.7/docs/src/Data.Map.Internal.html#lookup"
	><span class="hs-identifier hs-var"
	  >M.lookup</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681867225"
	><span class="hs-identifier hs-var"
	  >absoluteLevel</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Map Level Unique
</span
	><a href="#local-6989586621681867222"
	><span class="hs-identifier hs-var"
	  >cache</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-375"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe Unique
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-376"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621681867227"
      ><span class="annot"
	><span class="annottext"
	  >Unique
</span
	  ><a href="#local-6989586621681867227"
	  ><span class="hs-identifier hs-var"
	    >u</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m Unique
forall (m :: * -&gt; *). MonadQuote m =&gt; m Unique
</span
	><a href="PlutusCore.Quote.html#freshUnique"
	><span class="hs-identifier hs-var"
	  >freshUnique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-377"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- the cache contains only strictly-negative levels</span
      ><span
      >
</span
      ><span id="line-378"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Map Level Unique -&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; s -&gt; m ()
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.State.Class.html#put"
	><span class="hs-identifier hs-var"
	  >put</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Unique -&gt; Map Level Unique -&gt; Map Level Unique
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span
	><a href="https://hackage.haskell.org/package/containers-0.6.7/docs/src/Data.Map.Internal.html#insert"
	><span class="hs-identifier hs-var"
	  >M.insert</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Level
</span
	><a href="#local-6989586621681867225"
	><span class="hs-identifier hs-var"
	  >absoluteLevel</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681867227"
	><span class="hs-identifier hs-var"
	  >u</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Map Level Unique
</span
	><a href="#local-6989586621681867222"
	><span class="hs-identifier hs-var"
	  >cache</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-379"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; m Unique
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681867227"
	><span class="hs-identifier hs-var"
	  >u</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-380"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867230"
      ><span class="annot"
	><span class="annottext"
	  >Unique
</span
	  ><a href="#local-6989586621681867230"
	  ><span class="hs-identifier hs-var"
	    >u</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique -&gt; m Unique
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Unique
</span
	><a href="#local-6989586621681867230"
	><span class="hs-identifier hs-var"
	  >u</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-381"
      ></span
      ><span
      >
</span
      ><span id="line-382"
      ></span
      ><span class="hs-comment"
      >-- Compute the absolute 'Level' of a relative 'Index' relative to the current 'Level'.</span
      ><span
      >
</span
      ><span id="line-383"
      ></span
      ><span class="hs-comment"
      >-- The index `ixAST` may be malformed or point to a free variable because it comes straight</span
      ><span
      >
</span
      ><span id="line-384"
      ></span
      ><span class="hs-comment"
      >-- from the AST; in such a case, this function may return a negative level.</span
      ><span
      >
</span
      ><span id="line-385"
      ></span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#ixToLevel"
	><span class="hs-identifier hs-type"
	  >ixToLevel</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Index"
	><span class="hs-identifier hs-type"
	  >Index</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-386"
      ></span
      ><span id="ixToLevel"
      ><span class="annot"
	><span class="annottext"
	  >ixToLevel :: Level -&gt; Index -&gt; Level
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#ixToLevel"
	  ><span class="hs-identifier hs-var hs-var"
	    >ixToLevel</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-type"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681867231"
      ><span class="annot"
	><span class="annottext"
	  >Integer
</span
	  ><a href="#local-6989586621681867231"
	  ><span class="hs-identifier hs-var"
	    >current</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621681867232"
      ><span class="annot"
	><span class="annottext"
	  >Index
</span
	  ><a href="#local-6989586621681867232"
	  ><span class="hs-identifier hs-var"
	    >ixAST</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Integer -&gt; Level
</span
	><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-var"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Integer -&gt; Level) -&gt; Integer -&gt; Level
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Integer
</span
	><a href="#local-6989586621681867231"
	><span class="hs-identifier hs-var"
	  >current</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Num.html#-"
	><span class="hs-glyph hs-var"
	  >-</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Real.html#fromIntegral"
	><span class="hs-identifier hs-var"
	  >fromIntegral</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="#local-6989586621681867232"
	><span class="hs-identifier hs-var"
	  >ixAST</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-387"
      ></span
      ><span
      >
</span
      ><span id="line-388"
      ></span
      ><span id="local-6989586621681866100"
      ><span id="local-6989586621681866101"
	><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#runDeBruijnT"
	    ><span class="hs-identifier hs-type"
	      >runDeBruijnT</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >::</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#ReaderT"
	    ><span class="hs-identifier hs-type"
	      >ReaderT</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	    ><span class="hs-identifier hs-type"
	      >LevelInfo</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866100"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866101"
	    ><span class="hs-identifier hs-type"
	      >a</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="hs-glyph"
	  >-&gt;</span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866100"
	    ><span class="hs-identifier hs-type"
	      >m</span
	      ></a
	    ></span
	  ><span
	  > </span
	  ><span class="annot"
	  ><a href="#local-6989586621681866101"
	    ><span class="hs-identifier hs-type"
	      >a</span
	      ></a
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-389"
      ></span
      ><span id="runDeBruijnT"
      ><span class="annot"
	><span class="annottext"
	  >runDeBruijnT :: forall (m :: * -&gt; *) a. ReaderT LevelInfo m a -&gt; m a
</span
	  ><a href="PlutusCore.DeBruijn.Internal.html#runDeBruijnT"
	  ><span class="hs-identifier hs-var hs-var"
	    >runDeBruijnT</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT LevelInfo m a -&gt; LevelInfo -&gt; m a)
-&gt; LevelInfo -&gt; ReaderT LevelInfo m a -&gt; m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#flip"
	><span class="hs-identifier hs-var"
	  >flip</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ReaderT LevelInfo m a -&gt; LevelInfo -&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#runReaderT"
	><span class="hs-identifier hs-var"
	  >runReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Level -&gt; Bimap Unique Level -&gt; LevelInfo
</span
	><a href="PlutusCore.DeBruijn.Internal.html#LevelInfo"
	><span class="hs-identifier hs-var"
	  >LevelInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Integer -&gt; Level
</span
	><a href="PlutusCore.DeBruijn.Internal.html#Level"
	><span class="hs-identifier hs-var"
	  >Level</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Integer -&gt; Level) -&gt; Integer -&gt; Level
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Real.html#fromIntegral"
	><span class="hs-identifier hs-var"
	  >fromIntegral</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Index
</span
	><a href="PlutusCore.DeBruijn.Internal.html#deBruijnInitIndex"
	><span class="hs-identifier hs-var"
	  >deBruijnInitIndex</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bimap Unique Level
forall a b. Bimap a b
</span
	><span class="hs-identifier hs-var"
	>BM.empty</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-390"
      ></span
      ></pre
    ></body
  ></html
>
