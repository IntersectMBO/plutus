<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><link rel="stylesheet" type="text/css" href="style.css"
     /><script type="text/javascript" src="highlight.js"
    ></script
    ></head
  ><body
  ><pre
    ><span class="hs-pragma"
      >{-# LANGUAGE FlexibleContexts  #-}</span
      ><span
      >
</span
      ><span id="line-2"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE OverloadedStrings #-}</span
      ><span
      >
</span
      ><span id="line-3"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TupleSections     #-}</span
      ><span
      >
</span
      ><span id="line-4"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TypeApplications  #-}</span
      ><span
      >
</span
      ><span id="line-5"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE ViewPatterns      #-}</span
      ><span
      >
</span
      ><span id="line-6"
      ></span
      ><span
      >
</span
      ><span id="line-7"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Functions for compiling GHC types into PlutusCore types, as well as compiling constructors,
matchers, and pattern match alternatives.
-}</span
	></span
      ><span
      >
</span
      ><span id="line-10"
      ></span
      ><span class="hs-keyword"
      >module</span
      ><span
      > </span
      ><span class="hs-identifier"
      >PlutusTx.Compiler.Type</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span
      >
</span
      ><span id="line-11"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#compileTypeNorm"
	><span class="hs-identifier"
	  >compileTypeNorm</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-12"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier"
	  >compileType</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-13"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Kind.html#compileKind"
	><span class="hs-identifier"
	  >compileKind</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-14"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#getDataCons"
	><span class="hs-identifier"
	  >getDataCons</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-15"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#getConstructors"
	><span class="hs-identifier"
	  >getConstructors</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-16"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#getMatch"
	><span class="hs-identifier"
	  >getMatch</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-17"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#getMatchInstantiated"
	><span class="hs-identifier"
	  >getMatchInstantiated</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-18"
      ></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-19"
      ></span
      ><span
      >
</span
      ><span id="line-20"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Binders.html"
	><span class="hs-identifier"
	  >PlutusTx.Compiler.Binders</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-21"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Error.html"
	><span class="hs-identifier"
	  >PlutusTx.Compiler.Error</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-22"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Kind.html"
	><span class="hs-identifier"
	  >PlutusTx.Compiler.Kind</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-23"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Names.html"
	><span class="hs-identifier"
	  >PlutusTx.Compiler.Names</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-24"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Trace.html"
	><span class="hs-identifier"
	  >PlutusTx.Compiler.Trace</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-25"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Types.html"
	><span class="hs-identifier"
	  >PlutusTx.Compiler.Types</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-26"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Utils.html"
	><span class="hs-identifier"
	  >PlutusTx.Compiler.Utils</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-27"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusTx.PIRTypes.html"
	><span class="hs-identifier"
	  >PlutusTx.PIRTypes</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-28"
      ></span
      ><span
      >
</span
      ><span id="line-29"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Builtin.Types.Prim.html"
	><span class="hs-identifier"
	  >GHC.Builtin.Types.Prim</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.html"
	><span class="hs-identifier"
	  >GHC</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-30"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.FamInstEnv.html"
	><span class="hs-identifier"
	  >GHC.Core.FamInstEnv</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.html"
	><span class="hs-identifier"
	  >GHC</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-31"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Multiplicity.html"
	><span class="hs-identifier"
	  >GHC.Core.Multiplicity</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.html"
	><span class="hs-identifier"
	  >GHC</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-32"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Reduction.html"
	><span class="hs-identifier"
	  >GHC.Core.Reduction</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.html"
	><span class="hs-identifier"
	  >GHC</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-33"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Plugins.html"
	><span class="hs-identifier"
	  >GHC.Plugins</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.html"
	><span class="hs-identifier"
	  >GHC</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-34"
      ></span
      ><span
      >
</span
      ><span id="line-35"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusIR.html"
	><span class="hs-identifier"
	  >PlutusIR</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PIR</span
	></span
      ><span
      >
</span
      ><span id="line-36"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html"
	><span class="hs-identifier"
	  >PlutusIR.Compiler.Definitions</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PIR</span
	></span
      ><span
      >
</span
      ><span id="line-37"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusIR.MkPir.html"
	><span class="hs-identifier"
	  >PlutusIR.MkPir</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PIR</span
	></span
      ><span
      >
</span
      ><span id="line-38"
      ></span
      ><span
      >
</span
      ><span id="line-39"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html"
	><span class="hs-identifier"
	  >PlutusCore.Name.Unique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PLC</span
	></span
      ><span
      >
</span
      ><span id="line-40"
      ></span
      ><span
      >
</span
      ><span id="line-41"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/extra-1.8/docs/src/Control.Monad.Extra.html"
	><span class="hs-identifier"
	  >Control.Monad.Extra</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-42"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.html"
	><span class="hs-identifier"
	  >Control.Monad.Reader</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-43"
      ></span
      ><span
      >
</span
      ><span id="line-44"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.List.html"
	><span class="hs-identifier"
	  >Data.List</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#sortBy"
	><span class="hs-identifier"
	  >sortBy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-45"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/containers-0.6.7/docs/src/Data.Set.html"
	><span class="hs-identifier"
	  >Data.Set</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Set</span
	></span
      ><span
      >
</span
      ><span id="line-46"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html"
	><span class="hs-identifier"
	  >Data.Traversable</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-47"
      ></span
      ><span
      >
</span
      ><span id="line-48"
      ></span
      ><span class="hs-comment"
      >-- Types</span
      ><span
      >
</span
      ><span id="line-49"
      ></span
      ><span
      >
</span
      ><span id="line-50"
      ></span
      ><span class="hs-comment"
      >{- Note [Type families and normalizing types]
GHC provides a function to normalize type and data family applications in a type. This
is great for us, since it means that we can support them &quot;for free&quot; by just normalizing
them away.

However, that means we won't support cases that *don't* reduce, e.g. cases where the
family is applied to a type variable.

Technically, this normalization comes along with a coercion, since for data families
the instance type is only *representationally* equal to the family application. This is
okay for us, since we *always* treat data family applications as their instance type.

TODO: use topNormaliseType to be more efficient and handle newtypes as well. Problem
is dealing with recursive newtypes.
-}</span
      ><span
      >
</span
      ><span id="line-65"
      ></span
      ><span
      >
</span
      ><span id="line-66"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Compile a type, first of all normalizing it to remove type family redexes.

Generally, we need to call this whenever we are compiling a &quot;new&quot; type from the program.
If we are compiling a part of a type we are already processing then it has likely been
normalized and we can just use 'compileType'
-}</span
	></span
      ><span
      >
</span
      ><span id="line-72"
      ></span
      ><span id="local-6989586621679540758"
      ><span id="local-6989586621679540759"
	><span id="local-6989586621679540760"
	  ><span id="local-6989586621679540761"
	    ><span class="annot"
	      ><a href="PlutusTx.Compiler.Type.html#compileTypeNorm"
		><span class="hs-identifier hs-type"
		  >compileTypeNorm</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.Compiler.Types.html#CompilingDefault"
		><span class="hs-identifier hs-type"
		  >CompilingDefault</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540758"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540759"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540760"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540761"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCo.Rep.html#Type"
		><span class="hs-identifier hs-type"
		  >GHC.Type</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540760"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.PIRTypes.html#PIRType"
		><span class="hs-identifier hs-type"
		  >PIRType</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540758"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-73"
      ></span
      ><span id="compileTypeNorm"
      ><span class="annot"
	><span class="annottext"
	  >compileTypeNorm :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	  ><a href="PlutusTx.Compiler.Type.html#compileTypeNorm"
	  ><span class="hs-identifier hs-var hs-var"
	    >compileTypeNorm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541113"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541113"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-74"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Types.html#CompileContext"
	><span class="hs-identifier hs-type"
	  >CompileContext</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="annot"
      ><span class="annottext"
	>ccFamInstEnvs :: forall (uni :: * -&gt; *) fun. CompileContext uni fun -&gt; FamInstEnvs
</span
	><a href="PlutusTx.Compiler.Types.html#ccFamInstEnvs"
	><span class="hs-identifier hs-var"
	  >ccFamInstEnvs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="local-6989586621679541116"
      ><span class="annot"
	><span class="annottext"
	  >FamInstEnvs
</span
	  ><a href="#local-6989586621679541116"
	  ><span class="hs-identifier hs-var"
	    >envs</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m (CompileContext DefaultUni DefaultFun)
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#ask"
	><span class="hs-identifier hs-var"
	  >ask</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-75"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- See Note [Type families and normalizing types]</span
      ><span
      >
</span
      ><span id="line-76"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Reduction.html#Reduction"
	><span class="hs-identifier hs-type"
	  >GHC.Reduction</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Coercion
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541119"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541119"
	  ><span class="hs-identifier hs-var"
	    >ty'</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>FamInstEnvs -&gt; Role -&gt; Type -&gt; Reduction
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.FamInstEnv.html#normaliseType"
	><span class="hs-identifier hs-var"
	  >GHC.normaliseType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>FamInstEnvs
</span
	><a href="#local-6989586621679541116"
	><span class="hs-identifier hs-var"
	  >envs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Role
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/Language.Haskell.Syntax.Basic.html#Representational"
	><span class="hs-identifier hs-var"
	  >GHC.Representational</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541113"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-77"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541119"
	><span class="hs-identifier hs-var"
	  >ty'</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-78"
      ></span
      ><span
      >
</span
      ><span id="line-79"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Compile a type.</span
	></span
      ><span
      >
</span
      ><span id="line-80"
      ></span
      ><span id="local-6989586621679541122"
      ><span id="local-6989586621679541123"
	><span id="local-6989586621679541124"
	  ><span id="local-6989586621679541125"
	    ><span class="annot"
	      ><a href="PlutusTx.Compiler.Type.html#compileType"
		><span class="hs-identifier hs-type"
		  >compileType</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.Compiler.Types.html#CompilingDefault"
		><span class="hs-identifier hs-type"
		  >CompilingDefault</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541122"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541123"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541124"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541125"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCo.Rep.html#Type"
		><span class="hs-identifier hs-type"
		  >GHC.Type</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541124"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.PIRTypes.html#PIRType"
		><span class="hs-identifier hs-type"
		  >PIRType</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541122"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-81"
      ></span
      ><span id="compileType"
      ><span class="annot"
	><span class="annottext"
	  >compileType :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	  ><a href="PlutusTx.Compiler.Type.html#compileType"
	  ><span class="hs-identifier hs-var hs-var"
	    >compileType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541236"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541236"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; SDoc -&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) e a.
(MonadReader (CompileContext uni fun) m, MonadState CompileState m,
 MonadError (WithContext Text e) m) =&gt;
Int -&gt; SDoc -&gt; m a -&gt; m a
</span
	><a href="PlutusTx.Compiler.Trace.html#traceCompilation"
	><span class="hs-identifier hs-var"
	  >traceCompilation</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>2</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Compiling type:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541236"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(m (PIRType uni) -&gt; m (PIRType uni))
-&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-82"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- See Note [Scopes]</span
      ><span
      >
</span
      ><span id="line-83"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Types.html#CompileContext"
	><span class="hs-identifier hs-type"
	  >CompileContext</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="annot"
      ><span class="annottext"
	>ccScope :: forall (uni :: * -&gt; *) fun. CompileContext uni fun -&gt; Scope uni fun
</span
	><a href="PlutusTx.Compiler.Types.html#ccScope"
	><span class="hs-identifier hs-var"
	  >ccScope</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="local-6989586621679541241"
      ><span class="annot"
	><span class="annottext"
	  >Scope DefaultUni DefaultFun
</span
	  ><a href="#local-6989586621679541241"
	  ><span class="hs-identifier hs-var"
	    >scope</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m (CompileContext DefaultUni DefaultFun)
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Reader.Class.html#ask"
	><span class="hs-identifier hs-var"
	  >ask</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-84"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541236"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-85"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- in scope type name</span
      ><span
      >
</span
      ><span id="line-86"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; Maybe TyVar
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#getTyVar_maybe"
	><span class="hs-identifier hs-var"
	  >GHC.getTyVar_maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679541243"
      ><span class="annot"
	><span class="annottext"
	  >TyVar
</span
	  ><a href="#local-6989586621679541243"
	  ><span class="hs-identifier hs-var"
	    >v</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Scope DefaultUni DefaultFun -&gt; Name -&gt; Maybe PLCTyVar
forall (uni :: * -&gt; *) fun. Scope uni fun -&gt; Name -&gt; Maybe PLCTyVar
</span
	><a href="PlutusTx.Compiler.Names.html#lookupTyName"
	><span class="hs-identifier hs-var"
	  >lookupTyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Scope DefaultUni DefaultFun
</span
	><a href="#local-6989586621679541241"
	><span class="hs-identifier hs-var"
	  >scope</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>TyVar -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getName"
	><span class="hs-identifier hs-var"
	  >GHC.getName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVar
</span
	><a href="#local-6989586621679541243"
	><span class="hs-identifier hs-var"
	  >v</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-87"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyVarDecl"
	><span class="hs-identifier hs-type"
	  >PIR.TyVarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541247"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621679541247"
	  ><span class="hs-identifier hs-var"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind Ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni -&gt; m (PIRType uni)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PIRType uni -&gt; m (PIRType uni)) -&gt; PIRType uni -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; TyName -&gt; PIRType uni
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyVar"
	><span class="hs-identifier hs-var"
	  >PIR.TyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621679541247"
	><span class="hs-identifier hs-var"
	  >name</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-88"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe PLCTyVar
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-89"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error DefaultUni DefaultFun ann)
-&gt; SDoc -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error DefaultUni DefaultFun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#FreeVariableError"
	><span class="hs-identifier hs-var"
	  >FreeVariableError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc -&gt; m (PIRType uni)) -&gt; SDoc -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Type variable:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVar
</span
	><a href="#local-6989586621679541243"
	><span class="hs-identifier hs-var"
	  >v</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-90"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; Maybe (FunTyFlag, Type, Type, Type)
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#splitFunTy_maybe"
	><span class="hs-identifier hs-var"
	  >GHC.splitFunTy_maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679541253"
      ><span class="annot"
	><span class="annottext"
	  >(FunTyFlag, Type, Type, Type)
</span
	  ><a href="#local-6989586621679541253"
	  ><span class="hs-identifier hs-var"
	    >r</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(FunTyFlag, Type, Type, Type)
</span
	><a href="#local-6989586621679541253"
	><span class="hs-identifier hs-var"
	  >r</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-91"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679541254"
      ><span class="annot"
	><span class="annottext"
	  >FunTyFlag
</span
	  ><a href="#local-6989586621679541254"
	  ><span class="hs-identifier hs-var"
	    >_t</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679541255"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541255"
	  ><span class="hs-identifier hs-var"
	    >_m</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679541256"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541256"
	  ><span class="hs-identifier hs-var"
	    >i</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679541257"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541257"
	  ><span class="hs-identifier hs-var"
	    >o</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; PIRType uni -&gt; PIRType uni -&gt; PIRType uni
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyFun"
	><span class="hs-identifier hs-var"
	  >PIR.TyFun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PIRType uni -&gt; PIRType uni -&gt; PIRType uni)
-&gt; m (PIRType uni) -&gt; m (PIRType uni -&gt; PIRType uni)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541256"
	><span class="hs-identifier hs-var"
	  >i</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m (PIRType uni -&gt; PIRType uni)
-&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall a b. m (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541257"
	><span class="hs-identifier hs-var"
	  >o</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-92"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(() :: Constraint) =&gt; Type -&gt; Maybe (TyCon, [Type])
Type -&gt; Maybe (TyCon, [Type])
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#splitTyConApp_maybe"
	><span class="hs-identifier hs-var"
	  >GHC.splitTyConApp_maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679541261"
      ><span class="annot"
	><span class="annottext"
	  >TyCon
</span
	  ><a href="#local-6989586621679541261"
	  ><span class="hs-identifier hs-var"
	    >tc</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679541262"
      ><span class="annot"
	><span class="annottext"
	  >[Type]
</span
	  ><a href="#local-6989586621679541262"
	  ><span class="hs-identifier hs-var"
	    >ts</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-93"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni -&gt; [(Ann, PIRType uni)] -&gt; PIRType uni
forall tyname (uni :: * -&gt; *) ann.
Type tyname uni ann
-&gt; [(ann, Type tyname uni ann)] -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#mkIterTyApp"
	><span class="hs-identifier hs-var"
	  >PIR.mkIterTyApp</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-94"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>(PIRType uni -&gt; [(Ann, PIRType uni)] -&gt; PIRType uni)
-&gt; m (PIRType uni) -&gt; m ([(Ann, PIRType uni)] -&gt; PIRType uni)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
TyCon -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileTyCon"
	><span class="hs-identifier hs-var"
	  >compileTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541261"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-95"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- Ignore 'RuntimeRep' type arguments to type constructors, see Note [Runtime reps]</span
      ><span
      >
</span
      ><span id="line-96"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>m ([(Ann, PIRType uni)] -&gt; PIRType uni)
-&gt; m [(Ann, PIRType uni)] -&gt; m (PIRType uni)
forall a b. m (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(Type -&gt; m (Ann, PIRType uni)) -&gt; [Type] -&gt; m [(Ann, PIRType uni)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#traverse"
	><span class="hs-identifier hs-var"
	  >traverse</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(PIRType uni -&gt; (Ann, PIRType uni))
-&gt; m (PIRType uni) -&gt; m (Ann, PIRType uni)
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#fmap"
	><span class="hs-identifier hs-var"
	  >fmap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(m (PIRType uni) -&gt; m (Ann, PIRType uni))
-&gt; (Type -&gt; m (PIRType uni)) -&gt; Type -&gt; m (Ann, PIRType uni)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[Type] -&gt; [Type]
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#dropRuntimeRepArgs"
	><span class="hs-identifier hs-var"
	  >GHC.dropRuntimeRepArgs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type]
</span
	><a href="#local-6989586621679541262"
	><span class="hs-identifier hs-var"
	  >ts</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-97"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; Maybe (Type, Type)
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#splitAppTy_maybe"
	><span class="hs-identifier hs-var"
	  >GHC.splitAppTy_maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679541269"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541269"
	  ><span class="hs-identifier hs-var"
	    >t1</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679541270"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541270"
	  ><span class="hs-identifier hs-var"
	    >t2</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-98"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; PIRType uni -&gt; PIRType uni -&gt; PIRType uni
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyApp"
	><span class="hs-identifier hs-var"
	  >PIR.TyApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PIRType uni -&gt; PIRType uni -&gt; PIRType uni)
-&gt; m (PIRType uni) -&gt; m (PIRType uni -&gt; PIRType uni)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541269"
	><span class="hs-identifier hs-var"
	  >t1</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m (PIRType uni -&gt; PIRType uni)
-&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall a b. m (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541270"
	><span class="hs-identifier hs-var"
	  >t2</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-99"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; Maybe (TyVar, Type)
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#splitForAllTyCoVar_maybe"
	><span class="hs-identifier hs-var"
	  >GHC.splitForAllTyCoVar_maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679541273"
      ><span class="annot"
	><span class="annottext"
	  >TyVar
</span
	  ><a href="#local-6989586621679541273"
	  ><span class="hs-identifier hs-var"
	    >tv</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679541274"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541274"
	  ><span class="hs-identifier hs-var"
	    >tpe</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-100"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- Ignore type binders for runtime rep variables, see Note [Runtime reps]</span
      ><span
      >
</span
      ><span id="line-101"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >if</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#isRuntimeRepTy"
	><span class="hs-identifier hs-var"
	  >GHC.isRuntimeRepTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type -&gt; Bool) -&gt; (TyVar -&gt; Type) -&gt; TyVar -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVar -&gt; Type
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Var.html#varType"
	><span class="hs-identifier hs-var"
	  >GHC.varType</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVar
</span
	><a href="#local-6989586621679541273"
	><span class="hs-identifier hs-var"
	  >tv</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-102"
      ></span
      ><span
      >        </span
      ><span class="hs-keyword"
      >then</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541274"
	><span class="hs-identifier hs-var"
	  >tpe</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-103"
      ></span
      ><span
      >        </span
      ><span class="hs-keyword"
      >else</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVar -&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
Compiling uni fun m ann =&gt;
TyVar -&gt; m (PIRType uni) -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Binders.html#mkTyForallScoped"
	><span class="hs-identifier hs-var"
	  >mkTyForallScoped</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVar
</span
	><a href="#local-6989586621679541273"
	><span class="hs-identifier hs-var"
	  >tv</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541274"
	><span class="hs-identifier hs-var"
	  >tpe</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-104"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- I think it's safe to ignore the coercion here</span
      ><span
      >
</span
      ><span id="line-105"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; Maybe (Type, Coercion)
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#splitCastTy_maybe"
	><span class="hs-identifier hs-var"
	  >GHC.splitCastTy_maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679541279"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541279"
	  ><span class="hs-identifier hs-var"
	    >tpe</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Coercion
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileType"
	><span class="hs-identifier hs-var"
	  >compileType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541279"
	><span class="hs-identifier hs-var"
	  >tpe</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-106"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error DefaultUni DefaultFun ann)
-&gt; SDoc -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error DefaultUni DefaultFun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc -&gt; m (PIRType uni)) -&gt; SDoc -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Type&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541236"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-107"
      ></span
      ><span
      >
</span
      ><span id="line-108"
      ></span
      ><span class="hs-comment"
      >{- Note [Occurrences of recursive names]
When we compile recursive types/terms, we need to process their definitions before we can produce
the final definition that we will use going forward.

But the thing that makes them *recursive* is that they appear in their own definitions! So
what do we do when we see those occurrences?

For cases where we are introducing a new variable for the definition (terms and datatypes), we
simply add that variable as a &quot;fake&quot; definition before we process the definition of the main
entity. That will be enough to ensure that we can make references to it normally, without making
us loop. Then we fix it up at the end.

For newtypes, we can't do this because the final value we will use is precisely the definition. So
we just have to ban recursive newtypes, and we do this by blackholing the name while we process the
definition, and dying if we see it again.
-}</span
      ><span
      >
</span
      ><span id="line-124"
      ></span
      ><span
      >
</span
      ><span id="line-125"
      ></span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#compileTyCon"
	><span class="hs-identifier hs-type"
	  >compileTyCon</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-126"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679540857"
      ><span class="annot"
	><a href="#local-6989586621679540857"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679540858"
      ><span class="annot"
	><a href="#local-6989586621679540858"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679540859"
      ><span class="annot"
	><a href="#local-6989586621679540859"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679540860"
      ><span class="annot"
	><a href="#local-6989586621679540860"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-127"
      ></span
      ><span
      >   </span
      ><span class="hs-operator"
      >.</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Types.html#CompilingDefault"
	><span class="hs-identifier hs-type"
	  >CompilingDefault</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679540857"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679540858"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679540859"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679540860"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-128"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#TyCon"
	><span class="hs-identifier hs-type"
	  >GHC.TyCon</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-129"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679540859"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusTx.PIRTypes.html#PIRType"
	><span class="hs-identifier hs-type"
	  >PIRType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679540857"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-130"
      ></span
      ><span id="compileTyCon"
      ><span class="annot"
	><span class="annottext"
	  >compileTyCon :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
TyCon -&gt; m (PIRType uni)
</span
	  ><a href="PlutusTx.Compiler.Type.html#compileTyCon"
	  ><span class="hs-identifier hs-var hs-var"
	    >compileTyCon</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541411"
      ><span class="annot"
	><span class="annottext"
	  >TyCon
</span
	  ><a href="#local-6989586621679541411"
	  ><span class="hs-identifier hs-var"
	    >tc</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-131"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Builtin.Types.html#intTyCon"
	><span class="hs-identifier hs-var"
	  >GHC.intTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Error DefaultUni DefaultFun ann -&gt; m (PIRType uni)
forall c e (m :: * -&gt; *) a.
MonadError (WithContext c e) m =&gt;
e -&gt; m a
</span
	><a href="PlutusTx.Compiler.Error.html#throwPlain"
	><span class="hs-identifier hs-var"
	  >throwPlain</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error DefaultUni DefaultFun ann -&gt; m (PIRType uni))
-&gt; Error DefaultUni DefaultFun ann -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error DefaultUni DefaultFun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;Int: use Integer instead&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-132"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Builtin.Types.Prim.html#intPrimTyCon"
	><span class="hs-identifier hs-var"
	  >GHC.intPrimTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-133"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Error DefaultUni DefaultFun ann -&gt; m (PIRType uni)
forall c e (m :: * -&gt; *) a.
MonadError (WithContext c e) m =&gt;
e -&gt; m a
</span
	><a href="PlutusTx.Compiler.Error.html#throwPlain"
	><span class="hs-identifier hs-var"
	  >throwPlain</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error DefaultUni DefaultFun ann -&gt; m (PIRType uni))
-&gt; Error DefaultUni DefaultFun ann -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-134"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error DefaultUni DefaultFun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;Int#: unboxed integers are not supported&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-135"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Builtin.Types.html#unboxedUnitTyCon"
	><span class="hs-identifier hs-var"
	  >GHC.unboxedUnitTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni -&gt; m (PIRType uni)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>forall a (x :: a) (uni :: * -&gt; *) ann tyname.
HasTypeLevel uni x =&gt;
ann -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Builtin.KnownTypeAst.html#mkTyBuiltin"
	><span class="hs-identifier hs-var"
	  >PIR.mkTyBuiltin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-136"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#otherwise"
	><span class="hs-identifier hs-var"
	  >otherwise</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-137"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679541418"
      ><span class="annot"
	><span class="annottext"
	  >tcName :: Name
</span
	  ><a href="#local-6989586621679541418"
	  ><span class="hs-identifier hs-var hs-var"
	    >tcName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getName"
	><span class="hs-identifier hs-var"
	  >GHC.getName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-138"
      ></span
      ><span
      >          </span
      ><span id="local-6989586621679541419"
      ><span class="annot"
	><span class="annottext"
	  >lexName :: LexName
</span
	  ><a href="#local-6989586621679541419"
	  ><span class="hs-identifier hs-var hs-var"
	    >lexName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; LexName
</span
	><a href="PlutusTx.Compiler.Types.html#LexName"
	><span class="hs-identifier hs-var"
	  >LexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679541418"
	><span class="hs-identifier hs-var"
	  >tcName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-139"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>m Bool -&gt; m () -&gt; m ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span
	><a href="https://hackage.haskell.org/package/extra-1.8/docs/src/Control.Monad.Extra.html#whenM"
	><span class="hs-identifier hs-var"
	  >whenM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; m Bool
forall (uni :: * -&gt; *) fun (m :: * -&gt; *).
MonadReader (CompileContext uni fun) m =&gt;
Name -&gt; m Bool
</span
	><a href="PlutusTx.Compiler.Types.html#blackholed"
	><span class="hs-identifier hs-var"
	  >blackholed</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679541418"
	><span class="hs-identifier hs-var"
	  >tcName</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(m () -&gt; m ()) -&gt; (SDoc -&gt; m ()) -&gt; SDoc -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error DefaultUni DefaultFun ann) -&gt; SDoc -&gt; m ()
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error DefaultUni DefaultFun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc -&gt; m ()) -&gt; SDoc -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-140"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Recursive newtypes, use data:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679541418"
	><span class="hs-identifier hs-var"
	  >tcName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-141"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- See Note [Dependency tracking]</span
      ><span
      >
</span
      ><span id="line-142"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>(Set LexName -&gt; Set LexName) -&gt; m ()
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
Compiling uni fun m ann =&gt;
(Set LexName -&gt; Set LexName) -&gt; m ()
</span
	><a href="PlutusTx.Compiler.Types.html#modifyCurDeps"
	><span class="hs-identifier hs-var"
	  >modifyCurDeps</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679541424"
      ><span class="annot"
	><span class="annottext"
	  >Set LexName
</span
	  ><a href="#local-6989586621679541424"
	  ><span class="hs-identifier hs-var"
	    >d</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName -&gt; Set LexName -&gt; Set LexName
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span
	><a href="https://hackage.haskell.org/package/containers-0.6.7/docs/src/Data.Set.Internal.html#insert"
	><span class="hs-identifier hs-var"
	  >Set.insert</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
</span
	><a href="#local-6989586621679541419"
	><span class="hs-identifier hs-var"
	  >lexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Set LexName
</span
	><a href="#local-6989586621679541424"
	><span class="hs-identifier hs-var"
	  >d</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-143"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621679541426"
      ><span class="annot"
	><span class="annottext"
	  >Maybe (PIRType uni)
</span
	  ><a href="#local-6989586621679541426"
	  ><span class="hs-identifier hs-var"
	    >maybeDef</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; LexName -&gt; m (Maybe (PIRType uni))
forall key (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadDefs key uni fun ann m =&gt;
ann -&gt; key -&gt; m (Maybe (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#lookupType"
	><span class="hs-identifier hs-var"
	  >PIR.lookupType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
</span
	><a href="#local-6989586621679541419"
	><span class="hs-identifier hs-var"
	  >lexName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-144"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (PIRType uni)
</span
	><a href="#local-6989586621679541426"
	><span class="hs-identifier hs-var"
	  >maybeDef</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-145"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679541428"
      ><span class="annot"
	><span class="annottext"
	  >PIRType uni
</span
	  ><a href="#local-6989586621679541428"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni -&gt; m (PIRType uni)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni
</span
	><a href="#local-6989586621679541428"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-146"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- See Note [Dependency tracking]</span
      ><span
      >
</span
      ><span id="line-147"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (PIRType uni)
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName -&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann a.
Compiling uni fun m ann =&gt;
LexName -&gt; m a -&gt; m a
</span
	><a href="PlutusTx.Compiler.Types.html#withCurDef"
	><span class="hs-identifier hs-var"
	  >withCurDef</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
</span
	><a href="#local-6989586621679541419"
	><span class="hs-identifier hs-var"
	  >lexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(m (PIRType uni) -&gt; m (PIRType uni))
-&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-148"
      ></span
      ><span
      >          </span
      ><span id="local-6989586621679541430"
      ><span class="annot"
	><span class="annottext"
	  >PLCTyVar
</span
	  ><a href="#local-6989586621679541430"
	  ><span class="hs-identifier hs-var"
	    >tvd</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; m PLCTyVar
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
Compiling uni fun m ann =&gt;
TyCon -&gt; m PLCTyVar
</span
	><a href="PlutusTx.Compiler.Names.html#compileTcTyVarFresh"
	><span class="hs-identifier hs-var"
	  >compileTcTyVarFresh</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-149"
      ></span
      ><span
      >          </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Maybe ([TyVar], Type, CoAxiom Unbranched)
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#unwrapNewTyCon_maybe"
	><span class="hs-identifier hs-var"
	  >GHC.unwrapNewTyCon_maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-150"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[TyVar]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679541433"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541433"
	  ><span class="hs-identifier hs-var"
	    >underlying</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>CoAxiom Unbranched
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-151"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- See Note [Coercions and newtypes]</span
      ><span
      >
</span
      ><span id="line-152"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- See Note [Occurrences of recursive names]</span
      ><span
      >
</span
      ><span id="line-153"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- We do this for dependency tracking, we won't use it due to the blackholing</span
      ><span
      >
</span
      ><span id="line-154"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>LexName -&gt; TypeDef TyName DefaultUni Ann -&gt; Set LexName -&gt; m ()
forall key (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadDefs key uni fun ann m =&gt;
key -&gt; TypeDef TyName uni ann -&gt; Set key -&gt; m ()
</span
	><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#defineType"
	><span class="hs-identifier hs-var"
	  >PIR.defineType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
</span
	><a href="#local-6989586621679541419"
	><span class="hs-identifier hs-var"
	  >lexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
-&gt; Type TyName DefaultUni Ann -&gt; TypeDef TyName DefaultUni Ann
forall var val. var -&gt; val -&gt; Def var val
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#Def"
	><span class="hs-identifier hs-var"
	  >PIR.Def</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
</span
	><a href="#local-6989586621679541430"
	><span class="hs-identifier hs-var"
	  >tvd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; PLCTyVar -&gt; Type TyName DefaultUni Ann
forall ann tyname (uni :: * -&gt; *).
ann -&gt; TyVarDecl tyname ann -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#mkTyVar"
	><span class="hs-identifier hs-var"
	  >PIR.mkTyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
</span
	><a href="#local-6989586621679541430"
	><span class="hs-identifier hs-var"
	  >tvd</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Set LexName
forall a. Monoid a =&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#mempty"
	><span class="hs-identifier hs-var"
	  >mempty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-155"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- Type variables are in scope for the rhs of the alias</span
      ><span
      >
</span
      ><span id="line-156"
      ></span
      ><span
      >              </span
      ><span id="local-6989586621679541437"
      ><span class="annot"
	><span class="annottext"
	  >PIRType uni
</span
	  ><a href="#local-6989586621679541437"
	  ><span class="hs-identifier hs-var"
	    >alias</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      >
</span
      ><span id="line-157"
      ></span
      ><span
      >                </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVar] -&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
Compiling uni fun m ann =&gt;
[TyVar] -&gt; m (PIRType uni) -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Binders.html#mkIterTyLamScoped"
	><span class="hs-identifier hs-var"
	  >mkIterTyLamScoped</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; [TyVar]
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#tyConTyVars"
	><span class="hs-identifier hs-var"
	  >GHC.tyConTyVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(m (PIRType uni) -&gt; m (PIRType uni))
-&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-158"
      ></span
      ><span
      >                  </span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) a.
MonadReader (CompileContext uni fun) m =&gt;
Name -&gt; m a -&gt; m a
</span
	><a href="PlutusTx.Compiler.Types.html#blackhole"
	><span class="hs-identifier hs-var"
	  >blackhole</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getName"
	><span class="hs-identifier hs-var"
	  >GHC.getName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(m (PIRType uni) -&gt; m (PIRType uni))
-&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-159"
      ></span
      ><span
      >                    </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileTypeNorm"
	><span class="hs-identifier hs-var"
	  >compileTypeNorm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541433"
	><span class="hs-identifier hs-var"
	  >underlying</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-160"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
-&gt; (TypeDef TyName uni Ann -&gt; TypeDef TyName uni Ann) -&gt; m ()
forall key (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadDefs key uni fun ann m =&gt;
key -&gt; (TypeDef TyName uni ann -&gt; TypeDef TyName uni ann) -&gt; m ()
</span
	><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#modifyTypeDef"
	><span class="hs-identifier hs-var"
	  >PIR.modifyTypeDef</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
</span
	><a href="#local-6989586621679541419"
	><span class="hs-identifier hs-var"
	  >lexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>TypeDef TyName uni Ann
-&gt; TypeDef TyName uni Ann -&gt; TypeDef TyName uni Ann
forall a b. a -&gt; b -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#const"
	><span class="hs-identifier hs-var"
	  >const</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeDef TyName uni Ann
 -&gt; TypeDef TyName uni Ann -&gt; TypeDef TyName uni Ann)
-&gt; TypeDef TyName uni Ann
-&gt; TypeDef TyName uni Ann
-&gt; TypeDef TyName uni Ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar -&gt; PIRType uni -&gt; TypeDef TyName uni Ann
forall var val. var -&gt; val -&gt; Def var val
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#Def"
	><span class="hs-identifier hs-var"
	  >PIR.Def</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
</span
	><a href="#local-6989586621679541430"
	><span class="hs-identifier hs-var"
	  >tvd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni
</span
	><a href="#local-6989586621679541437"
	><span class="hs-identifier hs-var"
	  >alias</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-161"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>forall key (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadDefs key uni fun ann m =&gt;
key -&gt; m ()
</span
	><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#recordAlias"
	><span class="hs-identifier hs-var"
	  >PIR.recordAlias</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Types.html#LexName"
	><span class="hs-identifier hs-type"
	  >LexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><a href="#local-6989586621679540857"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><a href="#local-6989586621679540858"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
</span
	><a href="#local-6989586621679541419"
	><span class="hs-identifier hs-var"
	  >lexName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-162"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni -&gt; m (PIRType uni)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni
</span
	><a href="#local-6989586621679541437"
	><span class="hs-identifier hs-var"
	  >alias</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-163"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe ([TyVar], Type, CoAxiom Unbranched)
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-164"
      ></span
      ><span
      >              </span
      ><span id="local-6989586621679541444"
      ><span class="annot"
	><span class="annottext"
	  >[DataCon]
</span
	  ><a href="#local-6989586621679541444"
	  ><span class="hs-identifier hs-var"
	    >dcs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; m [DataCon]
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
Compiling uni fun m ann =&gt;
TyCon -&gt; m [DataCon]
</span
	><a href="PlutusTx.Compiler.Type.html#getDataCons"
	><span class="hs-identifier hs-var"
	  >getDataCons</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-165"
      ></span
      ><span
      >              </span
      ><span id="local-6989586621679541445"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621679541445"
	  ><span class="hs-identifier hs-var"
	    >matchName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      >
</span
      ><span id="line-166"
      ></span
      ><span
      >                </span
      ><span class="annot"
      ><span class="annottext"
	>TyName -&gt; Name
</span
	><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#unTyName"
	><span class="hs-identifier hs-var"
	  >PLC.unTyName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-167"
      ></span
      ><span
      >                  </span
      ><span class="annot"
      ><span class="annottext"
	>(TyName -&gt; Name) -&gt; (TyName -&gt; TyName) -&gt; TyName -&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Text) -&gt; TyName -&gt; TyName
</span
	><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#mapTyNameString"
	><span class="hs-identifier hs-var"
	  >PLC.mapTyNameString</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;_match&quot;</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-168"
      ></span
      ><span
      >                  </span
      ><span class="annot"
      ><span class="annottext"
	>(TyName -&gt; Name) -&gt; m TyName -&gt; m Name
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; m TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; Name -&gt; m TyName
</span
	><a href="PlutusTx.Compiler.Names.html#compileTyNameFresh"
	><span class="hs-identifier hs-var"
	  >compileTyNameFresh</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getName"
	><span class="hs-identifier hs-var"
	  >GHC.getName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-169"
      ></span
      ><span
      >
</span
      ><span id="line-170"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- See Note [Occurrences of recursive names]</span
      ><span
      >
</span
      ><span id="line-171"
      ></span
      ><span
      >              </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679541450"
      ><span class="annot"
	><span class="annottext"
	  >fakeDatatype :: Datatype TyName Name uni Ann
</span
	  ><a href="#local-6989586621679541450"
	  ><span class="hs-identifier hs-var hs-var"
	    >fakeDatatype</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
-&gt; PLCTyVar
-&gt; [PLCTyVar]
-&gt; Name
-&gt; [VarDecl TyName Name uni Ann]
-&gt; Datatype TyName Name uni Ann
forall tyname name (uni :: * -&gt; *) a.
a
-&gt; TyVarDecl tyname a
-&gt; [TyVarDecl tyname a]
-&gt; name
-&gt; [VarDecl tyname name uni a]
-&gt; Datatype tyname name uni a
</span
	><a href="../../plutus-core/src/PlutusIR.Core.Type.html#Datatype"
	><span class="hs-identifier hs-var"
	  >PIR.Datatype</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
</span
	><a href="#local-6989586621679541430"
	><span class="hs-identifier hs-var"
	  >tvd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679541445"
	><span class="hs-identifier hs-var"
	  >matchName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-172"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>forall key (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadDefs key uni fun ann m =&gt;
key -&gt; DatatypeDef TyName Name uni ann -&gt; Set key -&gt; m ()
</span
	><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#defineDatatype"
	><span class="hs-identifier hs-var"
	  >PIR.defineDatatype</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><a href="#local-6989586621679540857"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
</span
	><a href="#local-6989586621679541419"
	><span class="hs-identifier hs-var"
	  >lexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
-&gt; Datatype TyName Name uni Ann -&gt; DatatypeDef TyName Name uni Ann
forall var val. var -&gt; val -&gt; Def var val
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#Def"
	><span class="hs-identifier hs-var"
	  >PIR.Def</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
</span
	><a href="#local-6989586621679541430"
	><span class="hs-identifier hs-var"
	  >tvd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Datatype TyName Name uni Ann
forall {uni :: * -&gt; *}. Datatype TyName Name uni Ann
</span
	><a href="#local-6989586621679541450"
	><span class="hs-identifier hs-var"
	  >fakeDatatype</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Set LexName
forall a. Set a
</span
	><a href="https://hackage.haskell.org/package/containers-0.6.7/docs/src/Data.Set.Internal.html#empty"
	><span class="hs-identifier hs-var"
	  >Set.empty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-173"
      ></span
      ><span
      >
</span
      ><span id="line-174"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- Type variables are in scope for the rest of the definition</span
      ><span
      >
</span
      ><span id="line-175"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- We remove 'RuntimeRep' type variables with 'dropRuntimeRepVars'</span
      ><span
      >
</span
      ><span id="line-176"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- to compile unboxed tuples type constructor, see Note [Runtime reps]</span
      ><span
      >
</span
      ><span id="line-177"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVar] -&gt; ([PLCTyVar] -&gt; m ()) -&gt; m ()
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann a.
Compiling uni fun m ann =&gt;
[TyVar] -&gt; ([PLCTyVar] -&gt; m a) -&gt; m a
</span
	><a href="PlutusTx.Compiler.Binders.html#withTyVarsScoped"
	><span class="hs-identifier hs-var"
	  >withTyVarsScoped</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[TyVar] -&gt; [TyVar]
</span
	><a href="PlutusTx.Compiler.Type.html#dropRuntimeRepVars"
	><span class="hs-identifier hs-var"
	  >dropRuntimeRepVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([TyVar] -&gt; [TyVar]) -&gt; [TyVar] -&gt; [TyVar]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; [TyVar]
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#tyConTyVars"
	><span class="hs-identifier hs-var"
	  >GHC.tyConTyVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541411"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(([PLCTyVar] -&gt; m ()) -&gt; m ()) -&gt; ([PLCTyVar] -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679541456"
      ><span class="annot"
	><span class="annottext"
	  >[PLCTyVar]
</span
	  ><a href="#local-6989586621679541456"
	  ><span class="hs-identifier hs-var"
	    >tvs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-178"
      ></span
      ><span
      >                </span
      ><span id="local-6989586621679541457"
      ><span class="annot"
	><span class="annottext"
	  >[VarDecl TyName Name uni Ann]
</span
	  ><a href="#local-6989586621679541457"
	  ><span class="hs-identifier hs-var"
	    >constructors</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon]
-&gt; (DataCon -&gt; m (VarDecl TyName Name uni Ann))
-&gt; m [VarDecl TyName Name uni Ann]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#for"
	><span class="hs-identifier hs-var"
	  >for</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon]
</span
	><a href="#local-6989586621679541444"
	><span class="hs-identifier hs-var"
	  >dcs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((DataCon -&gt; m (VarDecl TyName Name uni Ann))
 -&gt; m [VarDecl TyName Name uni Ann])
-&gt; (DataCon -&gt; m (VarDecl TyName Name uni Ann))
-&gt; m [VarDecl TyName Name uni Ann]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679541459"
      ><span class="annot"
	><span class="annottext"
	  >DataCon
</span
	  ><a href="#local-6989586621679541459"
	  ><span class="hs-identifier hs-var"
	    >dc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-179"
      ></span
      ><span
      >                  </span
      ><span id="local-6989586621679541460"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621679541460"
	  ><span class="hs-identifier hs-var"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; m Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Name -&gt; m Name
</span
	><a href="PlutusTx.Compiler.Names.html#compileNameFresh"
	><span class="hs-identifier hs-var"
	  >compileNameFresh</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>DataCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getName"
	><span class="hs-identifier hs-var"
	  >GHC.getName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541459"
	><span class="hs-identifier hs-var"
	  >dc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-180"
      ></span
      ><span
      >                  </span
      ><span id="local-6989586621679541462"
      ><span class="annot"
	><span class="annottext"
	  >PIRType uni
</span
	  ><a href="#local-6989586621679541462"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
DataCon -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#mkConstructorType"
	><span class="hs-identifier hs-var"
	  >mkConstructorType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541459"
	><span class="hs-identifier hs-var"
	  >dc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-181"
      ></span
      ><span
      >                  </span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni Ann -&gt; m (VarDecl TyName Name uni Ann)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(VarDecl TyName Name uni Ann -&gt; m (VarDecl TyName Name uni Ann))
-&gt; VarDecl TyName Name uni Ann -&gt; m (VarDecl TyName Name uni Ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; Name -&gt; PIRType uni -&gt; VarDecl TyName Name uni Ann
forall tyname name (uni :: * -&gt; *) ann.
ann -&gt; name -&gt; Type tyname uni ann -&gt; VarDecl tyname name uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#VarDecl"
	><span class="hs-identifier hs-var"
	  >PIR.VarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679541460"
	><span class="hs-identifier hs-var"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni
</span
	><a href="#local-6989586621679541462"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-182"
      ></span
      ><span
      >
</span
      ><span id="line-183"
      ></span
      ><span
      >                </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679541466"
      ><span class="annot"
	><span class="annottext"
	  >datatype :: Datatype TyName Name uni Ann
</span
	  ><a href="#local-6989586621679541466"
	  ><span class="hs-identifier hs-var hs-var"
	    >datatype</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
-&gt; PLCTyVar
-&gt; [PLCTyVar]
-&gt; Name
-&gt; [VarDecl TyName Name uni Ann]
-&gt; Datatype TyName Name uni Ann
forall tyname name (uni :: * -&gt; *) a.
a
-&gt; TyVarDecl tyname a
-&gt; [TyVarDecl tyname a]
-&gt; name
-&gt; [VarDecl tyname name uni a]
-&gt; Datatype tyname name uni a
</span
	><a href="../../plutus-core/src/PlutusIR.Core.Type.html#Datatype"
	><span class="hs-identifier hs-var"
	  >PIR.Datatype</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
</span
	><a href="#local-6989586621679541430"
	><span class="hs-identifier hs-var"
	  >tvd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[PLCTyVar]
</span
	><a href="#local-6989586621679541456"
	><span class="hs-identifier hs-var"
	  >tvs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679541445"
	><span class="hs-identifier hs-var"
	  >matchName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[VarDecl TyName Name uni Ann]
</span
	><a href="#local-6989586621679541457"
	><span class="hs-identifier hs-var"
	  >constructors</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-184"
      ></span
      ><span
      >
</span
      ><span id="line-185"
      ></span
      ><span
      >                </span
      ><span class="annot"
      ><span class="annottext"
	>forall key (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadDefs key uni fun ann m =&gt;
key
-&gt; (DatatypeDef TyName Name uni ann
    -&gt; DatatypeDef TyName Name uni ann)
-&gt; m ()
</span
	><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#modifyDatatypeDef"
	><span class="hs-identifier hs-var"
	  >PIR.modifyDatatypeDef</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><a href="#local-6989586621679540857"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName
</span
	><a href="#local-6989586621679541419"
	><span class="hs-identifier hs-var"
	  >lexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>DatatypeDef TyName Name uni Ann
-&gt; DatatypeDef TyName Name uni Ann
-&gt; DatatypeDef TyName Name uni Ann
forall a b. a -&gt; b -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#const"
	><span class="hs-identifier hs-var"
	  >const</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(DatatypeDef TyName Name uni Ann
 -&gt; DatatypeDef TyName Name uni Ann
 -&gt; DatatypeDef TyName Name uni Ann)
-&gt; DatatypeDef TyName Name uni Ann
-&gt; DatatypeDef TyName Name uni Ann
-&gt; DatatypeDef TyName Name uni Ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
-&gt; Datatype TyName Name uni Ann -&gt; DatatypeDef TyName Name uni Ann
forall var val. var -&gt; val -&gt; Def var val
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#Def"
	><span class="hs-identifier hs-var"
	  >PIR.Def</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
</span
	><a href="#local-6989586621679541430"
	><span class="hs-identifier hs-var"
	  >tvd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Datatype TyName Name uni Ann
</span
	><a href="#local-6989586621679541466"
	><span class="hs-identifier hs-var"
	  >datatype</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-186"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni -&gt; m (PIRType uni)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PIRType uni -&gt; m (PIRType uni)) -&gt; PIRType uni -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; PLCTyVar -&gt; PIRType uni
forall ann tyname (uni :: * -&gt; *).
ann -&gt; TyVarDecl tyname ann -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#mkTyVar"
	><span class="hs-identifier hs-var"
	  >PIR.mkTyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PLCTyVar
</span
	><a href="#local-6989586621679541430"
	><span class="hs-identifier hs-var"
	  >tvd</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-187"
      ></span
      ><span
      >
</span
      ><span id="line-188"
      ></span
      ><span class="hs-comment"
      >{- Note [Case expressions and laziness]
PLC is strict, but users *do* expect that, e.g. they can write an if expression and have it be
lazy. This only *matters* because we have 'error', so it's important that 'if false error else ...'
does not evaluate to 'error'!

More generally, we can compile case expressions (of which an if expression is one) lazily,
i.e. we add a unit argument and apply it at the end.

However, we apply an important optimization: we only need to do this if it is not the case that
all the case expressions are values. In the common case they *will* be, so this gives us
significantly better codegen a lot of the time.

The check we do is:
- Alternatives with arguments will be turned into lambdas by us, so will be values.
- Otherwise, we compile the expression (we can do this easily since it doesn't need any variables
  in scope), and check whether it is a value.

This is somewhat wasteful, since we may compile the expression twice, but it's difficult to avoid,
and it's hard to tell if a GHC core expression will be a PLC value or not. Easiest to just try it.

One further optimization: we don't do compile a case lazily if it has one alternative. In this case
we're going to evaluate that alternative unconditionally, *and* we're going to evaluate the
scrutinee first, so the effects will also be in the right order.
-}</span
      ><span
      >
</span
      ><span id="line-212"
      ></span
      ><span
      >
</span
      ><span id="line-213"
      ></span
      ><span class="hs-comment"
      >{- Note [Ordering of constructors]
It is very important that we compile types and constructors consistently, especially between
lifting at runtime and compilation via the plugin. The main place we can get bitten is ordering.

GHC is under no obligation to give us any particular ordering of constructors, so we impose
an alphabetical one (with a few exceptions, see [Ensuring compatibility with spec and stdlib
types]).

The other place where ordering matters is arguments to constructors, but here there is a
clear natural ordering which we will assume GHC respects.
-}</span
      ><span
      >
</span
      ><span id="line-224"
      ></span
      ><span
      >
</span
      ><span id="line-225"
      ></span
      ><span class="hs-comment"
      >{- Note [Ensuring compatibility with spec and stdlib types]
TODO: ask question and update.
Haskell's Bool has its constructors ordered with False before True, which results in the
normal case expression having the opposite sense to the one in the spec, where
the true branch comes first (which is more logical).

Our options are:
- Reverse the branches in the spec.
    - This is ugly, the plugin details shouldn't influence the spec.
- Rewrite the primitive functions that produce booleans to produce spec booleans.
    - This is pretty bad codegen.
- Special case Bool to swap the order of the cases.

We take the least bad option, option 3.

The same problem arises for List. It's not in the spec, but the stdlib order (and the natural one)
is nil first and then cons, but &quot;:&quot; is less than &quot;[]&quot;, so we end up with the wrong order. Again,
we just special case this.
-}</span
      ><span
      >
</span
      ><span id="line-244"
      ></span
      ><span
      >
</span
      ><span id="line-245"
      ></span
      ><span class="hs-comment"
      >-- See Note [Ordering of constructors]</span
      ><span
      >
</span
      ><span id="line-246"
      ></span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#sortConstructors"
	><span class="hs-identifier hs-type"
	  >sortConstructors</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#TyCon"
	><span class="hs-identifier hs-type"
	  >GHC.TyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.DataCon.html#DataCon"
	><span class="hs-identifier hs-type"
	  >GHC.DataCon</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.DataCon.html#DataCon"
	><span class="hs-identifier hs-type"
	  >GHC.DataCon</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-247"
      ></span
      ><span id="sortConstructors"
      ><span class="annot"
	><span class="annottext"
	  >sortConstructors :: TyCon -&gt; [DataCon] -&gt; [DataCon]
</span
	  ><a href="PlutusTx.Compiler.Type.html#sortConstructors"
	  ><span class="hs-identifier hs-var hs-var"
	    >sortConstructors</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541469"
      ><span class="annot"
	><span class="annottext"
	  >TyCon
</span
	  ><a href="#local-6989586621679541469"
	  ><span class="hs-identifier hs-var"
	    >tc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541470"
      ><span class="annot"
	><span class="annottext"
	  >[DataCon]
</span
	  ><a href="#local-6989586621679541470"
	  ><span class="hs-identifier hs-var"
	    >cs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-248"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- note we compare on the OccName *not* the Name, as the latter compares on uniques,</span
      ><span
      >
</span
      ><span id="line-249"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- not the string name</span
      ><span
      >
</span
      ><span id="line-250"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679541475"
      ><span class="annot"
	><span class="annottext"
	  >sorted :: [DataCon]
</span
	  ><a href="#local-6989586621679541475"
	  ><span class="hs-identifier hs-var hs-var"
	    >sorted</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(DataCon -&gt; DataCon -&gt; Ordering) -&gt; [DataCon] -&gt; [DataCon]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#sortBy"
	><span class="hs-identifier hs-var"
	  >sortBy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679541476"
      ><span class="annot"
	><span class="annottext"
	  >DataCon
</span
	  ><a href="#local-6989586621679541476"
	  ><span class="hs-identifier hs-var"
	    >dc1</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541477"
      ><span class="annot"
	><span class="annottext"
	  >DataCon
</span
	  ><a href="#local-6989586621679541477"
	  ><span class="hs-identifier hs-var"
	    >dc2</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>OccName -&gt; OccName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#compare"
	><span class="hs-identifier hs-var"
	  >compare</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>DataCon -&gt; OccName
forall a. NamedThing a =&gt; a -&gt; OccName
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getOccName"
	><span class="hs-identifier hs-var"
	  >GHC.getOccName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541476"
	><span class="hs-identifier hs-var"
	  >dc1</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>DataCon -&gt; OccName
forall a. NamedThing a =&gt; a -&gt; OccName
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getOccName"
	><span class="hs-identifier hs-var"
	  >GHC.getOccName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541477"
	><span class="hs-identifier hs-var"
	  >dc2</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon]
</span
	><a href="#local-6989586621679541470"
	><span class="hs-identifier hs-var"
	  >cs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-251"
      ></span
      ><span
      >   </span
      ><span class="hs-keyword"
      >in</span
      ><span
      > </span
      ><span class="hs-keyword"
      >if</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541469"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Builtin.Types.html#listTyCon"
	><span class="hs-identifier hs-var"
	  >GHC.listTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >then</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon] -&gt; [DataCon]
forall a. [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.List.html#reverse"
	><span class="hs-identifier hs-var"
	  >reverse</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon]
</span
	><a href="#local-6989586621679541475"
	><span class="hs-identifier hs-var"
	  >sorted</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >else</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon]
</span
	><a href="#local-6989586621679541475"
	><span class="hs-identifier hs-var"
	  >sorted</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-252"
      ></span
      ><span
      >
</span
      ><span id="line-253"
      ></span
      ><span id="local-6989586621679540964"
      ><span id="local-6989586621679540965"
	><span id="local-6989586621679540966"
	  ><span id="local-6989586621679540967"
	    ><span class="annot"
	      ><a href="PlutusTx.Compiler.Type.html#getDataCons"
		><span class="hs-identifier hs-type"
		  >getDataCons</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.Compiler.Types.html#Compiling"
		><span class="hs-identifier hs-type"
		  >Compiling</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540964"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540965"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540966"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540967"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#TyCon"
		><span class="hs-identifier hs-type"
		  >GHC.TyCon</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540966"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >[</span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.DataCon.html#DataCon"
		><span class="hs-identifier hs-type"
		  >GHC.DataCon</span
		  ></a
		></span
	      ><span class="hs-special"
	      >]</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-254"
      ></span
      ><span id="getDataCons"
      ><span class="annot"
	><span class="annottext"
	  >getDataCons :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
Compiling uni fun m ann =&gt;
TyCon -&gt; m [DataCon]
</span
	  ><a href="PlutusTx.Compiler.Type.html#getDataCons"
	  ><span class="hs-identifier hs-var hs-var"
	    >getDataCons</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541491"
      ><span class="annot"
	><span class="annottext"
	  >TyCon
</span
	  ><a href="#local-6989586621679541491"
	  ><span class="hs-identifier hs-var"
	    >tc'</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; [DataCon] -&gt; [DataCon]
</span
	><a href="PlutusTx.Compiler.Type.html#sortConstructors"
	><span class="hs-identifier hs-var"
	  >sortConstructors</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541491"
	><span class="hs-identifier hs-var"
	  >tc'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([DataCon] -&gt; [DataCon]) -&gt; m [DataCon] -&gt; m [DataCon]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; m [DataCon]
forall {m :: * -&gt; *} {uni :: * -&gt; *} {fun} {ann}.
(MonadReader (CompileContext uni fun) m,
 MonadError (CompileError uni fun ann) m) =&gt;
TyCon -&gt; m [DataCon]
</span
	><a href="#local-6989586621679541492"
	><span class="hs-identifier hs-var"
	  >extractDcs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541491"
	><span class="hs-identifier hs-var"
	  >tc'</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-255"
      ></span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-256"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679541492"
      ><span class="annot"
	><span class="annottext"
	  >extractDcs :: TyCon -&gt; m [DataCon]
</span
	  ><a href="#local-6989586621679541492"
	  ><span class="hs-identifier hs-var hs-var"
	    >extractDcs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541526"
      ><span class="annot"
	><span class="annottext"
	  >TyCon
</span
	  ><a href="#local-6989586621679541526"
	  ><span class="hs-identifier hs-var"
	    >tc</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-257"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#isAlgTyCon"
	><span class="hs-identifier hs-var"
	  >GHC.isAlgTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541526"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Bool -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%7C%7C"
	><span class="hs-operator hs-var"
	  >||</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#isTupleTyCon"
	><span class="hs-identifier hs-var"
	  >GHC.isTupleTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541526"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; AlgTyConRhs
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#algTyConRhs"
	><span class="hs-identifier hs-var"
	  >GHC.algTyConRhs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541526"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-258"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>AlgTyConRhs
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#AbstractTyCon"
	><span class="hs-identifier hs-var"
	  >GHC.AbstractTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-259"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m [DataCon]
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc -&gt; m [DataCon]) -&gt; SDoc -&gt; m [DataCon]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-260"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Abstract type:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541526"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-261"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#DataTyCon"
	><span class="hs-identifier hs-type"
	  >GHC.DataTyCon</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="annot"
      ><span class="annottext"
	>data_cons :: AlgTyConRhs -&gt; [DataCon]
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#data_cons"
	><span class="hs-identifier hs-var"
	  >GHC.data_cons</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="local-6989586621679541534"
      ><span class="annot"
	><span class="annottext"
	  >[DataCon]
</span
	  ><a href="#local-6989586621679541534"
	  ><span class="hs-identifier hs-var"
	    >dcs</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon] -&gt; m [DataCon]
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon]
</span
	><a href="#local-6989586621679541534"
	><span class="hs-identifier hs-var"
	  >dcs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-262"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#TupleTyCon"
	><span class="hs-identifier hs-type"
	  >GHC.TupleTyCon</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="annot"
      ><span class="annottext"
	>data_con :: AlgTyConRhs -&gt; DataCon
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#data_con"
	><span class="hs-identifier hs-var"
	  >GHC.data_con</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="local-6989586621679541537"
      ><span class="annot"
	><span class="annottext"
	  >DataCon
</span
	  ><a href="#local-6989586621679541537"
	  ><span class="hs-identifier hs-var"
	    >dc</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon] -&gt; m [DataCon]
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541537"
	><span class="hs-identifier hs-var"
	  >dc</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-263"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#SumTyCon"
	><span class="hs-identifier hs-type"
	  >GHC.SumTyCon</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="annot"
      ><span class="annottext"
	>data_cons :: AlgTyConRhs -&gt; [DataCon]
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#data_cons"
	><span class="hs-identifier hs-var"
	  >GHC.data_cons</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="local-6989586621679541539"
      ><span class="annot"
	><span class="annottext"
	  >[DataCon]
</span
	  ><a href="#local-6989586621679541539"
	  ><span class="hs-identifier hs-var"
	    >dcs</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon] -&gt; m [DataCon]
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon]
</span
	><a href="#local-6989586621679541539"
	><span class="hs-identifier hs-var"
	  >dcs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-264"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#NewTyCon"
	><span class="hs-identifier hs-type"
	  >GHC.NewTyCon</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="annot"
      ><span class="annottext"
	>data_con :: AlgTyConRhs -&gt; DataCon
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#data_con"
	><span class="hs-identifier hs-var"
	  >GHC.data_con</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="local-6989586621679541541"
      ><span class="annot"
	><span class="annottext"
	  >DataCon
</span
	  ><a href="#local-6989586621679541541"
	  ><span class="hs-identifier hs-var"
	    >dc</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[DataCon] -&gt; m [DataCon]
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541541"
	><span class="hs-identifier hs-var"
	  >dc</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-265"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#isFamilyTyCon"
	><span class="hs-identifier hs-var"
	  >GHC.isFamilyTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541526"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-266"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m [DataCon]
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc -&gt; m [DataCon]) -&gt; SDoc -&gt; m [DataCon]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-267"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Irreducible type family application:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541526"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-268"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#otherwise"
	><span class="hs-identifier hs-var"
	  >otherwise</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m [DataCon]
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc -&gt; m [DataCon]) -&gt; SDoc -&gt; m [DataCon]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Type constructor:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541526"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-269"
      ></span
      ><span
      >
</span
      ><span id="line-270"
      ></span
      ><span class="hs-comment"
      >{- Note [On data constructor workers and wrappers]
By default GHC has 'unbox-small-strict-fields' flag enabled.
This option causes all constructor fields which are marked strict and
which representation is smaller or equal to the size of a pointer to be unpacked.

Because of that we have to use 'dataConRepArgTys' for the constructor type
to get the argument types of the worker, not the wrapper.

That fixes the type mismatch problem when the GHC unpacks the field but we infer
the type of the original code without that information.
-}</span
      ><span
      >
</span
      ><span id="line-281"
      ></span
      ><span
      >
</span
      ><span id="line-282"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Makes the type of the constructor corresponding to the given 'DataCon', with the
type variables free.
-}</span
	></span
      ><span
      >
</span
      ><span id="line-285"
      ></span
      ><span id="local-6989586621679540995"
      ><span id="local-6989586621679540996"
	><span id="local-6989586621679540997"
	  ><span id="local-6989586621679540998"
	    ><span class="annot"
	      ><a href="PlutusTx.Compiler.Type.html#mkConstructorType"
		><span class="hs-identifier hs-type"
		  >mkConstructorType</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.Compiler.Types.html#CompilingDefault"
		><span class="hs-identifier hs-type"
		  >CompilingDefault</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540995"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540996"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540997"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540998"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.DataCon.html#DataCon"
		><span class="hs-identifier hs-type"
		  >GHC.DataCon</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540997"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.PIRTypes.html#PIRType"
		><span class="hs-identifier hs-type"
		  >PIRType</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679540995"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-286"
      ></span
      ><span id="mkConstructorType"
      ><span class="annot"
	><span class="annottext"
	  >mkConstructorType :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
DataCon -&gt; m (PIRType uni)
</span
	  ><a href="PlutusTx.Compiler.Type.html#mkConstructorType"
	  ><span class="hs-identifier hs-var hs-var"
	    >mkConstructorType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541584"
      ><span class="annot"
	><span class="annottext"
	  >DataCon
</span
	  ><a href="#local-6989586621679541584"
	  ><span class="hs-identifier hs-var"
	    >dc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-287"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- see Note [On data constructor workers and wrappers]</span
      ><span
      >
</span
      ><span id="line-288"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679541587"
      ><span class="annot"
	><span class="annottext"
	  >argTys :: [Type]
</span
	  ><a href="#local-6989586621679541587"
	  ><span class="hs-identifier hs-var hs-var"
	    >argTys</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Scaled Type -&gt; Type
forall a. Scaled a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCo.Rep.html#scaledThing"
	><span class="hs-identifier hs-var"
	  >GHC.scaledThing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Scaled Type -&gt; Type) -&gt; [Scaled Type] -&gt; [Type]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon -&gt; [Scaled Type]
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.DataCon.html#dataConRepArgTys"
	><span class="hs-identifier hs-var"
	  >GHC.dataConRepArgTys</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541584"
	><span class="hs-identifier hs-var"
	  >dc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-289"
      ></span
      ><span
      >   </span
      ><span class="hs-keyword"
      >in</span
      ><span
      > </span
      ><span class="hs-comment"
      >-- See Note [Scott encoding of datatypes]</span
      ><span
      >
</span
      ><span id="line-290"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; SDoc -&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) e a.
(MonadReader (CompileContext uni fun) m, MonadState CompileState m,
 MonadError (WithContext Text e) m) =&gt;
Int -&gt; SDoc -&gt; m a -&gt; m a
</span
	><a href="PlutusTx.Compiler.Trace.html#traceCompilation"
	><span class="hs-identifier hs-var"
	  >traceCompilation</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>3</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Compiling data constructor type:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541584"
	><span class="hs-identifier hs-var"
	  >dc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(m (PIRType uni) -&gt; m (PIRType uni))
-&gt; m (PIRType uni) -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-291"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679541590"
      ><span class="annot"
	><span class="annottext"
	  >[PIRType uni]
</span
	  ><a href="#local-6989586621679541590"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type -&gt; m (PIRType uni)) -&gt; [Type] -&gt; m [PIRType uni]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#mapM"
	><span class="hs-identifier hs-var"
	  >mapM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileTypeNorm"
	><span class="hs-identifier hs-var"
	  >compileTypeNorm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type]
</span
	><a href="#local-6989586621679541587"
	><span class="hs-identifier hs-var"
	  >argTys</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-292"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679541592"
      ><span class="annot"
	><span class="annottext"
	  >PIRType uni
</span
	  ><a href="#local-6989586621679541592"
	  ><span class="hs-identifier hs-var"
	    >resultType</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (PIRType uni)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileTypeNorm"
	><span class="hs-identifier hs-var"
	  >compileTypeNorm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>DataCon -&gt; Type
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.DataCon.html#dataConOrigResTy"
	><span class="hs-identifier hs-var"
	  >GHC.dataConOrigResTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DataCon
</span
	><a href="#local-6989586621679541584"
	><span class="hs-identifier hs-var"
	  >dc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-293"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- t_c_i_1 -&gt; ... -&gt; t_c_i_j -&gt; resultType</span
      ><span
      >
</span
      ><span id="line-294"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni -&gt; m (PIRType uni)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PIRType uni -&gt; m (PIRType uni)) -&gt; PIRType uni -&gt; m (PIRType uni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; [PIRType uni] -&gt; PIRType uni -&gt; PIRType uni
forall ann tyname (uni :: * -&gt; *).
ann
-&gt; [Type tyname uni ann]
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#mkIterTyFun"
	><span class="hs-identifier hs-var"
	  >PIR.mkIterTyFun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[PIRType uni]
</span
	><a href="#local-6989586621679541590"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PIRType uni
</span
	><a href="#local-6989586621679541592"
	><span class="hs-identifier hs-var"
	  >resultType</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-295"
      ></span
      ><span
      >
</span
      ><span id="line-296"
      ></span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#ghcStrictnessNote"
	><span class="hs-identifier hs-type"
	  >ghcStrictnessNote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#SDoc"
	><span class="hs-identifier hs-type"
	  >GHC.SDoc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-297"
      ></span
      ><span id="ghcStrictnessNote"
      ><span class="annot"
	><span class="annottext"
	  >ghcStrictnessNote :: SDoc
</span
	  ><a href="PlutusTx.Compiler.Type.html#ghcStrictnessNote"
	  ><span class="hs-identifier hs-var hs-var"
	    >ghcStrictnessNote</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-298"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Note: GHC can generate these unexpectedly, you may need&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-299"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;'-fno-strictness', '-fno-specialise', '-fno-spec-constr',&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-300"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;'-fno-unbox-strict-fields', or '-fno-unbox-small-strict-fields'.&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-301"
      ></span
      ><span
      >
</span
      ><span id="line-302"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Get the constructors of the given 'TyCon' as PLC terms.</span
	></span
      ><span
      >
</span
      ><span id="line-303"
      ></span
      ><span id="local-6989586621679541033"
      ><span id="local-6989586621679541034"
	><span id="local-6989586621679541035"
	  ><span id="local-6989586621679541036"
	    ><span class="annot"
	      ><a href="PlutusTx.Compiler.Type.html#getConstructors"
		><span class="hs-identifier hs-type"
		  >getConstructors</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.Compiler.Types.html#CompilingDefault"
		><span class="hs-identifier hs-type"
		  >CompilingDefault</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541033"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541034"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541035"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541036"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#TyCon"
		><span class="hs-identifier hs-type"
		  >GHC.TyCon</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541035"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >[</span
	      ><span class="annot"
	      ><a href="PlutusTx.PIRTypes.html#PIRTerm"
		><span class="hs-identifier hs-type"
		  >PIRTerm</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541033"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541034"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span class="hs-special"
	      >]</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-304"
      ></span
      ><span id="getConstructors"
      ><span class="annot"
	><span class="annottext"
	  >getConstructors :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
TyCon -&gt; m [PIRTerm uni fun]
</span
	  ><a href="PlutusTx.Compiler.Type.html#getConstructors"
	  ><span class="hs-identifier hs-var hs-var"
	    >getConstructors</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541628"
      ><span class="annot"
	><span class="annottext"
	  >TyCon
</span
	  ><a href="#local-6989586621679541628"
	  ><span class="hs-identifier hs-var"
	    >tc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-305"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- make sure the constructors have been created</span
      ><span
      >
</span
      ><span id="line-306"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName DefaultUni Ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; m (Type TyName DefaultUni Ann)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
TyCon -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileTyCon"
	><span class="hs-identifier hs-var"
	  >compileTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541628"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-307"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679541629"
      ><span class="annot"
	><span class="annottext"
	  >Maybe [PIRTerm uni fun]
</span
	  ><a href="#local-6989586621679541629"
	  ><span class="hs-identifier hs-var"
	    >maybeConstrs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LexName -&gt; m (Maybe [PIRTerm uni fun])
forall key (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadDefs key uni fun ann m =&gt;
key -&gt; m (Maybe [Term TyName Name uni fun ann])
</span
	><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#lookupConstructors"
	><span class="hs-identifier hs-var"
	  >PIR.lookupConstructors</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; LexName
</span
	><a href="PlutusTx.Compiler.Types.html#LexName"
	><span class="hs-identifier hs-var"
	  >LexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Name -&gt; LexName) -&gt; Name -&gt; LexName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getName"
	><span class="hs-identifier hs-var"
	  >GHC.getName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541628"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-308"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe [PIRTerm uni fun]
</span
	><a href="#local-6989586621679541629"
	><span class="hs-identifier hs-var"
	  >maybeConstrs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-309"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679541631"
      ><span class="annot"
	><span class="annottext"
	  >[PIRTerm uni fun]
</span
	  ><a href="#local-6989586621679541631"
	  ><span class="hs-identifier hs-var"
	    >constrs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[PIRTerm uni fun] -&gt; m [PIRTerm uni fun]
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[PIRTerm uni fun]
</span
	><a href="#local-6989586621679541631"
	><span class="hs-identifier hs-var"
	  >constrs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-310"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe [PIRTerm uni fun]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-311"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error DefaultUni DefaultFun ann)
-&gt; SDoc -&gt; m [PIRTerm uni fun]
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error DefaultUni DefaultFun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc -&gt; m [PIRTerm uni fun]) -&gt; SDoc -&gt; m [PIRTerm uni fun]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-312"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Cannot construct a value of type:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541628"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%24%2B%24"
	><span class="hs-operator hs-var"
	  >GHC.$+$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><a href="PlutusTx.Compiler.Type.html#ghcStrictnessNote"
	><span class="hs-identifier hs-var"
	  >ghcStrictnessNote</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-313"
      ></span
      ><span
      >
</span
      ><span id="line-314"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Get the matcher of the given 'TyCon' as a PLC term</span
	></span
      ><span
      >
</span
      ><span id="line-315"
      ></span
      ><span id="local-6989586621679541048"
      ><span id="local-6989586621679541049"
	><span id="local-6989586621679541050"
	  ><span id="local-6989586621679541051"
	    ><span class="annot"
	      ><a href="PlutusTx.Compiler.Type.html#getMatch"
		><span class="hs-identifier hs-type"
		  >getMatch</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.Compiler.Types.html#CompilingDefault"
		><span class="hs-identifier hs-type"
		  >CompilingDefault</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541048"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541049"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541050"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541051"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCon.html#TyCon"
		><span class="hs-identifier hs-type"
		  >GHC.TyCon</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541050"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#ManualMatcher"
		><span class="hs-identifier hs-type"
		  >PIR.ManualMatcher</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541048"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541049"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Annotation.html#Ann"
		><span class="hs-identifier hs-type"
		  >Ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-316"
      ></span
      ><span id="getMatch"
      ><span class="annot"
	><span class="annottext"
	  >getMatch :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
TyCon -&gt; m (ManualMatcher uni fun Ann)
</span
	  ><a href="PlutusTx.Compiler.Type.html#getMatch"
	  ><span class="hs-identifier hs-var hs-var"
	    >getMatch</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541666"
      ><span class="annot"
	><span class="annottext"
	  >TyCon
</span
	  ><a href="#local-6989586621679541666"
	  ><span class="hs-identifier hs-var"
	    >tc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-317"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- ensure the tycon has been compiled, which will create the matcher</span
      ><span
      >
</span
      ><span id="line-318"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName DefaultUni Ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; m (Type TyName DefaultUni Ann)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
TyCon -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileTyCon"
	><span class="hs-identifier hs-var"
	  >compileTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541666"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-319"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679541667"
      ><span class="annot"
	><span class="annottext"
	  >Maybe (ManualMatcher uni fun Ann)
</span
	  ><a href="#local-6989586621679541667"
	  ><span class="hs-identifier hs-var"
	    >maybeMatch</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann -&gt; LexName -&gt; m (Maybe (ManualMatcher uni fun Ann))
forall key (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadDefs key uni fun ann m =&gt;
ann -&gt; key -&gt; m (Maybe (ManualMatcher uni fun ann))
</span
	><a href="../../plutus-core/src/PlutusIR.Compiler.Definitions.html#lookupDestructor"
	><span class="hs-identifier hs-var"
	  >PIR.lookupDestructor</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Ann
forall a. AnnInline a =&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Annotation.html#annMayInline"
	><span class="hs-identifier hs-var"
	  >annMayInline</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; LexName
</span
	><a href="PlutusTx.Compiler.Types.html#LexName"
	><span class="hs-identifier hs-var"
	  >LexName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Name -&gt; LexName) -&gt; Name -&gt; LexName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Name.html#getName"
	><span class="hs-identifier hs-var"
	  >GHC.getName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541666"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-320"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (ManualMatcher uni fun Ann)
</span
	><a href="#local-6989586621679541667"
	><span class="hs-identifier hs-var"
	  >maybeMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-321"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679541669"
      ><span class="annot"
	><span class="annottext"
	  >ManualMatcher uni fun Ann
</span
	  ><a href="#local-6989586621679541669"
	  ><span class="hs-identifier hs-var"
	    >match</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ManualMatcher uni fun Ann -&gt; m (ManualMatcher uni fun Ann)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ManualMatcher uni fun Ann
</span
	><a href="#local-6989586621679541669"
	><span class="hs-identifier hs-var"
	  >match</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-322"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (ManualMatcher uni fun Ann)
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-323"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error DefaultUni DefaultFun ann)
-&gt; SDoc -&gt; m (ManualMatcher uni fun Ann)
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error DefaultUni DefaultFun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#UnsupportedError"
	><span class="hs-identifier hs-var"
	  >UnsupportedError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc -&gt; m (ManualMatcher uni fun Ann))
-&gt; SDoc -&gt; m (ManualMatcher uni fun Ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-324"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Cannot case on a value on type:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541666"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%24%2B%24"
	><span class="hs-operator hs-var"
	  >GHC.$+$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><a href="PlutusTx.Compiler.Type.html#ghcStrictnessNote"
	><span class="hs-identifier hs-var"
	  >ghcStrictnessNote</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-325"
      ></span
      ><span
      >
</span
      ><span id="line-326"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Get the matcher of the given 'Type' (which must be equal to a type constructor application)
as a PLC term instantiated for the type constructor argument types.
-}</span
	></span
      ><span
      >
</span
      ><span id="line-329"
      ></span
      ><span id="local-6989586621679541062"
      ><span id="local-6989586621679541063"
	><span id="local-6989586621679541064"
	  ><span id="local-6989586621679541065"
	    ><span class="annot"
	      ><a href="PlutusTx.Compiler.Type.html#getMatchInstantiated"
		><span class="hs-identifier hs-type"
		  >getMatchInstantiated</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-330"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusTx.Compiler.Types.html#CompilingDefault"
		><span class="hs-identifier hs-type"
		  >CompilingDefault</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541062"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541063"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541064"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541065"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      >
</span
	      ><span id="line-331"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.TyCo.Rep.html#Type"
		><span class="hs-identifier hs-type"
		  >GHC.Type</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-332"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541064"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusIR.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >PIR.Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >PIR.TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >PIR.Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541062"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541063"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Annotation.html#Ann"
		><span class="hs-identifier hs-type"
		  >Ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      >
</span
	      ><span id="line-333"
	      ></span
	      ><span
	      >        </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
		><span class="hs-identifier hs-type"
		  >PIR.Type</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >PIR.TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541062"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Annotation.html#Ann"
		><span class="hs-identifier hs-type"
		  >Ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      >
</span
	      ><span id="line-334"
	      ></span
	      ><span
	      >        </span
	      ><span class="hs-special"
	      >[</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusIR.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >PIR.Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >PIR.TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >PIR.Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541062"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541063"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Annotation.html#Ann"
		><span class="hs-identifier hs-type"
		  >Ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >]</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      >
</span
	      ><span id="line-335"
	      ></span
	      ><span
	      >        </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusIR.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >PIR.Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >PIR.TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >PIR.Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541062"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679541063"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Annotation.html#Ann"
		><span class="hs-identifier hs-type"
		  >Ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-336"
      ></span
      ><span id="getMatchInstantiated"
      ><span class="annot"
	><span class="annottext"
	  >getMatchInstantiated :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
</span
	  ><a href="PlutusTx.Compiler.Type.html#getMatchInstantiated"
	  ><span class="hs-identifier hs-var hs-var"
	    >getMatchInstantiated</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679541715"
      ><span class="annot"
	><span class="annottext"
	  >Type
</span
	  ><a href="#local-6989586621679541715"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-337"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Int
-&gt; SDoc
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) e a.
(MonadReader (CompileContext uni fun) m, MonadState CompileState m,
 MonadError (WithContext Text e) m) =&gt;
Int -&gt; SDoc -&gt; m a -&gt; m a
</span
	><a href="PlutusTx.Compiler.Trace.html#traceCompilation"
	><span class="hs-identifier hs-var"
	  >traceCompilation</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>3</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Creating instantiated matcher for type:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541715"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(m (Term TyName Name uni fun Ann
    -&gt; Type TyName uni Ann
    -&gt; [Term TyName Name uni fun Ann]
    -&gt; Term TyName Name uni fun Ann)
 -&gt; m (Term TyName Name uni fun Ann
       -&gt; Type TyName uni Ann
       -&gt; [Term TyName Name uni fun Ann]
       -&gt; Term TyName Name uni fun Ann))
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541715"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-338"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(() :: Constraint) =&gt; Type -&gt; Maybe (TyCon, [Type])
Type -&gt; Maybe (TyCon, [Type])
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#splitTyConApp_maybe"
	><span class="hs-identifier hs-var"
	  >GHC.splitTyConApp_maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679541716"
      ><span class="annot"
	><span class="annottext"
	  >TyCon
</span
	  ><a href="#local-6989586621679541716"
	  ><span class="hs-identifier hs-var"
	    >tc</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679541717"
      ><span class="annot"
	><span class="annottext"
	  >[Type]
</span
	  ><a href="#local-6989586621679541717"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-339"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621679541718"
      ><span class="annot"
	><span class="annottext"
	  >ManualMatcher uni fun Ann
</span
	  ><a href="#local-6989586621679541718"
	  ><span class="hs-identifier hs-var"
	    >match</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon -&gt; m (ManualMatcher uni fun Ann)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
TyCon -&gt; m (ManualMatcher uni fun Ann)
</span
	><a href="PlutusTx.Compiler.Type.html#getMatch"
	><span class="hs-identifier hs-var"
	  >getMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyCon
</span
	><a href="#local-6989586621679541716"
	><span class="hs-identifier hs-var"
	  >tc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-340"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- We drop 'RuntimeRep' arguments, see Note [Runtime reps]</span
      ><span
      >
</span
      ><span id="line-341"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621679541719"
      ><span class="annot"
	><span class="annottext"
	  >[Type TyName uni Ann]
</span
	  ><a href="#local-6989586621679541719"
	  ><span class="hs-identifier hs-var"
	    >args'</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type -&gt; m (Type TyName uni Ann))
-&gt; [Type] -&gt; m [Type TyName uni Ann]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#mapM"
	><span class="hs-identifier hs-var"
	  >mapM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; m (Type TyName uni Ann)
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) ann.
CompilingDefault uni fun m ann =&gt;
Type -&gt; m (PIRType uni)
</span
	><a href="PlutusTx.Compiler.Type.html#compileTypeNorm"
	><span class="hs-identifier hs-var"
	  >compileTypeNorm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>[Type] -&gt; [Type]
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#dropRuntimeRepArgs"
	><span class="hs-identifier hs-var"
	  >GHC.dropRuntimeRepArgs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type]
</span
	><a href="#local-6989586621679541717"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-342"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>(Term TyName Name uni fun Ann
 -&gt; Type TyName uni Ann
 -&gt; [Term TyName Name uni fun Ann]
 -&gt; Term TyName Name uni fun Ann)
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Term TyName Name uni fun Ann
  -&gt; Type TyName uni Ann
  -&gt; [Term TyName Name uni fun Ann]
  -&gt; Term TyName Name uni fun Ann)
 -&gt; m (Term TyName Name uni fun Ann
       -&gt; Type TyName uni Ann
       -&gt; [Term TyName Name uni fun Ann]
       -&gt; Term TyName Name uni fun Ann))
-&gt; (Term TyName Name uni fun Ann
    -&gt; Type TyName uni Ann
    -&gt; [Term TyName Name uni fun Ann]
    -&gt; Term TyName Name uni fun Ann)
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ManualMatcher uni fun Ann
</span
	><a href="#local-6989586621679541718"
	><span class="hs-identifier hs-var"
	  >match</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni Ann]
</span
	><a href="#local-6989586621679541719"
	><span class="hs-identifier hs-var"
	  >args'</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-343"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- must be a TC app</span
      ><span
      >
</span
      ><span id="line-344"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-345"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Error DefaultUni DefaultFun ann)
-&gt; SDoc
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *) a.
(MonadError (CompileError uni fun ann) m,
 MonadReader (CompileContext uni fun) m) =&gt;
(Text -&gt; Error uni fun ann) -&gt; SDoc -&gt; m a
</span
	><a href="PlutusTx.Compiler.Utils.html#throwSd"
	><span class="hs-identifier hs-var"
	  >throwSd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Error DefaultUni DefaultFun ann
forall (uni :: * -&gt; *) fun a. Text -&gt; Error uni fun a
</span
	><a href="PlutusTx.Compiler.Error.html#CompilationError"
	><span class="hs-identifier hs-var"
	  >CompilationError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SDoc
 -&gt; m (Term TyName Name uni fun Ann
       -&gt; Type TyName uni Ann
       -&gt; [Term TyName Name uni fun Ann]
       -&gt; Term TyName Name uni fun Ann))
-&gt; SDoc
-&gt; m (Term TyName Name uni fun Ann
      -&gt; Type TyName uni Ann
      -&gt; [Term TyName Name uni fun Ann]
      -&gt; Term TyName Name uni fun Ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-346"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc
</span
	><span class="hs-string"
	>&quot;Cannot case on a value of a type which is not a datatype:&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#%3C%2B%3E"
	><span class="hs-operator hs-var"
	  >GHC.&lt;+&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Utils.Outputable.html#ppr"
	><span class="hs-identifier hs-var"
	  >GHC.ppr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type
</span
	><a href="#local-6989586621679541715"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-347"
      ></span
      ><span
      >
</span
      ><span id="line-348"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| Drops prefix of 'RuntimeRep' type variables (similar to 'dropRuntimeRepArgs').
Useful for e.g. dropping 'LiftedRep type variables arguments of unboxed tuple type applications:

  dropRuntimeRepVars [ k0, k1, a, b ] == [a, b]
-}</span
	></span
      ><span
      >
</span
      ><span id="line-353"
      ></span
      ><span class="annot"
      ><a href="PlutusTx.Compiler.Type.html#dropRuntimeRepVars"
	><span class="hs-identifier hs-type"
	  >dropRuntimeRepVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Var.html#TyVar"
	><span class="hs-identifier hs-type"
	  >GHC.TyVar</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Var.html#TyVar"
	><span class="hs-identifier hs-type"
	  >GHC.TyVar</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-354"
      ></span
      ><span id="dropRuntimeRepVars"
      ><span class="annot"
	><span class="annottext"
	  >dropRuntimeRepVars :: [TyVar] -&gt; [TyVar]
</span
	  ><a href="PlutusTx.Compiler.Type.html#dropRuntimeRepVars"
	  ><span class="hs-identifier hs-var hs-var"
	    >dropRuntimeRepVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyVar -&gt; Bool) -&gt; [TyVar] -&gt; [TyVar]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.List.html#dropWhile"
	><span class="hs-identifier hs-var"
	  >dropWhile</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Core.Type.html#isRuntimeRepTy"
	><span class="hs-identifier hs-var"
	  >GHC.isRuntimeRepTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type -&gt; Bool) -&gt; (TyVar -&gt; Type) -&gt; TyVar -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVar -&gt; Type
</span
	><a href="https://hackage.haskell.org/package/ghc-9.6.7/docs/src/GHC.Types.Var.html#varType"
	><span class="hs-identifier hs-var"
	  >GHC.varType</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-355"
      ></span
      ></pre
    ></body
  ></html
>
