<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><link rel="stylesheet" type="text/css" href="style.css"
     /><script type="text/javascript" src="highlight.js"
    ></script
    ></head
  ><body
  ><pre
    ><span class="hs-pragma"
      >{-# LANGUAGE BlockArguments    #-}</span
      ><span
      >
</span
      ><span id="line-2"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE LambdaCase        #-}</span
      ><span
      >
</span
      ><span id="line-3"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE OverloadedStrings #-}</span
      ><span
      >
</span
      ><span id="line-4"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TypeApplications  #-}</span
      ><span
      >
</span
      ><span id="line-5"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE TypeFamilies      #-}</span
      ><span
      >
</span
      ><span id="line-6"
      ></span
      ><span
      >
</span
      ><span id="line-7"
      ></span
      ><span class="hs-keyword"
      >module</span
      ><span
      > </span
      ><span class="hs-identifier"
      >UntypedPlutusCore.Transform.Cse</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#cse"
	><span class="hs-identifier"
	  >cse</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-8"
      ></span
      ><span
      >
</span
      ><span id="line-9"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.html"
	><span class="hs-identifier"
	  >PlutusCore</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Quote.html#MonadQuote"
	><span class="hs-identifier"
	  >MonadQuote</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier"
	  >Name</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Rename.html#Rename"
	><span class="hs-identifier"
	  >Rename</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Quote.html#freshName"
	><span class="hs-identifier"
	  >freshName</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Rename.html#rename"
	><span class="hs-identifier"
	  >rename</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-10"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Builtin.html"
	><span class="hs-identifier"
	  >PlutusCore.Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Builtin.Meaning.html#ToBuiltinMeaning"
	><span class="hs-identifier"
	  >ToBuiltinMeaning</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Builtin.Meaning.html#BuiltinSemanticsVariant"
	><span class="hs-identifier"
	  >BuiltinSemanticsVariant</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-11"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.html"
	><span class="hs-identifier"
	  >UntypedPlutusCore.Core</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-12"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Purity.html"
	><span class="hs-identifier"
	  >UntypedPlutusCore.Purity</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Purity.html#isWorkFree"
	><span class="hs-identifier"
	  >isWorkFree</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-13"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Size.html"
	><span class="hs-identifier"
	  >UntypedPlutusCore.Size</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Size.html#termSize"
	><span class="hs-identifier"
	  >termSize</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-14"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html"
	><span class="hs-identifier"
	  >UntypedPlutusCore.Transform.Simplifier</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html#SimplifierStage"
	><span class="hs-identifier"
	  >SimplifierStage</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html#CSE"
	><span class="hs-identifier"
	  >CSE</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html#SimplifierT"
	><span class="hs-identifier"
	  >SimplifierT</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-15"
      ></span
      ><span
      >                                               </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Simplifier.html#recordSimplification"
	><span class="hs-identifier"
	  >recordSimplification</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-16"
      ></span
      ><span
      >
</span
      ><span id="line-17"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Arrow.html"
	><span class="hs-identifier"
	  >Control.Arrow</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Category.html#%3E%3E%3E"
	><span class="hs-operator"
	  >(&gt;&gt;&gt;)</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-18"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Control.Lens</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="hs-identifier"
	>foldrOf</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>transformOf</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-19"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Monad.html"
	><span class="hs-identifier"
	  >Control.Monad</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#join"
	><span class="hs-identifier"
	  >join</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#void"
	><span class="hs-identifier"
	  >void</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-20"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html"
	><span class="hs-identifier"
	  >Control.Monad.Trans.Class</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#MonadTrans"
	><span class="hs-identifier"
	  >MonadTrans</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier"
	  >lift</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-21"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html"
	><span class="hs-identifier"
	  >Control.Monad.Trans.Reader</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#ReaderT"
	><span class="hs-identifier"
	  >ReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#runReaderT"
	><span class="hs-identifier"
	  >runReaderT</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#ask"
	><span class="hs-identifier"
	  >ask</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#local"
	><span class="hs-identifier"
	  >local</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-22"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html"
	><span class="hs-identifier"
	  >Control.Monad.Trans.State.Strict</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#State"
	><span class="hs-identifier"
	  >State</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#evalState"
	><span class="hs-identifier"
	  >evalState</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#get"
	><span class="hs-identifier"
	  >get</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#put"
	><span class="hs-identifier"
	  >put</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-23"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html"
	><span class="hs-identifier"
	  >Data.Foldable</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Foldable</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#foldl%27"
	><span class="hs-identifier"
	  >foldl'</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-24"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.html"
	><span class="hs-identifier"
	  >Data.Hashable</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.Class.html#Hashable"
	><span class="hs-identifier"
	  >Hashable</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-25"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Strict.html"
	><span class="hs-identifier"
	  >Data.HashMap.Strict</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Internal.html#HashMap"
	><span class="hs-identifier"
	  >HashMap</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-26"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Strict.html"
	><span class="hs-identifier"
	  >Data.HashMap.Strict</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Map</span
	></span
      ><span
      >
</span
      ><span id="line-27"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/extra-1.8/docs/src/Data.List.Extra.html"
	><span class="hs-identifier"
	  >Data.List.Extra</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#isSuffixOf"
	><span class="hs-identifier"
	  >isSuffixOf</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#sortOn"
	><span class="hs-identifier"
	  >sortOn</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-28"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Ord.html"
	><span class="hs-identifier"
	  >Data.Ord</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Ord.html#Down"
	><span class="hs-identifier"
	  >Down</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-29"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Proxy.html"
	><span class="hs-identifier"
	  >Data.Proxy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Proxy.html#Proxy"
	><span class="hs-identifier"
	  >Proxy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-30"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html"
	><span class="hs-identifier"
	  >Data.Traversable</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#for"
	><span class="hs-identifier"
	  >for</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-31"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/extra-1.8/docs/src/Data.Tuple.Extra.html"
	><span class="hs-identifier"
	  >Data.Tuple.Extra</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/extra-1.8/docs/src/Data.Tuple.Extra.html#snd3"
	><span class="hs-identifier"
	  >snd3</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/extra-1.8/docs/src/Data.Tuple.Extra.html#thd3"
	><span class="hs-identifier"
	  >thd3</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-32"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Arity.html"
	><span class="hs-identifier"
	  >PlutusCore.Arity</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Arity.html#builtinArity"
	><span class="hs-identifier"
	  >builtinArity</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-33"
      ></span
      ><span
      >
</span
      ><span id="line-34"
      ></span
      ><span class="hs-comment"
      >{- Note [CSE]

-------------------------------------------------------------------------------
1. Simplifications
-------------------------------------------------------------------------------

This is a simplified (i.e., not fully optimal) implementation of CSE. The two simplifications
we made are:

- No alpha equivalence check, i.e., `\x -&gt; x` and `\y -&gt; y` are considered different expressions.
- The builtin function arity information is approximate: rather than using the accurate arities,
  we simply use the maximum number of arguments applied to a builtin function in the program
  as the builtin function's arity. The arity information is used to determine whether a builtin
  application is possibly saturated.

-------------------------------------------------------------------------------
2. How does it work?
-------------------------------------------------------------------------------

We use the following example to explain how the implementation works:

\x y -&gt; (1+(2+x))
        +
        (case y [ (1+(2+x)) + (3+x)
                , (2+x) + (3+x)
                , 4+x
                ]
        )

The implementation makes several passes on the given term. The first pass collects builtin
arity information as described above.

In the second pass, we assign a unique ID to each `LamAbs`, `Delay`, and each `Case` branch.
Then, we annotate each subterm with a path, consisting of IDs encountered from the root
to that subterm (not including itself). The reason to do this is because `LamAbs`, `Delay`,
and `Case` branches represent places where computation stops, i.e., subexpressions are not
immediately evaluated, and may not be evaluated at all.

In the above example, the ID of `\x` is 0, the ID of `\y` is 1, and the IDs of the
three case branches are 2, 3, 4 (the actual numbers don't matter, as long as they are unique).
The path for the first `1+(2+x)` and the first `2+x` is &quot;0.1&quot;; the path for the second
`1+(2+x)` and the second `2+x` is &quot;0.1.2&quot;; the path for `4+x` is &quot;0.1.4&quot;.

In the third pass, we calculate a count for each `(term, path)` pair, where `term` is a
non-workfree term, and `path` is its path. If the same term has two paths, and one is an
ancestor (i.e., prefix) of the other, we increment the count for the ancestor path in both
instances.

In the above example, there are three occurrences of `2+x`, whose paths are &quot;0.1&quot;, &quot;0.1.2&quot;
and &quot;0.1.3&quot;, respectively. The first path is an ancestor of the latter two. Therefore,
the count for `(2+x, &quot;0.1&quot;)` is 3, while the count for `(2+x, &quot;0.1.2&quot;)` and `(2+x, &quot;0.1.3&quot;)`
is 0. The following all have a count of 1: `(3+x, &quot;0.1.2&quot;)`, `(3+x, &quot;0.1.3&quot;)` and
`(4+x, &quot;0.1.4&quot;)`.

Now, each `(term, path)` pair whose count is greater than 1 is a CSE candidate.
In the above example, the CSE candidates are `(2+x, &quot;0.1&quot;)` and `(1+(2+x), &quot;0.1&quot;)`.
Note that `3+x` is not a CSE candidate, because it has two paths, and neither has a count
greater than 1. `2+` is also not a CSE candidate, because it is workfree.

The CSE candidates are then processed in descending order of their `termSize`s. For each CSE
candidate, we generate a fresh variable, create a LamAbs for it under its path, and substitute
it for all occurrences in the original term whose paths are descendents (or self) of
the candidate's path. The order is because a bigger expression may contain a small subexpression.

In the above example, we first process CSE candidate `(1+(2+x), &quot;0.1&quot;)`. We create a fresh
variable `cse1` for it, perform substitution, and create a `LamAbs` under path &quot;0.1&quot; (i.e., around
the body of `y`). After processing this CSE candidate, the original term becomes

\x y -&gt; (\cse1 -&gt; cse1
                  +
                  (case y [ cse1 + (3+x)
                          , (2+x) + (3+x)
                          , 4+x
                          ]
        ) (1+(2+x))

The second CSE candidate is processed similarly, and the final result is

\x y -&gt; (\cse2 -&gt; (\cse1 -&gt; cse1
                            +
                            (case y [ cse1 + (3+x)
                                    , cse2 + (3+x)
                                    , 4+x
                                    ]
                  ) (1+cse2)
        ) (2+x)

Here's another example:

force (force ifThenElse
         (lessThanEqualsInteger 0 0)
         (delay ((1+2) + (1+2)))
         (delay (1+2))
      )

In this case, the first two occurrences of `1+2` can be CSE'd, but the third occurrence
can not. This is ensured by checking the path when substituting `cse1` for `1+2`. The result is

force (force ifThenElse
         (lessThanEqualsInteger 0 0)
         (delay ((\cse1 -&gt; cse1 + cse1) (1+2))
         (delay (1+2))
      )

-------------------------------------------------------------------------------
3. When should CSE run?
-------------------------------------------------------------------------------

CSE should run for multiple iterations, and should interleave with inlining. The following
example illustrates why:

\x -&gt;
  f
    ((\y -&gt; 1+(y+y)) (0+x))
    ((\z -&gt; 2+(z+z)) (0+x))

There is no inlining opportunity in this term. After the first iteration of CSE, where
the common subepxression is `0+x`, we get:

\x -&gt;
  (\cse1 -&gt;
    f
      ((\y -&gt; 1+(y+y)) cse1)
      ((\z -&gt; 2+(z+z)) cse1)
  ) (0+x)

Now `y` and `z` can be inlined, after which we get

\x -&gt;
  (\cse1 -&gt;
    f
      (1+(cse1+cse1))
      (2+(cse1+cse1))
  ) (0+x)

Now there's a new common subexpression: `cse1+cse1`. So another iteration of CSE is
needed, yielding:

\x -&gt;
  (\cse1 -&gt;
    (\cse2 -&gt;
      f
        (1+cse2)
        (2+cse2)
    ) (cse1+cse1)
  ) (0+x)

With this example in mind, one may be tempted to make CSE part of the simplifier, and simply
run it along with the rest of the simplifier. That is, however, a bad idea. CSE does the reverse
of inlining; inlining tends to expose more optimization opportunities, and conversely, CSE
tends to destroy optimization opportunities. Running CSE on a not-fully-optimized program
may cause many optimization opportunities to be permanently lost. Give it a try if you want
to see how bad it is!

Therefore, this is what we do: first run the simplifier iterations. Then, run the CSE iterations,
interleaving with the simplifier. For example, suppose max-simplifier-iterations-uplc=12, and
max-cse-iterations=4. We first run 12 iterations of the simplifier, then run 4 iterations
of CSE, with a simplifier pass after each iteration of CSE (i.e., the simplifier is run for a
total of 16 times).

Finally, since CSE can change the order or the number of occurrences of effects, it is only run
when conservative optimization is off.
-}</span
      ><span
      >
</span
      ><span id="line-197"
      ></span
      ><span
      >
</span
      ><span id="line-198"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | In reverse order, e.g., &quot;1.2.3&quot; is `[3, 2, 1]`.</span
	></span
      ><span
      >
</span
      ><span id="line-199"
      ></span
      ><span class="hs-keyword"
      >type</span
      ><span
      > </span
      ><span id="Path"
      ><span class="annot"
	><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	  ><span class="hs-identifier hs-var"
	    >Path</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-200"
      ></span
      ><span
      >
</span
      ><span id="line-201"
      ></span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#isAncestorOrSelf"
	><span class="hs-identifier hs-type"
	  >isAncestorOrSelf</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Bool"
	><span class="hs-identifier hs-type"
	  >Bool</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-202"
      ></span
      ><span id="isAncestorOrSelf"
      ><span class="annot"
	><span class="annottext"
	  >isAncestorOrSelf :: Path -&gt; Path -&gt; Bool
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#isAncestorOrSelf"
	  ><span class="hs-identifier hs-var hs-var"
	    >isAncestorOrSelf</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path -&gt; Path -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#isSuffixOf"
	><span class="hs-identifier hs-var"
	  >isSuffixOf</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-203"
      ></span
      ><span
      >
</span
      ><span id="line-204"
      ></span
      ><span class="hs-keyword"
      >data</span
      ><span
      > </span
      ><span id="CseCandidate"
      ><span class="annot"
	><a href="UntypedPlutusCore.Transform.Cse.html#CseCandidate"
	  ><span class="hs-identifier hs-var"
	    >CseCandidate</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971753"
      ><span class="annot"
	><a href="#local-6989586621681971753"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971754"
      ><span class="annot"
	><a href="#local-6989586621681971754"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971755"
      ><span class="annot"
	><a href="#local-6989586621681971755"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span id="CseCandidate"
      ><span class="annot"
	><a href="UntypedPlutusCore.Transform.Cse.html#CseCandidate"
	  ><span class="hs-identifier hs-var"
	    >CseCandidate</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-205"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >{</span
      ><span
      > </span
      ><span id="ccFreshName"
      ><span class="annot"
	><span class="annottext"
	  >forall (uni :: * -&gt; *) fun ann. CseCandidate uni fun ann -&gt; Name
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#ccFreshName"
	  ><span class="hs-identifier hs-var hs-var"
	    >ccFreshName</span
	    ></a
	  ></span
	></span
      ><span
      >     </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-206"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="ccTerm"
      ><span class="annot"
	><span class="annottext"
	  >forall (uni :: * -&gt; *) fun ann.
CseCandidate uni fun ann -&gt; Term Name uni fun ()
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#ccTerm"
	  ><span class="hs-identifier hs-var hs-var"
	    >ccTerm</span
	    ></a
	  ></span
	></span
      ><span
      >          </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971753"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971754"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-207"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="ccAnnotatedTerm"
      ><span class="annot"
	><span class="annottext"
	  >forall (uni :: * -&gt; *) fun ann.
CseCandidate uni fun ann -&gt; Term Name uni fun (Path, ann)
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#ccAnnotatedTerm"
	  ><span class="hs-identifier hs-var hs-var"
	    >ccAnnotatedTerm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971753"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971754"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971755"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-208"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- ^ `ccTerm` is needed for equality comparison, while `ccAnnotatedTerm` is needed</span
      ><span
      >
</span
      ><span id="line-209"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- for the actual substitution. They are always the same term barring the annotations.</span
      ><span
      >
</span
      ><span id="line-210"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >}</span
      ><span
      >
</span
      ><span id="line-211"
      ></span
      ><span
      >
</span
      ><span id="line-212"
      ></span
      ><span id="local-6989586621681971768"
      ><span id="local-6989586621681971770"
	><span id="local-6989586621681971771"
	  ><span id="local-6989586621681971773"
	    ><span class="annot"
	      ><a href="UntypedPlutusCore.Transform.Cse.html#cse"
		><span class="hs-identifier hs-type"
		  >cse</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      >
</span
	      ><span id="line-213"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-special"
	      >(</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Quote.html#MonadQuote"
		><span class="hs-identifier hs-type"
		  >MonadQuote</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971768"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-214"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.Class.html#Hashable"
		><span class="hs-identifier hs-type"
		  >Hashable</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971770"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971771"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="hs-special"
	      >)</span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      >
</span
	      ><span id="line-215"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Rename.html#Rename"
		><span class="hs-identifier hs-type"
		  >Rename</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971770"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971771"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971773"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      >
</span
	      ><span id="line-216"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Builtin.Meaning.html#ToBuiltinMeaning"
		><span class="hs-identifier hs-type"
		  >ToBuiltinMeaning</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971770"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971771"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-217"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      >
</span
	      ><span id="line-218"
	      ></span
	      ><span
	      >  </span
	      ><span class="annot"
	      ><a href="PlutusCore.Builtin.Meaning.html#BuiltinSemanticsVariant"
		><span class="hs-identifier hs-type"
		  >BuiltinSemanticsVariant</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971771"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      >
</span
	      ><span id="line-219"
	      ></span
	      ><span
	      >  </span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971770"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971771"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971773"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      >
</span
	      ><span id="line-220"
	      ></span
	      ><span
	      >  </span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Transform.Simplifier.html#SimplifierT"
		><span class="hs-identifier hs-type"
		  >SimplifierT</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971770"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971771"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971773"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971768"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971770"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971771"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971773"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-221"
      ></span
      ><span id="cse"
      ><span class="annot"
	><span class="annottext"
	  >cse :: forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
(MonadQuote m, Hashable (Term Name uni fun ()),
 Rename (Term Name uni fun ann), ToBuiltinMeaning uni fun) =&gt;
BuiltinSemanticsVariant fun
-&gt; Term Name uni fun ann
-&gt; SimplifierT Name uni fun ann m (Term Name uni fun ann)
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#cse"
	  ><span class="hs-identifier hs-var hs-var"
	    >cse</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972090"
      ><span class="annot"
	><span class="annottext"
	  >BuiltinSemanticsVariant fun
</span
	  ><a href="#local-6989586621681972090"
	  ><span class="hs-identifier hs-var"
	    >builtinSemanticsVariant</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972091"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun ann
</span
	  ><a href="#local-6989586621681972091"
	  ><span class="hs-identifier hs-var"
	    >t0</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-222"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681972092"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun ann
</span
	  ><a href="#local-6989586621681972092"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann
-&gt; SimplifierT Name uni fun ann m (Term Name uni fun ann)
forall a (m :: * -&gt; *). (Rename a, MonadQuote m) =&gt; a -&gt; m a
forall (m :: * -&gt; *).
MonadQuote m =&gt;
Term Name uni fun ann -&gt; m (Term Name uni fun ann)
</span
	><a href="PlutusCore.Rename.html#rename"
	><span class="hs-identifier hs-var"
	  >rename</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann
</span
	><a href="#local-6989586621681972091"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-223"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621681972093"
      ><span class="annot"
	><span class="annottext"
	  >annotated :: Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972093"
	  ><span class="hs-identifier hs-var hs-var"
	    >annotated</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann -&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann -&gt; Term name uni fun (Path, ann)
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#annotate"
	><span class="hs-identifier hs-var"
	  >annotate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann
</span
	><a href="#local-6989586621681972092"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-224"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621681972095"
      ><span class="annot"
	><span class="annottext"
	  >commonSubexprs :: [Term Name uni fun (Path, ann)]
</span
	  ><a href="#local-6989586621681972095"
	  ><span class="hs-identifier hs-var hs-var"
	    >commonSubexprs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-225"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- Processed the common subexpressions in descending order of `termSize`.</span
      ><span
      >
</span
      ><span id="line-226"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- See Note [CSE].</span
      ><span
      >
</span
      ><span id="line-227"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>(Term Name uni fun (Path, ann) -&gt; Down Size)
-&gt; [Term Name uni fun (Path, ann)]
-&gt; [Term Name uni fun (Path, ann)]
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.OldList.html#sortOn"
	><span class="hs-identifier hs-var"
	  >sortOn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Size -&gt; Down Size
forall a. a -&gt; Down a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Ord.html#Down"
	><span class="hs-identifier hs-var"
	  >Down</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Size -&gt; Down Size)
-&gt; (Term Name uni fun (Path, ann) -&gt; Size)
-&gt; Term Name uni fun (Path, ann)
-&gt; Down Size
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Size
forall name (uni :: * -&gt; *) fun ann. Term name uni fun ann -&gt; Size
</span
	><a href="UntypedPlutusCore.Size.html#termSize"
	><span class="hs-identifier hs-var"
	  >termSize</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-228"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>([Term Name uni fun (Path, ann)]
 -&gt; [Term Name uni fun (Path, ann)])
-&gt; (HashMap
      (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
    -&gt; [Term Name uni fun (Path, ann)])
-&gt; HashMap
     (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
-&gt; [Term Name uni fun (Path, ann)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Path, Term Name uni fun (Path, ann), Int)
 -&gt; Term Name uni fun (Path, ann))
-&gt; [(Path, Term Name uni fun (Path, ann), Int)]
-&gt; [Term Name uni fun (Path, ann)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#fmap"
	><span class="hs-identifier hs-var"
	  >fmap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, Term Name uni fun (Path, ann), Int)
-&gt; Term Name uni fun (Path, ann)
forall a b c. (a, b, c) -&gt; b
</span
	><a href="https://hackage.haskell.org/package/extra-1.8/docs/src/Data.Tuple.Extra.html#snd3"
	><span class="hs-identifier hs-var"
	  >snd3</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-229"
      ></span
      ><span
      >          </span
      ><span class="hs-comment"
      >-- A subexpression is common if the count is greater than 1.</span
      ><span
      >
</span
      ><span id="line-230"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>([(Path, Term Name uni fun (Path, ann), Int)]
 -&gt; [Term Name uni fun (Path, ann)])
-&gt; (HashMap
      (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
    -&gt; [(Path, Term Name uni fun (Path, ann), Int)])
-&gt; HashMap
     (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
-&gt; [Term Name uni fun (Path, ann)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Path, Term Name uni fun (Path, ann), Int) -&gt; Bool)
-&gt; [(Path, Term Name uni fun (Path, ann), Int)]
-&gt; [(Path, Term Name uni fun (Path, ann), Int)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.List.html#filter"
	><span class="hs-identifier hs-var"
	  >filter</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3E"
	><span class="hs-operator hs-var"
	  >&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Int -&gt; Bool)
-&gt; ((Path, Term Name uni fun (Path, ann), Int) -&gt; Int)
-&gt; (Path, Term Name uni fun (Path, ann), Int)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, Term Name uni fun (Path, ann), Int) -&gt; Int
forall a b c. (a, b, c) -&gt; c
</span
	><a href="https://hackage.haskell.org/package/extra-1.8/docs/src/Data.Tuple.Extra.html#thd3"
	><span class="hs-identifier hs-var"
	  >thd3</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-231"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>([(Path, Term Name uni fun (Path, ann), Int)]
 -&gt; [(Path, Term Name uni fun (Path, ann), Int)])
-&gt; (HashMap
      (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
    -&gt; [(Path, Term Name uni fun (Path, ann), Int)])
-&gt; HashMap
     (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
-&gt; [(Path, Term Name uni fun (Path, ann), Int)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[[(Path, Term Name uni fun (Path, ann), Int)]]
-&gt; [(Path, Term Name uni fun (Path, ann), Int)]
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#join"
	><span class="hs-identifier hs-var"
	  >join</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-232"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>([[(Path, Term Name uni fun (Path, ann), Int)]]
 -&gt; [(Path, Term Name uni fun (Path, ann), Int)])
-&gt; (HashMap
      (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
    -&gt; [[(Path, Term Name uni fun (Path, ann), Int)]])
-&gt; HashMap
     (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
-&gt; [(Path, Term Name uni fun (Path, ann), Int)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>HashMap
  (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
-&gt; [[(Path, Term Name uni fun (Path, ann), Int)]]
forall k v. HashMap k v -&gt; [v]
</span
	><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Internal.html#elems"
	><span class="hs-identifier hs-var"
	  >Map.elems</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-233"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(HashMap
   (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
 -&gt; [Term Name uni fun (Path, ann)])
-&gt; HashMap
     (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
-&gt; [Term Name uni fun (Path, ann)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinSemanticsVariant fun
-&gt; Term Name uni fun (Path, ann)
-&gt; HashMap
     (Term Name uni fun ()) [(Path, Term Name uni fun (Path, ann), Int)]
forall name (uni :: * -&gt; *) fun ann.
(Hashable (Term name uni fun ()), ToBuiltinMeaning uni fun) =&gt;
BuiltinSemanticsVariant fun
-&gt; Term name uni fun (Path, ann)
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#countOccs"
	><span class="hs-identifier hs-var"
	  >countOccs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinSemanticsVariant fun
</span
	><a href="#local-6989586621681972090"
	><span class="hs-identifier hs-var"
	  >builtinSemanticsVariant</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972093"
	><span class="hs-identifier hs-var"
	  >annotated</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-234"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681972101"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun ann
</span
	  ><a href="#local-6989586621681972101"
	  ><span class="hs-identifier hs-var"
	    >result</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term Name uni fun (Path, ann)]
-&gt; Term Name uni fun (Path, ann)
-&gt; SimplifierT Name uni fun ann m (Term Name uni fun ann)
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
(MonadQuote m, Eq (Term Name uni fun ())) =&gt;
[Term Name uni fun (Path, ann)]
-&gt; Term Name uni fun (Path, ann) -&gt; m (Term Name uni fun ann)
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#mkCseTerm"
	><span class="hs-identifier hs-var"
	  >mkCseTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term Name uni fun (Path, ann)]
</span
	><a href="#local-6989586621681972095"
	><span class="hs-identifier hs-var"
	  >commonSubexprs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972093"
	><span class="hs-identifier hs-var"
	  >annotated</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-235"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann
-&gt; SimplifierStage
-&gt; Term Name uni fun ann
-&gt; SimplifierT Name uni fun ann m ()
forall (m :: * -&gt; *) name (uni :: * -&gt; *) fun a.
Monad m =&gt;
Term name uni fun a
-&gt; SimplifierStage
-&gt; Term name uni fun a
-&gt; SimplifierT name uni fun a m ()
</span
	><a href="UntypedPlutusCore.Transform.Simplifier.html#recordSimplification"
	><span class="hs-identifier hs-var"
	  >recordSimplification</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann
</span
	><a href="#local-6989586621681972091"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SimplifierStage
</span
	><a href="UntypedPlutusCore.Transform.Simplifier.html#CSE"
	><span class="hs-identifier hs-var"
	  >CSE</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann
</span
	><a href="#local-6989586621681972101"
	><span class="hs-identifier hs-var"
	  >result</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-236"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann
-&gt; SimplifierT Name uni fun ann m (Term Name uni fun ann)
forall a. a -&gt; SimplifierT Name uni fun ann m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#return"
	><span class="hs-identifier hs-var"
	  >return</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann
</span
	><a href="#local-6989586621681972101"
	><span class="hs-identifier hs-var"
	  >result</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-237"
      ></span
      ><span
      >
</span
      ><span id="line-238"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | The second pass. See Note [CSE].</span
	></span
      ><span
      >
</span
      ><span id="line-239"
      ></span
      ><span id="local-6989586621681971799"
      ><span id="local-6989586621681971800"
	><span id="local-6989586621681971801"
	  ><span id="local-6989586621681971802"
	    ><span class="annot"
	      ><a href="UntypedPlutusCore.Transform.Cse.html#annotate"
		><span class="hs-identifier hs-type"
		  >annotate</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971799"
		><span class="hs-identifier hs-type"
		  >name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971800"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971801"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971802"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971799"
		><span class="hs-identifier hs-type"
		  >name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971800"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971801"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
		><span class="hs-identifier hs-type"
		  >Path</span
		  ></a
		></span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971802"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-240"
      ></span
      ><span id="annotate"
      ><span class="annot"
	><span class="annottext"
	  >annotate :: forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann -&gt; Term name uni fun (Path, ann)
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#annotate"
	  ><span class="hs-identifier hs-var hs-var"
	    >annotate</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(State Int (Term name uni fun (Path, ann))
 -&gt; Int -&gt; Term name uni fun (Path, ann))
-&gt; Int
-&gt; State Int (Term name uni fun (Path, ann))
-&gt; Term name uni fun (Path, ann)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#flip"
	><span class="hs-identifier hs-var"
	  >flip</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State Int (Term name uni fun (Path, ann))
-&gt; Int -&gt; Term name uni fun (Path, ann)
forall s a. State s a -&gt; s -&gt; a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#evalState"
	><span class="hs-identifier hs-var"
	  >evalState</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>0</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(State Int (Term name uni fun (Path, ann))
 -&gt; Term name uni fun (Path, ann))
-&gt; (Term name uni fun ann
    -&gt; State Int (Term name uni fun (Path, ann)))
-&gt; Term name uni fun ann
-&gt; Term name uni fun (Path, ann)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT Path (StateT Int Identity) (Term name uni fun (Path, ann))
 -&gt; Path -&gt; State Int (Term name uni fun (Path, ann)))
-&gt; Path
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; State Int (Term name uni fun (Path, ann))
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#flip"
	><span class="hs-identifier hs-var"
	  >flip</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ReaderT Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; Path -&gt; State Int (Term name uni fun (Path, ann))
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#runReaderT"
	><span class="hs-identifier hs-var"
	  >runReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT Path (StateT Int Identity) (Term name uni fun (Path, ann))
 -&gt; State Int (Term name uni fun (Path, ann)))
-&gt; (Term name uni fun ann
    -&gt; ReaderT
         Path (StateT Int Identity) (Term name uni fun (Path, ann)))
-&gt; Term name uni fun ann
-&gt; State Int (Term name uni fun (Path, ann))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-241"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-242"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- The integer state is the highest ID assigned so far.</span
      ><span
      >
</span
      ><span id="line-243"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- The reader context is the current path.</span
      ><span
      >
</span
      ><span id="line-244"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681971865"
      ><span id="local-6989586621681971866"
	><span id="local-6989586621681971867"
	  ><span id="local-6989586621681971868"
	    ><span class="annot"
	      ><a href="#local-6989586621681972105"
		><span class="hs-identifier hs-type"
		  >go</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971865"
		><span class="hs-identifier hs-type"
		  >name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971866"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971867"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971868"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#ReaderT"
		><span class="hs-identifier hs-type"
		  >ReaderT</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
		><span class="hs-identifier hs-type"
		  >Path</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#State"
		><span class="hs-identifier hs-type"
		  >State</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
		><span class="hs-identifier hs-type"
		  >Int</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971865"
		><span class="hs-identifier hs-type"
		  >name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971866"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971867"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
		><span class="hs-identifier hs-type"
		  >Path</span
		  ></a
		></span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621681971868"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-245"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681972105"
      ><span class="annot"
	><span class="annottext"
	  >go :: forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	  ><a href="#local-6989586621681972105"
	  ><span class="hs-identifier hs-var hs-var"
	    >go</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972173"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972173"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-246"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621681972174"
      ><span class="annot"
	><span class="annottext"
	  >Path
</span
	  ><a href="#local-6989586621681972174"
	  ><span class="hs-identifier hs-var"
	    >path</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ReaderT Path (StateT Int Identity) Path
forall (m :: * -&gt; *) r. Monad m =&gt; ReaderT r m r
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#ask"
	><span class="hs-identifier hs-var"
	  >ask</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-247"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972173"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-248"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Apply"
	><span class="hs-identifier hs-type"
	  >Apply</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972176"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972176"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972177"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972177"
	  ><span class="hs-identifier hs-var"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972178"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972178"
	  ><span class="hs-identifier hs-var"
	    >arg</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term name uni fun (Path, ann)
-&gt; Term name uni fun (Path, ann)
-&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Apply"
	><span class="hs-identifier hs-var"
	  >Apply</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972176"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann)
 -&gt; Term name uni fun (Path, ann) -&gt; Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path
     (StateT Int Identity)
     (Term name uni fun (Path, ann) -&gt; Term name uni fun (Path, ann))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972177"
	><span class="hs-identifier hs-var"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ReaderT
  Path
  (StateT Int Identity)
  (Term name uni fun (Path, ann) -&gt; Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a b.
ReaderT Path (StateT Int Identity) (a -&gt; b)
-&gt; ReaderT Path (StateT Int Identity) a
-&gt; ReaderT Path (StateT Int Identity) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972178"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-249"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Force"
	><span class="hs-identifier hs-type"
	  >Force</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972181"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972181"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972182"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972182"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term name uni fun (Path, ann) -&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Force"
	><span class="hs-identifier hs-var"
	  >Force</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972181"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann) -&gt; Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972182"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-250"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Constr"
	><span class="hs-identifier hs-type"
	  >Constr</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972184"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972184"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972185"
      ><span class="annot"
	><span class="annottext"
	  >Word64
</span
	  ><a href="#local-6989586621681972185"
	  ><span class="hs-identifier hs-var"
	    >i</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972186"
      ><span class="annot"
	><span class="annottext"
	  >[Term name uni fun ann]
</span
	  ><a href="#local-6989586621681972186"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Word64
-&gt; [Term name uni fun (Path, ann)]
-&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Word64 -&gt; [Term name uni fun ann] -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Constr"
	><span class="hs-identifier hs-var"
	  >Constr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972184"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><a href="#local-6989586621681972185"
	><span class="hs-identifier hs-var"
	  >i</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([Term name uni fun (Path, ann)] -&gt; Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) [Term name uni fun (Path, ann)]
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun ann
 -&gt; ReaderT
      Path (StateT Int Identity) (Term name uni fun (Path, ann)))
-&gt; [Term name uni fun ann]
-&gt; ReaderT
     Path (StateT Int Identity) [Term name uni fun (Path, ann)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#traverse"
	><span class="hs-identifier hs-var"
	  >traverse</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term name uni fun ann]
</span
	><a href="#local-6989586621681972186"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-251"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Constant"
	><span class="hs-identifier hs-type"
	  >Constant</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972189"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972189"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972190"
      ><span class="annot"
	><span class="annottext"
	  >Some (ValueOf uni)
</span
	  ><a href="#local-6989586621681972190"
	  ><span class="hs-identifier hs-var"
	    >val</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a. a -&gt; ReaderT Path (StateT Int Identity) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann)
 -&gt; ReaderT
      Path (StateT Int Identity) (Term name uni fun (Path, ann)))
-&gt; Term name uni fun (Path, ann)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Some (ValueOf uni) -&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Some (ValueOf uni) -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Constant"
	><span class="hs-identifier hs-var"
	  >Constant</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972189"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Some (ValueOf uni)
</span
	><a href="#local-6989586621681972190"
	><span class="hs-identifier hs-var"
	  >val</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-252"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Error"
	><span class="hs-identifier hs-type"
	  >Error</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972192"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972192"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a. a -&gt; ReaderT Path (StateT Int Identity) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann)
 -&gt; ReaderT
      Path (StateT Int Identity) (Term name uni fun (Path, ann)))
-&gt; Term name uni fun (Path, ann)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann. ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Error"
	><span class="hs-identifier hs-var"
	  >Error</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972192"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-253"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Builtin"
	><span class="hs-identifier hs-type"
	  >Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972194"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972194"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972195"
      ><span class="annot"
	><span class="annottext"
	  >fun
</span
	  ><a href="#local-6989586621681972195"
	  ><span class="hs-identifier hs-var"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a. a -&gt; ReaderT Path (StateT Int Identity) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann)
 -&gt; ReaderT
      Path (StateT Int Identity) (Term name uni fun (Path, ann)))
-&gt; Term name uni fun (Path, ann)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; fun -&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; fun -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Builtin"
	><span class="hs-identifier hs-var"
	  >Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972194"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>fun
</span
	><a href="#local-6989586621681972195"
	><span class="hs-identifier hs-var"
	  >fun</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-254"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Var"
	><span class="hs-identifier hs-type"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972197"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972197"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972198"
      ><span class="annot"
	><span class="annottext"
	  >name
</span
	  ><a href="#local-6989586621681972198"
	  ><span class="hs-identifier hs-var"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a. a -&gt; ReaderT Path (StateT Int Identity) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann)
 -&gt; ReaderT
      Path (StateT Int Identity) (Term name uni fun (Path, ann)))
-&gt; Term name uni fun (Path, ann)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; name -&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; name -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Var"
	><span class="hs-identifier hs-var"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972197"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>name
</span
	><a href="#local-6989586621681972198"
	><span class="hs-identifier hs-var"
	  >name</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-255"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#LamAbs"
	><span class="hs-identifier hs-type"
	  >LamAbs</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972200"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972200"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972201"
      ><span class="annot"
	><span class="annottext"
	  >name
</span
	  ><a href="#local-6989586621681972201"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972202"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972202"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-256"
      ></span
      ><span
      >          </span
      ><span id="local-6989586621681972203"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621681972203"
	  ><span class="hs-identifier hs-var"
	    >freshId</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Int -&gt; Int)
-&gt; ReaderT Path (StateT Int Identity) Int
-&gt; ReaderT Path (StateT Int Identity) Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State Int Int -&gt; ReaderT Path (StateT Int Identity) Int
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT Path m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier hs-var"
	  >lift</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State Int Int
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#get"
	><span class="hs-identifier hs-var"
	  >get</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-257"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>State Int () -&gt; ReaderT Path (StateT Int Identity) ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT Path m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier hs-var"
	  >lift</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(State Int () -&gt; ReaderT Path (StateT Int Identity) ())
-&gt; State Int () -&gt; ReaderT Path (StateT Int Identity) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; State Int ()
forall (m :: * -&gt; *) s. Monad m =&gt; s -&gt; StateT s m ()
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#put"
	><span class="hs-identifier hs-var"
	  >put</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972203"
	><span class="hs-identifier hs-var"
	  >freshId</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-258"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; name
-&gt; Term name uni fun (Path, ann)
-&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; name -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#LamAbs"
	><span class="hs-identifier hs-var"
	  >LamAbs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972200"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>name
</span
	><a href="#local-6989586621681972201"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann) -&gt; Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path -&gt; Path)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall r (m :: * -&gt; *) a.
(r -&gt; r) -&gt; ReaderT r m a -&gt; ReaderT r m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#local"
	><span class="hs-identifier hs-var"
	  >local</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972203"
	><span class="hs-identifier hs-var"
	  >freshId</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Path -&gt; Path
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972202"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-259"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Delay"
	><span class="hs-identifier hs-type"
	  >Delay</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972206"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972206"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972207"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972207"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-260"
      ></span
      ><span
      >          </span
      ><span id="local-6989586621681972208"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621681972208"
	  ><span class="hs-identifier hs-var"
	    >freshId</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Int -&gt; Int)
-&gt; ReaderT Path (StateT Int Identity) Int
-&gt; ReaderT Path (StateT Int Identity) Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State Int Int -&gt; ReaderT Path (StateT Int Identity) Int
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT Path m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier hs-var"
	  >lift</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State Int Int
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#get"
	><span class="hs-identifier hs-var"
	  >get</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-261"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>State Int () -&gt; ReaderT Path (StateT Int Identity) ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT Path m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier hs-var"
	  >lift</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(State Int () -&gt; ReaderT Path (StateT Int Identity) ())
-&gt; State Int () -&gt; ReaderT Path (StateT Int Identity) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; State Int ()
forall (m :: * -&gt; *) s. Monad m =&gt; s -&gt; StateT s m ()
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#put"
	><span class="hs-identifier hs-var"
	  >put</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972208"
	><span class="hs-identifier hs-var"
	  >freshId</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-262"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term name uni fun (Path, ann) -&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Delay"
	><span class="hs-identifier hs-var"
	  >Delay</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972206"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann) -&gt; Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path -&gt; Path)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall r (m :: * -&gt; *) a.
(r -&gt; r) -&gt; ReaderT r m a -&gt; ReaderT r m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#local"
	><span class="hs-identifier hs-var"
	  >local</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972208"
	><span class="hs-identifier hs-var"
	  >freshId</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Path -&gt; Path
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972207"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-263"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-type"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972210"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621681972210"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972211"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972211"
	  ><span class="hs-identifier hs-var"
	    >scrut</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972212"
      ><span class="annot"
	><span class="annottext"
	  >Vector (Term name uni fun ann)
</span
	  ><a href="#local-6989586621681972212"
	  ><span class="hs-identifier hs-var"
	    >branches</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-264"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term name uni fun (Path, ann)
-&gt; Vector (Term name uni fun (Path, ann))
-&gt; Term name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Vector (Term name uni fun ann)
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-var"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972174"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621681972210"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-265"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann)
 -&gt; Vector (Term name uni fun (Path, ann))
 -&gt; Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path
     (StateT Int Identity)
     (Vector (Term name uni fun (Path, ann))
      -&gt; Term name uni fun (Path, ann))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972211"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-266"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>ReaderT
  Path
  (StateT Int Identity)
  (Vector (Term name uni fun (Path, ann))
   -&gt; Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Vector (Term name uni fun (Path, ann)))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall a b.
ReaderT Path (StateT Int Identity) (a -&gt; b)
-&gt; ReaderT Path (StateT Int Identity) a
-&gt; ReaderT Path (StateT Int Identity) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term name uni fun ann)
-&gt; (Term name uni fun ann
    -&gt; ReaderT
         Path (StateT Int Identity) (Term name uni fun (Path, ann)))
-&gt; ReaderT
     Path (StateT Int Identity) (Vector (Term name uni fun (Path, ann)))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#for"
	><span class="hs-identifier hs-var"
	  >for</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term name uni fun ann)
</span
	><a href="#local-6989586621681972212"
	><span class="hs-identifier hs-var"
	  >branches</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Term name uni fun ann
  -&gt; ReaderT
       Path (StateT Int Identity) (Term name uni fun (Path, ann)))
 -&gt; ReaderT
      Path
      (StateT Int Identity)
      (Vector (Term name uni fun (Path, ann))))
-&gt; (Term name uni fun ann
    -&gt; ReaderT
         Path (StateT Int Identity) (Term name uni fun (Path, ann)))
-&gt; ReaderT
     Path (StateT Int Identity) (Vector (Term name uni fun (Path, ann)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621681972213"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972213"
	  ><span class="hs-identifier hs-var"
	    >br</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-267"
      ></span
      ><span
      >                    </span
      ><span id="local-6989586621681972214"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621681972214"
	  ><span class="hs-identifier hs-var"
	    >freshId</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Int -&gt; Int)
-&gt; ReaderT Path (StateT Int Identity) Int
-&gt; ReaderT Path (StateT Int Identity) Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State Int Int -&gt; ReaderT Path (StateT Int Identity) Int
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT Path m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier hs-var"
	  >lift</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>State Int Int
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#get"
	><span class="hs-identifier hs-var"
	  >get</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-268"
      ></span
      ><span
      >                    </span
      ><span class="annot"
      ><span class="annottext"
	>State Int () -&gt; ReaderT Path (StateT Int Identity) ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT Path m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier hs-var"
	  >lift</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(State Int () -&gt; ReaderT Path (StateT Int Identity) ())
-&gt; State Int () -&gt; ReaderT Path (StateT Int Identity) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; State Int ()
forall (m :: * -&gt; *) s. Monad m =&gt; s -&gt; StateT s m ()
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.State.Strict.html#put"
	><span class="hs-identifier hs-var"
	  >put</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972214"
	><span class="hs-identifier hs-var"
	  >freshId</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-269"
      ></span
      ><span
      >                    </span
      ><span class="annot"
      ><span class="annottext"
	>(Path -&gt; Path)
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall r (m :: * -&gt; *) a.
(r -&gt; r) -&gt; ReaderT r m a -&gt; ReaderT r m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#local"
	><span class="hs-identifier hs-var"
	  >local</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972214"
	><span class="hs-identifier hs-var"
	  >freshId</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Path -&gt; Path
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun ann
-&gt; ReaderT
     Path (StateT Int Identity) (Term name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972105"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972213"
	><span class="hs-identifier hs-var"
	  >br</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-270"
      ></span
      ><span
      >                </span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-271"
      ></span
      ><span
      >
</span
      ><span id="line-272"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | The third pass. See Note [CSE].</span
	></span
      ><span
      >
</span
      ><span id="line-273"
      ></span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#countOccs"
	><span class="hs-identifier hs-type"
	  >countOccs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-274"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621681971832"
      ><span class="annot"
	><a href="#local-6989586621681971832"
	  ><span class="hs-identifier hs-type"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971833"
      ><span class="annot"
	><a href="#local-6989586621681971833"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971834"
      ><span class="annot"
	><a href="#local-6989586621681971834"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971835"
      ><span class="annot"
	><a href="#local-6989586621681971835"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-275"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/hashable-1.5.0.0/docs/src/Data.Hashable.Class.html#Hashable"
	><span class="hs-identifier hs-type"
	  >Hashable</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Builtin.Meaning.html#ToBuiltinMeaning"
	><span class="hs-identifier hs-type"
	  >ToBuiltinMeaning</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-276"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusCore.Builtin.Meaning.html#BuiltinSemanticsVariant"
	><span class="hs-identifier hs-type"
	  >BuiltinSemanticsVariant</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-277"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971835"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-278"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- | Here, the value of the inner map not only contains the count, but also contains</span
      ><span
      >
</span
      ><span id="line-279"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- the annotated term, corresponding to the term that is the key of the outer map.</span
      ><span
      >
</span
      ><span id="line-280"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- The annotated terms need to be recorded since they will be used for substitution.</span
      ><span
      >
</span
      ><span id="line-281"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Internal.html#HashMap"
	><span class="hs-identifier hs-type"
	  >HashMap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971835"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-282"
      ></span
      ><span id="countOccs"
      ><span class="annot"
	><span class="annottext"
	  >countOccs :: forall name (uni :: * -&gt; *) fun ann.
(Hashable (Term name uni fun ()), ToBuiltinMeaning uni fun) =&gt;
BuiltinSemanticsVariant fun
-&gt; Term name uni fun (Path, ann)
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#countOccs"
	  ><span class="hs-identifier hs-var hs-var"
	    >countOccs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972236"
      ><span class="annot"
	><span class="annottext"
	  >BuiltinSemanticsVariant fun
</span
	  ><a href="#local-6989586621681972236"
	  ><span class="hs-identifier hs-var"
	    >builtinSemanticsVariant</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Getting
  (Endo
     (HashMap
        (Term name uni fun ())
        [(Path, Term name uni fun (Path, ann), Int)]))
  (Term name uni fun (Path, ann))
  (Term name uni fun (Path, ann))
-&gt; (Term name uni fun (Path, ann)
    -&gt; HashMap
         (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
    -&gt; HashMap
         (Term name uni fun ())
         [(Path, Term name uni fun (Path, ann), Int)])
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
-&gt; Term name uni fun (Path, ann)
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
forall r s a. Getting (Endo r) s a -&gt; (a -&gt; r -&gt; r) -&gt; r -&gt; s -&gt; r
</span
	><span class="hs-identifier hs-var"
	>foldrOf</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Getting
  (Endo
     (HashMap
        (Term name uni fun ())
        [(Path, Term name uni fun (Path, ann), Int)]))
  (Term name uni fun (Path, ann))
  (Term name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann (f :: * -&gt; *).
(Contravariant f, Applicative f) =&gt;
(Term name uni fun ann -&gt; f (Term name uni fun ann))
-&gt; Term name uni fun ann -&gt; f (Term name uni fun ann)
</span
	><a href="UntypedPlutusCore.Core.Plated.html#termSubtermsDeep"
	><span class="hs-identifier hs-var"
	  >termSubtermsDeep</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="#local-6989586621681972238"
	><span class="hs-identifier hs-var"
	  >addToMap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>HashMap
  (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
forall k v. HashMap k v
</span
	><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Internal.html#empty"
	><span class="hs-identifier hs-var"
	  >Map.empty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-283"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-284"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621681972238"
	><span class="hs-identifier hs-type"
	  >addToMap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-285"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971835"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-286"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Internal.html#HashMap"
	><span class="hs-identifier hs-type"
	  >HashMap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971835"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-287"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Internal.html#HashMap"
	><span class="hs-identifier hs-type"
	  >HashMap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971832"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971834"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971835"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-288"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681972238"
      ><span class="annot"
	><span class="annottext"
	  >addToMap :: Term name uni fun (Path, ann)
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
</span
	  ><a href="#local-6989586621681972238"
	  ><span class="hs-identifier hs-var hs-var"
	    >addToMap</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972240"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972240"
	  ><span class="hs-identifier hs-var"
	    >t0</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-289"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- We don't consider work-free terms for CSE, because doing so may or may not</span
      ><span
      >
</span
      ><span id="line-290"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- have a size benefit, but certainly doesn't have any cost benefit (the cost</span
      ><span
      >
</span
      ><span id="line-291"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- will in fact be slightly higher due to the additional application).</span
      ><span
      >
</span
      ><span id="line-292"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinSemanticsVariant fun
-&gt; Term name uni fun (Path, ann) -&gt; Bool
forall (uni :: * -&gt; *) fun name a.
ToBuiltinMeaning uni fun =&gt;
BuiltinSemanticsVariant fun -&gt; Term name uni fun a -&gt; Bool
</span
	><a href="UntypedPlutusCore.Purity.html#isWorkFree"
	><span class="hs-identifier hs-var"
	  >isWorkFree</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinSemanticsVariant fun
</span
	><a href="#local-6989586621681972236"
	><span class="hs-identifier hs-var"
	  >builtinSemanticsVariant</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972240"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-293"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Bool -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%7C%7C"
	><span class="hs-operator hs-var"
	  >||</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#not"
	><span class="hs-identifier hs-var"
	  >not</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann) -&gt; Bool
</span
	><a href="#local-6989586621681972243"
	><span class="hs-identifier hs-var"
	  >isBuiltinSaturated</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972240"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-294"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Bool -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%7C%7C"
	><span class="hs-operator hs-var"
	  >||</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann) -&gt; Bool
forall {name} {uni :: * -&gt; *} {fun} {ann}.
Term name uni fun ann -&gt; Bool
</span
	><a href="#local-6989586621681972244"
	><span class="hs-identifier hs-var"
	  >isForcingBuiltin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972240"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-295"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>HashMap
  (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
forall a. a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#id"
	><span class="hs-identifier hs-var"
	  >id</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-296"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#otherwise"
	><span class="hs-identifier hs-var"
	  >otherwise</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-297"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Maybe [(Path, Term name uni fun (Path, ann), Int)]
 -&gt; Maybe [(Path, Term name uni fun (Path, ann), Int)])
-&gt; Term name uni fun ()
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
-&gt; HashMap
     (Term name uni fun ()) [(Path, Term name uni fun (Path, ann), Int)]
forall k v.
(Eq k, Hashable k) =&gt;
(Maybe v -&gt; Maybe v) -&gt; k -&gt; HashMap k v -&gt; HashMap k v
</span
	><a href="https://hackage.haskell.org/package/unordered-containers-0.2.20/docs/src/Data.HashMap.Internal.Strict.html#alter"
	><span class="hs-identifier hs-var"
	  >Map.alter</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-298"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-glyph"
      >case</span
      ><span
      >
</span
      ><span id="line-299"
      ></span
      ><span
      >                </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe [(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Path, Term name uni fun (Path, ann), Int)]
-&gt; Maybe [(Path, Term name uni fun (Path, ann), Int)]
forall a. a -&gt; Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-var"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972247"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972240"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-300"
      ></span
      ><span
      >                </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972248"
      ><span class="annot"
	><span class="annottext"
	  >[(Path, Term name uni fun (Path, ann), Int)]
</span
	  ><a href="#local-6989586621681972248"
	  ><span class="hs-identifier hs-var"
	    >paths</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Path, Term name uni fun (Path, ann), Int)]
-&gt; Maybe [(Path, Term name uni fun (Path, ann), Int)]
forall a. a -&gt; Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-var"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([(Path, Term name uni fun (Path, ann), Int)]
 -&gt; Maybe [(Path, Term name uni fun (Path, ann), Int)])
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; Maybe [(Path, Term name uni fun (Path, ann), Int)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
-&gt; Path
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
forall name (uni :: * -&gt; *) fun ann.
Term name uni fun (Path, ann)
-&gt; Path
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#combinePaths"
	><span class="hs-identifier hs-var"
	  >combinePaths</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972240"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972247"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="#local-6989586621681972248"
	><span class="hs-identifier hs-var"
	  >paths</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-301"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-302"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ()
</span
	><a href="#local-6989586621681972250"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-303"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-304"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621681972250"
      ><span class="annot"
	><span class="annottext"
	  >t :: Term name uni fun ()
</span
	  ><a href="#local-6989586621681972250"
	  ><span class="hs-identifier hs-var hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann) -&gt; Term name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972240"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-305"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621681972247"
      ><span class="annot"
	><span class="annottext"
	  >path :: Path
</span
	  ><a href="#local-6989586621681972247"
	  ><span class="hs-identifier hs-var hs-var"
	    >path</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Path
forall a b. (a, b) -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Tuple.html#fst"
	><span class="hs-identifier hs-var"
	  >fst</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann) -&gt; (Path, ann)
forall name (uni :: * -&gt; *) fun ann. Term name uni fun ann -&gt; ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#termAnn"
	><span class="hs-identifier hs-var"
	  >termAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972240"
	><span class="hs-identifier hs-var"
	  >t0</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-306"
      ></span
      ><span
      >
</span
      ><span id="line-307"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681972243"
      ><span class="annot"
	><span class="annottext"
	  >isBuiltinSaturated :: Term name uni fun (Path, ann) -&gt; Bool
</span
	  ><a href="#local-6989586621681972243"
	  ><span class="hs-identifier hs-var hs-var"
	    >isBuiltinSaturated</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-308"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
-&gt; (Term name uni fun (Path, ann),
    [((Path, ann), Term name uni fun (Path, ann))])
forall name (uni :: * -&gt; *) fun a.
Term name uni fun a
-&gt; (Term name uni fun a, [(a, Term name uni fun a)])
</span
	><a href="UntypedPlutusCore.Core.html#splitApplication"
	><span class="hs-identifier hs-var"
	  >splitApplication</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term name uni fun (Path, ann)
 -&gt; (Term name uni fun (Path, ann),
     [((Path, ann), Term name uni fun (Path, ann))]))
-&gt; ((Term name uni fun (Path, ann),
     [((Path, ann), Term name uni fun (Path, ann))])
    -&gt; Bool)
-&gt; Term name uni fun (Path, ann)
-&gt; Bool
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k) (b :: k) (c :: k).
Category cat =&gt;
cat a b -&gt; cat b c -&gt; cat a c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Control.Category.html#%3E%3E%3E"
	><span class="hs-operator hs-var"
	  >&gt;&gt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-glyph"
      >case</span
      ><span
      >
</span
      ><span id="line-309"
      ></span
      ><span
      >        </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Builtin"
	><span class="hs-identifier hs-type"
	  >Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972254"
      ><span class="annot"
	><span class="annottext"
	  >fun
</span
	  ><a href="#local-6989586621681972254"
	  ><span class="hs-identifier hs-var"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681972255"
      ><span class="annot"
	><span class="annottext"
	  >[((Path, ann), Term name uni fun (Path, ann))]
</span
	  ><a href="#local-6989586621681972255"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-310"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>[((Path, ann), Term name uni fun (Path, ann))] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[((Path, ann), Term name uni fun (Path, ann))]
</span
	><a href="#local-6989586621681972255"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3E%3D"
	><span class="hs-operator hs-var"
	  >&gt;=</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Param] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Proxy uni -&gt; BuiltinSemanticsVariant fun -&gt; fun -&gt; [Param]
forall (uni :: * -&gt; *) fun.
ToBuiltinMeaning uni fun =&gt;
Proxy uni -&gt; BuiltinSemanticsVariant fun -&gt; fun -&gt; [Param]
</span
	><a href="PlutusCore.Arity.html#builtinArity"
	><span class="hs-identifier hs-var"
	  >builtinArity</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>forall {k} (t :: k). Proxy t
forall (t :: * -&gt; *). Proxy t
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Proxy.html#Proxy"
	><span class="hs-identifier hs-var"
	  >Proxy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><a href="#local-6989586621681971833"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinSemanticsVariant fun
</span
	><a href="#local-6989586621681972236"
	><span class="hs-identifier hs-var"
	  >builtinSemanticsVariant</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>fun
</span
	><a href="#local-6989586621681972254"
	><span class="hs-identifier hs-var"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-311"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621681972258"
      ><span class="annot"
	><span class="annottext"
	  >(Term name uni fun (Path, ann),
 [((Path, ann), Term name uni fun (Path, ann))])
</span
	  ><a href="#local-6989586621681972258"
	  ><span class="hs-identifier hs-var"
	    >_term</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#True"
	><span class="hs-identifier hs-var"
	  >True</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-312"
      ></span
      ><span
      >
</span
      ><span id="line-313"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681972244"
      ><span class="annot"
	><span class="annottext"
	  >isForcingBuiltin :: Term name uni fun ann -&gt; Bool
</span
	  ><a href="#local-6989586621681972244"
	  ><span class="hs-identifier hs-var hs-var"
	    >isForcingBuiltin</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-glyph"
      >case</span
      ><span
      >
</span
      ><span id="line-314"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Builtin"
	><span class="hs-identifier hs-type"
	  >Builtin</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#True"
	><span class="hs-identifier hs-var"
	  >True</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-315"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Force"
	><span class="hs-identifier hs-type"
	  >Force</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972259"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun ann
</span
	  ><a href="#local-6989586621681972259"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann -&gt; Bool
</span
	><a href="#local-6989586621681972244"
	><span class="hs-identifier hs-var"
	  >isForcingBuiltin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><a href="#local-6989586621681972259"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-316"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#False"
	><span class="hs-identifier hs-var"
	  >False</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-317"
      ></span
      ><span
      >
</span
      ><span id="line-318"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Combine a new path with a number of existing (path, count) pairs.</span
	></span
      ><span
      >
</span
      ><span id="line-319"
      ></span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#combinePaths"
	><span class="hs-identifier hs-type"
	  >combinePaths</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-320"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621681971958"
      ><span class="annot"
	><a href="#local-6989586621681971958"
	  ><span class="hs-identifier hs-type"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971959"
      ><span class="annot"
	><a href="#local-6989586621681971959"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971960"
      ><span class="annot"
	><a href="#local-6989586621681971960"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971961"
      ><span class="annot"
	><a href="#local-6989586621681971961"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-321"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971958"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971959"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971960"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971961"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-322"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-323"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971958"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971959"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971960"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971961"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-324"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971958"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971959"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971960"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971961"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-325"
      ></span
      ><span id="combinePaths"
      ><span class="annot"
	><span class="annottext"
	  >combinePaths :: forall name (uni :: * -&gt; *) fun ann.
Term name uni fun (Path, ann)
-&gt; Path
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#combinePaths"
	  ><span class="hs-identifier hs-var hs-var"
	    >combinePaths</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972263"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972263"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972264"
      ><span class="annot"
	><span class="annottext"
	  >Path
</span
	  ><a href="#local-6989586621681972264"
	  ><span class="hs-identifier hs-var"
	    >path</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="#local-6989586621681972265"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span
      >
</span
      ><span id="line-326"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-327"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621681972265"
	><span class="hs-identifier hs-type"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-328"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-329"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971958"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971959"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971960"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971961"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-330"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971958"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971959"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971960"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971961"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Int"
	><span class="hs-identifier hs-type"
	  >Int</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-331"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- The new path is not a descendent-or-self of any existing path.</span
      ><span
      >
</span
      ><span id="line-332"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681972265"
      ><span class="annot"
	><span class="annottext"
	  >go :: Int
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
</span
	  ><a href="#local-6989586621681972265"
	  ><span class="hs-identifier hs-var hs-var"
	    >go</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972266"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621681972266"
	  ><span class="hs-identifier hs-var"
	    >acc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972264"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972263"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972266"
	><span class="hs-identifier hs-var"
	  >acc</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-333"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621681972265"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972267"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621681972267"
	  ><span class="hs-identifier hs-var"
	    >acc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621681972268"
      ><span class="annot"
	><span class="annottext"
	  >Path
</span
	  ><a href="#local-6989586621681972268"
	  ><span class="hs-identifier hs-var"
	    >path'</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681972269"
      ><span class="annot"
	><span class="annottext"
	  >Term name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972269"
	  ><span class="hs-identifier hs-var"
	    >t'</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621681972270"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621681972270"
	  ><span class="hs-identifier hs-var"
	    >cnt</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-type"
	  >:</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972271"
      ><span class="annot"
	><span class="annottext"
	  >[(Path, Term name uni fun (Path, ann), Int)]
</span
	  ><a href="#local-6989586621681972271"
	  ><span class="hs-identifier hs-var"
	    >paths</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-334"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- The new path is an ancestor-or-self of an existing path.</span
      ><span
      >
</span
      ><span id="line-335"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- Take over all counts of the existing path, remove the existing path,</span
      ><span
      >
</span
      ><span id="line-336"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- and continue.</span
      ><span
      >
</span
      ><span id="line-337"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972264"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path -&gt; Path -&gt; Bool
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#isAncestorOrSelf"
	><span class="hs-operator hs-var"
	  >`isAncestorOrSelf`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972268"
	><span class="hs-identifier hs-var"
	  >path'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="#local-6989586621681972265"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972267"
	><span class="hs-identifier hs-var"
	  >acc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972270"
	><span class="hs-identifier hs-var"
	  >cnt</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="#local-6989586621681972271"
	><span class="hs-identifier hs-var"
	  >paths</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-338"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- The new path is a descendent-or-self of an existing path.</span
      ><span
      >
</span
      ><span id="line-339"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- Increment the count for the existing path. There can only be one such</span
      ><span
      >
</span
      ><span id="line-340"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- existing path, so we don't need to recurse here.</span
      ><span
      >
</span
      ><span id="line-341"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972268"
	><span class="hs-identifier hs-var"
	  >path'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path -&gt; Path -&gt; Bool
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#isAncestorOrSelf"
	><span class="hs-operator hs-var"
	  >`isAncestorOrSelf`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972264"
	><span class="hs-identifier hs-var"
	  >path</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972268"
	><span class="hs-identifier hs-var"
	  >path'</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972269"
	><span class="hs-identifier hs-var"
	  >t'</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972270"
	><span class="hs-identifier hs-var"
	  >cnt</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Num.html#%2B"
	><span class="hs-operator hs-var"
	  >+</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, Term name uni fun (Path, ann), Int)
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="#local-6989586621681972271"
	><span class="hs-identifier hs-var"
	  >paths</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-342"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#otherwise"
	><span class="hs-identifier hs-var"
	  >otherwise</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972268"
	><span class="hs-identifier hs-var"
	  >path'</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972269"
	><span class="hs-identifier hs-var"
	  >t'</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972270"
	><span class="hs-identifier hs-var"
	  >cnt</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, Term name uni fun (Path, ann), Int)
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
-&gt; [(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="#local-6989586621681972265"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621681972267"
	><span class="hs-identifier hs-var"
	  >acc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Path, Term name uni fun (Path, ann), Int)]
</span
	><a href="#local-6989586621681972271"
	><span class="hs-identifier hs-var"
	  >paths</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-343"
      ></span
      ><span
      >
</span
      ><span id="line-344"
      ></span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#mkCseTerm"
	><span class="hs-identifier hs-type"
	  >mkCseTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-345"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621681971837"
      ><span class="annot"
	><a href="#local-6989586621681971837"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971838"
      ><span class="annot"
	><a href="#local-6989586621681971838"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971839"
      ><span class="annot"
	><a href="#local-6989586621681971839"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971836"
      ><span class="annot"
	><a href="#local-6989586621681971836"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-346"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Quote.html#MonadQuote"
	><span class="hs-identifier hs-type"
	  >MonadQuote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971836"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	><span class="hs-identifier hs-type"
	  >Eq</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971837"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971838"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-347"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971837"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971838"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971839"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-348"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | The original annotated term</span
	></span
      ><span
      >
</span
      ><span id="line-349"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971837"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971838"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971839"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-350"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="#local-6989586621681971836"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971837"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971838"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971839"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-351"
      ></span
      ><span id="mkCseTerm"
      ><span class="annot"
	><span class="annottext"
	  >mkCseTerm :: forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
(MonadQuote m, Eq (Term Name uni fun ())) =&gt;
[Term Name uni fun (Path, ann)]
-&gt; Term Name uni fun (Path, ann) -&gt; m (Term Name uni fun ann)
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#mkCseTerm"
	  ><span class="hs-identifier hs-var hs-var"
	    >mkCseTerm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972285"
      ><span class="annot"
	><span class="annottext"
	  >[Term Name uni fun (Path, ann)]
</span
	  ><a href="#local-6989586621681972285"
	  ><span class="hs-identifier hs-var"
	    >ts</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972286"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972286"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-352"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621681972287"
      ><span class="annot"
	><span class="annottext"
	  >[CseCandidate uni fun ann]
</span
	  ><a href="#local-6989586621681972287"
	  ><span class="hs-identifier hs-var"
	    >cs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term Name uni fun (Path, ann) -&gt; m (CseCandidate uni fun ann))
-&gt; [Term Name uni fun (Path, ann)] -&gt; m [CseCandidate uni fun ann]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Traversable.html#traverse"
	><span class="hs-identifier hs-var"
	  >traverse</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; m (CseCandidate uni fun ann)
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadQuote m =&gt;
Term Name uni fun (Path, ann) -&gt; m (CseCandidate uni fun ann)
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#mkCseCandidate"
	><span class="hs-identifier hs-var"
	  >mkCseCandidate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term Name uni fun (Path, ann)]
</span
	><a href="#local-6989586621681972285"
	><span class="hs-identifier hs-var"
	  >ts</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-353"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ann -&gt; m (Term Name uni fun ann)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term Name uni fun ann -&gt; m (Term Name uni fun ann))
-&gt; (Term Name uni fun (Path, ann) -&gt; Term Name uni fun ann)
-&gt; Term Name uni fun (Path, ann)
-&gt; m (Term Name uni fun ann)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Path, ann) -&gt; ann)
-&gt; Term Name uni fun (Path, ann) -&gt; Term Name uni fun ann
forall a b. (a -&gt; b) -&gt; Term Name uni fun a -&gt; Term Name uni fun b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#fmap"
	><span class="hs-identifier hs-var"
	  >fmap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; ann
forall a b. (a, b) -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Tuple.html#snd"
	><span class="hs-identifier hs-var"
	  >snd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term Name uni fun (Path, ann) -&gt; m (Term Name uni fun ann))
-&gt; Term Name uni fun (Path, ann) -&gt; m (Term Name uni fun ann)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term Name uni fun (Path, ann)
 -&gt; CseCandidate uni fun ann -&gt; Term Name uni fun (Path, ann))
-&gt; Term Name uni fun (Path, ann)
-&gt; [CseCandidate uni fun ann]
-&gt; Term Name uni fun (Path, ann)
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#foldl%27"
	><span class="hs-identifier hs-var"
	  >Foldable.foldl'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(CseCandidate uni fun ann
 -&gt; Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann))
-&gt; Term Name uni fun (Path, ann)
-&gt; CseCandidate uni fun ann
-&gt; Term Name uni fun (Path, ann)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#flip"
	><span class="hs-identifier hs-var"
	  >flip</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann
-&gt; Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
forall (uni :: * -&gt; *) fun ann.
Eq (Term Name uni fun ()) =&gt;
CseCandidate uni fun ann
-&gt; Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#applyCse"
	><span class="hs-identifier hs-var"
	  >applyCse</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972286"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[CseCandidate uni fun ann]
</span
	><a href="#local-6989586621681972287"
	><span class="hs-identifier hs-var"
	  >cs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-354"
      ></span
      ><span
      >
</span
      ><span id="line-355"
      ></span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#applyCse"
	><span class="hs-identifier hs-type"
	  >applyCse</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-356"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621681972003"
      ><span class="annot"
	><a href="#local-6989586621681972003"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972004"
      ><span class="annot"
	><a href="#local-6989586621681972004"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972005"
      ><span class="annot"
	><a href="#local-6989586621681972005"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-357"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Eq"
	><span class="hs-identifier hs-type"
	  >Eq</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972003"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972004"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-358"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#CseCandidate"
	><span class="hs-identifier hs-type"
	  >CseCandidate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972003"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972004"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972005"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-359"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972003"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972004"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972005"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-360"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972003"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972004"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972005"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-361"
      ></span
      ><span id="applyCse"
      ><span class="annot"
	><span class="annottext"
	  >applyCse :: forall (uni :: * -&gt; *) fun ann.
Eq (Term Name uni fun ()) =&gt;
CseCandidate uni fun ann
-&gt; Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#applyCse"
	  ><span class="hs-identifier hs-var hs-var"
	    >applyCse</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972301"
      ><span class="annot"
	><span class="annottext"
	  >CseCandidate uni fun ann
</span
	  ><a href="#local-6989586621681972301"
	  ><span class="hs-identifier hs-var"
	    >c</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann))
-&gt; (Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann))
-&gt; Term Name uni fun (Path, ann)
-&gt; Term Name uni fun (Path, ann)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ASetter
  (Term Name uni fun (Path, ann))
  (Term Name uni fun (Path, ann))
  (Term Name uni fun (Path, ann))
  (Term Name uni fun (Path, ann))
-&gt; (Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann))
-&gt; Term Name uni fun (Path, ann)
-&gt; Term Name uni fun (Path, ann)
forall a b. ASetter a b a b -&gt; (b -&gt; b) -&gt; a -&gt; b
</span
	><span class="hs-identifier hs-var"
	>transformOf</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ASetter
  (Term Name uni fun (Path, ann))
  (Term Name uni fun (Path, ann))
  (Term Name uni fun (Path, ann))
  (Term Name uni fun (Path, ann))
forall name (uni :: * -&gt; *) fun ann (f :: * -&gt; *).
Applicative f =&gt;
(Term name uni fun ann -&gt; f (Term name uni fun ann))
-&gt; Term name uni fun ann -&gt; f (Term name uni fun ann)
</span
	><a href="UntypedPlutusCore.Core.Plated.html#termSubterms"
	><span class="hs-identifier hs-var"
	  >termSubterms</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972304"
	><span class="hs-identifier hs-var"
	  >substCseVarForTerm</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-362"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-363"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681972305"
      ><span class="annot"
	><span class="annottext"
	  >candidatePath :: Path
</span
	  ><a href="#local-6989586621681972305"
	  ><span class="hs-identifier hs-var hs-var"
	    >candidatePath</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Path
forall a b. (a, b) -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Tuple.html#fst"
	><span class="hs-identifier hs-var"
	  >fst</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; (Path, ann)
forall name (uni :: * -&gt; *) fun ann. Term name uni fun ann -&gt; ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#termAnn"
	><span class="hs-identifier hs-var"
	  >termAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann -&gt; Term Name uni fun (Path, ann)
forall (uni :: * -&gt; *) fun ann.
CseCandidate uni fun ann -&gt; Term Name uni fun (Path, ann)
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#ccAnnotatedTerm"
	><span class="hs-identifier hs-var"
	  >ccAnnotatedTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann
</span
	><a href="#local-6989586621681972301"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-364"
      ></span
      ><span
      >
</span
      ><span id="line-365"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621681972304"
	><span class="hs-identifier hs-type"
	  >substCseVarForTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972003"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972004"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972005"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972003"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972004"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972005"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-366"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681972304"
      ><span class="annot"
	><span class="annottext"
	  >substCseVarForTerm :: Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972304"
	  ><span class="hs-identifier hs-var hs-var"
	    >substCseVarForTerm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972306"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972306"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-367"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >if</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun ()
</span
	><a href="#local-6989586621681972307"
	><span class="hs-identifier hs-var"
	  >currTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun () -&gt; Term Name uni fun () -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann -&gt; Term Name uni fun ()
forall (uni :: * -&gt; *) fun ann.
CseCandidate uni fun ann -&gt; Term Name uni fun ()
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#ccTerm"
	><span class="hs-identifier hs-var"
	  >ccTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann
</span
	><a href="#local-6989586621681972301"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Bool -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%26%26"
	><span class="hs-operator hs-var"
	  >&amp;&amp;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972305"
	><span class="hs-identifier hs-var"
	  >candidatePath</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path -&gt; Path -&gt; Bool
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#isAncestorOrSelf"
	><span class="hs-operator hs-var"
	  >`isAncestorOrSelf`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972309"
	><span class="hs-identifier hs-var"
	  >currPath</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-368"
      ></span
      ><span
      >        </span
      ><span class="hs-keyword"
      >then</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Name -&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; name -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Var"
	><span class="hs-identifier hs-var"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; (Path, ann)
forall name (uni :: * -&gt; *) fun ann. Term name uni fun ann -&gt; ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#termAnn"
	><span class="hs-identifier hs-var"
	  >termAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972306"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann -&gt; Name
forall (uni :: * -&gt; *) fun ann. CseCandidate uni fun ann -&gt; Name
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#ccFreshName"
	><span class="hs-identifier hs-var"
	  >ccFreshName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann
</span
	><a href="#local-6989586621681972301"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-369"
      ></span
      ><span
      >        </span
      ><span class="hs-keyword"
      >else</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972306"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-370"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-371"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621681972307"
      ><span class="annot"
	><span class="annottext"
	  >currTerm :: Term Name uni fun ()
</span
	  ><a href="#local-6989586621681972307"
	  ><span class="hs-identifier hs-var hs-var"
	    >currTerm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972306"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-372"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621681972309"
      ><span class="annot"
	><span class="annottext"
	  >currPath :: Path
</span
	  ><a href="#local-6989586621681972309"
	  ><span class="hs-identifier hs-var hs-var"
	    >currPath</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Path
forall a b. (a, b) -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Tuple.html#fst"
	><span class="hs-identifier hs-var"
	  >fst</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; (Path, ann)
forall name (uni :: * -&gt; *) fun ann. Term name uni fun ann -&gt; ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#termAnn"
	><span class="hs-identifier hs-var"
	  >termAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972306"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-373"
      ></span
      ><span
      >
</span
      ><span id="line-374"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-type"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972003"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972004"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972005"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972003"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972004"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681972005"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-375"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621681972302"
      ><span class="annot"
	><span class="annottext"
	  >mkLamApp :: Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972302"
	  ><span class="hs-identifier hs-var hs-var"
	    >mkLamApp</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972310"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972310"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-376"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972311"
	><span class="hs-identifier hs-var"
	  >currPath</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path -&gt; Path -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972305"
	><span class="hs-identifier hs-var"
	  >candidatePath</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-377"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term Name uni fun (Path, ann)
-&gt; Term Name uni fun (Path, ann)
-&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Apply"
	><span class="hs-identifier hs-var"
	  >Apply</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-378"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; (Path, ann)
forall name (uni :: * -&gt; *) fun ann. Term name uni fun ann -&gt; ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#termAnn"
	><span class="hs-identifier hs-var"
	  >termAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972310"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-379"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Name
-&gt; Term Name uni fun (Path, ann)
-&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; name -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#LamAbs"
	><span class="hs-identifier hs-var"
	  >LamAbs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; (Path, ann)
forall name (uni :: * -&gt; *) fun ann. Term name uni fun ann -&gt; ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#termAnn"
	><span class="hs-identifier hs-var"
	  >termAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972310"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann -&gt; Name
forall (uni :: * -&gt; *) fun ann. CseCandidate uni fun ann -&gt; Name
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#ccFreshName"
	><span class="hs-identifier hs-var"
	  >ccFreshName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann
</span
	><a href="#local-6989586621681972301"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972310"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-380"
      ></span
      ><span
      >            </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann -&gt; Term Name uni fun (Path, ann)
forall (uni :: * -&gt; *) fun ann.
CseCandidate uni fun ann -&gt; Term Name uni fun (Path, ann)
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#ccAnnotatedTerm"
	><span class="hs-identifier hs-var"
	  >ccAnnotatedTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>CseCandidate uni fun ann
</span
	><a href="#local-6989586621681972301"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-381"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972311"
	><span class="hs-identifier hs-var"
	  >currPath</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path -&gt; Path -&gt; Bool
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#isAncestorOrSelf"
	><span class="hs-operator hs-var"
	  >`isAncestorOrSelf`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Path
</span
	><a href="#local-6989586621681972305"
	><span class="hs-identifier hs-var"
	  >candidatePath</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972310"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-382"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Var"
	><span class="hs-identifier hs-type"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972312"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972312"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972313"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621681972313"
	  ><span class="hs-identifier hs-var"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      >            </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Name -&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; name -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Var"
	><span class="hs-identifier hs-var"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972312"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621681972313"
	><span class="hs-identifier hs-var"
	  >name</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-383"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#LamAbs"
	><span class="hs-identifier hs-type"
	  >LamAbs</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972314"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972314"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972315"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621681972315"
	  ><span class="hs-identifier hs-var"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972316"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972316"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Name
-&gt; Term Name uni fun (Path, ann)
-&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; name -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#LamAbs"
	><span class="hs-identifier hs-var"
	  >LamAbs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972314"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621681972315"
	><span class="hs-identifier hs-var"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972316"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-384"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Apply"
	><span class="hs-identifier hs-type"
	  >Apply</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972317"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972317"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972318"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972318"
	  ><span class="hs-identifier hs-var"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972319"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972319"
	  ><span class="hs-identifier hs-var"
	    >arg</span
	    ></a
	  ></span
	></span
      ><span
      >       </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term Name uni fun (Path, ann)
-&gt; Term Name uni fun (Path, ann)
-&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Apply"
	><span class="hs-identifier hs-var"
	  >Apply</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972317"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972318"
	><span class="hs-identifier hs-var"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972319"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-385"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Force"
	><span class="hs-identifier hs-type"
	  >Force</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972320"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972320"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972321"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972321"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span
      >          </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Force"
	><span class="hs-identifier hs-var"
	  >Force</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972320"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972321"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-386"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Delay"
	><span class="hs-identifier hs-type"
	  >Delay</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972322"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972322"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972323"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972323"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span
      >          </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Delay"
	><span class="hs-identifier hs-var"
	  >Delay</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972322"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972323"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-387"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Constant"
	><span class="hs-identifier hs-type"
	  >Constant</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972324"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972324"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972325"
      ><span class="annot"
	><span class="annottext"
	  >Some (ValueOf uni)
</span
	  ><a href="#local-6989586621681972325"
	  ><span class="hs-identifier hs-var"
	    >val</span
	    ></a
	  ></span
	></span
      ><span
      >        </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Some (ValueOf uni) -&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Some (ValueOf uni) -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Constant"
	><span class="hs-identifier hs-var"
	  >Constant</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972324"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Some (ValueOf uni)
</span
	><a href="#local-6989586621681972325"
	><span class="hs-identifier hs-var"
	  >val</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-388"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Builtin"
	><span class="hs-identifier hs-type"
	  >Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972326"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972326"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972327"
      ><span class="annot"
	><span class="annottext"
	  >fun
</span
	  ><a href="#local-6989586621681972327"
	  ><span class="hs-identifier hs-var"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      >         </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; fun -&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; fun -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Builtin"
	><span class="hs-identifier hs-var"
	  >Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972326"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>fun
</span
	><a href="#local-6989586621681972327"
	><span class="hs-identifier hs-var"
	  >fun</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-389"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Error"
	><span class="hs-identifier hs-type"
	  >Error</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972328"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972328"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      >               </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann. ann -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Error"
	><span class="hs-identifier hs-var"
	  >Error</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972328"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-390"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Constr"
	><span class="hs-identifier hs-type"
	  >Constr</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972329"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972329"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972330"
      ><span class="annot"
	><span class="annottext"
	  >Word64
</span
	  ><a href="#local-6989586621681972330"
	  ><span class="hs-identifier hs-var"
	    >i</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972331"
      ><span class="annot"
	><span class="annottext"
	  >[Term Name uni fun (Path, ann)]
</span
	  ><a href="#local-6989586621681972331"
	  ><span class="hs-identifier hs-var"
	    >ts</span
	    ></a
	  ></span
	></span
      ><span
      >         </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Word64
-&gt; [Term Name uni fun (Path, ann)]
-&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann -&gt; Word64 -&gt; [Term name uni fun ann] -&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Constr"
	><span class="hs-identifier hs-var"
	  >Constr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972329"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><a href="#local-6989586621681972330"
	><span class="hs-identifier hs-var"
	  >i</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann))
-&gt; [Term Name uni fun (Path, ann)]
-&gt; [Term Name uni fun (Path, ann)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term Name uni fun (Path, ann)]
</span
	><a href="#local-6989586621681972331"
	><span class="hs-identifier hs-var"
	  >ts</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-391"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-type"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621681972332"
      ><span class="annot"
	><span class="annottext"
	  >(Path, ann)
</span
	  ><a href="#local-6989586621681972332"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972333"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972333"
	  ><span class="hs-identifier hs-var"
	    >scrut</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972334"
      ><span class="annot"
	><span class="annottext"
	  >Vector (Term Name uni fun (Path, ann))
</span
	  ><a href="#local-6989586621681972334"
	  ><span class="hs-identifier hs-var"
	    >branches</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
-&gt; Term Name uni fun (Path, ann)
-&gt; Vector (Term Name uni fun (Path, ann))
-&gt; Term Name uni fun (Path, ann)
forall name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Vector (Term name uni fun ann)
-&gt; Term name uni fun ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#Case"
	><span class="hs-identifier hs-var"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann)
</span
	><a href="#local-6989586621681972332"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972333"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972302"
	><span class="hs-identifier hs-var"
	  >mkLamApp</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term Name uni fun (Path, ann) -&gt; Term Name uni fun (Path, ann))
-&gt; Vector (Term Name uni fun (Path, ann))
-&gt; Vector (Term Name uni fun (Path, ann))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Vector (Term Name uni fun (Path, ann))
</span
	><a href="#local-6989586621681972334"
	><span class="hs-identifier hs-var"
	  >branches</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-392"
      ></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#otherwise"
	><span class="hs-identifier hs-var"
	  >otherwise</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972310"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-393"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-394"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621681972311"
      ><span class="annot"
	><span class="annottext"
	  >currPath :: Path
</span
	  ><a href="#local-6989586621681972311"
	  ><span class="hs-identifier hs-var hs-var"
	    >currPath</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Path, ann) -&gt; Path
forall a b. (a, b) -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Tuple.html#fst"
	><span class="hs-identifier hs-var"
	  >fst</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; (Path, ann)
forall name (uni :: * -&gt; *) fun ann. Term name uni fun ann -&gt; ann
</span
	><a href="UntypedPlutusCore.Core.Type.html#termAnn"
	><span class="hs-identifier hs-var"
	  >termAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972310"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-395"
      ></span
      ><span
      >
</span
      ><span id="line-396"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Generate a fresh variable for the common subexpression.</span
	></span
      ><span
      >
</span
      ><span id="line-397"
      ></span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#mkCseCandidate"
	><span class="hs-identifier hs-type"
	  >mkCseCandidate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-398"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621681971996"
      ><span class="annot"
	><a href="#local-6989586621681971996"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971997"
      ><span class="annot"
	><a href="#local-6989586621681971997"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971998"
      ><span class="annot"
	><a href="#local-6989586621681971998"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681971995"
      ><span class="annot"
	><a href="#local-6989586621681971995"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-399"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusCore.Quote.html#MonadQuote"
	><span class="hs-identifier hs-type"
	  >MonadQuote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971995"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-400"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971996"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971997"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#Path"
	><span class="hs-identifier hs-type"
	  >Path</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971998"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-401"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="#local-6989586621681971995"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="UntypedPlutusCore.Transform.Cse.html#CseCandidate"
	><span class="hs-identifier hs-type"
	  >CseCandidate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971996"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971997"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621681971998"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-402"
      ></span
      ><span id="mkCseCandidate"
      ><span class="annot"
	><span class="annottext"
	  >mkCseCandidate :: forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadQuote m =&gt;
Term Name uni fun (Path, ann) -&gt; m (CseCandidate uni fun ann)
</span
	  ><a href="UntypedPlutusCore.Transform.Cse.html#mkCseCandidate"
	  ><span class="hs-identifier hs-var hs-var"
	    >mkCseCandidate</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621681972349"
      ><span class="annot"
	><span class="annottext"
	  >Term Name uni fun (Path, ann)
</span
	  ><a href="#local-6989586621681972349"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
-&gt; Term Name uni fun ()
-&gt; Term Name uni fun (Path, ann)
-&gt; CseCandidate uni fun ann
forall (uni :: * -&gt; *) fun ann.
Name
-&gt; Term Name uni fun ()
-&gt; Term Name uni fun (Path, ann)
-&gt; CseCandidate uni fun ann
</span
	><a href="UntypedPlutusCore.Transform.Cse.html#CseCandidate"
	><span class="hs-identifier hs-var"
	  >CseCandidate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Name
 -&gt; Term Name uni fun ()
 -&gt; Term Name uni fun (Path, ann)
 -&gt; CseCandidate uni fun ann)
-&gt; m Name
-&gt; m (Term Name uni fun ()
      -&gt; Term Name uni fun (Path, ann) -&gt; CseCandidate uni fun ann)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; m Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m Name
</span
	><a href="PlutusCore.Quote.html#freshName"
	><span class="hs-identifier hs-var"
	  >freshName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;cse&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m (Term Name uni fun ()
   -&gt; Term Name uni fun (Path, ann) -&gt; CseCandidate uni fun ann)
-&gt; m (Term Name uni fun ())
-&gt; m (Term Name uni fun (Path, ann) -&gt; CseCandidate uni fun ann)
forall a b. m (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun () -&gt; m (Term Name uni fun ())
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; Term Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972349"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>m (Term Name uni fun (Path, ann) -&gt; CseCandidate uni fun ann)
-&gt; m (Term Name uni fun (Path, ann))
-&gt; m (CseCandidate uni fun ann)
forall a b. m (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann) -&gt; m (Term Name uni fun (Path, ann))
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term Name uni fun (Path, ann)
</span
	><a href="#local-6989586621681972349"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-403"
      ></span
      ></pre
    ></body
  ></html
>
