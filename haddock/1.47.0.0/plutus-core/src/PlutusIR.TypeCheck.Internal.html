<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><link rel="stylesheet" type="text/css" href="style.css"
     /><script type="text/javascript" src="highlight.js"
    ></script
    ></head
  ><body
  ><pre
    ><span class="hs-comment"
      >-- editorconfig-checker-disable-file</span
      ><span
      >
</span
      ><span id="line-2"
      ></span
      ><span class="hs-comment"
      >-- | The internal module of the type checker that defines the actual algorithms,</span
      ><span
      >
</span
      ><span id="line-3"
      ></span
      ><span class="hs-comment"
      >-- but not the user-facing API.</span
      ><span
      >
</span
      ><span id="line-4"
      ></span
      ><span
      >
</span
      ><span id="line-5"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE ConstraintKinds    #-}</span
      ><span
      >
</span
      ><span id="line-6"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE DerivingStrategies #-}</span
      ><span
      >
</span
      ><span id="line-7"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE LambdaCase         #-}</span
      ><span
      >
</span
      ><span id="line-8"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE OverloadedStrings  #-}</span
      ><span
      >
</span
      ><span id="line-9"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE RankNTypes         #-}</span
      ><span
      >
</span
      ><span id="line-10"
      ></span
      ><span class="hs-keyword"
      >module</span
      ><span
      > </span
      ><span class="hs-identifier"
      >PlutusIR.TypeCheck.Internal</span
      ><span
      >
</span
      ><span id="line-11"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#BuiltinTypes"
	><span class="hs-identifier"
	  >BuiltinTypes</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-12"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckConfig"
	><span class="hs-identifier"
	  >TypeCheckConfig</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-13"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
	><span class="hs-identifier"
	  >TypeCheckT</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-14"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#MonadKindCheck"
	><span class="hs-identifier"
	  >MonadKindCheck</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-15"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#MonadTypeCheck"
	><span class="hs-identifier"
	  >MonadTypeCheck</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-16"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#MonadTypeCheckPir"
	><span class="hs-identifier"
	  >MonadTypeCheckPir</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-17"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#tccBuiltinTypes"
	><span class="hs-identifier"
	  >tccBuiltinTypes</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-18"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Types.html#PirTCConfig"
	><span class="hs-identifier"
	  >PirTCConfig</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-19"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Types.html#AllowEscape"
	><span class="hs-identifier"
	  >AllowEscape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >..</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-20"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-21"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#checkTypeM"
	><span class="hs-identifier"
	  >checkTypeM</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-22"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#runTypeCheckM"
	><span class="hs-identifier"
	  >runTypeCheckM</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-23"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-24"
      ></span
      ><span
      >
</span
      ><span id="line-25"
      ></span
      ><span
      >
</span
      ><span id="line-26"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusPrelude.html"
	><span class="hs-identifier"
	  >PlutusPrelude</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-27"
      ></span
      ><span
      >
</span
      ><span id="line-28"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.html"
	><span class="hs-identifier"
	  >PlutusIR</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-29"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Datatype.html"
	><span class="hs-identifier"
	  >PlutusIR.Compiler.Datatype</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-30"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Provenance.html"
	><span class="hs-identifier"
	  >PlutusIR.Compiler.Provenance</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-31"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Types.html"
	><span class="hs-identifier"
	  >PlutusIR.Compiler.Types</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-32"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Error.html"
	><span class="hs-identifier"
	  >PlutusIR.Error</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-33"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Error.html"
	><span class="hs-identifier"
	  >PlutusIR.Error</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PIR</span
	></span
      ><span
      >
</span
      ><span id="line-34"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.MkPir.html"
	><span class="hs-identifier"
	  >PlutusIR.MkPir</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PIR</span
	></span
      ><span
      >
</span
      ><span id="line-35"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Transform.Rename.html"
	><span class="hs-identifier"
	  >PlutusIR.Transform.Rename</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-36"
      ></span
      ><span
      >
</span
      ><span id="line-37"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.html"
	><span class="hs-identifier"
	  >PlutusCore</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#toPatFuncKind"
	><span class="hs-identifier"
	  >toPatFuncKind</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#tyVarDeclName"
	><span class="hs-identifier"
	  >tyVarDeclName</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#typeAnn"
	><span class="hs-identifier"
	  >typeAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-38"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.html"
	><span class="hs-identifier"
	  >PlutusCore.Core</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PLC</span
	></span
      ><span
      >
</span
      ><span id="line-39"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Error.html"
	><span class="hs-identifier"
	  >PlutusCore.Error</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PLC</span
	></span
      ><span
      >
</span
      ><span id="line-40"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.MkPlc.html"
	><span class="hs-identifier"
	  >PlutusCore.MkPlc</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.MkPlc.html#mkIterTyFun"
	><span class="hs-identifier"
	  >mkIterTyFun</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-41"
      ></span
      ><span class="hs-comment"
      >-- we mirror inferTypeM, checkTypeM of plc-tc and extend it for plutus-ir terms</span
      ><span
      >
</span
      ><span id="line-42"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html"
	><span class="hs-identifier"
	  >PlutusCore.TypeCheck.Internal</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >hiding</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkTypeM"
	><span class="hs-identifier"
	  >checkTypeM</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier"
	  >inferTypeM</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#runTypeCheckM"
	><span class="hs-identifier"
	  >runTypeCheckM</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-43"
      ></span
      ><span
      >
</span
      ><span id="line-44"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Control.Monad.html"
	><span class="hs-identifier"
	  >Control.Monad</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#when"
	><span class="hs-identifier"
	  >when</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-45"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Except.html"
	><span class="hs-identifier"
	  >Control.Monad.Except</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-46"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.html"
	><span class="hs-identifier"
	  >Data.Text</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Text</span
	></span
      ><span
      >
</span
      ><span id="line-47"
      ></span
      ><span class="hs-comment"
      >-- Using @transformers@ rather than @mtl@, because the former doesn't impose the 'Monad' constraint</span
      ><span
      >
</span
      ><span id="line-48"
      ></span
      ><span class="hs-comment"
      >-- on 'local'.</span
      ><span
      >
</span
      ><span id="line-49"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Control.Lens</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="hs-operator"
	>(^?)</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-50"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html"
	><span class="hs-identifier"
	  >Control.Monad.Trans.Reader</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-51"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html"
	><span class="hs-identifier"
	  >Data.Foldable</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-52"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/Data.List.Extras.html"
	><span class="hs-identifier"
	  >Data.List.Extras</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/Data.List.Extras.html#wix"
	><span class="hs-identifier"
	  >wix</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-53"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/Universe.html"
	><span class="hs-identifier"
	  >Universe</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-54"
      ></span
      ><span
      >
</span
      ><span id="line-55"
      ></span
      ><span class="hs-comment"
      >{- Note [PLC Typechecker code reuse]
For PIR kind-checking, we reuse `checkKindM`, `inferKindM` directly from the PLC typechecker.
For PIR type-checking, we port the `checkTypeM` and `inferTypeM` from PLC typechecker.
The port is a direct copy, except for the modifications of `Term` to `PIR.Term`
and error type signatures and `throwError` to accommodate for the new pir type-errors.
These modifications are currently necessary since PIR.Term ADT /= PLC.Term ADT.
We then extend this ported `PIR.inferTypeM` with cases for inferring type of LetRec and LetNonRec.

See Note [Typing rules] of PlutusCore.TypeCheck.Internal for the notation of
inference rules, which appear in the comments.
-}</span
      ><span
      >
</span
      ><span id="line-66"
      ></span
      ><span
      >
</span
      ><span id="line-67"
      ></span
      ><span class="hs-comment"
      >{- Note [PIR vs Paper Syntax Difference]
Link to the paper: &lt;https://hydra.iohk.io/job/Cardano/plutus/linux.papers.unraveling-recursion/latest/download-by-type/doc-pdf/unraveling-recursion&gt;
FIR's syntax requires that the data-constructor is annotated with a *list of its argument types* (domain),
instead of requiring a single valid type T (usually in the form `dataconstr : arg1 -&gt; arg2 -&gt;... argn`)
The codomain is also left out of the syntax and implied to be of the type `[TypeCons tyarg1 tyarg2 ... tyargn]`
(what would be expected for a non-GADT). Finally, the leading &quot;forall type-parameters&quot; are implicit (since they are consider in scope).

PIR's syntax requires that a full (valid) type is written for the data-constructor, using the syntax for types
(the forall type-parameters remains implicit). This means that the codomain has to be be explicitly given in PIR.
To make sure that the PIR-user has written down the expected non-GADT type we do an extra codomainCheck.
This codomainCheck will have to be relaxed if/when PIR introduces GADTs.
More importantly, since the type for the PIR data-constructor can be any syntax-valid type,
the PIR user may have placed inside there a non-normalized type there. Currently, the PIR typechecker will
assume the types of all data-constructors are prior normalized *before* type-checking, otherwise
the PIR typechecking and PIR compilation will fail.
See Note [Normalization of data-constructors' types] at PlutusIR.Compiler.Datatype
-}</span
      ><span
      >
</span
      ><span id="line-84"
      ></span
      ><span
      >
</span
      ><span id="line-85"
      ></span
      ><span class="hs-comment"
      >{- Note [PIR vs Paper Escaping Types Difference]
Link to the paper: &lt;https://hydra.iohk.io/job/Cardano/plutus/linux.papers.unraveling-recursion/latest/download-by-type/doc-pdf/unraveling-recursion&gt;
In FIR paper's Fig.6, T-Let and T-LetRec rules dictate that: Gamma !- inTerm :: * for two reasons:
1. check (locally) that the kind of the in-term's inferred type is indeed *
2. ensure that the inferred type does not escaping its scope (hence Gamma)

This is in general true for the PIR implementation as well, except in the special
case when a Type is inferred for the top-level expression (`program`-level).
In contrast to (2), we allow such a &quot;top-level&quot; type to escape its scope;
the reasoning is that PIR programs with toplevel escaping types would behave correctly when they are translated down to PLC.
Even in the case where we let the type variables escape, (1) must still hold:
the kind of the escaping type should still be star. Unfortunately, in order to check that we'd have to use the variables
which are no longer in scope. So we skip the rule (Gamma !- inTermTopLevel :: *) in case of top-level inferred types.

The implementation has a user-configurable flag to let the typechecker know if the current term under examination
is at the program's &quot;top-level&quot; position, and thus allow its type to escape. The flag is automatically set to no-type-escape
when typechecking inside a let termbind's rhs term.
-}</span
      ><span
      >
</span
      ><span id="line-103"
      ></span
      ><span
      >
</span
      ><span id="line-104"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | a shorthand for our pir-specialized tc functions</span
	></span
      ><span
      >
</span
      ><span id="line-105"
      ></span
      ><span class="hs-keyword"
      >type</span
      ><span
      > </span
      ><span id="PirTCEnv"
      ><span class="annot"
	><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
	  ><span class="hs-identifier hs-var"
	    >PirTCEnv</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476099"
      ><span class="annot"
	><a href="#local-6989586621679476099"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476100"
      ><span class="annot"
	><a href="#local-6989586621679476100"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476101"
      ><span class="annot"
	><a href="#local-6989586621679476101"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
	><span class="hs-identifier hs-type"
	  >TypeCheckT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476099"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476100"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Types.html#PirTCConfig"
	><span class="hs-identifier hs-type"
	  >PirTCConfig</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476099"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476100"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476101"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-106"
      ></span
      ><span
      >
</span
      ><span id="line-107"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | The constraints that are required for type checking Plutus IR.</span
	></span
      ><span
      >
</span
      ><span id="line-108"
      ></span
      ><span class="hs-keyword"
      >type</span
      ><span
      > </span
      ><span id="MonadTypeCheckPir"
      ><span class="annot"
	><a href="PlutusIR.TypeCheck.Internal.html#MonadTypeCheckPir"
	  ><span class="hs-identifier hs-var"
	    >MonadTypeCheckPir</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476102"
      ><span class="annot"
	><a href="#local-6989586621679476102"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476103"
      ><span class="annot"
	><a href="#local-6989586621679476103"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476104"
      ><span class="annot"
	><a href="#local-6989586621679476104"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476105"
      ><span class="annot"
	><a href="#local-6989586621679476105"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-109"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#MonadTypeCheck"
	><span class="hs-identifier hs-type"
	  >MonadTypeCheck</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Error.html#Error"
	><span class="hs-identifier hs-type"
	  >PIR.Error</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476102"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476103"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476104"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476102"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476103"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476102"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476103"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476104"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679476105"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-110"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-111"
      ></span
      ><span
      >
</span
      ><span id="line-112"
      ></span
      ><span class="hs-comment"
      >-- ###########################</span
      ><span
      >
</span
      ><span id="line-113"
      ></span
      ><span class="hs-comment"
      >-- ## Port of Type checking ##</span
      ><span
      >
</span
      ><span id="line-114"
      ></span
      ><span class="hs-comment"
      >-- ##########################</span
      ><span
      >
</span
      ><span id="line-115"
      ></span
      ><span class="hs-comment"
      >--  Taken from `PlutusCore.Typecheck.Internal`</span
      ><span
      >
</span
      ><span id="line-116"
      ></span
      ><span
      >
</span
      ><span id="line-117"
      ></span
      ><span class="hs-comment"
      >-- See Note [Global uniqueness in the type checker].</span
      ><span
      >
</span
      ><span id="line-118"
      ></span
      ><span class="hs-comment"
      >-- See Note [Typing rules].</span
      ><span
      >
</span
      ><span id="line-119"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Check a 'Term' against a 'NormalizedType'.</span
	></span
      ><span
      >
</span
      ><span id="line-120"
      ></span
      ><span id="local-6989586621679475636"
      ><span id="local-6989586621679475637"
	><span id="local-6989586621679475638"
	  ><span id="local-6989586621679475639"
	    ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#checkTypeM"
		><span class="hs-identifier hs-type"
		  >checkTypeM</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-121"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#MonadTypeCheckPir"
		><span class="hs-identifier hs-type"
		  >MonadTypeCheckPir</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475636"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475637"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475638"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475639"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-122"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475638"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-123"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475636"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475637"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475638"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-124"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
		><span class="hs-identifier hs-type"
		  >Normalized</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
		><span class="hs-identifier hs-type"
		  >Type</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475636"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="hs-special"
	      >)</span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      >
</span
	      ><span id="line-125"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
		><span class="hs-identifier hs-type"
		  >PirTCEnv</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475636"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475637"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475639"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-126"
      ></span
      ><span
      >
</span
      ><span id="line-127"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- term : vTermTy]    vTermTy ~ vTy</span
      ><span
      >
</span
      ><span id="line-128"
      ></span
      ><span class="hs-comment"
      >-- ---------------------------------------------</span
      ><span
      >
</span
      ><span id="line-129"
      ></span
      ><span class="hs-comment"
      >-- [check| G !- term : vTy]</span
      ><span
      >
</span
      ><span id="line-130"
      ></span
      ><span id="checkTypeM"
      ><span class="annot"
	><span class="annottext"
	  >checkTypeM :: forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m ()
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#checkTypeM"
	  ><span class="hs-identifier hs-var hs-var"
	    >checkTypeM</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476129"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476129"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476130"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476130"
	  ><span class="hs-identifier hs-var"
	    >term</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476131"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476131"
	  ><span class="hs-identifier hs-var"
	    >vTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-131"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476132"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476132"
	  ><span class="hs-identifier hs-var"
	    >vTermTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476130"
	><span class="hs-identifier hs-var"
	  >term</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-132"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#when"
	><span class="hs-identifier hs-var"
	  >when</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476132"
	><span class="hs-identifier hs-var"
	  >vTermTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ()) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%2F%3D"
	><span class="hs-operator hs-var"
	  >/=</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476131"
	><span class="hs-identifier hs-var"
	  >vTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ())
-&gt; PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-133"
      ></span
      ><span
      >        </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679476134"
      ><span class="annot"
	><span class="annottext"
	  >expectedVTy :: ExpectedShapeOr (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476134"
	  ><span class="hs-identifier hs-var hs-var"
	    >expectedVTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni () -&gt; ExpectedShapeOr (Type TyName uni ())
forall a. a -&gt; ExpectedShapeOr a
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#ExpectedExact"
	><span class="hs-identifier hs-var"
	  >ExpectedExact</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni () -&gt; ExpectedShapeOr (Type TyName uni ()))
-&gt; Type TyName uni () -&gt; ExpectedShapeOr (Type TyName uni ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476131"
	><span class="hs-identifier hs-var"
	  >vTy</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-134"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann -&gt; PirTCEnv uni fun m ()
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann -&gt; PirTCEnv uni fun m ())
-&gt; Error uni fun ann -&gt; PirTCEnv uni fun m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476129"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476130"
	><span class="hs-identifier hs-var"
	  >term</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
</span
	><a href="#local-6989586621679476134"
	><span class="hs-identifier hs-var"
	  >expectedVTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476132"
	><span class="hs-identifier hs-var"
	  >vTermTy</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-135"
      ></span
      ><span
      >
</span
      ><span id="line-136"
      ></span
      ><span class="hs-comment"
      >-- See Note [Global uniqueness in the type checker].</span
      ><span
      >
</span
      ><span id="line-137"
      ></span
      ><span class="hs-comment"
      >-- See Note [Typing rules].</span
      ><span
      >
</span
      ><span id="line-138"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Synthesize the type of a term, returning a normalized type.</span
	></span
      ><span
      >
</span
      ><span id="line-139"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-type"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-140"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679475682"
      ><span class="annot"
	><a href="#local-6989586621679475682"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475679"
      ><span class="annot"
	><a href="#local-6989586621679475679"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475680"
      ><span class="annot"
	><a href="#local-6989586621679475680"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475681"
      ><span class="annot"
	><a href="#local-6989586621679475681"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-141"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#MonadTypeCheckPir"
	><span class="hs-identifier hs-type"
	  >MonadTypeCheckPir</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475679"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475680"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475681"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475682"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-142"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475679"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475680"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475681"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
	><span class="hs-identifier hs-type"
	  >PirTCEnv</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475679"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475680"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475682"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
	><span class="hs-identifier hs-type"
	  >Normalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475679"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-143"
      ></span
      ><span class="hs-comment"
      >-- c : vTy</span
      ><span
      >
</span
      ><span id="line-144"
      ></span
      ><span class="hs-comment"
      >-- -------------------------</span
      ><span
      >
</span
      ><span id="line-145"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- con c : vTy]</span
      ><span
      >
</span
      ><span id="line-146"
      ></span
      ><span id="inferTypeM"
      ><span class="annot"
	><span class="annottext"
	  >inferTypeM :: forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	  ><span class="hs-identifier hs-var hs-var"
	    >inferTypeM</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Constant"
	><span class="hs-identifier hs-type"
	  >Constant</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/some-1.0.6/docs/src/Data.Some.Newtype.html#Some"
	><span class="hs-identifier hs-type"
	  >Some</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/Universe.Core.html#ValueOf"
	><span class="hs-identifier hs-type"
	  >ValueOf</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476317"
      ><span class="annot"
	><span class="annottext"
	  >uni (Esc a)
</span
	  ><a href="#local-6989586621679476317"
	  ><span class="hs-identifier hs-var"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-147"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- See Note [Normalization of built-in types].</span
      ><span
      >
</span
      ><span id="line-148"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ()
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; uni (Esc a) -&gt; Type TyName uni ()
forall k (a :: k) (uni :: * -&gt; *) tyname ann.
ann -&gt; uni (Esc a) -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#mkTyBuiltinOf"
	><span class="hs-identifier hs-var"
	  >PIR.mkTyBuiltinOf</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>uni (Esc a)
</span
	><a href="#local-6989586621679476317"
	><span class="hs-identifier hs-var"
	  >uni</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-149"
      ></span
      ><span
      >
</span
      ><span id="line-150"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- bi : vTy]</span
      ><span
      >
</span
      ><span id="line-151"
      ></span
      ><span class="hs-comment"
      >-- ------------------------------</span
      ><span
      >
</span
      ><span id="line-152"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- builtin bi : vTy]</span
      ><span
      >
</span
      ><span id="line-153"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Builtin"
	><span class="hs-identifier hs-type"
	  >Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476321"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476321"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476322"
      ><span class="annot"
	><span class="annottext"
	  >fun
</span
	  ><a href="#local-6989586621679476322"
	  ><span class="hs-identifier hs-var"
	    >bn</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >         </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-154"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT
   (TypeError (Term TyName Name uni fun ()) uni fun ann)
   m
   (Normalized (Type TyName uni ()))
 -&gt; m (Normalized (Type TyName uni ())))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann)
     m
     (Normalized (Type TyName uni ()))
-&gt; m (Normalized (Type TyName uni ()))
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   (Normalized (Type TyName uni ()))
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; fun
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadTypeCheck (TypeError term uni fun ann) term uni fun ann m,
 HasTypeCheckConfig cfg uni fun) =&gt;
ann
-&gt; fun
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ()))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#lookupBuiltinM"
	><span class="hs-identifier hs-var"
	  >lookupBuiltinM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476321"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>fun
</span
	><a href="#local-6989586621679476322"
	><span class="hs-identifier hs-var"
	  >bn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-155"
      ></span
      ><span
      >
</span
      ><span id="line-156"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- v : ty]    ty ~&gt; vTy</span
      ><span
      >
</span
      ><span id="line-157"
      ></span
      ><span class="hs-comment"
      >-- ---------------------------------</span
      ><span
      >
</span
      ><span id="line-158"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- var v : vTy]</span
      ><span
      >
</span
      ><span id="line-159"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Var"
	><span class="hs-identifier hs-type"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476327"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476327"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476328"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621679476328"
	  ><span class="hs-identifier hs-var"
	    >name</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >           </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-160"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT
   (TypeError (Term TyName Name uni fun ()) uni fun ann)
   m
   (Normalized (Type TyName uni ()))
 -&gt; m (Normalized (Type TyName uni ())))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann)
     m
     (Normalized (Type TyName uni ()))
-&gt; m (Normalized (Type TyName uni ()))
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   (Normalized (Type TyName uni ()))
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Name
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadTypeCheck (TypeError term uni fun ann) term uni fun ann m,
 HasTypeCheckConfig cfg uni fun) =&gt;
ann
-&gt; Name
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ()))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#lookupVarM"
	><span class="hs-identifier hs-var"
	  >lookupVarM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476327"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679476328"
	><span class="hs-identifier hs-var"
	  >name</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-161"
      ></span
      ><span
      >
</span
      ><span id="line-162"
      ></span
      ><span class="hs-comment"
      >-- [check| G !- dom :: *]    dom ~&gt; vDom    [infer| G , n : dom !- body : vCod]</span
      ><span
      >
</span
      ><span id="line-163"
      ></span
      ><span class="hs-comment"
      >-- ----------------------------------------------------------------------------</span
      ><span
      >
</span
      ><span id="line-164"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- lam n dom body : vDom -&gt; vCod]</span
      ><span
      >
</span
      ><span id="line-165"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#LamAbs"
	><span class="hs-identifier hs-type"
	  >LamAbs</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476331"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476331"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476332"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621679476332"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476333"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476333"
	  ><span class="hs-identifier hs-var"
	    >dom</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476334"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476334"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >  </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-166"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
 -&gt; m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
-&gt; m ()
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   ()
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476331"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476333"
	><span class="hs-identifier hs-var"
	  >dom</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-167"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476337"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476337"
	  ><span class="hs-identifier hs-var"
	    >vDom</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT
   (TypeError (Term TyName Name uni fun ()) uni fun ann)
   m
   (Normalized (Type TyName uni ()))
 -&gt; m (Normalized (Type TyName uni ())))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann)
     m
     (Normalized (Type TyName uni ()))
-&gt; m (Normalized (Type TyName uni ()))
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   (Normalized (Type TyName uni ()))
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476333"
	><span class="hs-identifier hs-var"
	  >dom</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-168"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>()
-&gt; Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyFun"
	><span class="hs-identifier hs-var"
	  >TyFun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     m
     (Normalized (Type TyName uni () -&gt; Type TyName uni ()))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *) a b.
(Functor f1, Functor f2) =&gt;
(a -&gt; b) -&gt; f1 (f2 a) -&gt; f1 (f2 b)
</span
	><a href="../../plutus-core/src/PlutusPrelude.html#%3C%3C%24%3E%3E"
	><span class="hs-operator hs-var"
	  >&lt;&lt;$&gt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476337"
	><span class="hs-identifier hs-var"
	  >vDom</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ReaderT
  (TypeCheckEnv uni fun (PirTCConfig uni fun))
  m
  (Normalized (Type TyName uni () -&gt; Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *) a b.
(Applicative f1, Applicative f2) =&gt;
f1 (f2 (a -&gt; b)) -&gt; f1 (f2 a) -&gt; f1 (f2 b)
</span
	><a href="../../plutus-core/src/PlutusPrelude.html#%3C%3C%2A%3E%3E"
	><span class="hs-operator hs-var"
	  >&lt;&lt;*&gt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#withVar"
	><span class="hs-identifier hs-var"
	  >withVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679476332"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476337"
	><span class="hs-identifier hs-var"
	  >vDom</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476334"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-169"
      ></span
      ><span
      >
</span
      ><span id="line-170"
      ></span
      ><span class="hs-comment"
      >-- [infer| G , n :: nK !- body : vBodyTy]</span
      ><span
      >
</span
      ><span id="line-171"
      ></span
      ><span class="hs-comment"
      >-- ---------------------------------------------------</span
      ><span
      >
</span
      ><span id="line-172"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- abs n nK body : all (n :: nK) vBodyTy]</span
      ><span
      >
</span
      ><span id="line-173"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TyAbs"
	><span class="hs-identifier hs-type"
	  >TyAbs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476343"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621679476343"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476344"
      ><span class="annot"
	><span class="annottext"
	  >Kind ann
</span
	  ><a href="#local-6989586621679476344"
	  ><span class="hs-identifier hs-var"
	    >nK</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476345"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476345"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >      </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-174"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679476348"
      ><span class="annot"
	><span class="annottext"
	  >nK_ :: Kind ()
</span
	  ><a href="#local-6989586621679476348"
	  ><span class="hs-identifier hs-var hs-var"
	    >nK_</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann -&gt; Kind ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621679476344"
	><span class="hs-identifier hs-var"
	  >nK</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-175"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; TyName -&gt; Kind () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyForall"
	><span class="hs-identifier hs-var"
	  >TyForall</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621679476343"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ()
</span
	><a href="#local-6989586621679476348"
	><span class="hs-identifier hs-var"
	  >nK_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni () -&gt; Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *) a b.
(Functor f1, Functor f2) =&gt;
(a -&gt; b) -&gt; f1 (f2 a) -&gt; f1 (f2 b)
</span
	><a href="../../plutus-core/src/PlutusPrelude.html#%3C%3C%24%3E%3E"
	><span class="hs-operator hs-var"
	  >&lt;&lt;$&gt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
-&gt; Kind ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
TyName
-&gt; Kind ()
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#withTyVar"
	><span class="hs-identifier hs-var"
	  >withTyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621679476343"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ()
</span
	><a href="#local-6989586621679476348"
	><span class="hs-identifier hs-var"
	  >nK_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476345"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-176"
      ></span
      ><span
      >
</span
      ><span id="line-177"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- fun : vDom -&gt; vCod]    [check| G !- arg : vDom]</span
      ><span
      >
</span
      ><span id="line-178"
      ></span
      ><span class="hs-comment"
      >-- ------------------------------------------------------------</span
      ><span
      >
</span
      ><span id="line-179"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- fun arg : vCod]</span
      ><span
      >
</span
      ><span id="line-180"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Apply"
	><span class="hs-identifier hs-type"
	  >Apply</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476352"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476352"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476353"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476353"
	  ><span class="hs-identifier hs-var"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476354"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476354"
	  ><span class="hs-identifier hs-var"
	    >arg</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >      </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-181"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476355"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476355"
	  ><span class="hs-identifier hs-var"
	    >vFunTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476353"
	><span class="hs-identifier hs-var"
	  >fun</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-182"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476355"
	><span class="hs-identifier hs-var"
	  >vFunTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-183"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyFun"
	><span class="hs-identifier hs-type"
	  >TyFun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476356"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ()
</span
	  ><a href="#local-6989586621679476356"
	  ><span class="hs-identifier hs-var"
	    >vDom</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476357"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ()
</span
	  ><a href="#local-6989586621679476357"
	  ><span class="hs-identifier hs-var"
	    >vCod</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-184"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- Subparts of a normalized type, so normalized.</span
      ><span
      >
</span
      ><span id="line-185"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkTypeM"
	><span class="hs-identifier hs-var"
	  >checkTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476352"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476354"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Normalized (Type TyName uni ())
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; Normalized (Type TyName uni ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
	><span class="hs-identifier hs-var"
	  >Normalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><a href="#local-6989586621679476356"
	><span class="hs-identifier hs-var"
	  >vDom</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-186"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Normalized (Type TyName uni ())
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
	><span class="hs-identifier hs-var"
	  >Normalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><a href="#local-6989586621679476357"
	><span class="hs-identifier hs-var"
	  >vCod</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-187"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-188"
      ></span
      ><span
      >            </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679476363"
      ><span class="annot"
	><span class="annottext"
	  >expectedTyFun :: ExpectedShapeOr a
</span
	  ><a href="#local-6989586621679476363"
	  ><span class="hs-identifier hs-var hs-var"
	    >expectedTyFun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; [Text] -&gt; ExpectedShapeOr a
forall a. Text -&gt; [Text] -&gt; ExpectedShapeOr a
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#ExpectedShape"
	><span class="hs-identifier hs-var"
	  >ExpectedShape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;fun k l&quot;</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;k&quot;</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;l&quot;</span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-189"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Error uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476352"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476353"
	><span class="hs-identifier hs-var"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
forall {a}. ExpectedShapeOr a
</span
	><a href="#local-6989586621679476363"
	><span class="hs-identifier hs-var"
	  >expectedTyFun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476355"
	><span class="hs-identifier hs-var"
	  >vFunTy</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-190"
      ></span
      ><span
      >
</span
      ><span id="line-191"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- body : all (n :: nK) vCod]    [check| G !- ty :: tyK]    ty ~&gt; vTy</span
      ><span
      >
</span
      ><span id="line-192"
      ></span
      ><span class="hs-comment"
      >-- -------------------------------------------------------------------------------</span
      ><span
      >
</span
      ><span id="line-193"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- body {ty} : NORM ([vTy / n] vCod)]</span
      ><span
      >
</span
      ><span id="line-194"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TyInst"
	><span class="hs-identifier hs-type"
	  >TyInst</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476366"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476366"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476367"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476367"
	  ><span class="hs-identifier hs-var"
	    >body</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476368"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476368"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >     </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-195"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476369"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476369"
	  ><span class="hs-identifier hs-var"
	    >vBodyTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476367"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-196"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476369"
	><span class="hs-identifier hs-var"
	  >vBodyTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-197"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyForall"
	><span class="hs-identifier hs-type"
	  >TyForall</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476370"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621679476370"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476371"
      ><span class="annot"
	><span class="annottext"
	  >Kind ()
</span
	  ><a href="#local-6989586621679476371"
	  ><span class="hs-identifier hs-var"
	    >nK</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476372"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ()
</span
	  ><a href="#local-6989586621679476372"
	  ><span class="hs-identifier hs-var"
	    >vCod</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-198"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
 -&gt; m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
-&gt; m ()
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   ()
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476366"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476368"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ()
</span
	><a href="#local-6989586621679476371"
	><span class="hs-identifier hs-var"
	  >nK</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-199"
      ></span
      ><span
      >            </span
      ><span id="local-6989586621679476373"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476373"
	  ><span class="hs-identifier hs-var"
	    >vTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ()
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476368"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-200"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TyName
-&gt; Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) fun cfg.
MonadNormalizeType uni m =&gt;
Normalized (Type TyName uni ())
-&gt; TyName
-&gt; Type TyName uni ()
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ()))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#substNormalizeTypeM"
	><span class="hs-identifier hs-var"
	  >substNormalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476373"
	><span class="hs-identifier hs-var"
	  >vTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621679476370"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><a href="#local-6989586621679476372"
	><span class="hs-identifier hs-var"
	  >vCod</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-201"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-202"
      ></span
      ><span
      >            </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679476379"
      ><span class="annot"
	><span class="annottext"
	  >expectedTyForall :: ExpectedShapeOr a
</span
	  ><a href="#local-6989586621679476379"
	  ><span class="hs-identifier hs-var hs-var"
	    >expectedTyForall</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; [Text] -&gt; ExpectedShapeOr a
forall a. Text -&gt; [Text] -&gt; ExpectedShapeOr a
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#ExpectedShape"
	><span class="hs-identifier hs-var"
	  >ExpectedShape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;all a kind body&quot;</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;a&quot;</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;kind&quot;</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;body&quot;</span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-203"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Error uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476366"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476367"
	><span class="hs-identifier hs-var"
	  >body</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
forall {a}. ExpectedShapeOr a
</span
	><a href="#local-6989586621679476379"
	><span class="hs-identifier hs-var"
	  >expectedTyForall</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476369"
	><span class="hs-identifier hs-var"
	  >vBodyTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-204"
      ></span
      ><span
      >
</span
      ><span id="line-205"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- arg :: k]    [check| G !- pat :: (k -&gt; *) -&gt; k -&gt; *]    pat ~&gt; vPat    arg ~&gt; vArg</span
      ><span
      >
</span
      ><span id="line-206"
      ></span
      ><span class="hs-comment"
      >-- [check| G !- term : NORM (vPat (\(a :: k) -&gt; ifix vPat a) vArg)]</span
      ><span
      >
</span
      ><span id="line-207"
      ></span
      ><span class="hs-comment"
      >-- -----------------------------------------------------------------------------------------------</span
      ><span
      >
</span
      ><span id="line-208"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- iwrap pat arg term : ifix vPat vArg]</span
      ><span
      >
</span
      ><span id="line-209"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#IWrap"
	><span class="hs-identifier hs-type"
	  >IWrap</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476381"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476381"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476382"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476382"
	  ><span class="hs-identifier hs-var"
	    >pat</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476383"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476383"
	  ><span class="hs-identifier hs-var"
	    >arg</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476384"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476384"
	  ><span class="hs-identifier hs-var"
	    >term</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-210"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476385"
      ><span class="annot"
	><span class="annottext"
	  >Kind ()
</span
	  ><a href="#local-6989586621679476385"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT
   (TypeError (Term TyName Name uni fun ()) uni fun ann) m (Kind ())
 -&gt; m (Kind ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Kind ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m (Kind ())
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m (Kind ())
-&gt; m (Kind ())
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   (Kind ())
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun)) m (Kind ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Kind ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Kind ())
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
Type TyName uni ann -&gt; TypeCheckT uni fun cfg m (Kind ())
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#inferKindM"
	><span class="hs-identifier hs-var"
	  >inferKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476383"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-211"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
 -&gt; m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
-&gt; m ()
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   ()
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476381"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476382"
	><span class="hs-identifier hs-var"
	  >pat</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind () -&gt; Kind ()
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#toPatFuncKind"
	><span class="hs-identifier hs-var"
	  >toPatFuncKind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ()
</span
	><a href="#local-6989586621679476385"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-212"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476387"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476387"
	  ><span class="hs-identifier hs-var"
	    >vPat</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ()
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476382"
	><span class="hs-identifier hs-var"
	  >pat</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-213"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476388"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476388"
	  ><span class="hs-identifier hs-var"
	    >vArg</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ()
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476383"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-214"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkTypeM"
	><span class="hs-identifier hs-var"
	  >checkTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476381"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476384"
	><span class="hs-identifier hs-var"
	  >term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Normalized (Type TyName uni ())
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3D%3C%3C"
	><span class="hs-operator hs-var"
	  >=&lt;&lt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) fun cfg.
MonadNormalizeType uni m =&gt;
Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ()))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#unfoldIFixOf"
	><span class="hs-identifier hs-var"
	  >unfoldIFixOf</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476387"
	><span class="hs-identifier hs-var"
	  >vPat</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476388"
	><span class="hs-identifier hs-var"
	  >vArg</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ()
</span
	><a href="#local-6989586621679476385"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-215"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Normalized (Type TyName uni ())
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>()
-&gt; Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyIFix"
	><span class="hs-identifier hs-var"
	  >TyIFix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni () -&gt; Type TyName uni ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476387"
	><span class="hs-identifier hs-var"
	  >vPat</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni () -&gt; Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
forall a b. Normalized (a -&gt; b) -&gt; Normalized a -&gt; Normalized b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476388"
	><span class="hs-identifier hs-var"
	  >vArg</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-216"
      ></span
      ><span
      >
</span
      ><span id="line-217"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- term : ifix vPat vArg]    [infer| G !- vArg :: k]</span
      ><span
      >
</span
      ><span id="line-218"
      ></span
      ><span class="hs-comment"
      >-- -----------------------------------------------------------------------</span
      ><span
      >
</span
      ><span id="line-219"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- unwrap term : NORM (vPat (\(a :: k) -&gt; ifix vPat a) vArg)]</span
      ><span
      >
</span
      ><span id="line-220"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Unwrap"
	><span class="hs-identifier hs-type"
	  >Unwrap</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476394"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476394"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476395"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476395"
	  ><span class="hs-identifier hs-var"
	    >term</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >        </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-221"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476396"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476396"
	  ><span class="hs-identifier hs-var"
	    >vTermTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476395"
	><span class="hs-identifier hs-var"
	  >term</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-222"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476396"
	><span class="hs-identifier hs-var"
	  >vTermTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-223"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyIFix"
	><span class="hs-identifier hs-type"
	  >TyIFix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476397"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ()
</span
	  ><a href="#local-6989586621679476397"
	  ><span class="hs-identifier hs-var"
	    >vPat</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476398"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ()
</span
	  ><a href="#local-6989586621679476398"
	  ><span class="hs-identifier hs-var"
	    >vArg</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-224"
      ></span
      ><span
      >            </span
      ><span id="local-6989586621679476399"
      ><span class="annot"
	><span class="annottext"
	  >Kind ()
</span
	  ><a href="#local-6989586621679476399"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT
   (TypeError (Term TyName Name uni fun ()) uni fun ann) m (Kind ())
 -&gt; m (Kind ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Kind ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m (Kind ())
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m (Kind ())
-&gt; m (Kind ())
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   (Kind ())
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun)) m (Kind ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Kind ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Kind ())
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
Type TyName uni ann -&gt; TypeCheckT uni fun cfg m (Kind ())
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#inferKindM"
	><span class="hs-identifier hs-var"
	  >inferKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      (Kind ()))
-&gt; Type TyName uni ann
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476394"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Type TyName uni () -&gt; Type TyName uni ann
forall a b. a -&gt; Type TyName uni b -&gt; Type TyName uni a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%24"
	><span class="hs-operator hs-var"
	  >&lt;$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><a href="#local-6989586621679476398"
	><span class="hs-identifier hs-var"
	  >vArg</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-225"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- Subparts of a normalized type, so normalized.</span
      ><span
      >
</span
      ><span id="line-226"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) fun cfg.
MonadNormalizeType uni m =&gt;
Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ()))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#unfoldIFixOf"
	><span class="hs-identifier hs-var"
	  >unfoldIFixOf</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
	><span class="hs-identifier hs-var"
	  >Normalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><a href="#local-6989586621679476397"
	><span class="hs-identifier hs-var"
	  >vPat</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
	><span class="hs-identifier hs-var"
	  >Normalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><a href="#local-6989586621679476398"
	><span class="hs-identifier hs-var"
	  >vArg</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ()
</span
	><a href="#local-6989586621679476399"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-227"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      >                  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-228"
      ></span
      ><span
      >            </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679476404"
      ><span class="annot"
	><span class="annottext"
	  >expectedTyIFix :: ExpectedShapeOr a
</span
	  ><a href="#local-6989586621679476404"
	  ><span class="hs-identifier hs-var hs-var"
	    >expectedTyIFix</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; [Text] -&gt; ExpectedShapeOr a
forall a. Text -&gt; [Text] -&gt; ExpectedShapeOr a
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#ExpectedShape"
	><span class="hs-identifier hs-var"
	  >ExpectedShape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;ifix pat arg&quot;</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;pat&quot;</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;arg&quot;</span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-229"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Error uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476394"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476395"
	><span class="hs-identifier hs-var"
	  >term</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
forall {a}. ExpectedShapeOr a
</span
	><a href="#local-6989586621679476404"
	><span class="hs-identifier hs-var"
	  >expectedTyIFix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476396"
	><span class="hs-identifier hs-var"
	  >vTermTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-230"
      ></span
      ><span
      >
</span
      ><span id="line-231"
      ></span
      ><span class="hs-comment"
      >-- [check| G !- ty :: *]    ty ~&gt; vTy</span
      ><span
      >
</span
      ><span id="line-232"
      ></span
      ><span class="hs-comment"
      >-- ----------------------------------</span
      ><span
      >
</span
      ><span id="line-233"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- error ty : vTy]</span
      ><span
      >
</span
      ><span id="line-234"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Error"
	><span class="hs-identifier hs-type"
	  >Error</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476406"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476406"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476407"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476407"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >           </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-235"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
 -&gt; m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
-&gt; m ()
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   ()
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476406"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476407"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-236"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ()
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476407"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-237"
      ></span
      ><span
      >
</span
      ><span id="line-238"
      ></span
      ><span class="hs-comment"
      >-- resTy ~&gt; vResTy     vResTy = sop s_0 ... s_i ... s_n</span
      ><span
      >
</span
      ><span id="line-239"
      ></span
      ><span class="hs-comment"
      >-- s_i = [p_i_0 ... p_i_m]   [check| G !- t_0 : p_i_0] ... [check| G !- t_m : p_i_m]</span
      ><span
      >
</span
      ><span id="line-240"
      ></span
      ><span class="hs-comment"
      >-- ---------------------------------------------------------------------------------</span
      ><span
      >
</span
      ><span id="line-241"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- constr resTy i t_0 ... t_m : vResTy]</span
      ><span
      >
</span
      ><span id="line-242"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476408"
      ><span class="annot"
	><span class="annottext"
	  >t :: Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476408"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Constr"
	><span class="hs-identifier hs-type"
	  >Constr</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476410"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476410"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476411"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476411"
	  ><span class="hs-identifier hs-var"
	    >resTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476412"
      ><span class="annot"
	><span class="annottext"
	  >Word64
</span
	  ><a href="#local-6989586621679476412"
	  ><span class="hs-identifier hs-var"
	    >i</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476413"
      ><span class="annot"
	><span class="annottext"
	  >[Term TyName Name uni fun ann]
</span
	  ><a href="#local-6989586621679476413"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-243"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476414"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476414"
	  ><span class="hs-identifier hs-var"
	    >vResTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ()
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476411"
	><span class="hs-identifier hs-var"
	  >resTy</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-244"
      ></span
      ><span
      >
</span
      ><span id="line-245"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- We don't know exactly what to expect, we only know what the i-th sum should look like, so we</span
      ><span
      >
</span
      ><span id="line-246"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- assert that we should have some types in the sum up to there, and then the known product type.</span
      ><span
      >
</span
      ><span id="line-247"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679476426"
      ><span class="annot"
	><span class="annottext"
	  >prodPrefix :: [Text]
</span
	  ><a href="#local-6989586621679476426"
	  ><span class="hs-identifier hs-var hs-var"
	    >prodPrefix</span
	    ></a
	  ></span
	></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Word64 -&gt; Text) -&gt; [Word64] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#map"
	><span class="hs-identifier hs-var"
	  >map</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679476427"
      ><span class="annot"
	><span class="annottext"
	  >Word64
</span
	  ><a href="#local-6989586621679476427"
	  ><span class="hs-identifier hs-var"
	    >j</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;prod_&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String -&gt; Text
</span
	><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.Internal.html#pack"
	><span class="hs-identifier hs-var"
	  >Text.pack</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Word64 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#show"
	><span class="hs-identifier hs-var"
	  >show</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><a href="#local-6989586621679476427"
	><span class="hs-identifier hs-var"
	  >j</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><span class="hs-number"
	>0</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >..</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><a href="#local-6989586621679476412"
	><span class="hs-identifier hs-var"
	  >i</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Num.html#-"
	><span class="hs-glyph hs-var"
	  >-</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-248"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679476441"
      ><span class="annot"
	><span class="annottext"
	  >fields :: [Text]
</span
	  ><a href="#local-6989586621679476441"
	  ><span class="hs-identifier hs-var hs-var"
	    >fields</span
	    ></a
	  ></span
	></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Int -&gt; Text) -&gt; [Int] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#map"
	><span class="hs-identifier hs-var"
	  >map</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679476442"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679476442"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;field_&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String -&gt; Text
</span
	><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.Internal.html#pack"
	><span class="hs-identifier hs-var"
	  >Text.pack</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#show"
	><span class="hs-identifier hs-var"
	  >show</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679476442"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>0</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >..</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term TyName Name uni fun ann] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term TyName Name uni fun ann]
</span
	><a href="#local-6989586621679476413"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Num.html#-"
	><span class="hs-glyph hs-var"
	  >-</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-249"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679476449"
      ><span class="annot"
	><span class="annottext"
	  >prod_i :: Text
</span
	  ><a href="#local-6989586621679476449"
	  ><span class="hs-identifier hs-var hs-var"
	    >prod_i</span
	    ></a
	  ></span
	></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;[&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; [Text] -&gt; Text
</span
	><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.html#intercalate"
	><span class="hs-identifier hs-var"
	  >Text.intercalate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot; &quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text]
</span
	><a href="#local-6989586621679476441"
	><span class="hs-identifier hs-var"
	  >fields</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;]&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-250"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679476461"
      ><span class="annot"
	><span class="annottext"
	  >shape :: Text
</span
	  ><a href="#local-6989586621679476461"
	  ><span class="hs-identifier hs-var hs-var"
	    >shape</span
	    ></a
	  ></span
	></span
      ><span
      >       </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;sop &quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Text -&gt; Text) -&gt; [Text] -&gt; Text
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#foldMap"
	><span class="hs-identifier hs-var"
	  >foldMap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot; &quot;</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text]
</span
	><a href="#local-6989586621679476426"
	><span class="hs-identifier hs-var"
	  >prodPrefix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><a href="#local-6989586621679476449"
	><span class="hs-identifier hs-var"
	  >prod_i</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot; ... prod_n&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-251"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679476464"
      ><span class="annot"
	><span class="annottext"
	  >vars :: [Text]
</span
	  ><a href="#local-6989586621679476464"
	  ><span class="hs-identifier hs-var hs-var"
	    >vars</span
	    ></a
	  ></span
	></span
      ><span
      >        </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text]
</span
	><a href="#local-6989586621679476426"
	><span class="hs-identifier hs-var"
	  >prodPrefix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text] -&gt; [Text] -&gt; [Text]
forall a. [a] -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%2B%2B"
	><span class="hs-operator hs-var"
	  >++</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text]
</span
	><a href="#local-6989586621679476441"
	><span class="hs-identifier hs-var"
	  >fields</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text] -&gt; [Text] -&gt; [Text]
forall a. [a] -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%2B%2B"
	><span class="hs-operator hs-var"
	  >++</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;prod_n&quot;</span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-252"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679476465"
      ><span class="annot"
	><span class="annottext"
	  >expectedSop :: ExpectedShapeOr a
</span
	  ><a href="#local-6989586621679476465"
	  ><span class="hs-identifier hs-var hs-var"
	    >expectedSop</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; [Text] -&gt; ExpectedShapeOr a
forall a. Text -&gt; [Text] -&gt; ExpectedShapeOr a
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#ExpectedShape"
	><span class="hs-identifier hs-var"
	  >ExpectedShape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><a href="#local-6989586621679476461"
	><span class="hs-identifier hs-var"
	  >shape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text]
</span
	><a href="#local-6989586621679476464"
	><span class="hs-identifier hs-var"
	  >vars</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-253"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476414"
	><span class="hs-identifier hs-var"
	  >vResTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-254"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TySOP"
	><span class="hs-identifier hs-type"
	  >TySOP</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476467"
      ><span class="annot"
	><span class="annottext"
	  >[[Type TyName uni ()]]
</span
	  ><a href="#local-6989586621679476467"
	  ><span class="hs-identifier hs-var"
	    >vSTys</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[[Type TyName uni ()]]
</span
	><a href="#local-6989586621679476467"
	><span class="hs-identifier hs-var"
	  >vSTys</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[[Type TyName uni ()]]
-&gt; Getting
     (First [Type TyName uni ()])
     [[Type TyName uni ()]]
     [Type TyName uni ()]
-&gt; Maybe [Type TyName uni ()]
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span
	><span class="hs-operator hs-var"
	>^?</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64 -&gt; Traversal' [[Type TyName uni ()]] [Type TyName uni ()]
forall a. Word64 -&gt; Traversal' [a] a
</span
	><a href="../../plutus-core/src/Data.List.Extras.html#wix"
	><span class="hs-identifier hs-var"
	  >wix</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Word64
</span
	><a href="#local-6989586621679476412"
	><span class="hs-identifier hs-var"
	  >i</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-255"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476468"
      ><span class="annot"
	><span class="annottext"
	  >[Type TyName uni ()]
</span
	  ><a href="#local-6989586621679476468"
	  ><span class="hs-identifier hs-var"
	    >pTys</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term TyName Name uni fun ann]
-&gt; [Type TyName uni ()]
-&gt; Maybe [(Term TyName Name uni fun ann, Type TyName uni ())]
forall a b. [a] -&gt; [b] -&gt; Maybe [(a, b)]
</span
	><a href="../../plutus-core/src/PlutusPrelude.html#zipExact"
	><span class="hs-identifier hs-var"
	  >zipExact</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term TyName Name uni fun ann]
</span
	><a href="#local-6989586621679476413"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ()]
</span
	><a href="#local-6989586621679476468"
	><span class="hs-identifier hs-var"
	  >pTys</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-256"
      ></span
      ><span
      >                </span
      ><span class="hs-comment"
      >-- pTy is a sub-part of a normalized type, so normalized</span
      ><span
      >
</span
      ><span id="line-257"
      ></span
      ><span
      >                </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476470"
      ><span class="annot"
	><span class="annottext"
	  >[(Term TyName Name uni fun ann, Type TyName uni ())]
</span
	  ><a href="#local-6989586621679476470"
	  ><span class="hs-identifier hs-var"
	    >ps</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Term TyName Name uni fun ann, Type TyName uni ())]
-&gt; ((Term TyName Name uni fun ann, Type TyName uni ())
    -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#for_"
	><span class="hs-identifier hs-var"
	  >for_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Term TyName Name uni fun ann, Type TyName uni ())]
</span
	><a href="#local-6989586621679476470"
	><span class="hs-identifier hs-var"
	  >ps</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(((Term TyName Name uni fun ann, Type TyName uni ())
  -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ((Term TyName Name uni fun ann, Type TyName uni ())
    -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679476472"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476472"
	  ><span class="hs-identifier hs-var"
	    >arg</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679476473"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ()
</span
	  ><a href="#local-6989586621679476473"
	  ><span class="hs-identifier hs-var"
	    >pTy</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkTypeM"
	><span class="hs-identifier hs-var"
	  >checkTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476410"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476472"
	><span class="hs-identifier hs-var"
	  >arg</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
	><span class="hs-identifier hs-var"
	  >Normalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><a href="#local-6989586621679476473"
	><span class="hs-identifier hs-var"
	  >pTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-258"
      ></span
      ><span
      >                </span
      ><span class="hs-comment"
      >-- the number of args does not match the number of types in the i'th SOP</span
      ><span
      >
</span
      ><span id="line-259"
      ></span
      ><span
      >                </span
      ><span class="hs-comment"
      >-- alternative</span
      ><span
      >
</span
      ><span id="line-260"
      ></span
      ><span
      >                </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe [(Term TyName Name uni fun ann, Type TyName uni ())]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476410"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476408"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
forall {a}. ExpectedShapeOr a
</span
	><a href="#local-6989586621679476465"
	><span class="hs-identifier hs-var"
	  >expectedSop</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476414"
	><span class="hs-identifier hs-var"
	  >vResTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-261"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- result type does not contain an i'th sum alternative</span
      ><span
      >
</span
      ><span id="line-262"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe [Type TyName uni ()]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476410"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476408"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
forall {a}. ExpectedShapeOr a
</span
	><a href="#local-6989586621679476465"
	><span class="hs-identifier hs-var"
	  >expectedSop</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476414"
	><span class="hs-identifier hs-var"
	  >vResTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-263"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- result type is not a SOP type</span
      ><span
      >
</span
      ><span id="line-264"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476410"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476408"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
forall {a}. ExpectedShapeOr a
</span
	><a href="#local-6989586621679476465"
	><span class="hs-identifier hs-var"
	  >expectedSop</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476414"
	><span class="hs-identifier hs-var"
	  >vResTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-265"
      ></span
      ><span
      >
</span
      ><span id="line-266"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476414"
	><span class="hs-identifier hs-var"
	  >vResTy</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-267"
      ></span
      ><span
      >
</span
      ><span id="line-268"
      ></span
      ><span class="hs-comment"
      >-- resTy ~&gt; vResTy   [infer| G !- scrut : sop s_0 ... s_n]</span
      ><span
      >
</span
      ><span id="line-269"
      ></span
      ><span class="hs-comment"
      >-- s_0 = [p_0_0 ... p_0_m]   [check| G !- c_0 : p_0_0 -&gt; ... -&gt; p_0_m -&gt; vResTy]</span
      ><span
      >
</span
      ><span id="line-270"
      ></span
      ><span class="hs-comment"
      >-- ...</span
      ><span
      >
</span
      ><span id="line-271"
      ></span
      ><span class="hs-comment"
      >-- s_n = [p_n_0 ... p_n_m]   [check| G !- c_n : p_n_0 -&gt; ... -&gt; p_n_m -&gt; vResTy]</span
      ><span
      >
</span
      ><span id="line-272"
      ></span
      ><span class="hs-comment"
      >-- -----------------------------------------------------------------------------</span
      ><span
      >
</span
      ><span id="line-273"
      ></span
      ><span class="hs-comment"
      >-- [infer| G !- case resTy scrut c_0 ... c_n : vResTy]</span
      ><span
      >
</span
      ><span id="line-274"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Case"
	><span class="hs-identifier hs-type"
	  >Case</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476475"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476475"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476476"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476476"
	  ><span class="hs-identifier hs-var"
	    >resTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476477"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476477"
	  ><span class="hs-identifier hs-var"
	    >scrut</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476478"
      ><span class="annot"
	><span class="annottext"
	  >[Term TyName Name uni fun ann]
</span
	  ><a href="#local-6989586621679476478"
	  ><span class="hs-identifier hs-var"
	    >cases</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-275"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476479"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476479"
	  ><span class="hs-identifier hs-var"
	    >vResTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ()
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476476"
	><span class="hs-identifier hs-var"
	  >resTy</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-276"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476480"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476480"
	  ><span class="hs-identifier hs-var"
	    >vScrutTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476477"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-277"
      ></span
      ><span
      >
</span
      ><span id="line-278"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- We don't know exactly what to expect, we only know that it should</span
      ><span
      >
</span
      ><span id="line-279"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- be a SOP with the right number of sum alternatives</span
      ><span
      >
</span
      ><span id="line-280"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679476489"
      ><span class="annot"
	><span class="annottext"
	  >prods :: [Text]
</span
	  ><a href="#local-6989586621679476489"
	  ><span class="hs-identifier hs-var hs-var"
	    >prods</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Int -&gt; Text) -&gt; [Int] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#map"
	><span class="hs-identifier hs-var"
	  >map</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679476490"
      ><span class="annot"
	><span class="annottext"
	  >Int
</span
	  ><a href="#local-6989586621679476490"
	  ><span class="hs-identifier hs-var"
	    >j</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;prod_&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String -&gt; Text
</span
	><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.Internal.html#pack"
	><span class="hs-identifier hs-var"
	  >Text.pack</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Show.html#show"
	><span class="hs-identifier hs-var"
	  >show</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><a href="#local-6989586621679476490"
	><span class="hs-identifier hs-var"
	  >j</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>0</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >..</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term TyName Name uni fun ann] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term TyName Name uni fun ann]
</span
	><a href="#local-6989586621679476478"
	><span class="hs-identifier hs-var"
	  >cases</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Num.html#-"
	><span class="hs-glyph hs-var"
	  >-</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int
</span
	><span class="hs-number"
	>1</span
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-281"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679476493"
      ><span class="annot"
	><span class="annottext"
	  >expectedSop :: ExpectedShapeOr a
</span
	  ><a href="#local-6989586621679476493"
	  ><span class="hs-identifier hs-var hs-var"
	    >expectedSop</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; [Text] -&gt; ExpectedShapeOr a
forall a. Text -&gt; [Text] -&gt; ExpectedShapeOr a
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#ExpectedShape"
	><span class="hs-identifier hs-var"
	  >ExpectedShape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; [Text] -&gt; Text
</span
	><a href="https://hackage.haskell.org/package/text-2.0.2/docs/src/Data.Text.html#intercalate"
	><span class="hs-identifier hs-var"
	  >Text.intercalate</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot; &quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;sop&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text]
</span
	><a href="#local-6989586621679476489"
	><span class="hs-identifier hs-var"
	  >prods</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Text]
</span
	><a href="#local-6989586621679476489"
	><span class="hs-identifier hs-var"
	  >prods</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-282"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476480"
	><span class="hs-identifier hs-var"
	  >vScrutTy</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-283"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TySOP"
	><span class="hs-identifier hs-type"
	  >TySOP</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476494"
      ><span class="annot"
	><span class="annottext"
	  >[[Type TyName uni ()]]
</span
	  ><a href="#local-6989586621679476494"
	  ><span class="hs-identifier hs-var"
	    >sTys</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term TyName Name uni fun ann]
-&gt; [[Type TyName uni ()]]
-&gt; Maybe [(Term TyName Name uni fun ann, [Type TyName uni ()])]
forall a b. [a] -&gt; [b] -&gt; Maybe [(a, b)]
</span
	><a href="../../plutus-core/src/PlutusPrelude.html#zipExact"
	><span class="hs-identifier hs-var"
	  >zipExact</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Term TyName Name uni fun ann]
</span
	><a href="#local-6989586621679476478"
	><span class="hs-identifier hs-var"
	  >cases</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[[Type TyName uni ()]]
</span
	><a href="#local-6989586621679476494"
	><span class="hs-identifier hs-var"
	  >sTys</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-284"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476495"
      ><span class="annot"
	><span class="annottext"
	  >[(Term TyName Name uni fun ann, [Type TyName uni ()])]
</span
	  ><a href="#local-6989586621679476495"
	  ><span class="hs-identifier hs-var"
	    >casesAndArgTypes</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Term TyName Name uni fun ann, [Type TyName uni ()])]
-&gt; ((Term TyName Name uni fun ann, [Type TyName uni ()])
    -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#for_"
	><span class="hs-identifier hs-var"
	  >for_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[(Term TyName Name uni fun ann, [Type TyName uni ()])]
</span
	><a href="#local-6989586621679476495"
	><span class="hs-identifier hs-var"
	  >casesAndArgTypes</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(((Term TyName Name uni fun ann, [Type TyName uni ()])
  -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ((Term TyName Name uni fun ann, [Type TyName uni ()])
    -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679476496"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476496"
	  ><span class="hs-identifier hs-var"
	    >c</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679476497"
      ><span class="annot"
	><span class="annottext"
	  >[Type TyName uni ()]
</span
	  ><a href="#local-6989586621679476497"
	  ><span class="hs-identifier hs-var"
	    >argTypes</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-285"
      ></span
      ><span
      >                </span
      ><span class="hs-comment"
      >-- made of sub-parts of a normalized type, so normalized</span
      ><span
      >
</span
      ><span id="line-286"
      ></span
      ><span
      >                </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkTypeM"
	><span class="hs-identifier hs-var"
	  >checkTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476475"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476496"
	><span class="hs-identifier hs-var"
	  >c</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
	><span class="hs-identifier hs-var"
	  >Normalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni () -&gt; Normalized (Type TyName uni ()))
-&gt; Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>()
-&gt; [Type TyName uni ()] -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall ann tyname (uni :: * -&gt; *).
ann
-&gt; [Type tyname uni ann]
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#mkIterTyFun"
	><span class="hs-identifier hs-var"
	  >mkIterTyFun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ()]
</span
	><a href="#local-6989586621679476497"
	><span class="hs-identifier hs-var"
	  >argTypes</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476479"
	><span class="hs-identifier hs-var"
	  >vResTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-287"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- scrutinee does not have a SOP type with the right number of alternatives</span
      ><span
      >
</span
      ><span id="line-288"
      ></span
      ><span
      >            </span
      ><span class="hs-comment"
      >-- for the number of cases</span
      ><span
      >
</span
      ><span id="line-289"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe [(Term TyName Name uni fun ann, [Type TyName uni ()])]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476475"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476477"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
forall {a}. ExpectedShapeOr a
</span
	><a href="#local-6989586621679476493"
	><span class="hs-identifier hs-var"
	  >expectedSop</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476480"
	><span class="hs-identifier hs-var"
	  >vScrutTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-290"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- scrutinee does not have a SOP type at all</span
      ><span
      >
</span
      ><span id="line-291"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ()
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; ExpectedShapeOr (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span
	><a href="../../plutus-core/src/PlutusCore.Error.html#TypeMismatch"
	><span class="hs-identifier hs-var"
	  >TypeMismatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476475"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476477"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ExpectedShapeOr (Type TyName uni ())
forall {a}. ExpectedShapeOr a
</span
	><a href="#local-6989586621679476493"
	><span class="hs-identifier hs-var"
	  >expectedSop</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476480"
	><span class="hs-identifier hs-var"
	  >vScrutTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-292"
      ></span
      ><span
      >
</span
      ><span id="line-293"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- If we got through all that, then every case type is correct, including that</span
      ><span
      >
</span
      ><span id="line-294"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- they all result in vResTy, so we can safely conclude that that is the type of the</span
      ><span
      >
</span
      ><span id="line-295"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- whole expression.</span
      ><span
      >
</span
      ><span id="line-296"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476479"
	><span class="hs-identifier hs-var"
	  >vResTy</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-297"
      ></span
      ><span class="hs-comment"
      >-- ##############</span
      ><span
      >
</span
      ><span id="line-298"
      ></span
      ><span class="hs-comment"
      >-- ## Port end ##</span
      ><span
      >
</span
      ><span id="line-299"
      ></span
      ><span class="hs-comment"
      >-- ##############</span
      ><span
      >
</span
      ><span id="line-300"
      ></span
      ><span
      >
</span
      ><span id="line-301"
      ></span
      ><span class="hs-comment"
      >-- Note on symbols:  '=&gt;' means implies</span
      ><span
      >
</span
      ><span id="line-302"
      ></span
      ><span
      >
</span
      ><span id="line-303"
      ></span
      ><span class="hs-comment"
      >{-
checkKindFromBinding(G,b) checkTypeFromBinding(G,b)
!null(bs) =&gt; [infer| G,withVarsOfBinding(b),withTyVarsOfBinding(b) !- (let nonrec {bs} in inT) : ty]
null(bs) =&gt; [infer| G,withVarsOfBinding(b),withTyVarsOfBinding(b) !- inT : ty]
ty ~&gt; vTy
-------------------------------------------------
[infer| G !- (let nonrec {b ; bs} in inT) : vTy]
-}</span
      ><span
      >
</span
      ><span id="line-311"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Let"
	><span class="hs-identifier hs-type"
	  >Let</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476499"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476499"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476500"
      ><span class="annot"
	><span class="annottext"
	  >r :: Recursivity
</span
	  ><a href="#local-6989586621679476500"
	  ><span class="hs-identifier hs-var"
	    >r</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="PlutusIR.Core.Type.html#NonRec"
	><span class="hs-identifier hs-var"
	  >NonRec</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476502"
      ><span class="annot"
	><span class="annottext"
	  >NonEmpty (Binding TyName Name uni fun ann)
</span
	  ><a href="#local-6989586621679476502"
	  ><span class="hs-identifier hs-var"
	    >bs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476503"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476503"
	  ><span class="hs-identifier hs-var"
	    >inTerm</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-312"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- Check each binding individually, then if ok, introduce its new type/vars to the (linearly) next let or inTerm</span
      ><span
      >
</span
      ><span id="line-313"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476504"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476504"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) fun ann.
MonadNormalizeType uni m =&gt;
NonEmpty (Binding TyName Name uni fun ann)
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#substTypeBinds"
	><span class="hs-identifier hs-var"
	  >substTypeBinds</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
</span
	><a href="#local-6989586621679476502"
	><span class="hs-identifier hs-var"
	  >bs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Normalized (Type TyName uni ())
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3D%3C%3C"
	><span class="hs-operator hs-var"
	  >=&lt;&lt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Binding TyName Name uni fun ann
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; NonEmpty a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#foldr"
	><span class="hs-identifier hs-var"
	  >foldr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
Binding TyName Name uni fun ann
-&gt; PirTCEnv uni fun m a -&gt; PirTCEnv uni fun m a
</span
	><a href="#local-6989586621679476507"
	><span class="hs-identifier hs-var"
	  >checkBindingThenScope</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476503"
	><span class="hs-identifier hs-var"
	  >inTerm</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
</span
	><a href="#local-6989586621679476502"
	><span class="hs-identifier hs-var"
	  >bs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-314"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- check the in-term's inferred type has kind * (except at toplevel)</span
      ><span
      >
</span
      ><span id="line-315"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Normalized (Type TyName uni ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann -&gt; Normalized (Type TyName uni ()) -&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkStarInferred"
	><span class="hs-identifier hs-var"
	  >checkStarInferred</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476499"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476504"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-316"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476504"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-317"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-318"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679475861"
      ><span class="annot"
	><a href="#local-6989586621679476507"
	  ><span class="hs-identifier hs-type"
	    >checkBindingThenScope</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>::</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusIR.Core.Type.html#Binding"
	  ><span class="hs-identifier hs-type"
	    >Binding</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	  ><span class="hs-identifier hs-type"
	    >TyName</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	  ><span class="hs-identifier hs-type"
	    >Name</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475679"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475680"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475681"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
	  ><span class="hs-identifier hs-type"
	    >PirTCEnv</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475679"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475680"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475682"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475861"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	><span
	> </span
	><span class="hs-glyph"
	>-&gt;</span
	><span
	> </span
	><span class="annot"
	><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
	  ><span class="hs-identifier hs-type"
	    >PirTCEnv</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475679"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475680"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475682"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	><span
	> </span
	><span class="annot"
	><a href="#local-6989586621679475861"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-319"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476507"
      ><span class="annot"
	><span class="annottext"
	  >checkBindingThenScope :: forall a.
Binding TyName Name uni fun ann
-&gt; PirTCEnv uni fun m a -&gt; PirTCEnv uni fun m a
</span
	  ><a href="#local-6989586621679476507"
	  ><span class="hs-identifier hs-var hs-var"
	    >checkBindingThenScope</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476514"
      ><span class="annot"
	><span class="annottext"
	  >Binding TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476514"
	  ><span class="hs-identifier hs-var"
	    >b</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476515"
      ><span class="annot"
	><span class="annottext"
	  >PirTCEnv uni fun m a
</span
	  ><a href="#local-6989586621679476515"
	  ><span class="hs-identifier hs-var"
	    >acc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-320"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- check that the kinds of the declared types are correct</span
      ><span
      >
</span
      ><span id="line-321"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Binding TyName Name uni fun ann -&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkKindFromBinding"
	><span class="hs-identifier hs-var"
	  >checkKindFromBinding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
</span
	><a href="#local-6989586621679476514"
	><span class="hs-identifier hs-var"
	  >b</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-322"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- check that the types of declared terms are correct</span
      ><span
      >
</span
      ><span id="line-323"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
-&gt; Binding TyName Name uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Recursivity
-&gt; Binding TyName Name uni fun ann -&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkTypeFromBinding"
	><span class="hs-identifier hs-var"
	  >checkTypeFromBinding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="#local-6989586621679476500"
	><span class="hs-identifier hs-var"
	  >r</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
</span
	><a href="#local-6989586621679476514"
	><span class="hs-identifier hs-var"
	  >b</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-324"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- add new *normalized* termvariables to env</span
      ><span
      >
</span
      ><span id="line-325"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- Note that the order of adding typesVSkinds here does not matter</span
      ><span
      >
</span
      ><span id="line-326"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
-&gt; PirTCEnv uni fun m a -&gt; PirTCEnv uni fun m a
forall name (uni :: * -&gt; *) fun ann cfg (m :: * -&gt; *) a.
Binding TyName name uni fun ann
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withTyVarsOfBinding"
	><span class="hs-identifier hs-var"
	  >withTyVarsOfBinding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
</span
	><a href="#local-6989586621679476514"
	><span class="hs-identifier hs-var"
	  >b</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PirTCEnv uni fun m a -&gt; PirTCEnv uni fun m a)
-&gt; PirTCEnv uni fun m a -&gt; PirTCEnv uni fun m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-327"
      ></span
      ><span
      >            </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
-&gt; Binding TyName Name uni fun ann
-&gt; PirTCEnv uni fun m a
-&gt; PirTCEnv uni fun m a
forall (uni :: * -&gt; *) fun cfg ann (m :: * -&gt; *) a.
MonadNormalizeType uni m =&gt;
Recursivity
-&gt; Binding TyName Name uni fun ann
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBinding"
	><span class="hs-identifier hs-var"
	  >withVarsOfBinding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="#local-6989586621679476500"
	><span class="hs-identifier hs-var"
	  >r</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
</span
	><a href="#local-6989586621679476514"
	><span class="hs-identifier hs-var"
	  >b</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCEnv uni fun m a
</span
	><a href="#local-6989586621679476515"
	><span class="hs-identifier hs-var"
	  >acc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-328"
      ></span
      ><span
      >
</span
      ><span id="line-329"
      ></span
      ><span class="hs-comment"
      >{-
G'=G,withTyVarsOfBindings(bs)
forall b in bs. checkKindFromBinding(G', b)
G''=G',withVarsOfBindings(bs)
forall b in bs. checkTypeFromBinding(G'', b)
[infer| G'' !- inT : ty] ty ~&gt; vTy
-------------------------------------------------
[infer| G !- (let rec bs in inT) : vTy]
-}</span
      ><span
      >
</span
      ><span id="line-338"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Let"
	><span class="hs-identifier hs-type"
	  >Let</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476520"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476520"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476521"
      ><span class="annot"
	><span class="annottext"
	  >r :: Recursivity
</span
	  ><a href="#local-6989586621679476521"
	  ><span class="hs-identifier hs-var"
	    >r</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="PlutusIR.Core.Type.html#Rec"
	><span class="hs-identifier hs-var"
	  >Rec</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476523"
      ><span class="annot"
	><span class="annottext"
	  >NonEmpty (Binding TyName Name uni fun ann)
</span
	  ><a href="#local-6989586621679476523"
	  ><span class="hs-identifier hs-var"
	    >bs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476524"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476524"
	  ><span class="hs-identifier hs-var"
	    >inTerm</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-339"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476525"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476525"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (f :: * -&gt; *) name (uni :: * -&gt; *) fun ann cfg (m :: * -&gt; *)
       a.
Foldable f =&gt;
f (Binding TyName name uni fun ann)
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withTyVarsOfBindings"
	><span class="hs-identifier hs-var"
	  >withTyVarsOfBindings</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
</span
	><a href="#local-6989586621679476523"
	><span class="hs-identifier hs-var"
	  >bs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeCheckT
   uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-340"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- check that the kinds of the declared types *over all bindings* are correct</span
      ><span
      >
</span
      ><span id="line-341"
      ></span
      ><span
      >       </span
      ><span class="hs-comment"
      >-- Note that, compared to NonRec, we need the newtyvars in scope to do kindchecking</span
      ><span
      >
</span
      ><span id="line-342"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
-&gt; (Binding TyName Name uni fun ann
    -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#for_"
	><span class="hs-identifier hs-var"
	  >for_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
</span
	><a href="#local-6989586621679476523"
	><span class="hs-identifier hs-var"
	  >bs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Binding TyName Name uni fun ann -&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkKindFromBinding"
	><span class="hs-identifier hs-var"
	  >checkKindFromBinding</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-343"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679476527"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476527"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) (t :: * -&gt; *) fun ann cfg a.
(MonadNormalizeType uni m, Foldable t) =&gt;
Recursivity
-&gt; t (Binding TyName Name uni fun ann)
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBindings"
	><span class="hs-identifier hs-var"
	  >withVarsOfBindings</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="#local-6989586621679476521"
	><span class="hs-identifier hs-var"
	  >r</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
</span
	><a href="#local-6989586621679476523"
	><span class="hs-identifier hs-var"
	  >bs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeCheckT
   uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
 -&gt; TypeCheckT
      uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ())))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-344"
      ></span
      ><span
      >               </span
      ><span class="hs-comment"
      >-- check that the types of declared terms are correct</span
      ><span
      >
</span
      ><span id="line-345"
      ></span
      ><span
      >              </span
      ><span class="hs-comment"
      >-- Note that, compared to NonRec, we need the newtyvars+newvars in scope to do typechecking</span
      ><span
      >
</span
      ><span id="line-346"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
-&gt; (Binding TyName Name uni fun ann
    -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#for_"
	><span class="hs-identifier hs-var"
	  >for_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
</span
	><a href="#local-6989586621679476523"
	><span class="hs-identifier hs-var"
	  >bs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Binding TyName Name uni fun ann
  -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; (Binding TyName Name uni fun ann
    -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
-&gt; Binding TyName Name uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Recursivity
-&gt; Binding TyName Name uni fun ann -&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkTypeFromBinding"
	><span class="hs-identifier hs-var"
	  >checkTypeFromBinding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="#local-6989586621679476521"
	><span class="hs-identifier hs-var"
	  >r</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-347"
      ></span
      ><span
      >              </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Term TyName Name uni fun ann
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#inferTypeM"
	><span class="hs-identifier hs-var"
	  >inferTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476524"
	><span class="hs-identifier hs-var"
	  >inTerm</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-348"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) fun ann.
MonadNormalizeType uni m =&gt;
NonEmpty (Binding TyName Name uni fun ann)
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	><a href="PlutusIR.TypeCheck.Internal.html#substTypeBinds"
	><span class="hs-identifier hs-var"
	  >substTypeBinds</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>NonEmpty (Binding TyName Name uni fun ann)
</span
	><a href="#local-6989586621679476523"
	><span class="hs-identifier hs-var"
	  >bs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476527"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-349"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- check the in-term's inferred type has kind * (except at toplevel)</span
      ><span
      >
</span
      ><span id="line-350"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Normalized (Type TyName uni ())
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann -&gt; Normalized (Type TyName uni ()) -&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkStarInferred"
	><span class="hs-identifier hs-var"
	  >checkStarInferred</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476520"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476525"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-351"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TypeCheckT
     uni fun (PirTCConfig uni fun) m (Normalized (Type TyName uni ()))
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476525"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-352"
      ></span
      ><span
      >
</span
      ><span id="line-353"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-| This checks that a newly-introduced type variable is correctly kinded.

(b is ty::K = rhs) =&gt; [check| G !- rhs :: K]
(b is term (X::T) =&gt; [check| G !- T :: *])
(b is data (X::K) tyarg1::K1 ... tyargN::KN  = _) =&gt; [check| G, X::K, tyarg1::K1...tyargN::KN !- [X tyarg1 ... tyargN] :: *]
--------------------------------------------------------------------------------------
checkKindFromBinding(G,b)
-}</span
	></span
      ><span
      >
</span
      ><span id="line-361"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#checkKindFromBinding"
	><span class="hs-identifier hs-type"
	  >checkKindFromBinding</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-362"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679475870"
      ><span class="annot"
	><a href="#local-6989586621679475870"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475867"
      ><span class="annot"
	><a href="#local-6989586621679475867"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475868"
      ><span class="annot"
	><a href="#local-6989586621679475868"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475869"
      ><span class="annot"
	><a href="#local-6989586621679475869"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-363"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#MonadTypeCheckPir"
	><span class="hs-identifier hs-type"
	  >MonadTypeCheckPir</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475867"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475868"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475869"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475870"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-364"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Binding"
	><span class="hs-identifier hs-type"
	  >Binding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475867"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475868"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475869"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-365"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
	><span class="hs-identifier hs-type"
	  >PirTCEnv</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475867"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475868"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475870"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-366"
      ></span
      ><span id="checkKindFromBinding"
      ><span class="annot"
	><span class="annottext"
	  >checkKindFromBinding :: forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Binding TyName Name uni fun ann -&gt; PirTCEnv uni fun m ()
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#checkKindFromBinding"
	  ><span class="hs-identifier hs-var hs-var"
	    >checkKindFromBinding</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
 -&gt; m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
-&gt; m ()
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   ()
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ())
-&gt; (Binding TyName Name uni fun ann
    -&gt; ReaderT
         (TypeCheckEnv uni fun (PirTCConfig uni fun))
         (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
         ())
-&gt; Binding TyName Name uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-glyph"
      >case</span
      ><span
      >
</span
      ><span id="line-367"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- For a type binding, correct means that the the RHS is indeed kinded by the declared kind.</span
      ><span
      >
</span
      ><span id="line-368"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TypeBind"
	><span class="hs-identifier hs-type"
	  >TypeBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyVarDecl"
	><span class="hs-identifier hs-type"
	  >TyVarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476562"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476562"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476563"
      ><span class="annot"
	><span class="annottext"
	  >Kind ann
</span
	  ><a href="#local-6989586621679476563"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621679476564"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476564"
	  ><span class="hs-identifier hs-var"
	    >rhs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-369"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476562"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476564"
	><span class="hs-identifier hs-var"
	  >rhs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann -&gt; Kind ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621679476563"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-370"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- For a term binding, correct means that the declared type has kind *.</span
      ><span
      >
</span
      ><span id="line-371"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TermBind"
	><span class="hs-identifier hs-type"
	  >TermBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Strictness
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#VarDecl"
	><span class="hs-identifier hs-type"
	  >VarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476567"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476567"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-372"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; ann
forall tyname (uni :: * -&gt; *) ann. Type tyname uni ann -&gt; ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#typeAnn"
	><span class="hs-identifier hs-var"
	  >typeAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476567"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476567"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-373"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- For a datatype binding, correct means that the type constructor has kind * when fully-applied to its type arguments.</span
      ><span
      >
</span
      ><span id="line-374"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#DatatypeBind"
	><span class="hs-identifier hs-type"
	  >DatatypeBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476569"
      ><span class="annot"
	><span class="annottext"
	  >dt :: Datatype TyName Name uni ann
</span
	  ><a href="#local-6989586621679476569"
	  ><span class="hs-identifier hs-var"
	    >dt</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Datatype"
	><span class="hs-identifier hs-type"
	  >Datatype</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476571"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476571"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476572"
      ><span class="annot"
	><span class="annottext"
	  >TyVarDecl TyName ann
</span
	  ><a href="#local-6989586621679476572"
	  ><span class="hs-identifier hs-var"
	    >tycon</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476573"
      ><span class="annot"
	><span class="annottext"
	  >[TyVarDecl TyName ann]
</span
	  ><a href="#local-6989586621679476573"
	  ><span class="hs-identifier hs-var"
	    >tyargs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476574"
      ><span class="annot"
	><span class="annottext"
	  >[VarDecl TyName Name uni ann]
</span
	  ><a href="#local-6989586621679476574"
	  ><span class="hs-identifier hs-var"
	    >vdecls</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-375"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- tycon+tyargs must be in scope during kindchecking</span
      ><span
      >
</span
      ><span id="line-376"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall ann (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
[TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withTyVarDecls"
	><span class="hs-identifier hs-var"
	  >withTyVarDecls</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><a href="#local-6989586621679476572"
	><span class="hs-identifier hs-var"
	  >tycon</span
	  ></a
	></span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
-&gt; [TyVarDecl TyName ann] -&gt; [TyVarDecl TyName ann]
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621679476573"
	><span class="hs-identifier hs-var"
	  >tyargs</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-377"
      ></span
      ><span
      >          </span
      ><span class="hs-comment"
      >-- the fully-applied type-constructor must be *-kinded</span
      ><span
      >
</span
      ><span id="line-378"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476571"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476576"
	><span class="hs-identifier hs-var"
	  >appliedTyCon</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-379"
      ></span
      ><span
      >          </span
      ><span class="hs-comment"
      >-- the types of all the data-constructors must be *-kinded</span
      ><span
      >
</span
      ><span id="line-380"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann]
-&gt; (Type TyName uni ann
    -&gt; ReaderT
         (TypeCheckEnv uni fun (PirTCConfig uni fun))
         (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
         ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#for_"
	><span class="hs-identifier hs-var"
	  >for_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni ann -&gt; Type TyName uni ann
forall tyname name (uni :: * -&gt; *) ann.
VarDecl tyname name uni ann -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#_varDeclType"
	><span class="hs-identifier hs-var"
	  >_varDeclType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(VarDecl TyName Name uni ann -&gt; Type TyName uni ann)
-&gt; [VarDecl TyName Name uni ann] -&gt; [Type TyName uni ann]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[VarDecl TyName Name uni ann]
</span
	><a href="#local-6989586621679476574"
	><span class="hs-identifier hs-var"
	  >vdecls</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Type TyName uni ann
  -&gt; ReaderT
       (TypeCheckEnv uni fun (PirTCConfig uni fun))
       (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
       ())
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; (Type TyName uni ann
    -&gt; ReaderT
         (TypeCheckEnv uni fun (PirTCConfig uni fun))
         (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
         ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-381"
      ></span
      ><span
      >               </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476571"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann
 -&gt; Kind ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; Kind ()
-&gt; Type TyName uni ann
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#flip"
	><span class="hs-operator hs-var"
	  >`flip`</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-382"
      ></span
      ><span
      >     </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-383"
      ></span
      ><span
      >       </span
      ><span id="local-6989586621679476576"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476576"
	  ><span class="hs-identifier hs-var"
	    >appliedTyCon</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475867"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475869"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Datatype TyName Name uni ann -&gt; Type TyName uni ann
forall a (uni :: * -&gt; *).
a -&gt; Datatype TyName Name uni a -&gt; Type TyName uni a
</span
	><a href="PlutusIR.Compiler.Datatype.html#mkDatatypeValueType"
	><span class="hs-identifier hs-var"
	  >mkDatatypeValueType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476571"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Datatype TyName Name uni ann
</span
	><a href="#local-6989586621679476569"
	><span class="hs-identifier hs-var"
	  >dt</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-384"
      ></span
      ><span
      >
</span
      ><span id="line-385"
      ></span
      ><span
      >
</span
      ><span id="line-386"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{- | This checks that a newly-introduced variable has declared the *right type* for its term
(rhs term in case of termbind or implicit constructor term in case of dataconstructor).

(b is t:ty = _) =&gt; [check| G !- t : nTy]  ty ~&gt; vTy
---------------------------------------------------
checkTypeFromBinding(G,b)
-}</span
	></span
      ><span
      >
</span
      ><span id="line-393"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#checkTypeFromBinding"
	><span class="hs-identifier hs-type"
	  >checkTypeFromBinding</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-394"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679475874"
      ><span class="annot"
	><a href="#local-6989586621679475874"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475871"
      ><span class="annot"
	><a href="#local-6989586621679475871"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475872"
      ><span class="annot"
	><a href="#local-6989586621679475872"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475873"
      ><span class="annot"
	><a href="#local-6989586621679475873"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-395"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#MonadTypeCheckPir"
	><span class="hs-identifier hs-type"
	  >MonadTypeCheckPir</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475871"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475872"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475873"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475874"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-396"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Recursivity"
	><span class="hs-identifier hs-type"
	  >Recursivity</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Binding"
	><span class="hs-identifier hs-type"
	  >Binding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475871"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475872"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475873"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
	><span class="hs-identifier hs-type"
	  >PirTCEnv</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475871"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475872"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475874"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-397"
      ></span
      ><span id="checkTypeFromBinding"
      ><span class="annot"
	><span class="annottext"
	  >checkTypeFromBinding :: forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadTypeCheckPir uni fun ann m =&gt;
Recursivity
-&gt; Binding TyName Name uni fun ann -&gt; PirTCEnv uni fun m ()
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#checkTypeFromBinding"
	  ><span class="hs-identifier hs-var hs-var"
	    >checkTypeFromBinding</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476614"
      ><span class="annot"
	><span class="annottext"
	  >Recursivity
</span
	  ><a href="#local-6989586621679476614"
	  ><span class="hs-identifier hs-var"
	    >recurs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-glyph"
      >case</span
      ><span
      >
</span
      ><span id="line-398"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TypeBind"
	><span class="hs-identifier hs-type"
	  >TypeBind</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; PirTCEnv uni fun m ()
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-comment"
      >-- no types to check</span
      ><span
      >
</span
      ><span id="line-399"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TermBind"
	><span class="hs-identifier hs-type"
	  >TermBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Strictness
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#VarDecl"
	><span class="hs-identifier hs-type"
	  >VarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476615"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476615"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476616"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476616"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621679476617"
      ><span class="annot"
	><span class="annottext"
	  >Term TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476617"
	  ><span class="hs-identifier hs-var"
	    >rhs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-400"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- See Note [PIR vs Paper Escaping Types Difference]</span
      ><span
      >
</span
      ><span id="line-401"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ()
forall (uni :: * -&gt; *) fun (m :: * -&gt; *) a.
PirTCEnv uni fun m a -&gt; PirTCEnv uni fun m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withNoEscapingTypes"
	><span class="hs-identifier hs-var"
	  >withNoEscapingTypes</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m ()
forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m ()
</span
	><a href="PlutusIR.TypeCheck.Internal.html#checkTypeM"
	><span class="hs-identifier hs-var"
	  >checkTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476615"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><a href="#local-6989586621679476617"
	><span class="hs-identifier hs-var"
	  >rhs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Normalized (Type TyName uni ()) -&gt; PirTCEnv uni fun m ())
-&gt; (Normalized (Type TyName uni ann)
    -&gt; Normalized (Type TyName uni ()))
-&gt; Normalized (Type TyName uni ann)
-&gt; PirTCEnv uni fun m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ())
-&gt; Normalized (Type TyName uni ann)
-&gt; Normalized (Type TyName uni ())
forall a b. (a -&gt; b) -&gt; Normalized a -&gt; Normalized b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#fmap"
	><span class="hs-identifier hs-var"
	  >fmap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Normalized (Type TyName uni ann) -&gt; PirTCEnv uni fun m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     m
     (Normalized (Type TyName uni ann))
-&gt; PirTCEnv uni fun m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3D%3C%3C"
	><span class="hs-operator hs-var"
	  >=&lt;&lt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     m
     (Normalized (Type TyName uni ann))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476616"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-402"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#DatatypeBind"
	><span class="hs-identifier hs-type"
	  >DatatypeBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476619"
      ><span class="annot"
	><span class="annottext"
	  >dt :: Datatype TyName Name uni ann
</span
	  ><a href="#local-6989586621679476619"
	  ><span class="hs-identifier hs-var"
	    >dt</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Datatype"
	><span class="hs-identifier hs-type"
	  >Datatype</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476620"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476620"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476621"
      ><span class="annot"
	><span class="annottext"
	  >[TyVarDecl TyName ann]
</span
	  ><a href="#local-6989586621679476621"
	  ><span class="hs-identifier hs-var"
	    >tyargs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476622"
      ><span class="annot"
	><span class="annottext"
	  >[VarDecl TyName Name uni ann]
</span
	  ><a href="#local-6989586621679476622"
	  ><span class="hs-identifier hs-var"
	    >constrs</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-403"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann]
-&gt; (Type TyName uni ann -&gt; PirTCEnv uni fun m ())
-&gt; PirTCEnv uni fun m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#for_"
	><span class="hs-identifier hs-var"
	  >for_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni ann -&gt; Type TyName uni ann
forall tyname name (uni :: * -&gt; *) ann.
VarDecl tyname name uni ann -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#_varDeclType"
	><span class="hs-identifier hs-var"
	  >_varDeclType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(VarDecl TyName Name uni ann -&gt; Type TyName uni ann)
-&gt; [VarDecl TyName Name uni ann] -&gt; [Type TyName uni ann]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[VarDecl TyName Name uni ann]
</span
	><a href="#local-6989586621679476622"
	><span class="hs-identifier hs-var"
	  >constrs</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Type TyName uni ann -&gt; PirTCEnv uni fun m ())
 -&gt; PirTCEnv uni fun m ())
-&gt; (Type TyName uni ann -&gt; PirTCEnv uni fun m ())
-&gt; PirTCEnv uni fun m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-404"
      ></span
      ><span
      >            </span
      ><span class="hs-glyph"
      >\</span
      ><span
      > </span
      ><span id="local-6989586621679476623"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476623"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; PirTCEnv uni fun m ()
</span
	><a href="#local-6989586621679476624"
	><span class="hs-identifier hs-var"
	  >checkConRes</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476623"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCEnv uni fun m ()
-&gt; PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ()
forall a b.
ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m b
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%2A%3E"
	><span class="hs-operator hs-var"
	  >*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; PirTCEnv uni fun m ()
</span
	><a href="#local-6989586621679476625"
	><span class="hs-identifier hs-var"
	  >checkNonRecScope</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476623"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-405"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-406"
      ></span
      ><span
      >       </span
      ><span id="local-6989586621679476626"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476626"
	  ><span class="hs-identifier hs-var"
	    >appliedTyCon</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475871"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475873"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Datatype TyName Name uni ann -&gt; Type TyName uni ann
forall a (uni :: * -&gt; *).
a -&gt; Datatype TyName Name uni a -&gt; Type TyName uni a
</span
	><a href="PlutusIR.Compiler.Datatype.html#mkDatatypeValueType"
	><span class="hs-identifier hs-var"
	  >mkDatatypeValueType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476620"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Datatype TyName Name uni ann
</span
	><a href="#local-6989586621679476619"
	><span class="hs-identifier hs-var"
	  >dt</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-407"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="#local-6989586621679476624"
	><span class="hs-identifier hs-type"
	  >checkConRes</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475871"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475873"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
	><span class="hs-identifier hs-type"
	  >PirTCEnv</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475871"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475872"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475874"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-408"
      ></span
      ><span
      >       </span
      ><span id="local-6989586621679476624"
      ><span class="annot"
	><span class="annottext"
	  >checkConRes :: Type TyName uni ann -&gt; PirTCEnv uni fun m ()
</span
	  ><a href="#local-6989586621679476624"
	  ><span class="hs-identifier hs-var hs-var"
	    >checkConRes</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476627"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476627"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-409"
      ></span
      ><span
      >           </span
      ><span class="hs-comment"
      >-- We earlier checked that datacons' type is *-kinded (using checkKindBinding), but this is not enough:</span
      ><span
      >
</span
      ><span id="line-410"
      ></span
      ><span
      >           </span
      ><span class="hs-comment"
      >-- we must also check that its result type is EXACTLY `[[TypeCon tyarg1] ... tyargn]` (ignoring annotations)</span
      ><span
      >
</span
      ><span id="line-411"
      ></span
      ><span
      >           </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#when"
	><span class="hs-identifier hs-var"
	  >when</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) a.
Type tyname uni a -&gt; Type tyname uni a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#funTyResultType"
	><span class="hs-identifier hs-var"
	  >PLC.funTyResultType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476627"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni () -&gt; Type TyName uni () -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%2F%3D"
	><span class="hs-operator hs-var"
	  >/=</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476626"
	><span class="hs-identifier hs-var"
	  >appliedTyCon</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ())
-&gt; (Error uni fun ann -&gt; PirTCEnv uni fun m ())
-&gt; Error uni fun ann
-&gt; PirTCEnv uni fun m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-412"
      ></span
      ><span
      >               </span
      ><span class="annot"
      ><span class="annottext"
	>Error uni fun ann -&gt; PirTCEnv uni fun m ()
forall a.
Error uni fun ann
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#throwError"
	><span class="hs-identifier hs-var"
	  >throwError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Error uni fun ann -&gt; PirTCEnv uni fun m ())
-&gt; Error uni fun ann -&gt; PirTCEnv uni fun m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeErrorExt uni ann -&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a. TypeErrorExt uni a -&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PIRTypeError"
	><span class="hs-identifier hs-var"
	  >PIRTypeError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeErrorExt uni ann -&gt; Error uni fun ann)
-&gt; TypeErrorExt uni ann -&gt; Error uni fun ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Type TyName uni ann -&gt; TypeErrorExt uni ann
forall (uni :: * -&gt; *) ann.
ann -&gt; Type TyName uni ann -&gt; TypeErrorExt uni ann
</span
	><a href="PlutusIR.Error.html#MalformedDataConstrResType"
	><span class="hs-identifier hs-var"
	  >MalformedDataConstrResType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476620"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476626"
	><span class="hs-identifier hs-var"
	  >appliedTyCon</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-413"
      ></span
      ><span
      >
</span
      ><span id="line-414"
      ></span
      ><span
      >       </span
      ><span class="hs-comment"
      >-- if nonrec binding, make sure that type-constructor is not part of the data-constructor's argument types.</span
      ><span
      >
</span
      ><span id="line-415"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="#local-6989586621679476625"
	><span class="hs-identifier hs-type"
	  >checkNonRecScope</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-type"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475871"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475873"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
	><span class="hs-identifier hs-type"
	  >PirTCEnv</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475871"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475872"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475874"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-416"
      ></span
      ><span
      >       </span
      ><span id="local-6989586621679476625"
      ><span class="annot"
	><span class="annottext"
	  >checkNonRecScope :: Type TyName uni ann -&gt; PirTCEnv uni fun m ()
</span
	  ><a href="#local-6989586621679476625"
	  ><span class="hs-identifier hs-var hs-var"
	    >checkNonRecScope</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476631"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476631"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="#local-6989586621679476614"
	><span class="hs-identifier hs-var"
	  >recurs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-417"
      ></span
      ><span
      >           </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="PlutusIR.Core.Type.html#Rec"
	><span class="hs-identifier hs-var"
	  >Rec</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; PirTCEnv uni fun m ()
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-418"
      ></span
      ><span
      >           </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="PlutusIR.Core.Type.html#NonRec"
	><span class="hs-identifier hs-var"
	  >NonRec</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-419"
      ></span
      ><span
      >               </span
      ><span class="hs-comment"
      >-- now we make sure that dataconstructor is not self-recursive, i.e. funargs don't contain tycon</span
      ><span
      >
</span
      ><span id="line-420"
      ></span
      ><span
      >               </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
-&gt; PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ()
forall ann (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
[TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withTyVarDecls"
	><span class="hs-identifier hs-var"
	  >withTyVarDecls</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><a href="#local-6989586621679476621"
	><span class="hs-identifier hs-var"
	  >tyargs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ())
-&gt; PirTCEnv uni fun m () -&gt; PirTCEnv uni fun m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-comment"
      >-- tycon not in scope here</span
      ><span
      >
</span
      ><span id="line-421"
      ></span
      ><span
      >                      </span
      ><span class="hs-comment"
      >-- OPTIMIZE: we use inferKind for scope-checking, but a simple ADT-traversal would suffice</span
      ><span
      >
</span
      ><span id="line-422"
      ></span
      ><span
      >                      </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
 -&gt; m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; PirTCEnv uni fun m ()
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
-&gt; m ()
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   ()
 -&gt; PirTCEnv uni fun m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; PirTCEnv uni fun m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Type TyName uni ann]
-&gt; (Type TyName uni ann
    -&gt; ReaderT
         (TypeCheckEnv uni fun (PirTCConfig uni fun))
         (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
         (Kind ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#for_"
	><span class="hs-identifier hs-var"
	  >for_</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; [Type TyName uni ann]
forall tyname (uni :: * -&gt; *) a.
Type tyname uni a -&gt; [Type tyname uni a]
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#funTyArgs"
	><span class="hs-identifier hs-var"
	  >PLC.funTyArgs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476631"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     (Kind ())
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
Type TyName uni ann -&gt; TypeCheckT uni fun cfg m (Kind ())
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#inferKindM"
	><span class="hs-identifier hs-var"
	  >inferKindM</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-423"
      ></span
      ><span
      >
</span
      ><span id="line-424"
      ></span
      ><span class="hs-comment"
      >-- | Check that the in-Term's inferred type of a Let has kind *.</span
      ><span
      >
</span
      ><span id="line-425"
      ></span
      ><span class="hs-comment"
      >-- Skip this check at the top-level, to allow top-level types to escape; see Note [PIR vs Paper Escaping Types Difference].</span
      ><span
      >
</span
      ><span id="line-426"
      ></span
      ><span id="local-6989586621679475862"
      ><span id="local-6989586621679475863"
	><span id="local-6989586621679475864"
	  ><span id="local-6989586621679475865"
	    ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#checkStarInferred"
		><span class="hs-identifier hs-type"
		  >checkStarInferred</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-427"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#MonadTypeCheckPir"
		><span class="hs-identifier hs-type"
		  >MonadTypeCheckPir</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475862"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475863"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475864"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475865"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-428"
	      ></span
	      ><span
	      >    </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475864"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
		><span class="hs-identifier hs-type"
		  >Normalized</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
		><span class="hs-identifier hs-type"
		  >Type</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475862"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="hs-special"
	      >)</span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
		><span class="hs-identifier hs-type"
		  >PirTCEnv</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475862"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475863"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475865"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-429"
      ></span
      ><span id="checkStarInferred"
      ><span class="annot"
	><span class="annottext"
	  >checkStarInferred :: forall (uni :: * -&gt; *) fun ann (m :: * -&gt; *).
MonadTypeCheckPir uni fun ann m =&gt;
ann -&gt; Normalized (Type TyName uni ()) -&gt; PirTCEnv uni fun m ()
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#checkStarInferred"
	  ><span class="hs-identifier hs-var hs-var"
	    >checkStarInferred</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476651"
      ><span class="annot"
	><span class="annottext"
	  >ann
</span
	  ><a href="#local-6989586621679476651"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476652"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476652"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-430"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476653"
      ><span class="annot"
	><span class="annottext"
	  >AllowEscape
</span
	  ><a href="#local-6989586621679476653"
	  ><span class="hs-identifier hs-var"
	    >allowEscape</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Getting
  AllowEscape
  (TypeCheckEnv uni fun (PirTCConfig uni fun))
  AllowEscape
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun)) m AllowEscape
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span
	><span class="hs-identifier hs-var"
	>view</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Getting
   AllowEscape
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   AllowEscape
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun)) m AllowEscape)
-&gt; Getting
     AllowEscape
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     AllowEscape
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun)) m AllowEscape
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(PirTCConfig uni fun -&gt; Const AllowEscape (PirTCConfig uni fun))
-&gt; TypeCheckEnv uni fun (PirTCConfig uni fun)
-&gt; Const AllowEscape (TypeCheckEnv uni fun (PirTCConfig uni fun))
forall (uni :: * -&gt; *) fun1 cfg1 fun2 cfg2 (f :: * -&gt; *).
Functor f =&gt;
(cfg1 -&gt; f cfg2)
-&gt; TypeCheckEnv uni fun1 cfg1 -&gt; f (TypeCheckEnv uni fun2 cfg2)
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#tceTypeCheckConfig"
	><span class="hs-identifier hs-var"
	  >tceTypeCheckConfig</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((PirTCConfig uni fun -&gt; Const AllowEscape (PirTCConfig uni fun))
 -&gt; TypeCheckEnv uni fun (PirTCConfig uni fun)
 -&gt; Const AllowEscape (TypeCheckEnv uni fun (PirTCConfig uni fun)))
-&gt; ((AllowEscape -&gt; Const AllowEscape AllowEscape)
    -&gt; PirTCConfig uni fun -&gt; Const AllowEscape (PirTCConfig uni fun))
-&gt; Getting
     AllowEscape
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     AllowEscape
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(AllowEscape -&gt; Const AllowEscape AllowEscape)
-&gt; PirTCConfig uni fun -&gt; Const AllowEscape (PirTCConfig uni fun)
forall (uni :: * -&gt; *) fun (f :: * -&gt; *).
Functor f =&gt;
(AllowEscape -&gt; f AllowEscape)
-&gt; PirTCConfig uni fun -&gt; f (PirTCConfig uni fun)
</span
	><a href="PlutusIR.Compiler.Types.html#pirConfigAllowEscape"
	><span class="hs-identifier hs-var"
	  >pirConfigAllowEscape</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-431"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AllowEscape
</span
	><a href="#local-6989586621679476653"
	><span class="hs-identifier hs-var"
	  >allowEscape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-432"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>AllowEscape
</span
	><a href="PlutusIR.Compiler.Types.html#NoEscape"
	><span class="hs-identifier hs-var"
	  >NoEscape</span
	  ></a
	></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
 -&gt; m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; PirTCEnv uni fun m ()
forall (m :: * -&gt; *) a (n :: * -&gt; *) b r.
(m a -&gt; n b) -&gt; ReaderT r m a -&gt; ReaderT r n b
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#mapReaderT"
	><span class="hs-identifier hs-var"
	  >mapReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(TypeError (Term TyName Name uni fun ()) uni fun ann
 -&gt; Error uni fun ann)
-&gt; ExceptT
     (TypeError (Term TyName Name uni fun ()) uni fun ann) m ()
-&gt; m ()
forall e' (m :: * -&gt; *) e a.
MonadError e' m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Error.Class.html#modifyError"
	><span class="hs-identifier hs-var"
	  >modifyError</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; Error uni fun ann
forall (uni :: * -&gt; *) fun a.
TypeError (Term TyName Name uni fun ()) uni fun a
-&gt; Error uni fun a
</span
	><a href="PlutusIR.Error.html#PLCTypeError"
	><span class="hs-identifier hs-var"
	  >PLCTypeError</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(ReaderT
   (TypeCheckEnv uni fun (PirTCConfig uni fun))
   (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
   ()
 -&gt; PirTCEnv uni fun m ())
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
-&gt; PirTCEnv uni fun m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
-&gt; Type TyName uni ann
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall term (uni :: * -&gt; *) fun ann (m :: * -&gt; *) cfg.
(MonadKindCheck (TypeError term uni fun ann) term uni fun ann m,
 HasKindCheckConfig cfg) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckT uni fun cfg m ()
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#checkKindM"
	><span class="hs-identifier hs-var"
	  >checkKindM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476651"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><a href="#local-6989586621679476651"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann -&gt; Type TyName uni () -&gt; Type TyName uni ann
forall a b. a -&gt; Type TyName uni b -&gt; Type TyName uni a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%3C%24"
	><span class="hs-operator hs-var"
	  >&lt;$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476652"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ()
 -&gt; ReaderT
      (TypeCheckEnv uni fun (PirTCConfig uni fun))
      (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
      ())
-&gt; Kind ()
-&gt; ReaderT
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (ExceptT (TypeError (Term TyName Name uni fun ()) uni fun ann) m)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
	><span class="hs-identifier hs-var"
	  >Type</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-433"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- NOTE: we completely skip the check in case of toplevel because we would need an *final, extended Gamma environment*</span
      ><span
      >
</span
      ><span id="line-434"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- to run the kind-check in, but we cannot easily get that since we are using a Reader for environments and not State</span
      ><span
      >
</span
      ><span id="line-435"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>AllowEscape
</span
	><a href="PlutusIR.Compiler.Types.html#YesEscape"
	><span class="hs-identifier hs-var"
	  >YesEscape</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>() -&gt; PirTCEnv uni fun m ()
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-436"
      ></span
      ><span
      >
</span
      ><span id="line-437"
      ></span
      ><span
      >
</span
      ><span id="line-438"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Changes the flag in nested-lets so to disallow returning a type outside of the type's scope</span
	></span
      ><span
      >
</span
      ><span id="line-439"
      ></span
      ><span id="local-6989586621679475940"
      ><span id="local-6989586621679475941"
	><span id="local-6989586621679475942"
	  ><span id="local-6989586621679475943"
	    ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#withNoEscapingTypes"
		><span class="hs-identifier hs-type"
		  >withNoEscapingTypes</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
		><span class="hs-identifier hs-type"
		  >PirTCEnv</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475940"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475941"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475942"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475943"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
		><span class="hs-identifier hs-type"
		  >PirTCEnv</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475940"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475941"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475942"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475943"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-440"
      ></span
      ><span id="withNoEscapingTypes"
      ><span class="annot"
	><span class="annottext"
	  >withNoEscapingTypes :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) a.
PirTCEnv uni fun m a -&gt; PirTCEnv uni fun m a
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#withNoEscapingTypes"
	  ><span class="hs-identifier hs-var hs-var"
	    >withNoEscapingTypes</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeCheckEnv uni fun (PirTCConfig uni fun)
 -&gt; TypeCheckEnv uni fun (PirTCConfig uni fun))
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall r (m :: * -&gt; *) a.
(r -&gt; r) -&gt; ReaderT r m a -&gt; ReaderT r m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#local"
	><span class="hs-identifier hs-var"
	  >local</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((TypeCheckEnv uni fun (PirTCConfig uni fun)
  -&gt; TypeCheckEnv uni fun (PirTCConfig uni fun))
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
 -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a)
-&gt; (TypeCheckEnv uni fun (PirTCConfig uni fun)
    -&gt; TypeCheckEnv uni fun (PirTCConfig uni fun))
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
-&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ASetter
  (TypeCheckEnv uni fun (PirTCConfig uni fun))
  (TypeCheckEnv uni fun (PirTCConfig uni fun))
  AllowEscape
  AllowEscape
-&gt; AllowEscape
-&gt; TypeCheckEnv uni fun (PirTCConfig uni fun)
-&gt; TypeCheckEnv uni fun (PirTCConfig uni fun)
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span
	><span class="hs-identifier hs-var"
	>set</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(PirTCConfig uni fun -&gt; Identity (PirTCConfig uni fun))
-&gt; TypeCheckEnv uni fun (PirTCConfig uni fun)
-&gt; Identity (TypeCheckEnv uni fun (PirTCConfig uni fun))
forall (uni :: * -&gt; *) fun1 cfg1 fun2 cfg2 (f :: * -&gt; *).
Functor f =&gt;
(cfg1 -&gt; f cfg2)
-&gt; TypeCheckEnv uni fun1 cfg1 -&gt; f (TypeCheckEnv uni fun2 cfg2)
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#tceTypeCheckConfig"
	><span class="hs-identifier hs-var"
	  >tceTypeCheckConfig</span
	  ></a
	></span
      ><span class="annot"
      ><span class="annottext"
	>((PirTCConfig uni fun -&gt; Identity (PirTCConfig uni fun))
 -&gt; TypeCheckEnv uni fun (PirTCConfig uni fun)
 -&gt; Identity (TypeCheckEnv uni fun (PirTCConfig uni fun)))
-&gt; ((AllowEscape -&gt; Identity AllowEscape)
    -&gt; PirTCConfig uni fun -&gt; Identity (PirTCConfig uni fun))
-&gt; ASetter
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     (TypeCheckEnv uni fun (PirTCConfig uni fun))
     AllowEscape
     AllowEscape
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span class="annot"
      ><span class="annottext"
	>(AllowEscape -&gt; Identity AllowEscape)
-&gt; PirTCConfig uni fun -&gt; Identity (PirTCConfig uni fun)
forall (uni :: * -&gt; *) fun (f :: * -&gt; *).
Functor f =&gt;
(AllowEscape -&gt; f AllowEscape)
-&gt; PirTCConfig uni fun -&gt; f (PirTCConfig uni fun)
</span
	><a href="PlutusIR.Compiler.Types.html#pirConfigAllowEscape"
	><span class="hs-identifier hs-var"
	  >pirConfigAllowEscape</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AllowEscape
</span
	><a href="PlutusIR.Compiler.Types.html#NoEscape"
	><span class="hs-identifier hs-var"
	  >NoEscape</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-441"
      ></span
      ><span
      >
</span
      ><span id="line-442"
      ></span
      ><span class="hs-comment"
      >-- | Run a 'TypeCheckM' computation by supplying a 'TypeCheckConfig' to it.</span
      ><span
      >
</span
      ><span id="line-443"
      ></span
      ><span class="hs-comment"
      >-- Differs from its PLC version in that is passes an extra env flag 'YesEscape'.</span
      ><span
      >
</span
      ><span id="line-444"
      ></span
      ><span id="local-6989586621679475991"
      ><span id="local-6989586621679475992"
	><span id="local-6989586621679475993"
	  ><span id="local-6989586621679475994"
	    ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#runTypeCheckM"
		><span class="hs-identifier hs-type"
		  >runTypeCheckM</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.Compiler.Types.html#PirTCConfig"
		><span class="hs-identifier hs-type"
		  >PirTCConfig</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475991"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475992"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
		><span class="hs-identifier hs-type"
		  >PirTCEnv</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475991"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475992"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475993"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475994"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475993"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475994"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-445"
      ></span
      ><span id="runTypeCheckM"
      ><span class="annot"
	><span class="annottext"
	  >runTypeCheckM :: forall (uni :: * -&gt; *) fun (m :: * -&gt; *) a.
PirTCConfig uni fun -&gt; PirTCEnv uni fun m a -&gt; m a
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#runTypeCheckM"
	  ><span class="hs-identifier hs-var hs-var"
	    >runTypeCheckM</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476668"
      ><span class="annot"
	><span class="annottext"
	  >PirTCConfig uni fun
</span
	  ><a href="#local-6989586621679476668"
	  ><span class="hs-identifier hs-var"
	    >config</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476669"
      ><span class="annot"
	><span class="annottext"
	  >PirTCEnv uni fun m a
</span
	  ><a href="#local-6989586621679476669"
	  ><span class="hs-identifier hs-var"
	    >a</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCEnv uni fun m a
-&gt; TypeCheckEnv uni fun (PirTCConfig uni fun) -&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Reader.html#runReaderT"
	><span class="hs-identifier hs-var"
	  >runReaderT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCEnv uni fun m a
</span
	><a href="#local-6989586621679476669"
	><span class="hs-identifier hs-var"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeCheckEnv uni fun (PirTCConfig uni fun) -&gt; m a)
-&gt; TypeCheckEnv uni fun (PirTCConfig uni fun) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCConfig uni fun
-&gt; TyVarKinds
-&gt; VarTypes uni
-&gt; TypeCheckEnv uni fun (PirTCConfig uni fun)
forall (uni :: * -&gt; *) fun cfg.
cfg -&gt; TyVarKinds -&gt; VarTypes uni -&gt; TypeCheckEnv uni fun cfg
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckEnv"
	><span class="hs-identifier hs-var"
	  >TypeCheckEnv</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCConfig uni fun
</span
	><a href="#local-6989586621679476668"
	><span class="hs-identifier hs-var"
	  >config</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarKinds
forall a. Monoid a =&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#mempty"
	><span class="hs-identifier hs-var"
	  >mempty</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarTypes uni
forall a. Monoid a =&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#mempty"
	><span class="hs-identifier hs-var"
	  >mempty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-446"
      ></span
      ><span
      >
</span
      ><span id="line-447"
      ></span
      ><span class="hs-comment"
      >-- Helpers</span
      ><span
      >
</span
      ><span id="line-448"
      ></span
      ><span class="hs-comment"
      >----------</span
      ><span
      >
</span
      ><span id="line-449"
      ></span
      ><span
      >
</span
      ><span id="line-450"
      ></span
      ><span class="hs-comment"
      >-- | For a single binding, generate the newly-introduce term-variables' types,</span
      ><span
      >
</span
      ><span id="line-451"
      ></span
      ><span class="hs-comment"
      >-- normalize them, rename them and add them into scope.</span
      ><span
      >
</span
      ><span id="line-452"
      ></span
      ><span class="hs-comment"
      >-- Newly-declared term variables are: variables of termbinds, constructors, destructor</span
      ><span
      >
</span
      ><span id="line-453"
      ></span
      ><span class="hs-comment"
      >-- Note: Assumes that the input is globally-unique and preserves global-uniqueness</span
      ><span
      >
</span
      ><span id="line-454"
      ></span
      ><span class="hs-comment"
      >-- Note to self: actually passing here recursivity is unnecessary, but we do it for sake of compiler/datatype.hs api</span
      ><span
      >
</span
      ><span id="line-455"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBinding"
	><span class="hs-identifier hs-type"
	  >withVarsOfBinding</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-456"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679475882"
      ><span class="annot"
	><a href="#local-6989586621679475882"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475884"
      ><span class="annot"
	><a href="#local-6989586621679475884"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475886"
      ><span class="annot"
	><a href="#local-6989586621679475886"
	  ><span class="hs-identifier hs-type"
	    >cfg</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475885"
      ><span class="annot"
	><a href="#local-6989586621679475885"
	  ><span class="hs-identifier hs-type"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475883"
      ><span class="annot"
	><a href="#local-6989586621679475883"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679475887"
      ><span class="annot"
	><a href="#local-6989586621679475887"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-457"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Normalize.Internal.html#MonadNormalizeType"
	><span class="hs-identifier hs-type"
	  >MonadNormalizeType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475882"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475883"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-458"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Recursivity"
	><span class="hs-identifier hs-type"
	  >Recursivity</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-459"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Binding"
	><span class="hs-identifier hs-type"
	  >Binding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475882"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475884"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475885"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-460"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
	><span class="hs-identifier hs-type"
	  >TypeCheckT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475882"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475884"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475886"
	><span class="hs-identifier hs-type"
	  >cfg</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475883"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475887"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-461"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
	><span class="hs-identifier hs-type"
	  >TypeCheckT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475882"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475884"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475886"
	><span class="hs-identifier hs-type"
	  >cfg</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475883"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475887"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-462"
      ></span
      ><span id="withVarsOfBinding"
      ><span class="annot"
	><span class="annottext"
	  >withVarsOfBinding :: forall (uni :: * -&gt; *) fun cfg ann (m :: * -&gt; *) a.
MonadNormalizeType uni m =&gt;
Recursivity
-&gt; Binding TyName Name uni fun ann
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBinding"
	  ><span class="hs-identifier hs-var hs-var"
	    >withVarsOfBinding</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TypeBind"
	><span class="hs-identifier hs-type"
	  >TypeBind</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="hs-special"
      >}</span
      ><span
      > </span
      ><span id="local-6989586621679476690"
      ><span class="annot"
	><span class="annottext"
	  >TypeCheckT uni fun cfg m a
</span
	  ><a href="#local-6989586621679476690"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeCheckT uni fun cfg m a
</span
	><a href="#local-6989586621679476690"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-463"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBinding"
	><span class="hs-identifier hs-var"
	  >withVarsOfBinding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TermBind"
	><span class="hs-identifier hs-type"
	  >TermBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Strictness
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476691"
      ><span class="annot"
	><span class="annottext"
	  >VarDecl TyName Name uni ann
</span
	  ><a href="#local-6989586621679476691"
	  ><span class="hs-identifier hs-var"
	    >vdecl</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term TyName Name uni fun ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621679476692"
      ><span class="annot"
	><span class="annottext"
	  >TypeCheckT uni fun cfg m a
</span
	  ><a href="#local-6989586621679476692"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-464"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679476693"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ann)
</span
	  ><a href="#local-6989586621679476693"
	  ><span class="hs-identifier hs-var"
	    >vTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann
 -&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann)))
-&gt; Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni ann -&gt; Type TyName uni ann
forall tyname name (uni :: * -&gt; *) ann.
VarDecl tyname name uni ann -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#_varDeclType"
	><span class="hs-identifier hs-var"
	  >_varDeclType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni ann
</span
	><a href="#local-6989586621679476691"
	><span class="hs-identifier hs-var"
	  >vdecl</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-465"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- no need to rename here</span
      ><span
      >
</span
      ><span id="line-466"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#withVar"
	><span class="hs-identifier hs-var"
	  >withVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni ann -&gt; Name
forall tyname name (uni :: * -&gt; *) ann.
VarDecl tyname name uni ann -&gt; name
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#_varDeclName"
	><span class="hs-identifier hs-var"
	  >_varDeclName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni ann
</span
	><a href="#local-6989586621679476691"
	><span class="hs-identifier hs-var"
	  >vdecl</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni ann -&gt; Type TyName uni ())
-&gt; Normalized (Type TyName uni ann)
-&gt; Normalized (Type TyName uni ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ann)
</span
	><a href="#local-6989586621679476693"
	><span class="hs-identifier hs-var"
	  >vTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeCheckT uni fun cfg m a
</span
	><a href="#local-6989586621679476692"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-467"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBinding"
	><span class="hs-identifier hs-var"
	  >withVarsOfBinding</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679476695"
      ><span class="annot"
	><span class="annottext"
	  >Recursivity
</span
	  ><a href="#local-6989586621679476695"
	  ><span class="hs-identifier hs-var"
	    >r</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#DatatypeBind"
	><span class="hs-identifier hs-type"
	  >DatatypeBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476696"
      ><span class="annot"
	><span class="annottext"
	  >Datatype TyName Name uni ann
</span
	  ><a href="#local-6989586621679476696"
	  ><span class="hs-identifier hs-var"
	    >dt</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621679476697"
      ><span class="annot"
	><span class="annottext"
	  >TypeCheckT uni fun cfg m a
</span
	  ><a href="#local-6989586621679476697"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-468"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- generate all the definitions</span
      ><span
      >
</span
      ><span id="line-469"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- options don't matter, we're just doing it for the types</span
      ><span
      >
</span
      ><span id="line-470"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679476698"
      ><span class="annot"
	><span class="annottext"
	  >Def (TyVarDecl TyName (Provenance ann)) (PLCRecType uni Any ann)
</span
	  ><a href="#local-6989586621679476698"
	  ><span class="hs-identifier hs-var"
	    >_tyconstrDef</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679476699"
      ><span class="annot"
	><span class="annottext"
	  >[Def
   (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)]
</span
	  ><a href="#local-6989586621679476699"
	  ><span class="hs-identifier hs-var"
	    >constrDefs</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679476700"
      ><span class="annot"
	><span class="annottext"
	  >Def
  (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)
</span
	  ><a href="#local-6989586621679476700"
	  ><span class="hs-identifier hs-var"
	    >destrDef</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DatatypeCompilationOpts
-&gt; Recursivity
-&gt; Datatype TyName Name uni (Provenance ann)
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg)
     m
     (Def (TyVarDecl TyName (Provenance ann)) (PLCRecType uni Any ann),
      [Def
         (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)],
      Def
        (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann))
forall (m :: * -&gt; *) (uni :: * -&gt; *) a fun.
MonadQuote m =&gt;
DatatypeCompilationOpts
-&gt; Recursivity
-&gt; Datatype TyName Name uni (Provenance a)
-&gt; m (Def (TyVarDecl TyName (Provenance a)) (PLCRecType uni fun a),
      [Def (VarDecl TyName Name uni (Provenance a)) (PIRTerm uni fun a)],
      Def (VarDecl TyName Name uni (Provenance a)) (PIRTerm uni fun a))
</span
	><a href="PlutusIR.Compiler.Datatype.html#compileDatatypeDefs"
	><span class="hs-identifier hs-var"
	  >compileDatatypeDefs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>DatatypeCompilationOpts
</span
	><a href="PlutusIR.Compiler.Types.html#defaultDatatypeCompilationOpts"
	><span class="hs-identifier hs-var"
	  >defaultDatatypeCompilationOpts</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="#local-6989586621679476695"
	><span class="hs-identifier hs-var"
	  >r</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Datatype TyName Name uni ann
-&gt; Datatype TyName Name uni (Provenance ann)
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f (Provenance a)
</span
	><a href="PlutusIR.Compiler.Provenance.html#original"
	><span class="hs-identifier hs-var"
	  >original</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Datatype TyName Name uni ann
</span
	><a href="#local-6989586621679476696"
	><span class="hs-identifier hs-var"
	  >dt</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-471"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- ignore the generated rhs terms of constructors/destructor</span
      ><span
      >
</span
      ><span id="line-472"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679476705"
      ><span class="annot"
	><span class="annottext"
	  >structorDecls :: [VarDecl TyName Name uni (Provenance ann)]
</span
	  ><a href="#local-6989586621679476705"
	  ><span class="hs-identifier hs-var hs-var"
	    >structorDecls</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Def
  (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)
-&gt; VarDecl TyName Name uni (Provenance ann)
forall var val. Def var val -&gt; var
</span
	><a href="../../plutus-core/src/PlutusCore.MkPlc.html#defVar"
	><span class="hs-identifier hs-var"
	  >PIR.defVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Def
   (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)
 -&gt; VarDecl TyName Name uni (Provenance ann))
-&gt; [Def
      (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)]
-&gt; [VarDecl TyName Name uni (Provenance ann)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Def
  (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)
</span
	><a href="#local-6989586621679476700"
	><span class="hs-identifier hs-var"
	  >destrDef</span
	  ></a
	></span
      ><span class="annot"
      ><span class="annottext"
	>Def
  (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)
-&gt; [Def
      (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)]
-&gt; [Def
      (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)]
forall a. a -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-var"
	  >:</span
	  ></a
	></span
      ><span class="annot"
      ><span class="annottext"
	>[Def
   (VarDecl TyName Name uni (Provenance ann)) (PIRTerm uni Any ann)]
</span
	><a href="#local-6989586621679476699"
	><span class="hs-identifier hs-var"
	  >constrDefs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-473"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(VarDecl TyName Name uni (Provenance ann)
 -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
-&gt; TypeCheckT uni fun cfg m a
-&gt; [VarDecl TyName Name uni (Provenance ann)]
-&gt; TypeCheckT uni fun cfg m a
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#foldr"
	><span class="hs-identifier hs-var"
	  >foldr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni (Provenance ann)
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	><a href="#local-6989586621679476707"
	><span class="hs-identifier hs-var"
	  >normRenameScope</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeCheckT uni fun cfg m a
</span
	><a href="#local-6989586621679476697"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[VarDecl TyName Name uni (Provenance ann)]
</span
	><a href="#local-6989586621679476705"
	><span class="hs-identifier hs-var"
	  >structorDecls</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-474"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-475"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- normalize, then introduce the vardecl to scope</span
      ><span
      >
</span
      ><span id="line-476"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="#local-6989586621679476707"
	><span class="hs-identifier hs-type"
	  >normRenameScope</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#VarDecl"
	><span class="hs-identifier hs-type"
	  >VarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475882"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Provenance.html#Provenance"
	><span class="hs-identifier hs-type"
	  >Provenance</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475885"
	><span class="hs-identifier hs-type"
	  >ann</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-477"
      ></span
      ><span
      >                      </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
	><span class="hs-identifier hs-type"
	  >TypeCheckT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475882"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475884"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475886"
	><span class="hs-identifier hs-type"
	  >cfg</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475883"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475887"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
	><span class="hs-identifier hs-type"
	  >TypeCheckT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475882"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475884"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475886"
	><span class="hs-identifier hs-type"
	  >cfg</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475883"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679475887"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-478"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621679476707"
      ><span class="annot"
	><span class="annottext"
	  >normRenameScope :: VarDecl TyName Name uni (Provenance ann)
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	  ><a href="#local-6989586621679476707"
	  ><span class="hs-identifier hs-var hs-var"
	    >normRenameScope</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476708"
      ><span class="annot"
	><span class="annottext"
	  >VarDecl TyName Name uni (Provenance ann)
</span
	  ><a href="#local-6989586621679476708"
	  ><span class="hs-identifier hs-var"
	    >v</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476709"
      ><span class="annot"
	><span class="annottext"
	  >TypeCheckT uni fun cfg m a
</span
	  ><a href="#local-6989586621679476709"
	  ><span class="hs-identifier hs-var"
	    >acc</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-479"
      ></span
      ><span
      >          </span
      ><span id="local-6989586621679476710"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni (Provenance ann))
</span
	  ><a href="#local-6989586621679476710"
	  ><span class="hs-identifier hs-var"
	    >normRenamedTy</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni (Provenance ann)
-&gt; TypeCheckT
     uni fun cfg m (Normalized (Type TyName uni (Provenance ann)))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni (Provenance ann)
 -&gt; TypeCheckT
      uni fun cfg m (Normalized (Type TyName uni (Provenance ann))))
-&gt; Type TyName uni (Provenance ann)
-&gt; TypeCheckT
     uni fun cfg m (Normalized (Type TyName uni (Provenance ann)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni (Provenance ann)
-&gt; Type TyName uni (Provenance ann)
forall tyname name (uni :: * -&gt; *) ann.
VarDecl tyname name uni ann -&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#_varDeclType"
	><span class="hs-identifier hs-var"
	  >_varDeclType</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni (Provenance ann)
</span
	><a href="#local-6989586621679476708"
	><span class="hs-identifier hs-var"
	  >v</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-480"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#withVar"
	><span class="hs-identifier hs-var"
	  >withVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni (Provenance ann) -&gt; Name
forall tyname name (uni :: * -&gt; *) ann.
VarDecl tyname name uni ann -&gt; name
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#_varDeclName"
	><span class="hs-identifier hs-var"
	  >_varDeclName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarDecl TyName Name uni (Provenance ann)
</span
	><a href="#local-6989586621679476708"
	><span class="hs-identifier hs-var"
	  >v</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni (Provenance ann) -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type TyName uni (Provenance ann) -&gt; Type TyName uni ())
-&gt; Normalized (Type TyName uni (Provenance ann))
-&gt; Normalized (Type TyName uni ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni (Provenance ann))
</span
	><a href="#local-6989586621679476710"
	><span class="hs-identifier hs-var"
	  >normRenamedTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeCheckT uni fun cfg m a
</span
	><a href="#local-6989586621679476709"
	><span class="hs-identifier hs-var"
	  >acc</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-481"
      ></span
      ><span
      >
</span
      ><span id="line-482"
      ></span
      ><span
      >
</span
      ><span id="line-483"
      ></span
      ><span id="local-6989586621679475896"
      ><span id="local-6989586621679475897"
	><span id="local-6989586621679475898"
	  ><span id="local-6989586621679475899"
	    ><span id="local-6989586621679475900"
	      ><span id="local-6989586621679475901"
		><span id="local-6989586621679475902"
		  ><span class="annot"
		    ><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBindings"
		      ><span class="hs-identifier hs-type"
			>withVarsOfBindings</span
			></a
		      ></span
		    ><span
		    >
</span
		    ><span id="line-484"
		    ></span
		    ><span
		    >    </span
		    ><span class="hs-glyph"
		    >::</span
		    ><span
		    > </span
		    ><span class="hs-special"
		    >(</span
		    ><span class="annot"
		    ><a href="../../plutus-core/src/PlutusCore.Normalize.Internal.html#MonadNormalizeType"
		      ><span class="hs-identifier hs-type"
			>MonadNormalizeType</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475896"
		      ><span class="hs-identifier hs-type"
			>uni</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475897"
		      ><span class="hs-identifier hs-type"
			>m</span
			></a
		      ></span
		    ><span class="hs-special"
		    >,</span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#Foldable"
		      ><span class="hs-identifier hs-type"
			>Foldable</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475898"
		      ><span class="hs-identifier hs-type"
			>t</span
			></a
		      ></span
		    ><span class="hs-special"
		    >)</span
		    ><span
		    >
</span
		    ><span id="line-485"
		    ></span
		    ><span
		    >    </span
		    ><span class="hs-glyph"
		    >=&gt;</span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="PlutusIR.Core.Type.html#Recursivity"
		      ><span class="hs-identifier hs-type"
			>Recursivity</span
			></a
		      ></span
		    ><span
		    >
</span
		    ><span id="line-486"
		    ></span
		    ><span
		    >    </span
		    ><span class="hs-glyph"
		    >-&gt;</span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475898"
		      ><span class="hs-identifier hs-type"
			>t</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="hs-special"
		    >(</span
		    ><span class="annot"
		    ><a href="PlutusIR.Core.Type.html#Binding"
		      ><span class="hs-identifier hs-type"
			>Binding</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		      ><span class="hs-identifier hs-type"
			>TyName</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		      ><span class="hs-identifier hs-type"
			>Name</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475896"
		      ><span class="hs-identifier hs-type"
			>uni</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475899"
		      ><span class="hs-identifier hs-type"
			>fun</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475900"
		      ><span class="hs-identifier hs-type"
			>ann</span
			></a
		      ></span
		    ><span class="hs-special"
		    >)</span
		    ><span
		    >
</span
		    ><span id="line-487"
		    ></span
		    ><span
		    >    </span
		    ><span class="hs-glyph"
		    >-&gt;</span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
		      ><span class="hs-identifier hs-type"
			>TypeCheckT</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475896"
		      ><span class="hs-identifier hs-type"
			>uni</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475899"
		      ><span class="hs-identifier hs-type"
			>fun</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475901"
		      ><span class="hs-identifier hs-type"
			>cfg</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475897"
		      ><span class="hs-identifier hs-type"
			>m</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475902"
		      ><span class="hs-identifier hs-type"
			>a</span
			></a
		      ></span
		    ><span
		    >
</span
		    ><span id="line-488"
		    ></span
		    ><span
		    >    </span
		    ><span class="hs-glyph"
		    >-&gt;</span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
		      ><span class="hs-identifier hs-type"
			>TypeCheckT</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475896"
		      ><span class="hs-identifier hs-type"
			>uni</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475899"
		      ><span class="hs-identifier hs-type"
			>fun</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475901"
		      ><span class="hs-identifier hs-type"
			>cfg</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475897"
		      ><span class="hs-identifier hs-type"
			>m</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475902"
		      ><span class="hs-identifier hs-type"
			>a</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-489"
      ></span
      ><span id="withVarsOfBindings"
      ><span class="annot"
	><span class="annottext"
	  >withVarsOfBindings :: forall (uni :: * -&gt; *) (m :: * -&gt; *) (t :: * -&gt; *) fun ann cfg a.
(MonadNormalizeType uni m, Foldable t) =&gt;
Recursivity
-&gt; t (Binding TyName Name uni fun ann)
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBindings"
	  ><span class="hs-identifier hs-var hs-var"
	    >withVarsOfBindings</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476715"
      ><span class="annot"
	><span class="annottext"
	  >Recursivity
</span
	  ><a href="#local-6989586621679476715"
	  ><span class="hs-identifier hs-var"
	    >r</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476716"
      ><span class="annot"
	><span class="annottext"
	  >t (Binding TyName Name uni fun ann)
</span
	  ><a href="#local-6989586621679476716"
	  ><span class="hs-identifier hs-var"
	    >bs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476717"
      ><span class="annot"
	><span class="annottext"
	  >TypeCheckT uni fun cfg m a
</span
	  ><a href="#local-6989586621679476717"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Binding TyName Name uni fun ann
 -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
-&gt; TypeCheckT uni fun cfg m a
-&gt; t (Binding TyName Name uni fun ann)
-&gt; TypeCheckT uni fun cfg m a
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#foldr"
	><span class="hs-identifier hs-var"
	  >foldr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
-&gt; Binding TyName Name uni fun ann
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall (uni :: * -&gt; *) fun cfg ann (m :: * -&gt; *) a.
MonadNormalizeType uni m =&gt;
Recursivity
-&gt; Binding TyName Name uni fun ann
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withVarsOfBinding"
	><span class="hs-identifier hs-var"
	  >withVarsOfBinding</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="#local-6989586621679476715"
	><span class="hs-identifier hs-var"
	  >r</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeCheckT uni fun cfg m a
</span
	><a href="#local-6989586621679476717"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>t (Binding TyName Name uni fun ann)
</span
	><a href="#local-6989586621679476716"
	><span class="hs-identifier hs-var"
	  >bs</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-490"
      ></span
      ><span
      >
</span
      ><span id="line-491"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Scope a typechecking computation with the given binding's newly-introducing type (if there is one)</span
	></span
      ><span
      >
</span
      ><span id="line-492"
      ></span
      ><span id="local-6989586621679475875"
      ><span id="local-6989586621679475876"
	><span id="local-6989586621679475877"
	  ><span id="local-6989586621679475878"
	    ><span id="local-6989586621679475879"
	      ><span id="local-6989586621679475880"
		><span id="local-6989586621679475881"
		  ><span class="annot"
		    ><a href="PlutusIR.TypeCheck.Internal.html#withTyVarsOfBinding"
		      ><span class="hs-identifier hs-type"
			>withTyVarsOfBinding</span
			></a
		      ></span
		    ><span
		    >
</span
		    ><span id="line-493"
		    ></span
		    ><span
		    >    </span
		    ><span class="hs-glyph"
		    >::</span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="PlutusIR.Core.Type.html#Binding"
		      ><span class="hs-identifier hs-type"
			>Binding</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		      ><span class="hs-identifier hs-type"
			>TyName</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475875"
		      ><span class="hs-identifier hs-type"
			>name</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475876"
		      ><span class="hs-identifier hs-type"
			>uni</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475877"
		      ><span class="hs-identifier hs-type"
			>fun</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475878"
		      ><span class="hs-identifier hs-type"
			>ann</span
			></a
		      ></span
		    ><span
		    >
</span
		    ><span id="line-494"
		    ></span
		    ><span
		    >    </span
		    ><span class="hs-glyph"
		    >-&gt;</span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
		      ><span class="hs-identifier hs-type"
			>TypeCheckT</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475876"
		      ><span class="hs-identifier hs-type"
			>uni</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475877"
		      ><span class="hs-identifier hs-type"
			>fun</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475879"
		      ><span class="hs-identifier hs-type"
			>cfg</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475880"
		      ><span class="hs-identifier hs-type"
			>m</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475881"
		      ><span class="hs-identifier hs-type"
			>a</span
			></a
		      ></span
		    ><span
		    >
</span
		    ><span id="line-495"
		    ></span
		    ><span
		    >    </span
		    ><span class="hs-glyph"
		    >-&gt;</span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
		      ><span class="hs-identifier hs-type"
			>TypeCheckT</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475876"
		      ><span class="hs-identifier hs-type"
			>uni</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475877"
		      ><span class="hs-identifier hs-type"
			>fun</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475879"
		      ><span class="hs-identifier hs-type"
			>cfg</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475880"
		      ><span class="hs-identifier hs-type"
			>m</span
			></a
		      ></span
		    ><span
		    > </span
		    ><span class="annot"
		    ><a href="#local-6989586621679475881"
		      ><span class="hs-identifier hs-type"
			>a</span
			></a
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-496"
      ></span
      ><span id="withTyVarsOfBinding"
      ><span class="annot"
	><span class="annottext"
	  >withTyVarsOfBinding :: forall name (uni :: * -&gt; *) fun ann cfg (m :: * -&gt; *) a.
Binding TyName name uni fun ann
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#withTyVarsOfBinding"
	  ><span class="hs-identifier hs-var hs-var"
	    >withTyVarsOfBinding</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-glyph"
      >case</span
      ><span
      >
</span
      ><span id="line-497"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TypeBind"
	><span class="hs-identifier hs-type"
	  >TypeBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476718"
      ><span class="annot"
	><span class="annottext"
	  >TyVarDecl TyName ann
</span
	  ><a href="#local-6989586621679476718"
	  ><span class="hs-identifier hs-var"
	    >tvdecl</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      >                      </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
forall ann (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
[TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withTyVarDecls"
	><span class="hs-identifier hs-var"
	  >withTyVarDecls</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><a href="#local-6989586621679476718"
	><span class="hs-identifier hs-var"
	  >tvdecl</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-498"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#DatatypeBind"
	><span class="hs-identifier hs-type"
	  >DatatypeBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Datatype"
	><span class="hs-identifier hs-type"
	  >Datatype</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476719"
      ><span class="annot"
	><span class="annottext"
	  >TyVarDecl TyName ann
</span
	  ><a href="#local-6989586621679476719"
	  ><span class="hs-identifier hs-var"
	    >tvdecl</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>name
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[VarDecl TyName name uni ann]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
forall ann (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
[TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withTyVarDecls"
	><span class="hs-identifier hs-var"
	  >withTyVarDecls</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><a href="#local-6989586621679476719"
	><span class="hs-identifier hs-var"
	  >tvdecl</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-499"
      ></span
      ><span
      >       </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TermBind"
	><span class="hs-identifier hs-type"
	  >TermBind</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="hs-special"
      >}</span
      ><span
      >                               </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
forall a. a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#id"
	><span class="hs-identifier hs-var"
	  >id</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-comment"
      >-- no type to introduce</span
      ><span
      >
</span
      ><span id="line-500"
      ></span
      ><span
      >
</span
      ><span id="line-501"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Extend the typecheck reader environment with the kinds of the newly-introduced type variables of a binding.</span
	></span
      ><span
      >
</span
      ><span id="line-502"
      ></span
      ><span id="local-6989586621679475888"
      ><span id="local-6989586621679475889"
	><span id="local-6989586621679475890"
	  ><span id="local-6989586621679475891"
	    ><span id="local-6989586621679475892"
	      ><span id="local-6989586621679475893"
		><span id="local-6989586621679475894"
		  ><span id="local-6989586621679475895"
		    ><span class="annot"
		      ><a href="PlutusIR.TypeCheck.Internal.html#withTyVarsOfBindings"
			><span class="hs-identifier hs-type"
			  >withTyVarsOfBindings</span
			  ></a
			></span
		      ><span
		      >
</span
		      ><span id="line-503"
		      ></span
		      ><span
		      >    </span
		      ><span class="hs-glyph"
		      >::</span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#Foldable"
			><span class="hs-identifier hs-type"
			  >Foldable</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475888"
			><span class="hs-identifier hs-type"
			  >f</span
			  ></a
			></span
		      ><span
		      >
</span
		      ><span id="line-504"
		      ></span
		      ><span
		      >    </span
		      ><span class="hs-glyph"
		      >=&gt;</span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475888"
			><span class="hs-identifier hs-type"
			  >f</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="hs-special"
		      >(</span
		      ><span class="annot"
		      ><a href="PlutusIR.Core.Type.html#Binding"
			><span class="hs-identifier hs-type"
			  >Binding</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
			><span class="hs-identifier hs-type"
			  >TyName</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475889"
			><span class="hs-identifier hs-type"
			  >name</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475890"
			><span class="hs-identifier hs-type"
			  >uni</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475891"
			><span class="hs-identifier hs-type"
			  >fun</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475892"
			><span class="hs-identifier hs-type"
			  >ann</span
			  ></a
			></span
		      ><span class="hs-special"
		      >)</span
		      ><span
		      >
</span
		      ><span id="line-505"
		      ></span
		      ><span
		      >    </span
		      ><span class="hs-glyph"
		      >-&gt;</span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
			><span class="hs-identifier hs-type"
			  >TypeCheckT</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475890"
			><span class="hs-identifier hs-type"
			  >uni</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475891"
			><span class="hs-identifier hs-type"
			  >fun</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475893"
			><span class="hs-identifier hs-type"
			  >cfg</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475894"
			><span class="hs-identifier hs-type"
			  >m</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475895"
			><span class="hs-identifier hs-type"
			  >a</span
			  ></a
			></span
		      ><span
		      >
</span
		      ><span id="line-506"
		      ></span
		      ><span
		      >    </span
		      ><span class="hs-glyph"
		      >-&gt;</span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
			><span class="hs-identifier hs-type"
			  >TypeCheckT</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475890"
			><span class="hs-identifier hs-type"
			  >uni</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475891"
			><span class="hs-identifier hs-type"
			  >fun</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475893"
			><span class="hs-identifier hs-type"
			  >cfg</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475894"
			><span class="hs-identifier hs-type"
			  >m</span
			  ></a
			></span
		      ><span
		      > </span
		      ><span class="annot"
		      ><a href="#local-6989586621679475895"
			><span class="hs-identifier hs-type"
			  >a</span
			  ></a
			></span
		      ></span
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-507"
      ></span
      ><span id="withTyVarsOfBindings"
      ><span class="annot"
	><span class="annottext"
	  >withTyVarsOfBindings :: forall (f :: * -&gt; *) name (uni :: * -&gt; *) fun ann cfg (m :: * -&gt; *)
       a.
Foldable f =&gt;
f (Binding TyName name uni fun ann)
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#withTyVarsOfBindings"
	  ><span class="hs-identifier hs-var hs-var"
	    >withTyVarsOfBindings</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeCheckT uni fun cfg m a
 -&gt; f (Binding TyName name uni fun ann)
 -&gt; TypeCheckT uni fun cfg m a)
-&gt; f (Binding TyName name uni fun ann)
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#flip"
	><span class="hs-identifier hs-var"
	  >flip</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((TypeCheckT uni fun cfg m a
  -&gt; f (Binding TyName name uni fun ann)
  -&gt; TypeCheckT uni fun cfg m a)
 -&gt; f (Binding TyName name uni fun ann)
 -&gt; TypeCheckT uni fun cfg m a
 -&gt; TypeCheckT uni fun cfg m a)
-&gt; (TypeCheckT uni fun cfg m a
    -&gt; f (Binding TyName name uni fun ann)
    -&gt; TypeCheckT uni fun cfg m a)
-&gt; f (Binding TyName name uni fun ann)
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Binding TyName name uni fun ann
 -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
-&gt; TypeCheckT uni fun cfg m a
-&gt; f (Binding TyName name uni fun ann)
-&gt; TypeCheckT uni fun cfg m a
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; f a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#foldr"
	><span class="hs-identifier hs-var"
	  >foldr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName name uni fun ann
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
forall name (uni :: * -&gt; *) fun ann cfg (m :: * -&gt; *) a.
Binding TyName name uni fun ann
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	><a href="PlutusIR.TypeCheck.Internal.html#withTyVarsOfBinding"
	><span class="hs-identifier hs-var"
	  >withTyVarsOfBinding</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-508"
      ></span
      ><span
      >
</span
      ><span id="line-509"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Helper to add type variables into a computation's environment.</span
	></span
      ><span
      >
</span
      ><span id="line-510"
      ></span
      ><span id="local-6989586621679475921"
      ><span id="local-6989586621679475922"
	><span id="local-6989586621679475923"
	  ><span id="local-6989586621679475924"
	    ><span id="local-6989586621679475925"
	      ><span id="local-6989586621679475926"
		><span class="annot"
		  ><a href="PlutusIR.TypeCheck.Internal.html#withTyVarDecls"
		    ><span class="hs-identifier hs-type"
		      >withTyVarDecls</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="hs-glyph"
		  >::</span
		  ><span
		  > </span
		  ><span class="hs-special"
		  >[</span
		  ><span class="annot"
		  ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyVarDecl"
		    ><span class="hs-identifier hs-type"
		      >TyVarDecl</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		    ><span class="hs-identifier hs-type"
		      >TyName</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475921"
		    ><span class="hs-identifier hs-type"
		      >ann</span
		      ></a
		    ></span
		  ><span class="hs-special"
		  >]</span
		  ><span
		  > </span
		  ><span class="hs-glyph"
		  >-&gt;</span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
		    ><span class="hs-identifier hs-type"
		      >TypeCheckT</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475922"
		    ><span class="hs-identifier hs-type"
		      >uni</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475923"
		    ><span class="hs-identifier hs-type"
		      >fun</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475924"
		    ><span class="hs-identifier hs-type"
		      >cfg</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475925"
		    ><span class="hs-identifier hs-type"
		      >m</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475926"
		    ><span class="hs-identifier hs-type"
		      >a</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="hs-glyph"
		  >-&gt;</span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#TypeCheckT"
		    ><span class="hs-identifier hs-type"
		      >TypeCheckT</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475922"
		    ><span class="hs-identifier hs-type"
		      >uni</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475923"
		    ><span class="hs-identifier hs-type"
		      >fun</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475924"
		    ><span class="hs-identifier hs-type"
		      >cfg</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475925"
		    ><span class="hs-identifier hs-type"
		      >m</span
		      ></a
		    ></span
		  ><span
		  > </span
		  ><span class="annot"
		  ><a href="#local-6989586621679475926"
		    ><span class="hs-identifier hs-type"
		      >a</span
		      ></a
		    ></span
		  ></span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-511"
      ></span
      ><span id="withTyVarDecls"
      ><span class="annot"
	><span class="annottext"
	  >withTyVarDecls :: forall ann (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
[TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#withTyVarDecls"
	  ><span class="hs-identifier hs-var hs-var"
	    >withTyVarDecls</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TypeCheckT uni fun cfg m a
 -&gt; [TyVarDecl TyName ann] -&gt; TypeCheckT uni fun cfg m a)
-&gt; [TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#flip"
	><span class="hs-identifier hs-var"
	  >flip</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((TypeCheckT uni fun cfg m a
  -&gt; [TyVarDecl TyName ann] -&gt; TypeCheckT uni fun cfg m a)
 -&gt; [TyVarDecl TyName ann]
 -&gt; TypeCheckT uni fun cfg m a
 -&gt; TypeCheckT uni fun cfg m a)
-&gt; ((TyVarDecl TyName ann
     -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
    -&gt; TypeCheckT uni fun cfg m a
    -&gt; [TyVarDecl TyName ann]
    -&gt; TypeCheckT uni fun cfg m a)
-&gt; (TyVarDecl TyName ann
    -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
-&gt; [TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(TyVarDecl TyName ann
 -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
-&gt; TypeCheckT uni fun cfg m a
-&gt; [TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#foldr"
	><span class="hs-identifier hs-var"
	  >foldr</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((TyVarDecl TyName ann
  -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
 -&gt; [TyVarDecl TyName ann]
 -&gt; TypeCheckT uni fun cfg m a
 -&gt; TypeCheckT uni fun cfg m a)
-&gt; (TyVarDecl TyName ann
    -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
-&gt; [TyVarDecl TyName ann]
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyVarDecl"
	><span class="hs-identifier hs-type"
	  >TyVarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476725"
      ><span class="annot"
	><span class="annottext"
	  >TyName
</span
	  ><a href="#local-6989586621679476725"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476726"
      ><span class="annot"
	><span class="annottext"
	  >Kind ann
</span
	  ><a href="#local-6989586621679476726"
	  ><span class="hs-identifier hs-var"
	    >k</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
-&gt; Kind ()
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall (uni :: * -&gt; *) fun cfg (m :: * -&gt; *) a.
TyName
-&gt; Kind ()
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#withTyVar"
	><span class="hs-identifier hs-var"
	  >withTyVar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyName
</span
	><a href="#local-6989586621679476725"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Kind ()
 -&gt; TypeCheckT uni fun cfg m a -&gt; TypeCheckT uni fun cfg m a)
-&gt; Kind ()
-&gt; TypeCheckT uni fun cfg m a
-&gt; TypeCheckT uni fun cfg m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann -&gt; Kind ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Kind ann
</span
	><a href="#local-6989586621679476726"
	><span class="hs-identifier hs-var"
	  >k</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-512"
      ></span
      ><span
      >
</span
      ><span id="line-513"
      ></span
      ><span class="hs-comment"
      >-- | Substitute `TypeBind`s from the given list of `Binding`s in the given `Type`.</span
      ><span
      >
</span
      ><span id="line-514"
      ></span
      ><span class="hs-comment"
      >-- This is so that @let a = (con integer) in \(x : a) -&gt; x@ typechecks.</span
      ><span
      >
</span
      ><span id="line-515"
      ></span
      ><span id="local-6989586621679475855"
      ><span id="local-6989586621679475856"
	><span id="local-6989586621679475857"
	  ><span id="local-6989586621679475858"
	    ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#substTypeBinds"
		><span class="hs-identifier hs-type"
		  >substTypeBinds</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      >
</span
	      ><span id="line-516"
	      ></span
	      ><span
	      >    </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Normalize.Internal.html#MonadNormalizeType"
		><span class="hs-identifier hs-type"
		  >MonadNormalizeType</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475855"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475856"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >=&gt;</span
	      ><span
	      >
</span
	      ><span id="line-517"
	      ></span
	      ><span
	      >    </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#NonEmpty"
		><span class="hs-identifier hs-type"
		  >NonEmpty</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusIR.Core.Type.html#Binding"
		><span class="hs-identifier hs-type"
		  >Binding</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475855"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475857"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475858"
		><span class="hs-identifier hs-type"
		  >ann</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      >
</span
	      ><span id="line-518"
	      ></span
	      ><span
	      >    </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
		><span class="hs-identifier hs-type"
		  >Normalized</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
		><span class="hs-identifier hs-type"
		  >Type</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475855"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="hs-special"
	      >)</span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      >
</span
	      ><span id="line-519"
	      ></span
	      ><span
	      >    </span
	      ><span class="annot"
	      ><a href="PlutusIR.TypeCheck.Internal.html#PirTCEnv"
		><span class="hs-identifier hs-type"
		  >PirTCEnv</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475855"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475857"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475856"
		><span class="hs-identifier hs-type"
		  >m</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Normalized"
		><span class="hs-identifier hs-type"
		  >Normalized</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Core.Type.html#Type"
		><span class="hs-identifier hs-type"
		  >Type</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
		><span class="hs-identifier hs-type"
		  >TyName</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679475855"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="hs-special"
	      >)</span
	      ><span class="hs-special"
	      >)</span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-520"
      ></span
      ><span id="substTypeBinds"
      ><span class="annot"
	><span class="annottext"
	  >substTypeBinds :: forall (uni :: * -&gt; *) (m :: * -&gt; *) fun ann.
MonadNormalizeType uni m =&gt;
NonEmpty (Binding TyName Name uni fun ann)
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
</span
	  ><a href="PlutusIR.TypeCheck.Internal.html#substTypeBinds"
	  ><span class="hs-identifier hs-var hs-var"
	    >substTypeBinds</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Normalized (Type TyName uni ())
 -&gt; NonEmpty (Binding TyName Name uni fun ann)
 -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#flip"
	><span class="hs-identifier hs-var"
	  >flip</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Normalized (Type TyName uni ())
  -&gt; NonEmpty (Binding TyName Name uni fun ann)
  -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
 -&gt; NonEmpty (Binding TyName Name uni fun ann)
 -&gt; Normalized (Type TyName uni ())
 -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
-&gt; ((Binding TyName Name uni fun ann
     -&gt; Normalized (Type TyName uni ())
     -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
    -&gt; Normalized (Type TyName uni ())
    -&gt; NonEmpty (Binding TyName Name uni fun ann)
    -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
-&gt; (Binding TyName Name uni fun ann
    -&gt; Normalized (Type TyName uni ())
    -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#."
	><span class="hs-operator hs-var"
	  >.</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Binding TyName Name uni fun ann
 -&gt; Normalized (Type TyName uni ())
 -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
-&gt; Normalized (Type TyName uni ())
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; b -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Foldable.html#foldrM"
	><span class="hs-identifier hs-var"
	  >foldrM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>((Binding TyName Name uni fun ann
  -&gt; Normalized (Type TyName uni ())
  -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
 -&gt; NonEmpty (Binding TyName Name uni fun ann)
 -&gt; Normalized (Type TyName uni ())
 -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
-&gt; (Binding TyName Name uni fun ann
    -&gt; Normalized (Type TyName uni ())
    -&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ())))
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679476740"
      ><span class="annot"
	><span class="annottext"
	  >Binding TyName Name uni fun ann
</span
	  ><a href="#local-6989586621679476740"
	  ><span class="hs-identifier hs-var"
	    >b</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476741"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476741"
	  ><span class="hs-identifier hs-var"
	    >ty</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
</span
	><a href="#local-6989586621679476740"
	><span class="hs-identifier hs-var"
	  >b</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-521"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#TypeBind"
	><span class="hs-identifier hs-type"
	  >TypeBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476742"
      ><span class="annot"
	><span class="annottext"
	  >TyVarDecl TyName ann
</span
	  ><a href="#local-6989586621679476742"
	  ><span class="hs-identifier hs-var"
	    >tvar</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679476743"
      ><span class="annot"
	><span class="annottext"
	  >Type TyName uni ann
</span
	  ><a href="#local-6989586621679476743"
	  ><span class="hs-identifier hs-var"
	    >rhs</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-522"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679476744"
      ><span class="annot"
	><span class="annottext"
	  >Normalized (Type TyName uni ())
</span
	  ><a href="#local-6989586621679476744"
	  ><span class="hs-identifier hs-var"
	    >rhs'</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ()
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) ann fun cfg.
MonadNormalizeType uni m =&gt;
Type TyName uni ann
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ann))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#normalizeTypeM"
	><span class="hs-identifier hs-var"
	  >normalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/Data.Functor.html#void"
	><span class="hs-identifier hs-var"
	  >void</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type TyName uni ann
</span
	><a href="#local-6989586621679476743"
	><span class="hs-identifier hs-var"
	  >rhs</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-523"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- See Note [Normalizing substitution] for why `substNormalizeTypeM`</span
      ><span
      >
</span
      ><span id="line-524"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- doesn't take a normalized type.</span
      ><span
      >
</span
      ><span id="line-525"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; TyName
-&gt; Type TyName uni ()
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) (m :: * -&gt; *) fun cfg.
MonadNormalizeType uni m =&gt;
Normalized (Type TyName uni ())
-&gt; TyName
-&gt; Type TyName uni ()
-&gt; TypeCheckT uni fun cfg m (Normalized (Type TyName uni ()))
</span
	><a href="../../plutus-core/src/PlutusCore.TypeCheck.Internal.html#substNormalizeTypeM"
	><span class="hs-identifier hs-var"
	  >substNormalizeTypeM</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476744"
	><span class="hs-identifier hs-var"
	  >rhs'</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
</span
	><a href="#local-6989586621679476742"
	><span class="hs-identifier hs-var"
	  >tvar</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>TyVarDecl TyName ann
-&gt; Getting TyName (TyVarDecl TyName ann) TyName -&gt; TyName
forall s a. s -&gt; Getting a s a -&gt; a
</span
	><span class="hs-operator hs-var"
	>^.</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Getting TyName (TyVarDecl TyName ann) TyName
forall tyname1 ann tyname2 (f :: * -&gt; *).
Functor f =&gt;
(tyname1 -&gt; f tyname2)
-&gt; TyVarDecl tyname1 ann -&gt; f (TyVarDecl tyname2 ann)
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#tyVarDeclName"
	><span class="hs-identifier hs-var"
	  >tyVarDeclName</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#unNormalized"
	><span class="hs-identifier hs-var"
	  >unNormalized</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476741"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-526"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Binding TyName Name uni fun ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
-&gt; PirTCEnv uni fun m (Normalized (Type TyName uni ()))
forall a.
a -&gt; ReaderT (TypeCheckEnv uni fun (PirTCConfig uni fun)) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Normalized (Type TyName uni ())
</span
	><a href="#local-6989586621679476741"
	><span class="hs-identifier hs-var"
	  >ty</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-527"
      ></span
      ></pre
    ></body
  ></html
>
