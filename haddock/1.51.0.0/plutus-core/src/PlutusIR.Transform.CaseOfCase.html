<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><link rel="stylesheet" type="text/css" href="style.css"
     /><script type="text/javascript" src="highlight.js"
    ></script
    ></head
  ><body
  ><pre
    ><span class="hs-comment"
      >-- editorconfig-checker-disable-file</span
      ><span
      >
</span
      ><span id="line-2"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE ImpredicativeTypes  #-}</span
      ><span
      >
</span
      ><span id="line-3"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE OverloadedStrings   #-}</span
      ><span
      >
</span
      ><span id="line-4"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE ScopedTypeVariables #-}</span
      ><span
      >
</span
      ><span id="line-5"
      ></span
      ><span class="hs-pragma"
      >{-# LANGUAGE ViewPatterns        #-}</span
      ><span
      >
</span
      ><span id="line-6"
      ></span
      ><span class="hs-keyword"
      >module</span
      ><span
      > </span
      ><span class="hs-identifier"
      >PlutusIR.Transform.CaseOfCase</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCase"
	><span class="hs-identifier"
	  >caseOfCase</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCasePass"
	><span class="hs-identifier"
	  >caseOfCasePass</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCasePassSC"
	><span class="hs-identifier"
	  >caseOfCasePassSC</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-7"
      ></span
      ><span
      >
</span
      ><span id="line-8"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>Control.Lens</span
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >hiding</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="hs-identifier"
	>Strict</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>cons</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-9"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/src/Control.Monad.Trans.html"
	><span class="hs-identifier"
	  >Control.Monad.Trans</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier"
	  >lift</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-10"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Maybe.html"
	><span class="hs-identifier"
	  >Control.Monad.Trans.Maybe</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-11"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Maybe.html"
	><span class="hs-identifier"
	  >Data.Maybe</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-12"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.html"
	><span class="hs-identifier"
	  >PlutusCore</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PLC</span
	></span
      ><span
      >
</span
      ><span id="line-13"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Arity.html"
	><span class="hs-identifier"
	  >PlutusCore.Arity</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-14"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html"
	><span class="hs-identifier"
	  >PlutusCore.Name.Unique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>PLC</span
	></span
      ><span
      >
</span
      ><span id="line-15"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Quote.html"
	><span class="hs-identifier"
	  >PlutusCore.Quote</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-16"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.html"
	><span class="hs-identifier"
	  >PlutusIR</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-17"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.Builtins.html"
	><span class="hs-identifier"
	  >PlutusIR.Analysis.Builtins</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-18"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html"
	><span class="hs-identifier"
	  >PlutusIR.Analysis.VarInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#VarInfo"
	><span class="hs-identifier"
	  >VarInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#DatatypeConstructor"
	><span class="hs-identifier"
	  >DatatypeConstructor</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#DatatypeMatcher"
	><span class="hs-identifier"
	  >DatatypeMatcher</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#VarsInfo"
	><span class="hs-identifier"
	  >VarsInfo</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      >
</span
      ><span id="line-19"
      ></span
      ><span
      >                                  </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#getConstructorArities"
	><span class="hs-identifier"
	  >getConstructorArities</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#lookupVarInfo"
	><span class="hs-identifier"
	  >lookupVarInfo</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#termVarInfo"
	><span class="hs-identifier"
	  >termVarInfo</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-20"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html"
	><span class="hs-identifier"
	  >PlutusIR.Contexts</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-21"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.html"
	><span class="hs-identifier"
	  >PlutusIR.Core</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-22"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.MkPir.html"
	><span class="hs-identifier"
	  >PlutusIR.MkPir</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-23"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Pass.html"
	><span class="hs-identifier"
	  >PlutusIR.Pass</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-24"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Transform.Rename.html"
	><span class="hs-identifier"
	  >PlutusIR.Transform.Rename</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-25"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.TypeCheck.html"
	><span class="hs-identifier"
	  >PlutusIR.TypeCheck</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >qualified</span
      ><span
      > </span
      ><span class="hs-keyword"
      >as</span
      ><span
      > </span
      ><span class="annot"
      ><span class="hs-identifier"
	>TC</span
	></span
      ><span
      >
</span
      ><span id="line-26"
      ></span
      ><span class="hs-keyword"
      >import</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusPrelude.html"
	><span class="hs-identifier"
	  >PlutusPrelude</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-27"
      ></span
      ><span
      >
</span
      ><span id="line-28"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCasePassSC"
	><span class="hs-identifier hs-type"
	  >caseOfCasePassSC</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-29"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679488325"
      ><span class="annot"
	><a href="#local-6989586621679488325"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488321"
      ><span class="annot"
	><a href="#local-6989586621679488321"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488322"
      ><span class="annot"
	><a href="#local-6989586621679488322"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488327"
      ><span class="annot"
	><a href="#local-6989586621679488327"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-30"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.html#Typecheckable"
	><span class="hs-identifier hs-type"
	  >PLC.Typecheckable</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488321"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488322"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/some-1.0.6/docs/src/Data.GADT.Internal.html#GEq"
	><span class="hs-identifier hs-type"
	  >PLC.GEq</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488321"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Quote.html#MonadQuote"
	><span class="hs-identifier hs-type"
	  >PLC.MonadQuote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488325"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Ord"
	><span class="hs-identifier hs-type"
	  >Ord</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488327"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-31"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Types.html#PirTCConfig"
	><span class="hs-identifier hs-type"
	  >TC.PirTCConfig</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488321"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488322"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-32"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.Builtins.html#BuiltinsInfo"
	><span class="hs-identifier hs-type"
	  >BuiltinsInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488321"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488322"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-33"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Bool"
	><span class="hs-identifier hs-type"
	  >Bool</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-34"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488327"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-35"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Pass.html#Pass"
	><span class="hs-identifier hs-type"
	  >Pass</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488325"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488321"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488322"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488327"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-36"
      ></span
      ><span id="caseOfCasePassSC"
      ><span class="annot"
	><span class="annottext"
	  >caseOfCasePassSC :: forall (m :: * -&gt; *) (uni :: * -&gt; *) fun a.
(Typecheckable uni fun, GEq uni, MonadQuote m, Ord a) =&gt;
PirTCConfig uni fun
-&gt; BuiltinsInfo uni fun
-&gt; Bool
-&gt; a
-&gt; Pass m TyName Name uni fun a
</span
	  ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCasePassSC"
	  ><span class="hs-identifier hs-var hs-var"
	    >caseOfCasePassSC</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488648"
      ><span class="annot"
	><span class="annottext"
	  >PirTCConfig uni fun
</span
	  ><a href="#local-6989586621679488648"
	  ><span class="hs-identifier hs-var"
	    >tcconfig</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488649"
      ><span class="annot"
	><span class="annottext"
	  >BuiltinsInfo uni fun
</span
	  ><a href="#local-6989586621679488649"
	  ><span class="hs-identifier hs-var"
	    >binfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488650"
      ><span class="annot"
	><span class="annottext"
	  >Bool
</span
	  ><a href="#local-6989586621679488650"
	  ><span class="hs-identifier hs-var"
	    >conservative</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488651"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488651"
	  ><span class="hs-identifier hs-var"
	    >newAnn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-37"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Pass m TyName Name uni fun a
forall name tyname (m :: * -&gt; *) a (uni :: * -&gt; *) fun.
(HasUnique name TermUnique, HasUnique tyname TypeUnique,
 MonadQuote m, Ord a) =&gt;
Pass m tyname name uni fun a
</span
	><a href="PlutusIR.Pass.html#renamePass"
	><span class="hs-identifier hs-var"
	  >renamePass</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Pass m TyName Name uni fun a
-&gt; Pass m TyName Name uni fun a -&gt; Pass m TyName Name uni fun a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%3E"
	><span class="hs-operator hs-var"
	  >&lt;&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCConfig uni fun
-&gt; BuiltinsInfo uni fun
-&gt; Bool
-&gt; a
-&gt; Pass m TyName Name uni fun a
forall (m :: * -&gt; *) (uni :: * -&gt; *) fun a.
(Typecheckable uni fun, GEq uni, MonadQuote m, Ord a) =&gt;
PirTCConfig uni fun
-&gt; BuiltinsInfo uni fun
-&gt; Bool
-&gt; a
-&gt; Pass m TyName Name uni fun a
</span
	><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCasePass"
	><span class="hs-identifier hs-var"
	  >caseOfCasePass</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCConfig uni fun
</span
	><a href="#local-6989586621679488648"
	><span class="hs-identifier hs-var"
	  >tcconfig</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
</span
	><a href="#local-6989586621679488649"
	><span class="hs-identifier hs-var"
	  >binfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488650"
	><span class="hs-identifier hs-var"
	  >conservative</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488651"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-38"
      ></span
      ><span
      >
</span
      ><span id="line-39"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCasePass"
	><span class="hs-identifier hs-type"
	  >caseOfCasePass</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-40"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679488653"
      ><span class="annot"
	><a href="#local-6989586621679488653"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488654"
      ><span class="annot"
	><a href="#local-6989586621679488654"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488655"
      ><span class="annot"
	><a href="#local-6989586621679488655"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488656"
      ><span class="annot"
	><a href="#local-6989586621679488656"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-41"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.TypeCheck.html#Typecheckable"
	><span class="hs-identifier hs-type"
	  >PLC.Typecheckable</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488654"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488655"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/some-1.0.6/docs/src/Data.GADT.Internal.html#GEq"
	><span class="hs-identifier hs-type"
	  >PLC.GEq</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488654"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Quote.html#MonadQuote"
	><span class="hs-identifier hs-type"
	  >MonadQuote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488653"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Ord"
	><span class="hs-identifier hs-type"
	  >Ord</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488656"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-42"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Compiler.Types.html#PirTCConfig"
	><span class="hs-identifier hs-type"
	  >TC.PirTCConfig</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488654"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488655"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-43"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.Builtins.html#BuiltinsInfo"
	><span class="hs-identifier hs-type"
	  >BuiltinsInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488654"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488655"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-44"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Bool"
	><span class="hs-identifier hs-type"
	  >Bool</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-45"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488656"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-46"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Pass.html#Pass"
	><span class="hs-identifier hs-type"
	  >Pass</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488653"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TyName"
	><span class="hs-identifier hs-type"
	  >TyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488654"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488655"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488656"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-47"
      ></span
      ><span id="caseOfCasePass"
      ><span class="annot"
	><span class="annottext"
	  >caseOfCasePass :: forall (m :: * -&gt; *) (uni :: * -&gt; *) fun a.
(Typecheckable uni fun, GEq uni, MonadQuote m, Ord a) =&gt;
PirTCConfig uni fun
-&gt; BuiltinsInfo uni fun
-&gt; Bool
-&gt; a
-&gt; Pass m TyName Name uni fun a
</span
	  ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCasePass"
	  ><span class="hs-identifier hs-var hs-var"
	    >caseOfCasePass</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488679"
      ><span class="annot"
	><span class="annottext"
	  >PirTCConfig uni fun
</span
	  ><a href="#local-6989586621679488679"
	  ><span class="hs-identifier hs-var"
	    >tcconfig</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488680"
      ><span class="annot"
	><span class="annottext"
	  >BuiltinsInfo uni fun
</span
	  ><a href="#local-6989586621679488680"
	  ><span class="hs-identifier hs-var"
	    >binfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488681"
      ><span class="annot"
	><span class="annottext"
	  >Bool
</span
	  ><a href="#local-6989586621679488681"
	  ><span class="hs-identifier hs-var"
	    >conservative</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488682"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488682"
	  ><span class="hs-identifier hs-var"
	    >newAnn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-48"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>String
-&gt; Pass m TyName Name uni fun a -&gt; Pass m TyName Name uni fun a
forall (m :: * -&gt; *) tyname name (uni :: * -&gt; *) fun a.
String
-&gt; Pass m tyname name uni fun a -&gt; Pass m tyname name uni fun a
</span
	><a href="PlutusIR.Pass.html#NamedPass"
	><span class="hs-identifier hs-var"
	  >NamedPass</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>String
</span
	><span class="hs-string"
	>&quot;case-of-case&quot;</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Pass m TyName Name uni fun a -&gt; Pass m TyName Name uni fun a)
-&gt; Pass m TyName Name uni fun a -&gt; Pass m TyName Name uni fun a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-49"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>(Term TyName Name uni fun a -&gt; m (Term TyName Name uni fun a))
-&gt; [Condition TyName Name uni fun a]
-&gt; [BiCondition TyName Name uni fun a]
-&gt; Pass m TyName Name uni fun a
forall (m :: * -&gt; *) tyname name (uni :: * -&gt; *) fun a.
(Term tyname name uni fun a -&gt; m (Term tyname name uni fun a))
-&gt; [Condition tyname name uni fun a]
-&gt; [BiCondition tyname name uni fun a]
-&gt; Pass m tyname name uni fun a
</span
	><a href="PlutusIR.Pass.html#Pass"
	><span class="hs-identifier hs-var"
	  >Pass</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-50"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
-&gt; Bool
-&gt; a
-&gt; Term TyName Name uni fun a
-&gt; m (Term TyName Name uni fun a)
forall (m :: * -&gt; *) tyname (uni :: * -&gt; *) fun a.
(Ord fun, HasUnique tyname TypeUnique, MonadQuote m) =&gt;
BuiltinsInfo uni fun
-&gt; Bool
-&gt; a
-&gt; Term tyname Name uni fun a
-&gt; m (Term tyname Name uni fun a)
</span
	><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCase"
	><span class="hs-identifier hs-var"
	  >caseOfCase</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
</span
	><a href="#local-6989586621679488680"
	><span class="hs-identifier hs-var"
	  >binfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488681"
	><span class="hs-identifier hs-var"
	  >conservative</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488682"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-51"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>PirTCConfig uni fun -&gt; Condition TyName Name uni fun a
forall (uni :: * -&gt; *) fun a.
(Typecheckable uni fun, GEq uni) =&gt;
PirTCConfig uni fun -&gt; Condition TyName Name uni fun a
</span
	><a href="PlutusIR.Pass.html#Typechecks"
	><span class="hs-identifier hs-var"
	  >Typechecks</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCConfig uni fun
</span
	><a href="#local-6989586621679488679"
	><span class="hs-identifier hs-var"
	  >tcconfig</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Condition TyName Name uni fun a
forall tyname name a (uni :: * -&gt; *) fun.
(HasUnique tyname TypeUnique, HasUnique name TermUnique, Ord a) =&gt;
Condition tyname name uni fun a
</span
	><a href="PlutusIR.Pass.html#GloballyUniqueNames"
	><span class="hs-identifier hs-var"
	  >GloballyUniqueNames</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-52"
      ></span
      ><span
      >      </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Condition TyName Name uni fun a
-&gt; BiCondition TyName Name uni fun a
forall tyname name (uni :: * -&gt; *) fun a.
Condition tyname name uni fun a
-&gt; BiCondition tyname name uni fun a
</span
	><a href="PlutusIR.Pass.html#ConstCondition"
	><span class="hs-identifier hs-var"
	  >ConstCondition</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>PirTCConfig uni fun -&gt; Condition TyName Name uni fun a
forall (uni :: * -&gt; *) fun a.
(Typecheckable uni fun, GEq uni) =&gt;
PirTCConfig uni fun -&gt; Condition TyName Name uni fun a
</span
	><a href="PlutusIR.Pass.html#Typechecks"
	><span class="hs-identifier hs-var"
	  >Typechecks</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>PirTCConfig uni fun
</span
	><a href="#local-6989586621679488679"
	><span class="hs-identifier hs-var"
	  >tcconfig</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-53"
      ></span
      ><span
      >
</span
      ><span id="line-54"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>{-|
Perform the case-of-case transformation. This pushes
case expressions into the case branches of other case
expressions, which can often yield optimization opportunities.

Example:
@
    case (case s of { C1 a -&gt; x; C2 b -&gt; y; }) of
      D1 -&gt; w
      D2 -&gt; z

    --&gt;

    case s of
      C1 a -&gt; case x of { D1 -&gt; w; D2 -&gt; z; }
      C2 b -&gt; case y of { D1 -&gt; w; D2 -&gt; z; }
@
-}</span
	></span
      ><span
      >
</span
      ><span id="line-72"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCase"
	><span class="hs-identifier hs-type"
	  >caseOfCase</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-73"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679488381"
      ><span class="annot"
	><a href="#local-6989586621679488381"
	  ><span class="hs-identifier hs-type"
	    >m</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488380"
      ><span class="annot"
	><a href="#local-6989586621679488380"
	  ><span class="hs-identifier hs-type"
	    >tyname</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488382"
      ><span class="annot"
	><a href="#local-6989586621679488382"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488379"
      ><span class="annot"
	><a href="#local-6989586621679488379"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488383"
      ><span class="annot"
	><a href="#local-6989586621679488383"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-74"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Ord"
	><span class="hs-identifier hs-type"
	  >Ord</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488379"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#HasUnique"
	><span class="hs-identifier hs-type"
	  >PLC.HasUnique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488380"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TypeUnique"
	><span class="hs-identifier hs-type"
	  >PLC.TypeUnique</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-75"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Quote.html#MonadQuote"
	><span class="hs-identifier hs-type"
	  >PLC.MonadQuote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488381"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-comment"
      >-- we need this because we do generate new names</span
      ><span
      >
</span
      ><span id="line-76"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-77"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.Builtins.html#BuiltinsInfo"
	><span class="hs-identifier hs-type"
	  >BuiltinsInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488382"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488379"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-78"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Bool"
	><span class="hs-identifier hs-type"
	  >Bool</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-79"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488383"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-80"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488380"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488382"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488379"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488383"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-81"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488381"
	><span class="hs-identifier hs-type"
	  >m</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488380"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488382"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488379"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488383"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-82"
      ></span
      ><span class="hs-comment"
      >-- See Note [Case-of-case and conapps]</span
      ><span
      >
</span
      ><span id="line-83"
      ></span
      ><span id="caseOfCase"
      ><span class="annot"
	><span class="annottext"
	  >caseOfCase :: forall (m :: * -&gt; *) tyname (uni :: * -&gt; *) fun a.
(Ord fun, HasUnique tyname TypeUnique, MonadQuote m) =&gt;
BuiltinsInfo uni fun
-&gt; Bool
-&gt; a
-&gt; Term tyname Name uni fun a
-&gt; m (Term tyname Name uni fun a)
</span
	  ><a href="PlutusIR.Transform.CaseOfCase.html#caseOfCase"
	  ><span class="hs-identifier hs-var hs-var"
	    >caseOfCase</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488700"
      ><span class="annot"
	><span class="annottext"
	  >BuiltinsInfo uni fun
</span
	  ><a href="#local-6989586621679488700"
	  ><span class="hs-identifier hs-var"
	    >binfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488701"
      ><span class="annot"
	><span class="annottext"
	  >Bool
</span
	  ><a href="#local-6989586621679488701"
	  ><span class="hs-identifier hs-var"
	    >conservative</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488702"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488702"
	  ><span class="hs-identifier hs-var"
	    >newAnn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488703"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488703"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-84"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679488707"
      ><span class="annot"
	><span class="annottext"
	  >vinfo :: VarsInfo tyname Name uni a
</span
	  ><a href="#local-6989586621679488707"
	  ><span class="hs-identifier hs-var hs-var"
	    >vinfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a -&gt; VarsInfo tyname Name uni a
forall name tyname (uni :: * -&gt; *) fun a.
(HasUnique name TermUnique, HasUnique tyname TypeUnique) =&gt;
Term tyname name uni fun a -&gt; VarsInfo tyname name uni a
</span
	><a href="PlutusIR.Analysis.VarInfo.html#termVarInfo"
	><span class="hs-identifier hs-var"
	  >termVarInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488703"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-85"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Quote (Term tyname Name uni fun a)
-&gt; m (Term tyname Name uni fun a)
forall a. Quote a -&gt; m a
forall (m :: * -&gt; *) a. MonadQuote m =&gt; Quote a -&gt; m a
</span
	><a href="../../plutus-core/src/PlutusCore.Quote.html#liftQuote"
	><span class="hs-identifier hs-var"
	  >liftQuote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Quote (Term tyname Name uni fun a)
 -&gt; m (Term tyname Name uni fun a))
-&gt; Quote (Term tyname Name uni fun a)
-&gt; m (Term tyname Name uni fun a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LensLike
  (WrappedMonad (QuoteT Identity))
  (Term tyname Name uni fun a)
  (Term tyname Name uni fun a)
  (Term tyname Name uni fun a)
  (Term tyname Name uni fun a)
-&gt; (Term tyname Name uni fun a
    -&gt; Quote (Term tyname Name uni fun a))
-&gt; Term tyname Name uni fun a
-&gt; Quote (Term tyname Name uni fun a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
LensLike (WrappedMonad m) a b a b -&gt; (b -&gt; m b) -&gt; a -&gt; m b
</span
	><span class="hs-identifier hs-var"
	>transformMOf</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LensLike
  (WrappedMonad (QuoteT Identity))
  (Term tyname Name uni fun a)
  (Term tyname Name uni fun a)
  (Term tyname Name uni fun a)
  (Term tyname Name uni fun a)
forall tyname name (uni :: * -&gt; *) fun a (f :: * -&gt; *).
Applicative f =&gt;
(Term tyname name uni fun a -&gt; f (Term tyname name uni fun a))
-&gt; Term tyname name uni fun a -&gt; f (Term tyname name uni fun a)
</span
	><a href="PlutusIR.Core.Plated.html#termSubterms"
	><span class="hs-identifier hs-var"
	  >termSubterms</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
-&gt; VarsInfo tyname Name uni a
-&gt; Bool
-&gt; a
-&gt; Term tyname Name uni fun a
-&gt; Quote (Term tyname Name uni fun a)
forall tyname (uni :: * -&gt; *) fun a.
(Ord fun, HasUnique tyname TypeUnique) =&gt;
BuiltinsInfo uni fun
-&gt; VarsInfo tyname Name uni a
-&gt; Bool
-&gt; a
-&gt; Term tyname Name uni fun a
-&gt; Quote (Term tyname Name uni fun a)
</span
	><a href="PlutusIR.Transform.CaseOfCase.html#processTerm"
	><span class="hs-identifier hs-var"
	  >processTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
</span
	><a href="#local-6989586621679488700"
	><span class="hs-identifier hs-var"
	  >binfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname Name uni a
</span
	><a href="#local-6989586621679488707"
	><span class="hs-identifier hs-var"
	  >vinfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488701"
	><span class="hs-identifier hs-var"
	  >conservative</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488702"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488703"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-86"
      ></span
      ><span
      >
</span
      ><span id="line-87"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#processTerm"
	><span class="hs-identifier hs-type"
	  >processTerm</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-88"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679488425"
      ><span class="annot"
	><a href="#local-6989586621679488425"
	  ><span class="hs-identifier hs-type"
	    >tyname</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488426"
      ><span class="annot"
	><a href="#local-6989586621679488426"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488424"
      ><span class="annot"
	><a href="#local-6989586621679488424"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488427"
      ><span class="annot"
	><a href="#local-6989586621679488427"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-operator"
      >.</span
      ><span
      >
</span
      ><span id="line-89"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Ord"
	><span class="hs-identifier hs-type"
	  >Ord</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488424"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#HasUnique"
	><span class="hs-identifier hs-type"
	  >PLC.HasUnique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488425"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TypeUnique"
	><span class="hs-identifier hs-type"
	  >PLC.TypeUnique</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-90"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.Builtins.html#BuiltinsInfo"
	><span class="hs-identifier hs-type"
	  >BuiltinsInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488426"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488424"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-91"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#VarsInfo"
	><span class="hs-identifier hs-type"
	  >VarsInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488425"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488426"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488427"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-92"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Bool"
	><span class="hs-identifier hs-type"
	  >Bool</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-93"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488427"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-94"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488425"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488426"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488424"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488427"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-95"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Quote.html#Quote"
	><span class="hs-identifier hs-type"
	  >Quote</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488425"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
	><span class="hs-identifier hs-type"
	  >Name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488426"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488424"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488427"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-96"
      ></span
      ><span id="processTerm"
      ><span class="annot"
	><span class="annottext"
	  >processTerm :: forall tyname (uni :: * -&gt; *) fun a.
(Ord fun, HasUnique tyname TypeUnique) =&gt;
BuiltinsInfo uni fun
-&gt; VarsInfo tyname Name uni a
-&gt; Bool
-&gt; a
-&gt; Term tyname Name uni fun a
-&gt; Quote (Term tyname Name uni fun a)
</span
	  ><a href="PlutusIR.Transform.CaseOfCase.html#processTerm"
	  ><span class="hs-identifier hs-var hs-var"
	    >processTerm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488726"
      ><span class="annot"
	><span class="annottext"
	  >BuiltinsInfo uni fun
</span
	  ><a href="#local-6989586621679488726"
	  ><span class="hs-identifier hs-var"
	    >binfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488727"
      ><span class="annot"
	><span class="annottext"
	  >VarsInfo tyname Name uni a
</span
	  ><a href="#local-6989586621679488727"
	  ><span class="hs-identifier hs-var"
	    >vinfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488728"
      ><span class="annot"
	><span class="annottext"
	  >Bool
</span
	  ><a href="#local-6989586621679488728"
	  ><span class="hs-identifier hs-var"
	    >conservative</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488729"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488729"
	  ><span class="hs-identifier hs-var"
	    >newAnn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488730"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488730"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-97"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- We have a saturated datatype matcher application</span
      ><span
      >
</span
      ><span id="line-98"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488731"
      ><span class="annot"
	><span class="annottext"
	  >smcO :: SplitMatchContext tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488731"
	  ><span class="hs-identifier hs-var"
	    >smcO</span
	    ></a
	  ></span
	></span
      ><span class="hs-glyph"
      >@</span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
	><span class="hs-identifier hs-type"
	  >SplitMatchContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488733"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488733"
	  ><span class="hs-identifier hs-var"
	    >outerScrut</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni ()
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type tyname uni a, a)
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488734"
      ><span class="annot"
	><span class="annottext"
	  >SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488734"
	  ><span class="hs-identifier hs-var"
	    >reconstructOuter</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
-&gt; VarsInfo tyname Name uni a
-&gt; Term tyname Name uni fun a
-&gt; Maybe
     (SplitMatchContext tyname Name uni fun a,
      SplitMatchContext tyname Name uni fun a
      -&gt; Term tyname Name uni fun a,
      [Arity])
forall tyname name (uni :: * -&gt; *) fun a.
(Ord fun, HasUnique name TermUnique,
 HasUnique tyname TypeUnique) =&gt;
BuiltinsInfo uni fun
-&gt; VarsInfo tyname name uni a
-&gt; Term tyname name uni fun a
-&gt; Maybe
     (SplitMatchContext tyname name uni fun a,
      SplitMatchContext tyname name uni fun a
      -&gt; Term tyname name uni fun a,
      [Arity])
</span
	><a href="PlutusIR.Transform.CaseOfCase.html#splitMatch"
	><span class="hs-identifier hs-var"
	  >splitMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
</span
	><a href="#local-6989586621679488726"
	><span class="hs-identifier hs-var"
	  >binfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname Name uni a
</span
	><a href="#local-6989586621679488727"
	><span class="hs-identifier hs-var"
	  >vinfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488730"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-99"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- The scrutinee is itself an application</span
      ><span
      >
</span
      ><span id="line-100"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488736"
      ><span class="annot"
	><span class="annottext"
	  >SplitMatchContext tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488736"
	  ><span class="hs-identifier hs-var"
	    >smcI</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488737"
      ><span class="annot"
	><span class="annottext"
	  >SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488737"
	  ><span class="hs-identifier hs-var"
	    >reconstructInner</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488738"
      ><span class="annot"
	><span class="annottext"
	  >[Arity]
</span
	  ><a href="#local-6989586621679488738"
	  ><span class="hs-identifier hs-var"
	    >innerBranchArities</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
-&gt; VarsInfo tyname Name uni a
-&gt; Term tyname Name uni fun a
-&gt; Maybe
     (SplitMatchContext tyname Name uni fun a,
      SplitMatchContext tyname Name uni fun a
      -&gt; Term tyname Name uni fun a,
      [Arity])
forall tyname name (uni :: * -&gt; *) fun a.
(Ord fun, HasUnique name TermUnique,
 HasUnique tyname TypeUnique) =&gt;
BuiltinsInfo uni fun
-&gt; VarsInfo tyname name uni a
-&gt; Term tyname name uni fun a
-&gt; Maybe
     (SplitMatchContext tyname name uni fun a,
      SplitMatchContext tyname name uni fun a
      -&gt; Term tyname name uni fun a,
      [Arity])
</span
	><a href="PlutusIR.Transform.CaseOfCase.html#splitMatch"
	><span class="hs-identifier hs-var"
	  >splitMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
</span
	><a href="#local-6989586621679488726"
	><span class="hs-identifier hs-var"
	  >binfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname Name uni a
</span
	><a href="#local-6989586621679488727"
	><span class="hs-identifier hs-var"
	  >vinfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488733"
	><span class="hs-identifier hs-var"
	  >outerScrut</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-101"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-102"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679488739"
      ><span class="annot"
	><span class="annottext"
	  >Maybe (Term tyname Name uni fun a)
</span
	  ><a href="#local-6989586621679488739"
	  ><span class="hs-identifier hs-var"
	    >nt</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>MaybeT (QuoteT Identity) (Term tyname Name uni fun a)
-&gt; QuoteT Identity (Maybe (Term tyname Name uni fun a))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Maybe.html#runMaybeT"
	><span class="hs-identifier hs-var"
	  >runMaybeT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(MaybeT (QuoteT Identity) (Term tyname Name uni fun a)
 -&gt; QuoteT Identity (Maybe (Term tyname Name uni fun a)))
-&gt; MaybeT (QuoteT Identity) (Term tyname Name uni fun a)
-&gt; QuoteT Identity (Maybe (Term tyname Name uni fun a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname Name uni a
-&gt; Bool
-&gt; a
-&gt; (SplitMatchContext tyname Name uni fun a,
    SplitMatchContext tyname Name uni fun a
    -&gt; Term tyname Name uni fun a)
-&gt; (SplitMatchContext tyname Name uni fun a,
    SplitMatchContext tyname Name uni fun a
    -&gt; Term tyname Name uni fun a)
-&gt; [Arity]
-&gt; MaybeT (QuoteT Identity) (Term tyname Name uni fun a)
forall tyname (uni :: * -&gt; *) a fun.
VarsInfo tyname Name uni a
-&gt; Bool
-&gt; a
-&gt; (SplitMatchContext tyname Name uni fun a,
    SplitMatchContext tyname Name uni fun a
    -&gt; Term tyname Name uni fun a)
-&gt; (SplitMatchContext tyname Name uni fun a,
    SplitMatchContext tyname Name uni fun a
    -&gt; Term tyname Name uni fun a)
-&gt; [Arity]
-&gt; MaybeT (QuoteT Identity) (Term tyname Name uni fun a)
</span
	><a href="PlutusIR.Transform.CaseOfCase.html#tryDoCaseOfCase"
	><span class="hs-identifier hs-var"
	  >tryDoCaseOfCase</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname Name uni a
</span
	><a href="#local-6989586621679488727"
	><span class="hs-identifier hs-var"
	  >vinfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488728"
	><span class="hs-identifier hs-var"
	  >conservative</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488729"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname Name uni fun a
</span
	><a href="#local-6989586621679488731"
	><span class="hs-identifier hs-var"
	  >smcO</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488734"
	><span class="hs-identifier hs-var"
	  >reconstructOuter</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname Name uni fun a
</span
	><a href="#local-6989586621679488736"
	><span class="hs-identifier hs-var"
	  >smcI</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488737"
	><span class="hs-identifier hs-var"
	  >reconstructInner</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488738"
	><span class="hs-identifier hs-var"
	  >innerBranchArities</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-103"
      ></span
      ><span
      >        </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (Term tyname Name uni fun a)
</span
	><a href="#local-6989586621679488739"
	><span class="hs-identifier hs-var"
	  >nt</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-104"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679488742"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488742"
	  ><span class="hs-identifier hs-var"
	    >newTerm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a -&gt; Quote (Term tyname Name uni fun a)
forall a. a -&gt; QuoteT Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488742"
	><span class="hs-identifier hs-var"
	  >newTerm</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-105"
      ></span
      ><span
      >          </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (Term tyname Name uni fun a)
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      >      </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a -&gt; Quote (Term tyname Name uni fun a)
forall a. a -&gt; QuoteT Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488730"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-106"
      ></span
      ><span
      >    </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#otherwise"
	><span class="hs-identifier hs-var"
	  >otherwise</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a -&gt; Quote (Term tyname Name uni fun a)
forall a. a -&gt; QuoteT Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488730"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-107"
      ></span
      ><span
      >
</span
      ><span id="line-108"
      ></span
      ><span id="local-6989586621679488445"
      ><span id="local-6989586621679488446"
	><span id="local-6989586621679488447"
	  ><span id="local-6989586621679488448"
	    ><span class="annot"
	      ><a href="PlutusIR.Transform.CaseOfCase.html#tryDoCaseOfCase"
		><span class="hs-identifier hs-type"
		  >tryDoCaseOfCase</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >::</span
	      ><span
	      >
</span
	      ><span id="line-109"
	      ></span
	      ><span
	      >  </span
	      ><span class="annot"
	      ><a href="PlutusIR.Analysis.VarInfo.html#VarsInfo"
		><span class="hs-identifier hs-type"
		  >VarsInfo</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488445"
		><span class="hs-identifier hs-type"
		  >tyname</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488446"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-110"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#Bool"
		><span class="hs-identifier hs-type"
		  >Bool</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-111"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span
	      >
</span
	      ><span id="line-112"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
		><span class="hs-identifier hs-type"
		  >SplitMatchContext</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488445"
		><span class="hs-identifier hs-type"
		  >tyname</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488446"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488448"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
		><span class="hs-identifier hs-type"
		  >SplitMatchContext</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488445"
		><span class="hs-identifier hs-type"
		  >tyname</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488446"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488448"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488445"
		><span class="hs-identifier hs-type"
		  >tyname</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488446"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488448"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      >
</span
	      ><span id="line-113"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
		><span class="hs-identifier hs-type"
		  >SplitMatchContext</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488445"
		><span class="hs-identifier hs-type"
		  >tyname</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488446"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488448"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span class="hs-special"
	      >,</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
		><span class="hs-identifier hs-type"
		  >SplitMatchContext</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488445"
		><span class="hs-identifier hs-type"
		  >tyname</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488446"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488448"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="PlutusIR.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488445"
		><span class="hs-identifier hs-type"
		  >tyname</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488446"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488448"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ><span
	      >
</span
	      ><span id="line-114"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >[</span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Arity.html#Arity"
		><span class="hs-identifier hs-type"
		  >Arity</span
		  ></a
		></span
	      ><span class="hs-special"
	      >]</span
	      ><span
	      >
</span
	      ><span id="line-115"
	      ></span
	      ><span
	      >  </span
	      ><span class="hs-glyph"
	      >-&gt;</span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Maybe.html#MaybeT"
		><span class="hs-identifier hs-type"
		  >MaybeT</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Quote.html#Quote"
		><span class="hs-identifier hs-type"
		  >Quote</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="hs-special"
	      >(</span
	      ><span class="annot"
	      ><a href="PlutusIR.Core.Type.html#Term"
		><span class="hs-identifier hs-type"
		  >Term</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488445"
		><span class="hs-identifier hs-type"
		  >tyname</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#Name"
		><span class="hs-identifier hs-type"
		  >Name</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488446"
		><span class="hs-identifier hs-type"
		  >uni</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488448"
		><span class="hs-identifier hs-type"
		  >fun</span
		  ></a
		></span
	      ><span
	      > </span
	      ><span class="annot"
	      ><a href="#local-6989586621679488447"
		><span class="hs-identifier hs-type"
		  >a</span
		  ></a
		></span
	      ><span class="hs-special"
	      >)</span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-116"
      ></span
      ><span id="tryDoCaseOfCase"
      ><span class="annot"
	><span class="annottext"
	  >tryDoCaseOfCase :: forall tyname (uni :: * -&gt; *) a fun.
VarsInfo tyname Name uni a
-&gt; Bool
-&gt; a
-&gt; (SplitMatchContext tyname Name uni fun a,
    SplitMatchContext tyname Name uni fun a
    -&gt; Term tyname Name uni fun a)
-&gt; (SplitMatchContext tyname Name uni fun a,
    SplitMatchContext tyname Name uni fun a
    -&gt; Term tyname Name uni fun a)
-&gt; [Arity]
-&gt; MaybeT (QuoteT Identity) (Term tyname Name uni fun a)
</span
	  ><a href="PlutusIR.Transform.CaseOfCase.html#tryDoCaseOfCase"
	  ><span class="hs-identifier hs-var hs-var"
	    >tryDoCaseOfCase</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-117"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679488767"
      ><span class="annot"
	><span class="annottext"
	  >VarsInfo tyname Name uni a
</span
	  ><a href="#local-6989586621679488767"
	  ><span class="hs-identifier hs-var"
	    >vinfo</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-118"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679488768"
      ><span class="annot"
	><span class="annottext"
	  >Bool
</span
	  ><a href="#local-6989586621679488768"
	  ><span class="hs-identifier hs-var"
	    >conservative</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-119"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679488769"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488769"
	  ><span class="hs-identifier hs-var"
	    >newAnn</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-120"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
	><span class="hs-identifier hs-type"
	  >SplitMatchContext</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679488770"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488770"
	  ><span class="hs-identifier hs-var"
	    >outerVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488771"
      ><span class="annot"
	><span class="annottext"
	  >Type tyname uni ()
</span
	  ><a href="#local-6989586621679488771"
	  ><span class="hs-identifier hs-var"
	    >outerScrutTy</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488772"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488772"
	  ><span class="hs-identifier hs-var"
	    >outerScrutAnn</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488773"
      ><span class="annot"
	><span class="annottext"
	  >Type tyname uni a
</span
	  ><a href="#local-6989586621679488773"
	  ><span class="hs-identifier hs-var"
	    >outerResTy</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488774"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488774"
	  ><span class="hs-identifier hs-var"
	    >outerResTyAnn</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span id="local-6989586621679488775"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488775"
	  ><span class="hs-identifier hs-var"
	    >outerBranches</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488776"
      ><span class="annot"
	><span class="annottext"
	  >SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488776"
	  ><span class="hs-identifier hs-var"
	    >reconstructOuter</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-121"
      ></span
      ><span
      >  </span
      ><span class="hs-comment"
      >-- Note: we don't use the inner result type, we're going to replace it</span
      ><span
      >
</span
      ><span id="line-122"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
	><span class="hs-identifier hs-type"
	  >SplitMatchContext</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679488777"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488777"
	  ><span class="hs-identifier hs-var"
	    >innerVars</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488778"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488778"
	  ><span class="hs-identifier hs-var"
	    >innerScrut</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488779"
      ><span class="annot"
	><span class="annottext"
	  >Type tyname uni ()
</span
	  ><a href="#local-6989586621679488779"
	  ><span class="hs-identifier hs-var"
	    >innerScrutTy</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488780"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488780"
	  ><span class="hs-identifier hs-var"
	    >innerScrutAnn</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Type tyname uni a, a)
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488781"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488781"
	  ><span class="hs-identifier hs-var"
	    >innerBranches</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488782"
      ><span class="annot"
	><span class="annottext"
	  >SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488782"
	  ><span class="hs-identifier hs-var"
	    >reconstructInner</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-123"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679488783"
      ><span class="annot"
	><span class="annottext"
	  >[Arity]
</span
	  ><a href="#local-6989586621679488783"
	  ><span class="hs-identifier hs-var"
	    >innerBranchArities</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-124"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-125"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679488784"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621679488784"
	  ><span class="hs-identifier hs-var"
	    >kName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Quote Name -&gt; MaybeT (QuoteT Identity) Name
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; MaybeT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier hs-var"
	  >lift</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Quote Name -&gt; MaybeT (QuoteT Identity) Name)
-&gt; Quote Name -&gt; MaybeT (QuoteT Identity) Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Quote Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m Name
</span
	><a href="../../plutus-core/src/PlutusCore.Quote.html#freshName"
	><span class="hs-identifier hs-var"
	  >freshName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;k_caseOfCase&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-126"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679488786"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621679488786"
	  ><span class="hs-identifier hs-var"
	    >sName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Quote Name -&gt; MaybeT (QuoteT Identity) Name
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; MaybeT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Class.html#lift"
	><span class="hs-identifier hs-var"
	  >lift</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Quote Name -&gt; MaybeT (QuoteT Identity) Name)
-&gt; Quote Name -&gt; MaybeT (QuoteT Identity) Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text -&gt; Quote Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m Name
</span
	><a href="../../plutus-core/src/PlutusCore.Quote.html#freshName"
	><span class="hs-identifier hs-var"
	  >freshName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Text
</span
	><span class="hs-string"
	>&quot;scrutinee&quot;</span
	></span
      ><span
      >
</span
      ><span id="line-127"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      >
</span
      ><span id="line-128"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- If a term is a constructor application, returns the name of the constructor</span
      ><span
      >
</span
      ><span id="line-129"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488788"
      ><span class="annot"
	><span class="annottext"
	  >conAppHead :: Term tyname Name uni fun ann -&gt; Maybe Name
</span
	  ><a href="#local-6989586621679488788"
	  ><span class="hs-identifier hs-var hs-var"
	    >conAppHead</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun ann
-&gt; (Term tyname Name uni fun ann,
    AppContext tyname Name uni fun ann)
forall tyname name (uni :: * -&gt; *) fun ann.
Term tyname name uni fun ann
-&gt; (Term tyname name uni fun ann,
    AppContext tyname name uni fun ann)
</span
	><a href="PlutusIR.Contexts.html#splitApplication"
	><span class="hs-identifier hs-var"
	  >splitApplication</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Var"
	><span class="hs-identifier hs-type"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488791"
      ><span class="annot"
	><span class="annottext"
	  >Name
</span
	  ><a href="#local-6989586621679488791"
	  ><span class="hs-identifier hs-var"
	    >n</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >|</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-type"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#DatatypeConstructor"
	><span class="hs-identifier hs-type"
	  >DatatypeConstructor</span
	  ></a
	></span
      ><span class="hs-special"
      >{</span
      ><span class="hs-special"
      >}</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
-&gt; VarsInfo tyname Name uni a -&gt; Maybe (VarInfo tyname Name uni a)
forall name tyname (uni :: * -&gt; *) a.
HasUnique name TermUnique =&gt;
name
-&gt; VarsInfo tyname name uni a -&gt; Maybe (VarInfo tyname name uni a)
</span
	><a href="PlutusIR.Analysis.VarInfo.html#lookupVarInfo"
	><span class="hs-identifier hs-var"
	  >lookupVarInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679488791"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname Name uni a
</span
	><a href="#local-6989586621679488767"
	><span class="hs-identifier hs-var"
	  >vinfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-var"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679488791"
	><span class="hs-identifier hs-var"
	  >n</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-130"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488788"
	><span class="hs-identifier hs-var"
	  >conAppHead</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun ann
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe Name
forall a. Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-131"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- Gets all the constructor application heads from inside the branches of the inner match</span
      ><span
      >
</span
      ><span id="line-132"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488796"
      ><span class="annot"
	><span class="annottext"
	  >innerBranchConAppHeads :: [Name]
</span
	  ><a href="#local-6989586621679488796"
	  ><span class="hs-identifier hs-var hs-var"
	    >innerBranchConAppHeads</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term tyname Name uni fun a -&gt; Maybe Name)
-&gt; [Term tyname Name uni fun a] -&gt; [Name]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Maybe.html#mapMaybe"
	><span class="hs-identifier hs-var"
	  >mapMaybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a -&gt; Maybe Name
forall {tyname} {uni :: * -&gt; *} {fun} {ann}.
Term tyname Name uni fun ann -&gt; Maybe Name
</span
	><a href="#local-6989586621679488788"
	><span class="hs-identifier hs-var"
	  >conAppHead</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>([Term tyname Name uni fun a] -&gt; [Name])
-&gt; [Term tyname Name uni fun a] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
</span
	><a href="#local-6989586621679488781"
	><span class="hs-identifier hs-var"
	  >innerBranches</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
-&gt; Getting
     (Endo [Term tyname Name uni fun a])
     (AppContext tyname Name uni fun a)
     (Term tyname Name uni fun a)
-&gt; [Term tyname Name uni fun a]
forall s a. s -&gt; Getting (Endo [a]) s a -&gt; [a]
</span
	><span class="hs-operator hs-var"
	>^..</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
-&gt; Traversal'
     (AppContext tyname Name uni fun a) (Term tyname Name uni fun a)
forall tyname name (uni :: * -&gt; *) fun a.
[Arity]
-&gt; Traversal'
     (AppContext tyname name uni fun a) (Term tyname name uni fun a)
</span
	><a href="PlutusIR.Transform.CaseOfCase.html#underBranches"
	><span class="hs-identifier hs-var"
	  >underBranches</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488783"
	><span class="hs-identifier hs-var"
	  >innerBranchArities</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-133"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- Check whether a) all the branches are conapps, and b) all the conapps are distinct.</span
      ><span
      >
</span
      ><span id="line-134"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- See Note [Case-of-case and conapps]</span
      ><span
      >
</span
      ><span id="line-135"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488800"
      ><span class="annot"
	><span class="annottext"
	  >allDistinctBranchConApps :: Bool
</span
	  ><a href="#local-6989586621679488800"
	  ><span class="hs-identifier hs-var hs-var"
	    >allDistinctBranchConApps</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-136"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >let</span
      ><span
      >
</span
      ><span id="line-137"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- Otherwise we've lost something when we did the traversal and we don't know what's going on</span
      ><span
      >
</span
      ><span id="line-138"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679488806"
      ><span class="annot"
	><span class="annottext"
	  >lengthsMatch :: Bool
</span
	  ><a href="#local-6989586621679488806"
	  ><span class="hs-identifier hs-var hs-var"
	    >lengthsMatch</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Name] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Name]
</span
	><a href="#local-6989586621679488796"
	><span class="hs-identifier hs-var"
	  >innerBranchConAppHeads</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >==</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Foldable.html#length"
	><span class="hs-identifier hs-var"
	  >length</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488783"
	><span class="hs-identifier hs-var"
	  >innerBranchArities</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-139"
      ></span
      ><span
      >        </span
      ><span id="local-6989586621679488810"
      ><span class="annot"
	><span class="annottext"
	  >distinctCons :: Bool
</span
	  ><a href="#local-6989586621679488810"
	  ><span class="hs-identifier hs-var hs-var"
	    >distinctCons</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Name] -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; Bool
</span
	><a href="../../plutus-core/src/PlutusPrelude.html#distinct"
	><span class="hs-identifier hs-var"
	  >distinct</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Name]
</span
	><a href="#local-6989586621679488796"
	><span class="hs-identifier hs-var"
	  >innerBranchConAppHeads</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-140"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >in</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488806"
	><span class="hs-identifier hs-var"
	  >lengthsMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Bool -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%26%26"
	><span class="hs-operator hs-var"
	  >&amp;&amp;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488810"
	><span class="hs-identifier hs-var"
	  >distinctCons</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-141"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- If we're being conservative (so trying to avoid code growth), and we don't know that the inlined</span
      ><span
      >
</span
      ><span id="line-142"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- version will reduce, then bind the outer case to a function to avoid code growth</span
      ><span
      >
</span
      ><span id="line-143"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488813"
      ><span class="annot"
	><span class="annottext"
	  >bindOuterCase :: Bool
</span
	  ><a href="#local-6989586621679488813"
	  ><span class="hs-identifier hs-var hs-var"
	    >bindOuterCase</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488768"
	><span class="hs-identifier hs-var"
	  >conservative</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Bool -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%26%26"
	><span class="hs-operator hs-var"
	  >&amp;&amp;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#not"
	><span class="hs-identifier hs-var"
	  >not</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488800"
	><span class="hs-identifier hs-var"
	  >allDistinctBranchConApps</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-144"
      ></span
      ><span
      >
</span
      ><span id="line-145"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      >
</span
      ><span id="line-146"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488815"
      ><span class="annot"
	><span class="annottext"
	  >mkNewOuterMatch :: Term tyname Name uni fun a -&gt; Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488815"
	  ><span class="hs-identifier hs-var hs-var"
	    >mkNewOuterMatch</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488816"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488816"
	  ><span class="hs-identifier hs-var"
	    >newScrut</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-147"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488776"
	><span class="hs-identifier hs-var"
	  >reconstructOuter</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SplitMatchContext tyname Name uni fun a
 -&gt; Term tyname Name uni fun a)
-&gt; SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
-&gt; (Term tyname Name uni fun a, Type tyname uni (), a)
-&gt; (Type tyname uni a, a)
-&gt; AppContext tyname Name uni fun a
-&gt; SplitMatchContext tyname Name uni fun a
forall tyname name (uni :: * -&gt; *) fun a.
AppContext tyname name uni fun a
-&gt; (Term tyname name uni fun a, Type tyname uni (), a)
-&gt; (Type tyname uni a, a)
-&gt; AppContext tyname name uni fun a
-&gt; SplitMatchContext tyname name uni fun a
</span
	><a href="PlutusIR.Contexts.html#SplitMatchContext"
	><span class="hs-identifier hs-var"
	  >SplitMatchContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
</span
	><a href="#local-6989586621679488770"
	><span class="hs-identifier hs-var"
	  >outerVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488816"
	><span class="hs-identifier hs-var"
	  >newScrut</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni ()
</span
	><a href="#local-6989586621679488771"
	><span class="hs-identifier hs-var"
	  >outerScrutTy</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488772"
	><span class="hs-identifier hs-var"
	  >outerScrutAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni a
</span
	><a href="#local-6989586621679488773"
	><span class="hs-identifier hs-var"
	  >outerResTy</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488774"
	><span class="hs-identifier hs-var"
	  >outerResTyAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
</span
	><a href="#local-6989586621679488775"
	><span class="hs-identifier hs-var"
	  >outerBranches</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-148"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- \(x :: scrutTy) -&gt; case x of ...</span
      ><span
      >
</span
      ><span id="line-149"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488819"
      ><span class="annot"
	><span class="annottext"
	  >newOuterMatchFn :: Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488819"
	  ><span class="hs-identifier hs-var hs-var"
	    >newOuterMatchFn</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
-&gt; Name
-&gt; Type tyname uni a
-&gt; Term tyname Name uni fun a
-&gt; Term tyname Name uni fun a
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; name
-&gt; Type tyname uni a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span
	><a href="PlutusIR.Core.Type.html#LamAbs"
	><span class="hs-identifier hs-var"
	  >LamAbs</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679488786"
	><span class="hs-identifier hs-var"
	  >sName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Type tyname uni () -&gt; Type tyname uni a
forall a b. a -&gt; Type tyname uni b -&gt; Type tyname uni a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%24"
	><span class="hs-operator hs-var"
	  >&lt;$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni ()
</span
	><a href="#local-6989586621679488771"
	><span class="hs-identifier hs-var"
	  >outerScrutTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term tyname Name uni fun a -&gt; Term tyname Name uni fun a)
-&gt; Term tyname Name uni fun a -&gt; Term tyname Name uni fun a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a -&gt; Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488815"
	><span class="hs-identifier hs-var"
	  >mkNewOuterMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Name -&gt; Term tyname Name uni fun a
forall tyname name (uni :: * -&gt; *) fun a.
a -&gt; name -&gt; Term tyname name uni fun a
</span
	><a href="PlutusIR.Core.Type.html#Var"
	><span class="hs-identifier hs-var"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679488786"
	><span class="hs-identifier hs-var"
	  >sName</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-150"
      ></span
      ><span
      >    </span
      ><span class="hs-comment"
      >-- k_caseOfCase :: scrutTy -&gt; outerResTy = ...</span
      ><span
      >
</span
      ><span id="line-151"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488823"
      ><span class="annot"
	><span class="annottext"
	  >newOuterMatchFnBinding :: Binding tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488823"
	  ><span class="hs-identifier hs-var hs-var"
	    >newOuterMatchFnBinding</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-152"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>a
-&gt; Strictness
-&gt; VarDecl tyname Name uni a
-&gt; Term tyname Name uni fun a
-&gt; Binding tyname Name uni fun a
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Strictness
-&gt; VarDecl tyname name uni a
-&gt; Term tyname name uni fun a
-&gt; Binding tyname name uni fun a
</span
	><a href="PlutusIR.Core.Type.html#TermBind"
	><span class="hs-identifier hs-var"
	  >TermBind</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Strictness
</span
	><a href="PlutusIR.Core.Type.html#Strict"
	><span class="hs-identifier hs-var"
	  >Strict</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Name -&gt; Type tyname uni a -&gt; VarDecl tyname Name uni a
forall tyname name (uni :: * -&gt; *) ann.
ann -&gt; name -&gt; Type tyname uni ann -&gt; VarDecl tyname name uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#VarDecl"
	><span class="hs-identifier hs-var"
	  >VarDecl</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679488784"
	><span class="hs-identifier hs-var"
	  >kName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Type tyname uni a -&gt; Type tyname uni a -&gt; Type tyname uni a
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span
	><a href="../../plutus-core/src/PlutusCore.Core.Type.html#TyFun"
	><span class="hs-identifier hs-var"
	  >TyFun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Type tyname uni () -&gt; Type tyname uni a
forall a b. a -&gt; Type tyname uni b -&gt; Type tyname uni a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%24"
	><span class="hs-operator hs-var"
	  >&lt;$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni ()
</span
	><a href="#local-6989586621679488771"
	><span class="hs-identifier hs-var"
	  >outerScrutTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni a
</span
	><a href="#local-6989586621679488773"
	><span class="hs-identifier hs-var"
	  >outerResTy</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488819"
	><span class="hs-identifier hs-var"
	  >newOuterMatchFn</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-153"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488828"
      ><span class="annot"
	><span class="annottext"
	  >mkNewInnerBranchBody :: Term tyname Name uni fun a -&gt; Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488828"
	  ><span class="hs-identifier hs-var hs-var"
	    >mkNewInnerBranchBody</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488829"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488829"
	  ><span class="hs-identifier hs-var"
	    >scrut</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-154"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >if</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488813"
	><span class="hs-identifier hs-var"
	  >bindOuterCase</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-155"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- k_caseOfCase scrut</span
      ><span
      >
</span
      ><span id="line-156"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >then</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
-&gt; Term tyname Name uni fun a
-&gt; Term tyname Name uni fun a
-&gt; Term tyname Name uni fun a
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span
	><a href="PlutusIR.Core.Type.html#Apply"
	><span class="hs-identifier hs-var"
	  >Apply</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Name -&gt; Term tyname Name uni fun a
forall tyname name (uni :: * -&gt; *) fun a.
a -&gt; name -&gt; Term tyname name uni fun a
</span
	><a href="PlutusIR.Core.Type.html#Var"
	><span class="hs-identifier hs-var"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Name
</span
	><a href="#local-6989586621679488784"
	><span class="hs-identifier hs-var"
	  >kName</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488829"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-157"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- case scrut of ...</span
      ><span
      >
</span
      ><span id="line-158"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >else</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a -&gt; Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488815"
	><span class="hs-identifier hs-var"
	  >mkNewOuterMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488829"
	><span class="hs-identifier hs-var"
	  >scrut</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-159"
      ></span
      ><span
      >
</span
      ><span id="line-160"
      ></span
      ><span
      >  </span
      ><span id="local-6989586621679488831"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488831"
	  ><span class="hs-identifier hs-var"
	    >newInnerBranches</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Quote (Maybe (AppContext tyname Name uni fun a))
-&gt; MaybeT (QuoteT Identity) (AppContext tyname Name uni fun a)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span
	><a href="https://hackage.haskell.org/package/transformers-0.6.1.0/docs/src/Control.Monad.Trans.Maybe.html#MaybeT"
	><span class="hs-identifier hs-var"
	  >MaybeT</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Quote (Maybe (AppContext tyname Name uni fun a))
 -&gt; MaybeT (QuoteT Identity) (AppContext tyname Name uni fun a))
-&gt; Quote (Maybe (AppContext tyname Name uni fun a))
-&gt; MaybeT (QuoteT Identity) (AppContext tyname Name uni fun a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (AppContext tyname Name uni fun a)
-&gt; Quote (Maybe (AppContext tyname Name uni fun a))
forall a. a -&gt; QuoteT Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Maybe (AppContext tyname Name uni fun a)
 -&gt; Quote (Maybe (AppContext tyname Name uni fun a)))
-&gt; Maybe (AppContext tyname Name uni fun a)
-&gt; Quote (Maybe (AppContext tyname Name uni fun a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term tyname Name uni fun a -&gt; Term tyname Name uni fun a)
-&gt; AppContext tyname Name uni fun a
-&gt; [Arity]
-&gt; Maybe (AppContext tyname Name uni fun a)
forall tyname name (uni :: * -&gt; *) fun a.
(Term tyname name uni fun a -&gt; Term tyname name uni fun a)
-&gt; AppContext tyname name uni fun a
-&gt; [Arity]
-&gt; Maybe (AppContext tyname name uni fun a)
</span
	><a href="PlutusIR.Transform.CaseOfCase.html#mapBranches"
	><span class="hs-identifier hs-var"
	  >mapBranches</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a -&gt; Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488828"
	><span class="hs-identifier hs-var"
	  >mkNewInnerBranchBody</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
</span
	><a href="#local-6989586621679488781"
	><span class="hs-identifier hs-var"
	  >innerBranches</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488783"
	><span class="hs-identifier hs-var"
	  >innerBranchArities</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-161"
      ></span
      ><span
      >
</span
      ><span id="line-162"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      >
</span
      ><span id="line-163"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488834"
      ><span class="annot"
	><span class="annottext"
	  >newInnerMatch :: Term tyname Name uni fun a
</span
	  ><a href="#local-6989586621679488834"
	  ><span class="hs-identifier hs-var hs-var"
	    >newInnerMatch</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-164"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488782"
	><span class="hs-identifier hs-var"
	  >reconstructInner</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(SplitMatchContext tyname Name uni fun a
 -&gt; Term tyname Name uni fun a)
-&gt; SplitMatchContext tyname Name uni fun a
-&gt; Term tyname Name uni fun a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
-&gt; (Term tyname Name uni fun a, Type tyname uni (), a)
-&gt; (Type tyname uni a, a)
-&gt; AppContext tyname Name uni fun a
-&gt; SplitMatchContext tyname Name uni fun a
forall tyname name (uni :: * -&gt; *) fun a.
AppContext tyname name uni fun a
-&gt; (Term tyname name uni fun a, Type tyname uni (), a)
-&gt; (Type tyname uni a, a)
-&gt; AppContext tyname name uni fun a
-&gt; SplitMatchContext tyname name uni fun a
</span
	><a href="PlutusIR.Contexts.html#SplitMatchContext"
	><span class="hs-identifier hs-var"
	  >SplitMatchContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
</span
	><a href="#local-6989586621679488777"
	><span class="hs-identifier hs-var"
	  >innerVars</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488778"
	><span class="hs-identifier hs-var"
	  >innerScrut</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni ()
</span
	><a href="#local-6989586621679488779"
	><span class="hs-identifier hs-var"
	  >innerScrutTy</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488780"
	><span class="hs-identifier hs-var"
	  >innerScrutAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Type tyname uni a
</span
	><a href="#local-6989586621679488773"
	><span class="hs-identifier hs-var"
	  >outerResTy</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488774"
	><span class="hs-identifier hs-var"
	  >outerResTyAnn</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname Name uni fun a
</span
	><a href="#local-6989586621679488831"
	><span class="hs-identifier hs-var"
	  >newInnerBranches</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-165"
      ></span
      ><span
      >
</span
      ><span id="line-166"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
-&gt; MaybeT (QuoteT Identity) (Term tyname Name uni fun a)
forall a. a -&gt; MaybeT (QuoteT Identity) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term tyname Name uni fun a
 -&gt; MaybeT (QuoteT Identity) (Term tyname Name uni fun a))
-&gt; Term tyname Name uni fun a
-&gt; MaybeT (QuoteT Identity) (Term tyname Name uni fun a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-167"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >if</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Bool
</span
	><a href="#local-6989586621679488813"
	><span class="hs-identifier hs-var"
	  >bindOuterCase</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-168"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >then</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
-&gt; Recursivity
-&gt; [Binding tyname Name uni fun a]
-&gt; Term tyname Name uni fun a
-&gt; Term tyname Name uni fun a
forall a tyname name (uni :: * -&gt; *) fun.
a
-&gt; Recursivity
-&gt; [Binding tyname name uni fun a]
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span
	><a href="PlutusIR.MkPir.html#mkLet"
	><span class="hs-identifier hs-var"
	  >mkLet</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488769"
	><span class="hs-identifier hs-var"
	  >newAnn</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Recursivity
</span
	><a href="PlutusIR.Core.Type.html#NonRec"
	><span class="hs-identifier hs-var"
	  >NonRec</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><span class="annottext"
	>Binding tyname Name uni fun a
</span
	><a href="#local-6989586621679488823"
	><span class="hs-identifier hs-var"
	  >newOuterMatchFnBinding</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488834"
	><span class="hs-identifier hs-var"
	  >newInnerMatch</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-169"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >else</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname Name uni fun a
</span
	><a href="#local-6989586621679488834"
	><span class="hs-identifier hs-var"
	  >newInnerMatch</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-170"
      ></span
      ><span
      >
</span
      ><span id="line-171"
      ></span
      ><span class="hs-comment"
      >-- | Apply the given function to the term &quot;inside&quot; the case branches in the given 'AppContext'.</span
      ><span
      >
</span
      ><span id="line-172"
      ></span
      ><span class="hs-comment"
      >-- Must be given an arity for each branch so it knows how many binders to go under.</span
      ><span
      >
</span
      ><span id="line-173"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#mapBranches"
	><span class="hs-identifier hs-type"
	  >mapBranches</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      >
</span
      ><span id="line-174"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679488530"
      ><span class="annot"
	><a href="#local-6989586621679488530"
	  ><span class="hs-identifier hs-type"
	    >tyname</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488531"
      ><span class="annot"
	><a href="#local-6989586621679488531"
	  ><span class="hs-identifier hs-type"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488532"
      ><span class="annot"
	><a href="#local-6989586621679488532"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488533"
      ><span class="annot"
	><a href="#local-6989586621679488533"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488534"
      ><span class="annot"
	><a href="#local-6989586621679488534"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-175"
      ></span
      ><span
      >  </span
      ><span class="hs-operator"
      >.</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488530"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488531"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488532"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488533"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488534"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488530"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488531"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488532"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488533"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488534"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-176"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#AppContext"
	><span class="hs-identifier hs-type"
	  >AppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488530"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488531"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488532"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488533"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488534"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-177"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Arity.html#Arity"
	><span class="hs-identifier hs-type"
	  >Arity</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      >
</span
      ><span id="line-178"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Maybe"
	><span class="hs-identifier hs-type"
	  >Maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#AppContext"
	><span class="hs-identifier hs-type"
	  >AppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488530"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488531"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488532"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488533"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488534"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-179"
      ></span
      ><span id="mapBranches"
      ><span class="annot"
	><span class="annottext"
	  >mapBranches :: forall tyname name (uni :: * -&gt; *) fun a.
(Term tyname name uni fun a -&gt; Term tyname name uni fun a)
-&gt; AppContext tyname name uni fun a
-&gt; [Arity]
-&gt; Maybe (AppContext tyname name uni fun a)
</span
	  ><a href="PlutusIR.Transform.CaseOfCase.html#mapBranches"
	  ><span class="hs-identifier hs-var hs-var"
	    >mapBranches</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488849"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname name uni fun a -&gt; Term tyname name uni fun a
</span
	  ><a href="#local-6989586621679488849"
	  ><span class="hs-identifier hs-var"
	    >f</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
-&gt; [Arity] -&gt; Maybe (AppContext tyname name uni fun a)
</span
	><a href="#local-6989586621679488850"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-180"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-181"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488850"
	><span class="hs-identifier hs-type"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#AppContext"
	><span class="hs-identifier hs-type"
	  >AppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488530"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488531"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488532"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488533"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488534"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Arity.html#Arity"
	><span class="hs-identifier hs-type"
	  >Arity</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Maybe"
	><span class="hs-identifier hs-type"
	  >Maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#AppContext"
	><span class="hs-identifier hs-type"
	  >AppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488530"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488531"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488532"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488533"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488534"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-182"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488850"
      ><span class="annot"
	><span class="annottext"
	  >go :: AppContext tyname name uni fun a
-&gt; [Arity] -&gt; Maybe (AppContext tyname name uni fun a)
</span
	  ><a href="#local-6989586621679488850"
	  ><span class="hs-identifier hs-var hs-var"
	    >go</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
</span
	><a href="PlutusIR.Contexts.html#AppContextEnd"
	><span class="hs-identifier hs-var"
	  >AppContextEnd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
-&gt; Maybe (AppContext tyname name uni fun a)
forall a. a -&gt; Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Just"
	><span class="hs-identifier hs-var"
	  >Just</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
forall tyname name (uni :: * -&gt; *) fun ann.
AppContext tyname name uni fun ann
</span
	><a href="PlutusIR.Contexts.html#AppContextEnd"
	><span class="hs-identifier hs-var"
	  >AppContextEnd</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-183"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488850"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#TermAppContext"
	><span class="hs-identifier hs-type"
	  >TermAppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679488853"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname name uni fun a
</span
	  ><a href="#local-6989586621679488853"
	  ><span class="hs-identifier hs-var"
	    >branch</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488854"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488854"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488855"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname name uni fun a
</span
	  ><a href="#local-6989586621679488855"
	  ><span class="hs-identifier hs-var"
	    >ctx</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488856"
      ><span class="annot"
	><span class="annottext"
	  >Arity
</span
	  ><a href="#local-6989586621679488856"
	  ><span class="hs-identifier hs-var"
	    >arity</span
	    ></a
	  ></span
	></span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-type"
	  >:</span
	  ></a
	></span
      ><span id="local-6989586621679488857"
      ><span class="annot"
	><span class="annottext"
	  >[Arity]
</span
	  ><a href="#local-6989586621679488857"
	  ><span class="hs-identifier hs-var"
	    >arities</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-184"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- This makes the whole thing return Nothing if the traversal has no targets, i.e. if the</span
      ><span
      >
</span
      ><span id="line-185"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- arity doesn't match the term we're looking at. I can't see a way to do this with a more</span
      ><span
      >
</span
      ><span id="line-186"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- general traversal, so there's some duplication between this and the simpler 'underBranches'.</span
      ><span
      >
</span
      ><span id="line-187"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
-&gt; a
-&gt; AppContext tyname name uni fun a
-&gt; AppContext tyname name uni fun a
forall tyname name (uni :: * -&gt; *) fun ann.
Term tyname name uni fun ann
-&gt; ann
-&gt; AppContext tyname name uni fun ann
-&gt; AppContext tyname name uni fun ann
</span
	><a href="PlutusIR.Contexts.html#TermAppContext"
	><span class="hs-identifier hs-var"
	  >TermAppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term tyname name uni fun a
 -&gt; a
 -&gt; AppContext tyname name uni fun a
 -&gt; AppContext tyname name uni fun a)
-&gt; Maybe (Term tyname name uni fun a)
-&gt; Maybe
     (a
      -&gt; AppContext tyname name uni fun a
      -&gt; AppContext tyname name uni fun a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>LensLike
  ((,) Any)
  (Term tyname name uni fun a)
  (Term tyname name uni fun a)
  (Term tyname name uni fun a)
  (Term tyname name uni fun a)
-&gt; (Term tyname name uni fun a -&gt; Term tyname name uni fun a)
-&gt; Term tyname name uni fun a
-&gt; Maybe (Term tyname name uni fun a)
forall (m :: * -&gt; *) s t a b.
Alternative m =&gt;
LensLike ((,) Any) s t a b -&gt; (a -&gt; b) -&gt; s -&gt; m t
</span
	><span class="hs-identifier hs-var"
	>failover</span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Arity
-&gt; Traversal'
     (Term tyname name uni fun a) (Term tyname name uni fun a)
forall tyname name (uni :: * -&gt; *) fun a.
Arity
-&gt; Traversal'
     (Term tyname name uni fun a) (Term tyname name uni fun a)
</span
	><a href="PlutusIR.Core.Plated.html#underBinders"
	><span class="hs-identifier hs-var"
	  >underBinders</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Arity
</span
	><a href="#local-6989586621679488856"
	><span class="hs-identifier hs-var"
	  >arity</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a -&gt; Term tyname name uni fun a
</span
	><a href="#local-6989586621679488849"
	><span class="hs-identifier hs-var"
	  >f</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
</span
	><a href="#local-6989586621679488853"
	><span class="hs-identifier hs-var"
	  >branch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe
  (a
   -&gt; AppContext tyname name uni fun a
   -&gt; AppContext tyname name uni fun a)
-&gt; Maybe a
-&gt; Maybe
     (AppContext tyname name uni fun a
      -&gt; AppContext tyname name uni fun a)
forall a b. Maybe (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; Maybe a
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488854"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe
  (AppContext tyname name uni fun a
   -&gt; AppContext tyname name uni fun a)
-&gt; Maybe (AppContext tyname name uni fun a)
-&gt; Maybe (AppContext tyname name uni fun a)
forall a b. Maybe (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
-&gt; [Arity] -&gt; Maybe (AppContext tyname name uni fun a)
</span
	><a href="#local-6989586621679488850"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
</span
	><a href="#local-6989586621679488855"
	><span class="hs-identifier hs-var"
	  >ctx</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488857"
	><span class="hs-identifier hs-var"
	  >arities</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-188"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488850"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe (AppContext tyname name uni fun a)
forall a. Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-189"
      ></span
      ><span
      >
</span
      ><span id="line-190"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Traverses under the branches in the application context.</span
	></span
      ><span
      >
</span
      ><span id="line-191"
      ></span
      ><span id="local-6989586621679488489"
      ><span id="local-6989586621679488490"
	><span id="local-6989586621679488491"
	  ><span id="local-6989586621679488492"
	    ><span id="local-6989586621679488493"
	      ><span class="annot"
		><a href="PlutusIR.Transform.CaseOfCase.html#underBranches"
		  ><span class="hs-identifier hs-type"
		    >underBranches</span
		    ></a
		  ></span
		><span
		> </span
		><span class="hs-glyph"
		>::</span
		><span
		> </span
		><span class="hs-special"
		>[</span
		><span class="annot"
		><a href="../../plutus-core/src/PlutusCore.Arity.html#Arity"
		  ><span class="hs-identifier hs-type"
		    >Arity</span
		    ></a
		  ></span
		><span class="hs-special"
		>]</span
		><span
		> </span
		><span class="hs-glyph"
		>-&gt;</span
		><span
		> </span
		><span class="annot"
		><span class="hs-identifier hs-type"
		  >Traversal'</span
		  ></span
		><span
		> </span
		><span class="hs-special"
		>(</span
		><span class="annot"
		><a href="PlutusIR.Contexts.html#AppContext"
		  ><span class="hs-identifier hs-type"
		    >AppContext</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488489"
		  ><span class="hs-identifier hs-type"
		    >tyname</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488490"
		  ><span class="hs-identifier hs-type"
		    >name</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488491"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488492"
		  ><span class="hs-identifier hs-type"
		    >fun</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488493"
		  ><span class="hs-identifier hs-type"
		    >a</span
		    ></a
		  ></span
		><span class="hs-special"
		>)</span
		><span
		> </span
		><span class="hs-special"
		>(</span
		><span class="annot"
		><a href="PlutusIR.Core.Type.html#Term"
		  ><span class="hs-identifier hs-type"
		    >Term</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488489"
		  ><span class="hs-identifier hs-type"
		    >tyname</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488490"
		  ><span class="hs-identifier hs-type"
		    >name</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488491"
		  ><span class="hs-identifier hs-type"
		    >uni</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488492"
		  ><span class="hs-identifier hs-type"
		    >fun</span
		    ></a
		  ></span
		><span
		> </span
		><span class="annot"
		><a href="#local-6989586621679488493"
		  ><span class="hs-identifier hs-type"
		    >a</span
		    ></a
		  ></span
		><span class="hs-special"
		>)</span
		></span
	      ></span
	    ></span
	  ></span
	></span
      ><span
      >
</span
      ><span id="line-192"
      ></span
      ><span id="underBranches"
      ><span class="annot"
	><span class="annottext"
	  >underBranches :: forall tyname name (uni :: * -&gt; *) fun a.
[Arity]
-&gt; Traversal'
     (AppContext tyname name uni fun a) (Term tyname name uni fun a)
</span
	  ><a href="PlutusIR.Transform.CaseOfCase.html#underBranches"
	  ><span class="hs-identifier hs-var hs-var"
	    >underBranches</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488864"
      ><span class="annot"
	><span class="annottext"
	  >[Arity]
</span
	  ><a href="#local-6989586621679488864"
	  ><span class="hs-keyword hs-var"
	    >as</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488865"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname name uni fun a -&gt; f (Term tyname name uni fun a)
</span
	  ><a href="#local-6989586621679488865"
	  ><span class="hs-identifier hs-var"
	    >f</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
-&gt; AppContext tyname name uni fun a
-&gt; f (AppContext tyname name uni fun a)
</span
	><a href="#local-6989586621679488866"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488864"
	><span class="hs-keyword hs-var"
	  >as</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-193"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >where</span
      ><span
      >
</span
      ><span id="line-194"
      ></span
      ><span
      >    </span
      ><span id="local-6989586621679488866"
      ><span class="annot"
	><span class="annottext"
	  >go :: [Arity]
-&gt; AppContext tyname name uni fun a
-&gt; f (AppContext tyname name uni fun a)
</span
	  ><a href="#local-6989586621679488866"
	  ><span class="hs-identifier hs-var hs-var"
	    >go</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="hs-special"
      >]</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
</span
	><a href="PlutusIR.Contexts.html#AppContextEnd"
	><span class="hs-identifier hs-var"
	  >AppContextEnd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
-&gt; f (AppContext tyname name uni fun a)
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
forall tyname name (uni :: * -&gt; *) fun ann.
AppContext tyname name uni fun ann
</span
	><a href="PlutusIR.Contexts.html#AppContextEnd"
	><span class="hs-identifier hs-var"
	  >AppContextEnd</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-195"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488866"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488875"
      ><span class="annot"
	><span class="annottext"
	  >Arity
</span
	  ><a href="#local-6989586621679488875"
	  ><span class="hs-identifier hs-var"
	    >arity</span
	    ></a
	  ></span
	></span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Types.html#%3A"
	><span class="hs-glyph hs-type"
	  >:</span
	  ></a
	></span
      ><span id="local-6989586621679488876"
      ><span class="annot"
	><span class="annottext"
	  >[Arity]
</span
	  ><a href="#local-6989586621679488876"
	  ><span class="hs-identifier hs-var"
	    >arities</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#TermAppContext"
	><span class="hs-identifier hs-type"
	  >TermAppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679488877"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname name uni fun a
</span
	  ><a href="#local-6989586621679488877"
	  ><span class="hs-identifier hs-var"
	    >branch</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488878"
      ><span class="annot"
	><span class="annottext"
	  >a
</span
	  ><a href="#local-6989586621679488878"
	  ><span class="hs-identifier hs-var"
	    >ann</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488879"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname name uni fun a
</span
	  ><a href="#local-6989586621679488879"
	  ><span class="hs-identifier hs-var"
	    >ctx</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      >
</span
      ><span id="line-196"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
-&gt; a
-&gt; AppContext tyname name uni fun a
-&gt; AppContext tyname name uni fun a
forall tyname name (uni :: * -&gt; *) fun ann.
Term tyname name uni fun ann
-&gt; ann
-&gt; AppContext tyname name uni fun ann
-&gt; AppContext tyname name uni fun ann
</span
	><a href="PlutusIR.Contexts.html#TermAppContext"
	><span class="hs-identifier hs-var"
	  >TermAppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Term tyname name uni fun a
 -&gt; a
 -&gt; AppContext tyname name uni fun a
 -&gt; AppContext tyname name uni fun a)
-&gt; f (Term tyname name uni fun a)
-&gt; f (a
      -&gt; AppContext tyname name uni fun a
      -&gt; AppContext tyname name uni fun a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Functor.html#%3C%24%3E"
	><span class="hs-operator hs-var"
	  >&lt;$&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Arity
-&gt; Traversal'
     (Term tyname name uni fun a) (Term tyname name uni fun a)
forall tyname name (uni :: * -&gt; *) fun a.
Arity
-&gt; Traversal'
     (Term tyname name uni fun a) (Term tyname name uni fun a)
</span
	><a href="PlutusIR.Core.Plated.html#underBinders"
	><span class="hs-identifier hs-var"
	  >underBinders</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Arity
</span
	><a href="#local-6989586621679488875"
	><span class="hs-identifier hs-var"
	  >arity</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a -&gt; f (Term tyname name uni fun a)
</span
	><a href="#local-6989586621679488865"
	><span class="hs-identifier hs-var"
	  >f</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
</span
	><a href="#local-6989586621679488877"
	><span class="hs-identifier hs-var"
	  >branch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>f (a
   -&gt; AppContext tyname name uni fun a
   -&gt; AppContext tyname name uni fun a)
-&gt; f a
-&gt; f (AppContext tyname name uni fun a
      -&gt; AppContext tyname name uni fun a)
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a -&gt; f a
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><a href="#local-6989586621679488878"
	><span class="hs-identifier hs-var"
	  >ann</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>f (AppContext tyname name uni fun a
   -&gt; AppContext tyname name uni fun a)
-&gt; f (AppContext tyname name uni fun a)
-&gt; f (AppContext tyname name uni fun a)
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%3C%2A%3E"
	><span class="hs-operator hs-var"
	  >&lt;*&gt;</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
-&gt; AppContext tyname name uni fun a
-&gt; f (AppContext tyname name uni fun a)
</span
	><a href="#local-6989586621679488866"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488876"
	><span class="hs-identifier hs-var"
	  >arities</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
</span
	><a href="#local-6989586621679488879"
	><span class="hs-identifier hs-var"
	  >ctx</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-197"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><a href="#local-6989586621679488866"
	><span class="hs-identifier hs-var"
	  >go</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488880"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname name uni fun a
</span
	  ><a href="#local-6989586621679488880"
	  ><span class="hs-identifier hs-var"
	    >ctx</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
-&gt; f (AppContext tyname name uni fun a)
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
</span
	><a href="#local-6989586621679488880"
	><span class="hs-identifier hs-var"
	  >ctx</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-198"
      ></span
      ><span
      >
</span
      ><span id="line-199"
      ></span
      ><span class="annot"
      ><span class="hs-comment"
	>-- | Split a match, either a normal datatype match or a builtin 'match'.</span
	></span
      ><span
      >
</span
      ><span id="line-200"
      ></span
      ><span class="annot"
      ><a href="PlutusIR.Transform.CaseOfCase.html#splitMatch"
	><span class="hs-identifier hs-type"
	  >splitMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >::</span
      ><span
      > </span
      ><span class="hs-keyword"
      >forall</span
      ><span
      > </span
      ><span id="local-6989586621679488439"
      ><span class="annot"
	><a href="#local-6989586621679488439"
	  ><span class="hs-identifier hs-type"
	    >tyname</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488438"
      ><span class="annot"
	><a href="#local-6989586621679488438"
	  ><span class="hs-identifier hs-type"
	    >name</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488440"
      ><span class="annot"
	><a href="#local-6989586621679488440"
	  ><span class="hs-identifier hs-type"
	    >uni</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488437"
      ><span class="annot"
	><a href="#local-6989586621679488437"
	  ><span class="hs-identifier hs-type"
	    >fun</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488441"
      ><span class="annot"
	><a href="#local-6989586621679488441"
	  ><span class="hs-identifier hs-type"
	    >a</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-operator"
      >.</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#Ord"
	><span class="hs-identifier hs-type"
	  >Ord</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488437"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#HasUnique"
	><span class="hs-identifier hs-type"
	  >PLC.HasUnique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488438"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TermUnique"
	><span class="hs-identifier hs-type"
	  >PLC.TermUnique</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#HasUnique"
	><span class="hs-identifier hs-type"
	  >PLC.HasUnique</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488439"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Name.Unique.html#TypeUnique"
	><span class="hs-identifier hs-type"
	  >PLC.TypeUnique</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=&gt;</span
      ><span
      >
</span
      ><span id="line-201"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.Builtins.html#BuiltinsInfo"
	><span class="hs-identifier hs-type"
	  >BuiltinsInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488440"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488437"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-202"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#VarsInfo"
	><span class="hs-identifier hs-type"
	  >VarsInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488439"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488438"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488440"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488441"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-203"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488439"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488438"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488440"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488437"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488441"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-204"
      ></span
      ><span
      >  </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Maybe"
	><span class="hs-identifier hs-type"
	  >Maybe</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
	><span class="hs-identifier hs-type"
	  >SplitMatchContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488439"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488438"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488440"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488437"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488441"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Contexts.html#SplitMatchContext"
	><span class="hs-identifier hs-type"
	  >SplitMatchContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488439"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488438"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488440"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488437"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488441"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Term"
	><span class="hs-identifier hs-type"
	  >Term</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488439"
	><span class="hs-identifier hs-type"
	  >tyname</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488438"
	><span class="hs-identifier hs-type"
	  >name</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488440"
	><span class="hs-identifier hs-type"
	  >uni</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488437"
	><span class="hs-identifier hs-type"
	  >fun</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><a href="#local-6989586621679488441"
	><span class="hs-identifier hs-type"
	  >a</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-special"
      >[</span
      ><span class="annot"
      ><a href="../../plutus-core/src/PlutusCore.Arity.html#Arity"
	><span class="hs-identifier hs-type"
	  >Arity</span
	  ></a
	></span
      ><span class="hs-special"
      >]</span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-205"
      ></span
      ><span id="splitMatch"
      ><span class="annot"
	><span class="annottext"
	  >splitMatch :: forall tyname name (uni :: * -&gt; *) fun a.
(Ord fun, HasUnique name TermUnique,
 HasUnique tyname TypeUnique) =&gt;
BuiltinsInfo uni fun
-&gt; VarsInfo tyname name uni a
-&gt; Term tyname name uni fun a
-&gt; Maybe
     (SplitMatchContext tyname name uni fun a,
      SplitMatchContext tyname name uni fun a
      -&gt; Term tyname name uni fun a,
      [Arity])
</span
	  ><a href="PlutusIR.Transform.CaseOfCase.html#splitMatch"
	  ><span class="hs-identifier hs-var hs-var"
	    >splitMatch</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488898"
      ><span class="annot"
	><span class="annottext"
	  >BuiltinsInfo uni fun
</span
	  ><a href="#local-6989586621679488898"
	  ><span class="hs-identifier hs-var"
	    >binfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488899"
      ><span class="annot"
	><span class="annottext"
	  >VarsInfo tyname name uni a
</span
	  ><a href="#local-6989586621679488899"
	  ><span class="hs-identifier hs-var"
	    >vinfo</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488900"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname name uni fun a
</span
	  ><a href="#local-6989586621679488900"
	  ><span class="hs-identifier hs-var"
	    >t</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-206"
      ></span
      ><span
      >  </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488901"
      ><span class="annot"
	><span class="annottext"
	  >Term tyname name uni fun a
</span
	  ><a href="#local-6989586621679488901"
	  ><span class="hs-identifier hs-var"
	    >hd</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488902"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname name uni fun a
</span
	  ><a href="#local-6989586621679488902"
	  ><span class="hs-identifier hs-var"
	    >args</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
-&gt; (Term tyname name uni fun a, AppContext tyname name uni fun a)
forall tyname name (uni :: * -&gt; *) fun ann.
Term tyname name uni fun ann
-&gt; (Term tyname name uni fun ann,
    AppContext tyname name uni fun ann)
</span
	><a href="PlutusIR.Contexts.html#splitApplication"
	><span class="hs-identifier hs-var"
	  >splitApplication</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
</span
	><a href="#local-6989586621679488900"
	><span class="hs-identifier hs-var"
	  >t</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-207"
      ></span
      ><span
      >  </span
      ><span class="hs-special"
      >(</span
      ><span id="local-6989586621679488903"
      ><span class="annot"
	><span class="annottext"
	  >Market
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (Identity (SplitMatchContext tyname name uni fun a))
-&gt; Market
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (AppContext tyname name uni fun a)
     (Identity (AppContext tyname name uni fun a))
</span
	  ><a href="#local-6989586621679488903"
	  ><span class="hs-identifier hs-var"
	    >p</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span id="local-6989586621679488904"
      ><span class="annot"
	><span class="annottext"
	  >[Arity]
</span
	  ><a href="#local-6989586621679488904"
	  ><span class="hs-identifier hs-var"
	    >arities</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
</span
	><a href="#local-6989586621679488901"
	><span class="hs-identifier hs-var"
	  >hd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-208"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Var"
	><span class="hs-identifier hs-type"
	  >Var</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488905"
      ><span class="annot"
	><span class="annottext"
	  >name
</span
	  ><a href="#local-6989586621679488905"
	  ><span class="hs-identifier hs-var"
	    >matcherName</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >     </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-209"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679488917"
      ><span class="annot"
	><span class="annottext"
	  >p :: Market
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (Identity (SplitMatchContext tyname name uni fun a))
-&gt; Market
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (AppContext tyname name uni fun a)
     (Identity (AppContext tyname name uni fun a))
</span
	  ><a href="#local-6989586621679488917"
	  ><span class="hs-identifier hs-var hs-var"
	    >p</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname name uni a
-&gt; name
-&gt; Prism'
     (AppContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
forall name tyname (uni :: * -&gt; *) a fun.
(HasUnique name TermUnique, HasUnique tyname TypeUnique) =&gt;
VarsInfo tyname name uni a
-&gt; name
-&gt; Prism'
     (AppContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
</span
	><a href="PlutusIR.Contexts.html#asNormalDatatypeMatch"
	><span class="hs-identifier hs-var"
	  >asNormalDatatypeMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname name uni a
</span
	><a href="#local-6989586621679488899"
	><span class="hs-identifier hs-var"
	  >vinfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>name
</span
	><a href="#local-6989586621679488905"
	><span class="hs-identifier hs-var"
	  >matcherName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-210"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621679488919"
      ><span class="annot"
	><span class="annottext"
	  >VarInfo tyname name uni a
</span
	  ><a href="#local-6989586621679488919"
	  ><span class="hs-identifier hs-var"
	    >info</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>name
-&gt; VarsInfo tyname name uni a -&gt; Maybe (VarInfo tyname name uni a)
forall name tyname (uni :: * -&gt; *) a.
HasUnique name TermUnique =&gt;
name
-&gt; VarsInfo tyname name uni a -&gt; Maybe (VarInfo tyname name uni a)
</span
	><a href="PlutusIR.Analysis.VarInfo.html#lookupVarInfo"
	><span class="hs-identifier hs-var"
	  >lookupVarInfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>name
</span
	><a href="#local-6989586621679488905"
	><span class="hs-identifier hs-var"
	  >matcherName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname name uni a
</span
	><a href="#local-6989586621679488899"
	><span class="hs-identifier hs-var"
	  >vinfo</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-211"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621679488920"
      ><span class="annot"
	><span class="annottext"
	  >[Arity]
</span
	  ><a href="#local-6989586621679488920"
	  ><span class="hs-identifier hs-var"
	    >constrArities</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarInfo tyname name uni a
</span
	><a href="#local-6989586621679488919"
	><span class="hs-identifier hs-var"
	  >info</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-212"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><a href="PlutusIR.Analysis.VarInfo.html#DatatypeMatcher"
	><span class="hs-identifier hs-type"
	  >DatatypeMatcher</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679488921"
      ><span class="annot"
	><span class="annottext"
	  >tyname
</span
	  ><a href="#local-6989586621679488921"
	  ><span class="hs-identifier hs-var"
	    >parentTyName</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>tyname -&gt; VarsInfo tyname name uni a -&gt; Maybe [Arity]
forall name tyname (uni :: * -&gt; *) a.
(HasUnique name TermUnique, HasUnique tyname TypeUnique) =&gt;
tyname -&gt; VarsInfo tyname name uni a -&gt; Maybe [Arity]
</span
	><a href="PlutusIR.Analysis.VarInfo.html#getConstructorArities"
	><span class="hs-identifier hs-var"
	  >getConstructorArities</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>tyname
</span
	><a href="#local-6989586621679488921"
	><span class="hs-identifier hs-var"
	  >parentTyName</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>VarsInfo tyname name uni a
</span
	><a href="#local-6989586621679488899"
	><span class="hs-identifier hs-var"
	  >vinfo</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-213"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>VarInfo tyname name uni a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      >                            </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe [Arity]
forall a. Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-214"
      ></span
      ><span
      >      </span
      ><span class="hs-comment"
      >-- The branch arities don't include the type arguments for the constructor</span
      ><span
      >
</span
      ><span id="line-215"
      ></span
      ><span
      >      </span
      ><span class="hs-keyword"
      >let</span
      ><span
      > </span
      ><span id="local-6989586621679488926"
      ><span class="annot"
	><span class="annottext"
	  >branchArities :: [Arity]
</span
	  ><a href="#local-6989586621679488926"
	  ><span class="hs-identifier hs-var hs-var"
	    >branchArities</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >=</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(Arity -&gt; Arity) -&gt; [Arity] -&gt; [Arity]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#fmap"
	><span class="hs-identifier hs-var"
	  >fmap</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>(Param -&gt; Bool) -&gt; Arity -&gt; Arity
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.List.html#dropWhile"
	><span class="hs-identifier hs-var"
	  >dropWhile</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Param -&gt; Param -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span
	><a href="https://hackage.haskell.org/package/ghc-prim-0.10.0/docs/src/GHC.Classes.html#%3D%3D"
	><span class="hs-operator hs-var"
	  >(==)</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Param
</span
	><a href="../../plutus-core/src/PlutusCore.Arity.html#TypeParam"
	><span class="hs-identifier hs-var"
	  >TypeParam</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488920"
	><span class="hs-identifier hs-var"
	  >constrArities</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-216"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>(Market
   (SplitMatchContext tyname name uni fun a)
   (SplitMatchContext tyname name uni fun a)
   (SplitMatchContext tyname name uni fun a)
   (Identity (SplitMatchContext tyname name uni fun a))
 -&gt; Market
      (SplitMatchContext tyname name uni fun a)
      (SplitMatchContext tyname name uni fun a)
      (AppContext tyname name uni fun a)
      (Identity (AppContext tyname name uni fun a)),
 [Arity])
-&gt; Maybe
     (Market
        (SplitMatchContext tyname name uni fun a)
        (SplitMatchContext tyname name uni fun a)
        (SplitMatchContext tyname name uni fun a)
        (Identity (SplitMatchContext tyname name uni fun a))
      -&gt; Market
           (SplitMatchContext tyname name uni fun a)
           (SplitMatchContext tyname name uni fun a)
           (AppContext tyname name uni fun a)
           (Identity (AppContext tyname name uni fun a)),
      [Arity])
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Market
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (Identity (SplitMatchContext tyname name uni fun a))
-&gt; Market
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (AppContext tyname name uni fun a)
     (Identity (AppContext tyname name uni fun a))
forall {fun}.
Market
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (Identity (SplitMatchContext tyname name uni fun a))
-&gt; Market
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (AppContext tyname name uni fun a)
     (Identity (AppContext tyname name uni fun a))
</span
	><a href="#local-6989586621679488917"
	><span class="hs-identifier hs-var"
	  >p</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488926"
	><span class="hs-identifier hs-var"
	  >branchArities</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-217"
      ></span
      ><span
      >    </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><a href="PlutusIR.Core.Type.html#Builtin"
	><span class="hs-identifier hs-type"
	  >Builtin</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488930"
      ><span class="annot"
	><span class="annottext"
	  >fun
</span
	  ><a href="#local-6989586621679488930"
	  ><span class="hs-identifier hs-var"
	    >matcherName</span
	    ></a
	  ></span
	></span
      ><span class="hs-special"
      >)</span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="hs-keyword"
      >do</span
      ><span
      >
</span
      ><span id="line-218"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621679488931"
      ><span class="annot"
	><span class="annottext"
	  >Market
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (Identity (SplitMatchContext tyname name uni fun a))
-&gt; Market
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (AppContext tyname name uni fun a)
     (Identity (AppContext tyname name uni fun a))
</span
	  ><a href="#local-6989586621679488931"
	  ><span class="hs-identifier hs-var"
	    >p</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
-&gt; fun
-&gt; Maybe
     (Market
        (SplitMatchContext tyname name uni fun a)
        (SplitMatchContext tyname name uni fun a)
        (SplitMatchContext tyname name uni fun a)
        (Identity (SplitMatchContext tyname name uni fun a))
      -&gt; Market
           (SplitMatchContext tyname name uni fun a)
           (SplitMatchContext tyname name uni fun a)
           (AppContext tyname name uni fun a)
           (Identity (AppContext tyname name uni fun a)))
forall fun (uni :: * -&gt; *) tyname name a.
Ord fun =&gt;
BuiltinsInfo uni fun
-&gt; fun
-&gt; Maybe
     (APrism'
        (AppContext tyname name uni fun a)
        (SplitMatchContext tyname name uni fun a))
</span
	><a href="PlutusIR.Analysis.Builtins.html#asBuiltinDatatypeMatch"
	><span class="hs-identifier hs-var"
	  >asBuiltinDatatypeMatch</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
</span
	><a href="#local-6989586621679488898"
	><span class="hs-identifier hs-var"
	  >binfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>fun
</span
	><a href="#local-6989586621679488930"
	><span class="hs-identifier hs-var"
	  >matcherName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-219"
      ></span
      ><span
      >      </span
      ><span id="local-6989586621679488933"
      ><span class="annot"
	><span class="annottext"
	  >[Arity]
</span
	  ><a href="#local-6989586621679488933"
	  ><span class="hs-identifier hs-var"
	    >branchArities</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >&lt;-</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun -&gt; fun -&gt; Maybe [Arity]
forall fun (uni :: * -&gt; *).
Ord fun =&gt;
BuiltinsInfo uni fun -&gt; fun -&gt; Maybe [Arity]
</span
	><a href="PlutusIR.Analysis.Builtins.html#builtinDatatypeMatchBranchArities"
	><span class="hs-identifier hs-var"
	  >builtinDatatypeMatchBranchArities</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>BuiltinsInfo uni fun
</span
	><a href="#local-6989586621679488898"
	><span class="hs-identifier hs-var"
	  >binfo</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>fun
</span
	><a href="#local-6989586621679488930"
	><span class="hs-identifier hs-var"
	  >matcherName</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-220"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><span class="annottext"
	>(Market
   (SplitMatchContext tyname name uni fun a)
   (SplitMatchContext tyname name uni fun a)
   (SplitMatchContext tyname name uni fun a)
   (Identity (SplitMatchContext tyname name uni fun a))
 -&gt; Market
      (SplitMatchContext tyname name uni fun a)
      (SplitMatchContext tyname name uni fun a)
      (AppContext tyname name uni fun a)
      (Identity (AppContext tyname name uni fun a)),
 [Arity])
-&gt; Maybe
     (Market
        (SplitMatchContext tyname name uni fun a)
        (SplitMatchContext tyname name uni fun a)
        (SplitMatchContext tyname name uni fun a)
        (Identity (SplitMatchContext tyname name uni fun a))
      -&gt; Market
           (SplitMatchContext tyname name uni fun a)
           (SplitMatchContext tyname name uni fun a)
           (AppContext tyname name uni fun a)
           (Identity (AppContext tyname name uni fun a)),
      [Arity])
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>Market
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (Identity (SplitMatchContext tyname name uni fun a))
-&gt; Market
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (AppContext tyname name uni fun a)
     (Identity (AppContext tyname name uni fun a))
</span
	><a href="#local-6989586621679488931"
	><span class="hs-identifier hs-var"
	  >p</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488933"
	><span class="hs-identifier hs-var"
	  >branchArities</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-221"
      ></span
      ><span
      >    </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      >                       </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe
  (Market
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (Identity (SplitMatchContext tyname name uni fun a))
   -&gt; Market
        (SplitMatchContext tyname name uni fun a)
        (SplitMatchContext tyname name uni fun a)
        (AppContext tyname name uni fun a)
        (Identity (AppContext tyname name uni fun a)),
   [Arity])
forall a. Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-222"
      ></span
      ><span
      >  </span
      ><span class="annot"
      ><span class="annottext"
	>(Market
   (SplitMatchContext tyname name uni fun a)
   (SplitMatchContext tyname name uni fun a)
   (SplitMatchContext tyname name uni fun a)
   (Identity (SplitMatchContext tyname name uni fun a))
 -&gt; Market
      (SplitMatchContext tyname name uni fun a)
      (SplitMatchContext tyname name uni fun a)
      (AppContext tyname name uni fun a)
      (Identity (AppContext tyname name uni fun a)))
-&gt; ((SplitMatchContext tyname name uni fun a
     -&gt; AppContext tyname name uni fun a)
    -&gt; (AppContext tyname name uni fun a
        -&gt; Either
             (AppContext tyname name uni fun a)
             (SplitMatchContext tyname name uni fun a))
    -&gt; Maybe
         (SplitMatchContext tyname name uni fun a,
          SplitMatchContext tyname name uni fun a
          -&gt; Term tyname name uni fun a,
          [Arity]))
-&gt; Maybe
     (SplitMatchContext tyname name uni fun a,
      SplitMatchContext tyname name uni fun a
      -&gt; Term tyname name uni fun a,
      [Arity])
forall s t a b r.
APrism s t a b -&gt; ((b -&gt; t) -&gt; (s -&gt; Either t a) -&gt; r) -&gt; r
</span
	><span class="hs-identifier hs-var"
	>withPrism</span
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Market
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (SplitMatchContext tyname name uni fun a)
  (Identity (SplitMatchContext tyname name uni fun a))
-&gt; Market
     (SplitMatchContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
     (AppContext tyname name uni fun a)
     (Identity (AppContext tyname name uni fun a))
</span
	><a href="#local-6989586621679488903"
	><span class="hs-identifier hs-var"
	  >p</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>(((SplitMatchContext tyname name uni fun a
   -&gt; AppContext tyname name uni fun a)
  -&gt; (AppContext tyname name uni fun a
      -&gt; Either
           (AppContext tyname name uni fun a)
           (SplitMatchContext tyname name uni fun a))
  -&gt; Maybe
       (SplitMatchContext tyname name uni fun a,
        SplitMatchContext tyname name uni fun a
        -&gt; Term tyname name uni fun a,
        [Arity]))
 -&gt; Maybe
      (SplitMatchContext tyname name uni fun a,
       SplitMatchContext tyname name uni fun a
       -&gt; Term tyname name uni fun a,
       [Arity]))
-&gt; ((SplitMatchContext tyname name uni fun a
     -&gt; AppContext tyname name uni fun a)
    -&gt; (AppContext tyname name uni fun a
        -&gt; Either
             (AppContext tyname name uni fun a)
             (SplitMatchContext tyname name uni fun a))
    -&gt; Maybe
         (SplitMatchContext tyname name uni fun a,
          SplitMatchContext tyname name uni fun a
          -&gt; Term tyname name uni fun a,
          [Arity]))
-&gt; Maybe
     (SplitMatchContext tyname name uni fun a,
      SplitMatchContext tyname name uni fun a
      -&gt; Term tyname name uni fun a,
      [Arity])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#%24"
	><span class="hs-operator hs-var"
	  >$</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679488936"
      ><span class="annot"
	><span class="annottext"
	  >SplitMatchContext tyname name uni fun a
-&gt; AppContext tyname name uni fun a
</span
	  ><a href="#local-6989586621679488936"
	  ><span class="hs-identifier hs-var"
	    >reconstruct</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span id="local-6989586621679488937"
      ><span class="annot"
	><span class="annottext"
	  >AppContext tyname name uni fun a
-&gt; Either
     (AppContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
</span
	  ><a href="#local-6989586621679488937"
	  ><span class="hs-identifier hs-var"
	    >match</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-223"
      ></span
      ><span
      >    </span
      ><span class="hs-keyword"
      >case</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
-&gt; Either
     (AppContext tyname name uni fun a)
     (SplitMatchContext tyname name uni fun a)
</span
	><a href="#local-6989586621679488937"
	><span class="hs-identifier hs-var"
	  >match</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
</span
	><a href="#local-6989586621679488902"
	><span class="hs-identifier hs-var"
	  >args</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-keyword"
      >of</span
      ><span
      >
</span
      ><span id="line-224"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Either.html#Right"
	><span class="hs-identifier hs-type"
	  >Right</span
	  ></a
	></span
      ><span
      > </span
      ><span id="local-6989586621679488938"
      ><span class="annot"
	><span class="annottext"
	  >SplitMatchContext tyname name uni fun a
</span
	  ><a href="#local-6989586621679488938"
	  ><span class="hs-identifier hs-var"
	    >sm</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      >
</span
      ><span id="line-225"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- wrangle the reconstruction function so it also puts the head back in, for</span
      ><span
      >
</span
      ><span id="line-226"
      ></span
      ><span
      >        </span
      ><span class="hs-comment"
      >-- convenience of use elsewhere</span
      ><span
      >
</span
      ><span id="line-227"
      ></span
      ><span
      >        </span
      ><span class="annot"
      ><span class="annottext"
	>(SplitMatchContext tyname name uni fun a,
 SplitMatchContext tyname name uni fun a
 -&gt; Term tyname name uni fun a,
 [Arity])
-&gt; Maybe
     (SplitMatchContext tyname name uni fun a,
      SplitMatchContext tyname name uni fun a
      -&gt; Term tyname name uni fun a,
      [Arity])
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Base.html#pure"
	><span class="hs-identifier hs-var"
	  >pure</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname name uni fun a
</span
	><a href="#local-6989586621679488938"
	><span class="hs-identifier hs-var"
	  >sm</span
	  ></a
	></span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="hs-glyph"
      >\</span
      ><span id="local-6989586621679488939"
      ><span class="annot"
	><span class="annottext"
	  >SplitMatchContext tyname name uni fun a
</span
	  ><a href="#local-6989586621679488939"
	  ><span class="hs-identifier hs-var"
	    >sm'</span
	    ></a
	  ></span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
-&gt; AppContext tyname name uni fun a -&gt; Term tyname name uni fun a
forall tyname name (uni :: * -&gt; *) fun ann.
Term tyname name uni fun ann
-&gt; AppContext tyname name uni fun ann
-&gt; Term tyname name uni fun ann
</span
	><a href="PlutusIR.Contexts.html#fillAppContext"
	><span class="hs-identifier hs-var"
	  >fillAppContext</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Term tyname name uni fun a
</span
	><a href="#local-6989586621679488901"
	><span class="hs-identifier hs-var"
	  >hd</span
	  ></a
	></span
      ><span
      > </span
      ><span class="hs-special"
      >(</span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname name uni fun a
-&gt; AppContext tyname name uni fun a
</span
	><a href="#local-6989586621679488936"
	><span class="hs-identifier hs-var"
	  >reconstruct</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>SplitMatchContext tyname name uni fun a
</span
	><a href="#local-6989586621679488939"
	><span class="hs-identifier hs-var"
	  >sm'</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span class="hs-special"
      >,</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>[Arity]
</span
	><a href="#local-6989586621679488904"
	><span class="hs-identifier hs-var"
	  >arities</span
	  ></a
	></span
      ><span class="hs-special"
      >)</span
      ><span
      >
</span
      ><span id="line-228"
      ></span
      ><span
      >      </span
      ><span class="annot"
      ><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/Data.Either.html#Left"
	><span class="hs-identifier hs-type"
	  >Left</span
	  ></a
	></span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>AppContext tyname name uni fun a
</span
	><span class="hs-identifier"
	>_</span
	></span
      ><span
      > </span
      ><span class="hs-glyph"
      >-&gt;</span
      ><span
      > </span
      ><span class="annot"
      ><span class="annottext"
	>Maybe
  (SplitMatchContext tyname name uni fun a,
   SplitMatchContext tyname name uni fun a
   -&gt; Term tyname name uni fun a,
   [Arity])
forall a. Maybe a
</span
	><a href="https://hackage.haskell.org/package/base-4.18.3.0/docs/src/GHC.Maybe.html#Nothing"
	><span class="hs-identifier hs-var"
	  >Nothing</span
	  ></a
	></span
      ><span
      >
</span
      ><span id="line-229"
      ></span
      ><span
      >
</span
      ><span id="line-230"
      ></span
      ><span class="hs-comment"
      >{- Note [Case-of-case and conapps]
Case-of-case is especially good if the bodies of the branches are all constructor applications.
Consider the following program we might typically get from Plutus Tx:

Bool_match {integer} (ifThenElse {Bool} (lessThanInteger 1 2) True False) 3 4
---&gt; case-of-case
ifThenElse {integer} (lessThanInteger 1 2) (Bool_match {integer} True 3) (Bool_match {integer} False 4)
---&gt; case-of-known-constructor
ifThenElse {integer} (lessThanInteger 1 2) 3

That is, this guarantees that case-of-known constructor will fire and get rid of one of the
matches entirely, which is great.

In order to be sure that it's definitely good, however, we need all of the branches to
be _distinct_ constructor applications, otherwise we can duplicate code, see
Note [Case-of-case and duplicating code].
-}</span
      ><span
      >
</span
      ><span id="line-247"
      ></span
      ><span
      >
</span
      ><span id="line-248"
      ></span
      ><span class="hs-comment"
      >{- Note [Case-of-case and duplicating code]
Case-of-case can duplicate code.

Consider this schematic example:

case (case s of { C1 a -&gt; x; C2 b -&gt; y; }) of
  D1 -&gt; w
  D2 -&gt; z

--&gt;

case s of
  C1 a -&gt; case x of { D1 -&gt; w; D2 -&gt; z; }
  C2 b -&gt; case y of { D1 -&gt; w; D2 -&gt; z; }

We duplicate the outer case (the matcher application, importantly including
the branches) for every branch of the inner case.

Any time we duplicate code we run the risk of exponential program growth,
since we might apply case-of-case inside the duplicated parts of the
program, thus leading to multiplicative growth. In particular, since we apply
case-of-case in a bottom-up fashion, we can apply it inside a subterm (creating
duplication), and then in the main term (multiplying the duplication) in a single
pass. This is not _too_ bad so long as case-of-known-constructor will clear
things up afterwards, but is something to be aware of.

If the inner branch bodies are conapps (see Note [Case-of-case and conapps]) then
that will reduce but not necessarily eliminate the duplication. Consider

case (case s of { C1 a -&gt; True; C2 b -&gt; True; C3 c -&gt; False }) of
  True -&gt; v
  False -&gt; w

--&gt; (case-of-case)

case s of
  C1 a -&gt; case True of { True -&gt; v; False -&gt; w; }
  C2 b -&gt; case True of { True -&gt; v; False -&gt; w; }
  C3 c -&gt; case False of { True -&gt; v; False -&gt; w; }

--&gt; (case-of-known-constructor)

case s of
  C1 a -&gt; v
  C2 b -&gt; v
  C3 c -&gt; w

i.e. we still duplicate v! If however the conapps are all distinct constructors then
this won't happen.

We can mitigate the problem by binding the potentially-duplicated code to a variable
instead:

case (case s of { C1 a -&gt; x; C2 b -&gt; y; }) of
  D1 -&gt; w
  D2 -&gt; z

--&gt;

let k_caseOfCase = \x -&gt; case x of { D1 -&gt; w; D2 -&gt; z; }
in case s of
  C1 a -&gt; k_caseOfCase x
  C2 b -&gt; k_caseOfCase y

This avoids the code growth but is less good as an optimization, unless we can rely
on the inliner to see these as good inlining opportunities, which we currently can't.
-}</span
      ><span
      >
</span
      ><span id="line-315"
      ></span
      ></pre
    ></body
  ></html
>
