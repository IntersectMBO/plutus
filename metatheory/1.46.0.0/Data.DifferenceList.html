<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.DifferenceList</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Lists with fast append</a>
<a id="132" class="Comment">------------------------------------------------------------------------</a>

<a id="206" class="Symbol">{-#</a> <a id="210" class="Keyword">OPTIONS</a> <a id="218" class="Pragma">--cubical-compatible</a> <a id="239" class="Pragma">--safe</a> <a id="246" class="Symbol">#-}</a>

<a id="251" class="Keyword">module</a> <a id="258" href="Data.DifferenceList.html" class="Module">Data.DifferenceList</a> <a id="278" class="Keyword">where</a>

<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="Level.html" class="Module">Level</a> <a id="303" class="Keyword">using</a> <a id="309" class="Symbol">(</a><a id="310" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="315" class="Symbol">)</a>
<a id="317" class="Keyword">open</a> <a id="322" class="Keyword">import</a> <a id="329" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="344" class="Symbol">as</a> <a id="347" class="Module">List</a> <a id="352" class="Keyword">using</a> <a id="358" class="Symbol">(</a><a id="359" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="363" class="Symbol">)</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Function.Base.html" class="Module">Function.Base</a> <a id="391" class="Keyword">using</a> <a id="397" class="Symbol">(</a><a id="398" href="Function.Base.html#4322" class="Function Operator">_⟨_⟩_</a><a id="403" class="Symbol">)</a>
<a id="405" class="Keyword">open</a> <a id="410" class="Keyword">import</a> <a id="417" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>

<a id="432" class="Keyword">private</a>
  <a id="442" class="Keyword">variable</a>
    <a id="455" href="Data.DifferenceList.html#455" class="Generalizable">a</a> <a id="457" href="Data.DifferenceList.html#457" class="Generalizable">b</a> <a id="459" class="Symbol">:</a> <a id="461" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="471" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="473" class="Symbol">:</a> <a id="475" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="479" href="Data.DifferenceList.html#455" class="Generalizable">a</a>
    <a id="485" href="Data.DifferenceList.html#485" class="Generalizable">B</a> <a id="487" class="Symbol">:</a> <a id="489" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="493" href="Data.DifferenceList.html#457" class="Generalizable">b</a>

<a id="496" class="Comment">------------------------------------------------------------------------</a>
<a id="569" class="Comment">-- Type definition and list function lifting</a>

<a id="DiffList"></a><a id="615" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="624" class="Symbol">:</a> <a id="626" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="630" href="Data.DifferenceList.html#455" class="Generalizable">a</a> <a id="632" class="Symbol">→</a> <a id="634" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="638" href="Data.DifferenceList.html#455" class="Generalizable">a</a>
<a id="640" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="649" href="Data.DifferenceList.html#649" class="Bound">A</a> <a id="651" class="Symbol">=</a> <a id="653" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="658" href="Data.DifferenceList.html#649" class="Bound">A</a> <a id="660" class="Symbol">→</a> <a id="662" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="667" href="Data.DifferenceList.html#649" class="Bound">A</a>

<a id="lift"></a><a id="670" href="Data.DifferenceList.html#670" class="Function">lift</a> <a id="675" class="Symbol">:</a> <a id="677" class="Symbol">(</a><a id="678" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="683" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="685" class="Symbol">→</a> <a id="687" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="692" href="Data.DifferenceList.html#471" class="Generalizable">A</a><a id="693" class="Symbol">)</a> <a id="695" class="Symbol">→</a> <a id="697" class="Symbol">(</a><a id="698" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="707" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="709" class="Symbol">→</a> <a id="711" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="720" href="Data.DifferenceList.html#471" class="Generalizable">A</a><a id="721" class="Symbol">)</a>
<a id="723" href="Data.DifferenceList.html#670" class="Function">lift</a> <a id="728" href="Data.DifferenceList.html#728" class="Bound">f</a> <a id="730" href="Data.DifferenceList.html#730" class="Bound">xs</a> <a id="733" class="Symbol">=</a> <a id="735" class="Symbol">λ</a> <a id="737" href="Data.DifferenceList.html#737" class="Bound">k</a> <a id="739" class="Symbol">→</a> <a id="741" href="Data.DifferenceList.html#728" class="Bound">f</a> <a id="743" class="Symbol">(</a><a id="744" href="Data.DifferenceList.html#730" class="Bound">xs</a> <a id="747" href="Data.DifferenceList.html#737" class="Bound">k</a><a id="748" class="Symbol">)</a>

<a id="751" class="Comment">------------------------------------------------------------------------</a>
<a id="824" class="Comment">-- Building difference lists</a>

<a id="854" class="Keyword">infixr</a> <a id="861" class="Number">5</a> <a id="863" href="Data.DifferenceList.html#903" class="Function Operator">_∷_</a> <a id="867" href="Data.DifferenceList.html#1000" class="Function Operator">_++_</a>

<a id="[]"></a><a id="873" href="Data.DifferenceList.html#873" class="Function">[]</a> <a id="876" class="Symbol">:</a> <a id="878" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="887" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="889" href="Data.DifferenceList.html#873" class="Function">[]</a> <a id="892" class="Symbol">=</a> <a id="894" class="Symbol">λ</a> <a id="896" href="Data.DifferenceList.html#896" class="Bound">k</a> <a id="898" class="Symbol">→</a> <a id="900" href="Data.DifferenceList.html#896" class="Bound">k</a>

<a id="_∷_"></a><a id="903" href="Data.DifferenceList.html#903" class="Function Operator">_∷_</a> <a id="907" class="Symbol">:</a> <a id="909" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="911" class="Symbol">→</a> <a id="913" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="922" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="924" class="Symbol">→</a> <a id="926" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="935" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="937" href="Data.DifferenceList.html#903" class="Function Operator">_∷_</a> <a id="941" href="Data.DifferenceList.html#941" class="Bound">x</a> <a id="943" class="Symbol">=</a> <a id="945" href="Data.DifferenceList.html#670" class="Function">lift</a> <a id="950" class="Symbol">(</a><a id="951" href="Data.DifferenceList.html#941" class="Bound">x</a> <a id="953" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">List.∷_</a><a id="960" class="Symbol">)</a>

<a id="[_]"></a><a id="963" href="Data.DifferenceList.html#963" class="Function Operator">[_]</a> <a id="967" class="Symbol">:</a> <a id="969" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="971" class="Symbol">→</a> <a id="973" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="982" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="984" href="Data.DifferenceList.html#963" class="Function Operator">[</a> <a id="986" href="Data.DifferenceList.html#986" class="Bound">x</a> <a id="988" href="Data.DifferenceList.html#963" class="Function Operator">]</a> <a id="990" class="Symbol">=</a> <a id="992" href="Data.DifferenceList.html#986" class="Bound">x</a> <a id="994" href="Data.DifferenceList.html#903" class="Function Operator">∷</a> <a id="996" href="Data.DifferenceList.html#873" class="Function">[]</a>

<a id="_++_"></a><a id="1000" href="Data.DifferenceList.html#1000" class="Function Operator">_++_</a> <a id="1005" class="Symbol">:</a> <a id="1007" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1016" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1018" class="Symbol">→</a> <a id="1020" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1029" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1031" class="Symbol">→</a> <a id="1033" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1042" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="1044" href="Data.DifferenceList.html#1044" class="Bound">xs</a> <a id="1047" href="Data.DifferenceList.html#1000" class="Function Operator">++</a> <a id="1050" href="Data.DifferenceList.html#1050" class="Bound">ys</a> <a id="1053" class="Symbol">=</a> <a id="1055" class="Symbol">λ</a> <a id="1057" href="Data.DifferenceList.html#1057" class="Bound">k</a> <a id="1059" class="Symbol">→</a> <a id="1061" href="Data.DifferenceList.html#1044" class="Bound">xs</a> <a id="1064" class="Symbol">(</a><a id="1065" href="Data.DifferenceList.html#1050" class="Bound">ys</a> <a id="1068" href="Data.DifferenceList.html#1057" class="Bound">k</a><a id="1069" class="Symbol">)</a>

<a id="1072" class="Keyword">infixl</a> <a id="1079" class="Number">6</a> <a id="1081" href="Data.DifferenceList.html#1086" class="Function Operator">_∷ʳ_</a>
<a id="_∷ʳ_"></a><a id="1086" href="Data.DifferenceList.html#1086" class="Function Operator">_∷ʳ_</a> <a id="1091" class="Symbol">:</a> <a id="1093" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1102" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1104" class="Symbol">→</a> <a id="1106" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1108" class="Symbol">→</a> <a id="1110" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1119" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="1121" href="Data.DifferenceList.html#1121" class="Bound">xs</a> <a id="1124" href="Data.DifferenceList.html#1086" class="Function Operator">∷ʳ</a> <a id="1127" href="Data.DifferenceList.html#1127" class="Bound">x</a> <a id="1129" class="Symbol">=</a> <a id="1131" class="Symbol">λ</a> <a id="1133" href="Data.DifferenceList.html#1133" class="Bound">k</a> <a id="1135" class="Symbol">→</a> <a id="1137" href="Data.DifferenceList.html#1121" class="Bound">xs</a> <a id="1140" class="Symbol">(</a><a id="1141" href="Data.DifferenceList.html#1127" class="Bound">x</a> <a id="1143" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">List.∷</a> <a id="1150" href="Data.DifferenceList.html#1133" class="Bound">k</a><a id="1151" class="Symbol">)</a>

<a id="1154" class="Comment">------------------------------------------------------------------------</a>
<a id="1227" class="Comment">-- Conversion back and forth with List</a>

<a id="toList"></a><a id="1267" href="Data.DifferenceList.html#1267" class="Function">toList</a> <a id="1274" class="Symbol">:</a> <a id="1276" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1285" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1287" class="Symbol">→</a> <a id="1289" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1294" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="1296" href="Data.DifferenceList.html#1267" class="Function">toList</a> <a id="1303" href="Data.DifferenceList.html#1303" class="Bound">xs</a> <a id="1306" class="Symbol">=</a> <a id="1308" href="Data.DifferenceList.html#1303" class="Bound">xs</a> <a id="1311" href="Agda.Builtin.List.html#184" class="InductiveConstructor">List.[]</a>

<a id="1320" class="Comment">-- fromList xs is linear in the length of xs.</a>

<a id="fromList"></a><a id="1367" href="Data.DifferenceList.html#1367" class="Function">fromList</a> <a id="1376" class="Symbol">:</a> <a id="1378" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1383" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1385" class="Symbol">→</a> <a id="1387" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1396" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="1398" href="Data.DifferenceList.html#1367" class="Function">fromList</a> <a id="1407" href="Data.DifferenceList.html#1407" class="Bound">xs</a> <a id="1410" class="Symbol">=</a> <a id="1412" class="Symbol">λ</a> <a id="1414" href="Data.DifferenceList.html#1414" class="Bound">k</a> <a id="1416" class="Symbol">→</a> <a id="1418" href="Data.DifferenceList.html#1407" class="Bound">xs</a> <a id="1421" href="Function.Base.html#4322" class="Function Operator">⟨</a> <a id="1423" href="Data.List.Base.html#1734" class="Function Operator">List._++_</a> <a id="1433" href="Function.Base.html#4322" class="Function Operator">⟩</a> <a id="1435" href="Data.DifferenceList.html#1414" class="Bound">k</a>

<a id="1438" class="Comment">------------------------------------------------------------------------</a>
<a id="1511" class="Comment">-- Transforming difference lists</a>

<a id="1545" class="Comment">-- It is OK to use List._++_ here, since map is linear in the length of</a>
<a id="1617" class="Comment">-- the list anyway.</a>

<a id="map"></a><a id="1638" href="Data.DifferenceList.html#1638" class="Function">map</a> <a id="1642" class="Symbol">:</a> <a id="1644" class="Symbol">(</a><a id="1645" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1647" class="Symbol">→</a> <a id="1649" href="Data.DifferenceList.html#485" class="Generalizable">B</a><a id="1650" class="Symbol">)</a> <a id="1652" class="Symbol">→</a> <a id="1654" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1663" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1665" class="Symbol">→</a> <a id="1667" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1676" href="Data.DifferenceList.html#485" class="Generalizable">B</a>
<a id="1678" href="Data.DifferenceList.html#1638" class="Function">map</a> <a id="1682" href="Data.DifferenceList.html#1682" class="Bound">f</a> <a id="1684" href="Data.DifferenceList.html#1684" class="Bound">xs</a> <a id="1687" class="Symbol">=</a> <a id="1689" class="Symbol">λ</a> <a id="1691" href="Data.DifferenceList.html#1691" class="Bound">k</a> <a id="1693" class="Symbol">→</a> <a id="1695" href="Data.List.Base.html#1634" class="Function">List.map</a> <a id="1704" href="Data.DifferenceList.html#1682" class="Bound">f</a> <a id="1706" class="Symbol">(</a><a id="1707" href="Data.DifferenceList.html#1267" class="Function">toList</a> <a id="1714" href="Data.DifferenceList.html#1684" class="Bound">xs</a><a id="1716" class="Symbol">)</a> <a id="1718" href="Function.Base.html#4322" class="Function Operator">⟨</a> <a id="1720" href="Data.List.Base.html#1734" class="Function Operator">List._++_</a> <a id="1730" href="Function.Base.html#4322" class="Function Operator">⟩</a> <a id="1732" href="Data.DifferenceList.html#1691" class="Bound">k</a>

<a id="1735" class="Comment">-- concat is linear in the length of the outer list.</a>

<a id="concat"></a><a id="1789" href="Data.DifferenceList.html#1789" class="Function">concat</a> <a id="1796" class="Symbol">:</a> <a id="1798" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1807" class="Symbol">(</a><a id="1808" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1817" href="Data.DifferenceList.html#471" class="Generalizable">A</a><a id="1818" class="Symbol">)</a> <a id="1820" class="Symbol">→</a> <a id="1822" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1831" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="1833" href="Data.DifferenceList.html#1789" class="Function">concat</a> <a id="1840" href="Data.DifferenceList.html#1840" class="Bound">xs</a> <a id="1843" class="Symbol">=</a> <a id="1845" href="Data.DifferenceList.html#1875" class="Function">concat′</a> <a id="1853" class="Symbol">(</a><a id="1854" href="Data.DifferenceList.html#1267" class="Function">toList</a> <a id="1861" href="Data.DifferenceList.html#1840" class="Bound">xs</a><a id="1863" class="Symbol">)</a>
  <a id="1867" class="Keyword">where</a>
  <a id="1875" href="Data.DifferenceList.html#1875" class="Function">concat′</a> <a id="1883" class="Symbol">:</a> <a id="1885" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1890" class="Symbol">(</a><a id="1891" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1900" href="Data.DifferenceList.html#471" class="Generalizable">A</a><a id="1901" class="Symbol">)</a> <a id="1903" class="Symbol">→</a> <a id="1905" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1914" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
  <a id="1918" href="Data.DifferenceList.html#1875" class="Function">concat′</a> <a id="1926" class="Symbol">=</a> <a id="1928" href="Data.List.Base.html#4148" class="Function">List.foldr</a> <a id="1939" href="Data.DifferenceList.html#1000" class="Function Operator">_++_</a> <a id="1944" href="Data.DifferenceList.html#873" class="Function">[]</a>

<a id="take"></a><a id="1948" href="Data.DifferenceList.html#1948" class="Function">take</a> <a id="1953" class="Symbol">:</a> <a id="1955" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1957" class="Symbol">→</a> <a id="1959" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1968" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="1970" class="Symbol">→</a> <a id="1972" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="1981" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="1983" href="Data.DifferenceList.html#1948" class="Function">take</a> <a id="1988" href="Data.DifferenceList.html#1988" class="Bound">n</a> <a id="1990" class="Symbol">=</a> <a id="1992" href="Data.DifferenceList.html#670" class="Function">lift</a> <a id="1997" class="Symbol">(</a><a id="1998" href="Data.List.Base.html#8687" class="Function">List.take</a> <a id="2008" href="Data.DifferenceList.html#1988" class="Bound">n</a><a id="2009" class="Symbol">)</a>

<a id="drop"></a><a id="2012" href="Data.DifferenceList.html#2012" class="Function">drop</a> <a id="2017" class="Symbol">:</a> <a id="2019" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2021" class="Symbol">→</a> <a id="2023" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="2032" href="Data.DifferenceList.html#471" class="Generalizable">A</a> <a id="2034" class="Symbol">→</a> <a id="2036" href="Data.DifferenceList.html#615" class="Function">DiffList</a> <a id="2045" href="Data.DifferenceList.html#471" class="Generalizable">A</a>
<a id="2047" href="Data.DifferenceList.html#2012" class="Function">drop</a> <a id="2052" href="Data.DifferenceList.html#2052" class="Bound">n</a> <a id="2054" class="Symbol">=</a> <a id="2056" href="Data.DifferenceList.html#670" class="Function">lift</a> <a id="2061" class="Symbol">(</a><a id="2062" href="Data.List.Base.html#8807" class="Function">List.drop</a> <a id="2072" href="Data.DifferenceList.html#2052" class="Bound">n</a><a id="2073" class="Symbol">)</a>
</pre></body></html>