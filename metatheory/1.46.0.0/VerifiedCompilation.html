<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>VerifiedCompilation</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>VerifiedCompilation</h1>
    <section>
      <h1 id="verified-compilation">Verified Compilation</h1>

<h2 id="introduction">Introduction</h2>

<p>The verified compilation project is a formalization of the Untyped Plutus Core compiler optimisation transformations in Agda.
The goal is to generate a formal proof that the optimisation component of the compiler has transformed the input program correctly
with respect to the Agda specification (*). Our approach is based on Jacco Krijnen’s work on
<a href="https://www.sciencedirect.com/science/article/pii/S0167642323001338">Translation certification for smart contracts</a>.</p>

<p>(*) <strong>Note</strong>: The current implementation does not guarantee corectness in the sense of semantic equivalence between
the original and the optimised program. This is planned future work.</p>

<h2 id="implementation-overview">Implementation overview</h2>

<p>The project is divided into several Agda modules, each of which is based on an optimisation stage of the compiler.
They each contain the respective Agda formalisation of the program transformation and a decision procedure which takes
two programs as input and decides whether the transformation is applicable.</p>

<p>This module is at the top of the project hierarchy and contains the main decision procedure which verifies the entire optimisation
process. The final certification function receives a list of intermediate program ASTs produced by the compiler and outputs a file
containing the generated proof object, a.k.a. the <em>certificate</em>. The certificate can then be verified by third parties by loading
it into Agda and checking that it is correctly typed.</p>

<pre class="Agda"><a id="1536" class="Keyword">module</a> <a id="1543" href="VerifiedCompilation.html" class="Module">VerifiedCompilation</a> <a id="1563" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="1590" class="Keyword">open</a> <a id="1595" class="Keyword">import</a> <a id="1602" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1619" class="Keyword">using</a> <a id="1625" class="Symbol">(</a><a id="1626" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a><a id="1629" class="Symbol">;</a> <a id="1631" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a><a id="1634" class="Symbol">;</a> <a id="1636" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a><a id="1638" class="Symbol">;</a> <a id="1640" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬_</a><a id="1642" class="Symbol">)</a>

<a id="1645" class="Keyword">open</a> <a id="1650" class="Keyword">import</a> <a id="1657" href="Untyped.html" class="Module">Untyped</a>
<a id="1665" class="Keyword">open</a> <a id="1670" class="Keyword">import</a> <a id="1677" href="Utils.html" class="Module">Utils</a> <a id="1683" class="Symbol">as</a> <a id="1686" class="Module">U</a> <a id="1688" class="Keyword">using</a> <a id="1694" class="Symbol">(</a><a id="1695" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="1700" class="Symbol">;</a><a id="1701" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1708" class="Symbol">;</a><a id="1709" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="1713" class="Symbol">;</a><a id="1714" href="Utils.html#1129" class="Datatype">Either</a><a id="1720" class="Symbol">;</a><a id="1721" href="Utils.html#1162" class="InductiveConstructor">inj₁</a><a id="1725" class="Symbol">;</a><a id="1726" href="Utils.html#1186" class="InductiveConstructor">inj₂</a><a id="1730" class="Symbol">;</a><a id="1731" href="Utils.html#5297" class="Datatype">List</a><a id="1735" class="Symbol">;</a><a id="1736" href="Utils.html#5326" class="InductiveConstructor">[]</a><a id="1738" class="Symbol">;</a><a id="1739" href="Utils.html#5341" class="InductiveConstructor Operator">_∷_</a><a id="1742" class="Symbol">;</a><a id="1743" href="Utils.html#5059" class="Record Operator">_×_</a><a id="1746" class="Symbol">;</a><a id="1747" href="Utils.html#4005" class="InductiveConstructor Operator">_,_</a><a id="1750" class="Symbol">)</a>
<a id="1752" class="Keyword">open</a> <a id="1757" class="Keyword">import</a> <a id="1764" href="RawU.html" class="Module">RawU</a> <a id="1769" class="Keyword">using</a> <a id="1775" class="Symbol">(</a><a id="1776" href="RawU.html#6377" class="Datatype">Untyped</a><a id="1783" class="Symbol">)</a>
<a id="1785" class="Keyword">open</a> <a id="1790" class="Keyword">import</a> <a id="1797" href="Data.String.html" class="Module">Data.String</a> <a id="1809" class="Keyword">using</a> <a id="1815" class="Symbol">(</a><a id="1816" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="1822" class="Symbol">)</a>
<a id="1824" class="Keyword">open</a> <a id="1829" class="Keyword">import</a> <a id="1836" href="Agda.Builtin.IO.html" class="Module">Agda.Builtin.IO</a> <a id="1852" class="Keyword">using</a> <a id="1858" class="Symbol">(</a><a id="1859" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a><a id="1861" class="Symbol">)</a>
<a id="1863" class="Keyword">open</a> <a id="1868" class="Keyword">import</a> <a id="1875" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="1893" class="Keyword">using</a> <a id="1899" class="Symbol">(</a><a id="1900" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="1901" class="Symbol">)</a>
<a id="1903" class="Keyword">import</a> <a id="1910" href="VerifiedCompilation.UCaseOfCase.html" class="Module">VerifiedCompilation.UCaseOfCase</a> <a id="1942" class="Symbol">as</a> <a id="1945" class="Module">UCC</a>
<a id="1949" class="Keyword">import</a> <a id="1956" href="VerifiedCompilation.UForceDelay.html" class="Module">VerifiedCompilation.UForceDelay</a> <a id="1988" class="Symbol">as</a> <a id="1991" class="Module">UFD</a>
<a id="1995" class="Keyword">import</a> <a id="2002" href="VerifiedCompilation.UFloatDelay.html" class="Module">VerifiedCompilation.UFloatDelay</a> <a id="2034" class="Symbol">as</a> <a id="2037" class="Module">UFlD</a>
<a id="2042" class="Keyword">import</a> <a id="2049" href="VerifiedCompilation.UCSE.html" class="Module">VerifiedCompilation.UCSE</a> <a id="2074" class="Symbol">as</a> <a id="2077" class="Module">UCSE</a>
<a id="2082" class="Keyword">import</a> <a id="2089" href="VerifiedCompilation.UInline.html" class="Module">VerifiedCompilation.UInline</a> <a id="2117" class="Symbol">as</a> <a id="2120" class="Module">UInline</a>
<a id="2128" class="Keyword">import</a> <a id="2135" href="VerifiedCompilation.UCaseReduce.html" class="Module">VerifiedCompilation.UCaseReduce</a> <a id="2167" class="Symbol">as</a> <a id="2170" class="Module">UCR</a>
<a id="2174" class="Keyword">open</a> <a id="2179" class="Keyword">import</a> <a id="2186" href="Data.Empty.html" class="Module">Data.Empty</a> <a id="2197" class="Keyword">using</a> <a id="2203" class="Symbol">(</a><a id="2204" href="Data.Empty.html#914" class="Function">⊥</a><a id="2205" class="Symbol">)</a>
<a id="2207" class="Keyword">open</a> <a id="2212" class="Keyword">import</a> <a id="2219" href="VerifiedCompilation.Equality.html" class="Module">VerifiedCompilation.Equality</a> <a id="2248" class="Keyword">using</a> <a id="2254" class="Symbol">(</a><a id="2255" href="VerifiedCompilation.Equality.html#2250" class="Record">DecEq</a><a id="2260" class="Symbol">)</a>
<a id="2262" class="Keyword">open</a> <a id="2267" class="Keyword">import</a> <a id="2274" href="VerifiedCompilation.UntypedTranslation.html" class="Module">VerifiedCompilation.UntypedTranslation</a> <a id="2313" class="Keyword">using</a> <a id="2319" class="Symbol">(</a><a id="2320" href="VerifiedCompilation.UntypedTranslation.html#1585" class="Function">Relation</a><a id="2328" class="Symbol">)</a>
<a id="2330" class="Keyword">import</a> <a id="2337" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="2352" class="Symbol">as</a> <a id="2355" class="Module">Unary</a> <a id="2361" class="Keyword">using</a> <a id="2367" class="Symbol">(</a><a id="2368" href="Relation.Unary.html#4543" class="Function">Decidable</a><a id="2377" class="Symbol">)</a>
<a id="2379" class="Keyword">import</a> <a id="2386" href="Agda.Builtin.Int.html" class="Module">Agda.Builtin.Int</a>
<a id="2403" class="Keyword">import</a> <a id="2410" href="Relation.Nary.html" class="Module">Relation.Nary</a> <a id="2424" class="Symbol">as</a> <a id="2427" class="Module">Nary</a> <a id="2432" class="Keyword">using</a> <a id="2438" class="Symbol">(</a><a id="2439" href="Relation.Nary.html#6405" class="Function">Decidable</a><a id="2448" class="Symbol">)</a>
<a id="2450" class="Keyword">open</a> <a id="2455" class="Keyword">import</a> <a id="2462" href="VerifiedCompilation.Certificate.html" class="Module">VerifiedCompilation.Certificate</a> <a id="2494" class="Keyword">using</a> <a id="2500" class="Symbol">(</a><a id="2501" href="VerifiedCompilation.Certificate.html#1061" class="Datatype">ProofOrCE</a><a id="2510" class="Symbol">;</a> <a id="2512" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a><a id="2514" class="Symbol">;</a> <a id="2516" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a><a id="2521" class="Symbol">;</a> <a id="2523" href="VerifiedCompilation.Certificate.html#1823" class="Function">pcePointwise</a><a id="2535" class="Symbol">;</a> <a id="2537" href="VerifiedCompilation.Certificate.html#1493" class="Function">MatchOrCE</a><a id="2546" class="Symbol">;</a> <a id="2548" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="2561" class="Symbol">)</a>
<a id="2563" class="Keyword">open</a> <a id="2568" class="Keyword">import</a> <a id="2575" href="Agda.Builtin.Sigma.html" class="Module">Agda.Builtin.Sigma</a> <a id="2594" class="Keyword">using</a> <a id="2600" class="Symbol">(</a><a id="2601" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="2602" class="Symbol">;</a> <a id="2604" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="2607" class="Symbol">)</a>
</pre>
<h2 id="compiler-optimisation-traces">Compiler optimisation traces</h2>

<p>A <code class="language-plaintext highlighter-rouge">Trace</code> represents a sequence of optimisation transformations applied to a program. It is a list of pairs of ASTs
and a tag (<code class="language-plaintext highlighter-rouge">SimplifierTag</code>), where each pair represents the before and after of a transformation application and the
tag indicates which transformation was applied.
The <code class="language-plaintext highlighter-rouge">Transformation</code> type is a sum type that represents the possible transformations which are implemented in their
respective modules.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTrace?</code> decision procedure is at the core of the certification process. It produces the proof that the given
list of ASTs are in relation with one another according to the transformations implemented in the project.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTransformation?</code> decision procedure just dispatches to the decision procedure indicated by the tag.</p>

<p><strong>TODO</strong>: The <code class="language-plaintext highlighter-rouge">Trace</code> type or decision procedure should also enforce that the second element of a pair is the first
element of the next pair in the list. This might not be necessary if we decide that we can assume that the function
which produces a <code class="language-plaintext highlighter-rouge">Trace</code> always produces a correct one, although it might be useful to make this explicit in the type.</p>
<pre class="Agda">
<a id="3753" class="Keyword">data</a> <a id="Transformation"></a><a id="3758" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="3773" class="Symbol">:</a> <a id="3775" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="3789" class="Symbol">→</a> <a id="3791" href="VerifiedCompilation.UntypedTranslation.html#1585" class="Function">Relation</a> <a id="3800" class="Keyword">where</a>
  <a id="Transformation.isCoC"></a><a id="3808" href="VerifiedCompilation.html#3808" class="InductiveConstructor">isCoC</a> <a id="3814" class="Symbol">:</a> <a id="3816" class="Symbol">{</a><a id="3817" href="VerifiedCompilation.html#3817" class="Bound">X</a> <a id="3819" class="Symbol">:</a> <a id="3821" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3824" class="Symbol">}</a> <a id="3841" class="Symbol">→</a> <a id="3843" class="Symbol">{</a><a id="3844" href="VerifiedCompilation.html#3844" class="Bound">ast</a> <a id="3848" href="VerifiedCompilation.html#3848" class="Bound">ast&#39;</a> <a id="3853" class="Symbol">:</a> <a id="3855" href="VerifiedCompilation.html#3817" class="Bound">X</a> <a id="3857" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="3858" class="Symbol">}</a> <a id="3860" class="Symbol">→</a> <a id="3862" href="VerifiedCompilation.UCaseOfCase.html#2378" class="Function">UCC.CaseOfCase</a> <a id="3877" href="VerifiedCompilation.html#3844" class="Bound">ast</a> <a id="3881" href="VerifiedCompilation.html#3848" class="Bound">ast&#39;</a> <a id="3886" class="Symbol">→</a> <a id="3888" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="3903" href="VerifiedCompilation.Certificate.html#733" class="InductiveConstructor">SimplifierTag.caseOfCaseT</a> <a id="3929" href="VerifiedCompilation.html#3844" class="Bound">ast</a> <a id="3933" href="VerifiedCompilation.html#3848" class="Bound">ast&#39;</a>
  <a id="Transformation.isFD"></a><a id="3940" href="VerifiedCompilation.html#3940" class="InductiveConstructor">isFD</a> <a id="3945" class="Symbol">:</a> <a id="3947" class="Symbol">{</a><a id="3948" href="VerifiedCompilation.html#3948" class="Bound">X</a> <a id="3950" class="Symbol">:</a> <a id="3952" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3955" class="Symbol">}</a> <a id="3972" class="Symbol">→</a> <a id="3974" class="Symbol">{</a><a id="3975" href="VerifiedCompilation.html#3975" class="Bound">ast</a> <a id="3979" href="VerifiedCompilation.html#3979" class="Bound">ast&#39;</a> <a id="3984" class="Symbol">:</a> <a id="3986" href="VerifiedCompilation.html#3948" class="Bound">X</a> <a id="3988" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="3989" class="Symbol">}</a> <a id="3991" class="Symbol">→</a> <a id="3993" href="VerifiedCompilation.UForceDelay.html#7663" class="Function">UFD.ForceDelay</a> <a id="4008" href="VerifiedCompilation.html#3975" class="Bound">ast</a> <a id="4012" href="VerifiedCompilation.html#3979" class="Bound">ast&#39;</a> <a id="4017" class="Symbol">→</a> <a id="4019" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4034" href="VerifiedCompilation.Certificate.html#703" class="InductiveConstructor">SimplifierTag.forceDelayT</a> <a id="4060" href="VerifiedCompilation.html#3975" class="Bound">ast</a> <a id="4064" href="VerifiedCompilation.html#3979" class="Bound">ast&#39;</a>
  <a id="Transformation.isFlD"></a><a id="4071" href="VerifiedCompilation.html#4071" class="InductiveConstructor">isFlD</a> <a id="4077" class="Symbol">:</a> <a id="4079" class="Symbol">{</a><a id="4080" href="VerifiedCompilation.html#4080" class="Bound">X</a> <a id="4082" class="Symbol">:</a> <a id="4084" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4087" class="Symbol">}</a> <a id="4104" class="Symbol">→</a> <a id="4106" class="Symbol">{</a><a id="4107" href="VerifiedCompilation.html#4107" class="Bound">ast</a> <a id="4111" href="VerifiedCompilation.html#4111" class="Bound">ast&#39;</a> <a id="4116" class="Symbol">:</a> <a id="4118" href="VerifiedCompilation.html#4080" class="Bound">X</a> <a id="4120" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4121" class="Symbol">}</a> <a id="4123" class="Symbol">→</a> <a id="4125" href="VerifiedCompilation.UFloatDelay.html#6083" class="Function">UFlD.FloatDelay</a> <a id="4141" href="VerifiedCompilation.html#4107" class="Bound">ast</a> <a id="4145" href="VerifiedCompilation.html#4111" class="Bound">ast&#39;</a> <a id="4150" class="Symbol">→</a> <a id="4152" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4167" href="VerifiedCompilation.Certificate.html#673" class="InductiveConstructor">SimplifierTag.floatDelayT</a> <a id="4193" href="VerifiedCompilation.html#4107" class="Bound">ast</a> <a id="4197" href="VerifiedCompilation.html#4111" class="Bound">ast&#39;</a>
  <a id="Transformation.isCSE"></a><a id="4204" href="VerifiedCompilation.html#4204" class="InductiveConstructor">isCSE</a> <a id="4210" class="Symbol">:</a> <a id="4212" class="Symbol">{</a><a id="4213" href="VerifiedCompilation.html#4213" class="Bound">X</a> <a id="4215" class="Symbol">:</a> <a id="4217" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4220" class="Symbol">}</a> <a id="4237" class="Symbol">→</a> <a id="4239" class="Symbol">{</a><a id="4240" href="VerifiedCompilation.html#4240" class="Bound">ast</a> <a id="4244" href="VerifiedCompilation.html#4244" class="Bound">ast&#39;</a> <a id="4249" class="Symbol">:</a> <a id="4251" href="VerifiedCompilation.html#4213" class="Bound">X</a> <a id="4253" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4254" class="Symbol">}</a> <a id="4256" class="Symbol">→</a> <a id="4258" href="VerifiedCompilation.UCSE.html#1897" class="Function">UCSE.UntypedCSE</a> <a id="4274" href="VerifiedCompilation.html#4240" class="Bound">ast</a> <a id="4278" href="VerifiedCompilation.html#4244" class="Bound">ast&#39;</a> <a id="4283" class="Symbol">→</a> <a id="4285" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4300" href="VerifiedCompilation.Certificate.html#819" class="InductiveConstructor">SimplifierTag.cseT</a> <a id="4319" href="VerifiedCompilation.html#4240" class="Bound">ast</a> <a id="4323" href="VerifiedCompilation.html#4244" class="Bound">ast&#39;</a>
  <a id="4330" class="Comment">-- FIXME: Inline currently rejects some valid translations so is disabled.</a>
  <a id="Transformation.inlineNotImplemented"></a><a id="4407" href="VerifiedCompilation.html#4407" class="InductiveConstructor">inlineNotImplemented</a> <a id="4428" class="Symbol">:</a> <a id="4430" class="Symbol">{</a><a id="4431" href="VerifiedCompilation.html#4431" class="Bound">X</a> <a id="4433" class="Symbol">:</a> <a id="4435" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4438" class="Symbol">}</a> <a id="4455" class="Symbol">→</a> <a id="4457" class="Symbol">{</a><a id="4458" href="VerifiedCompilation.html#4458" class="Bound">ast</a> <a id="4462" href="VerifiedCompilation.html#4462" class="Bound">ast&#39;</a> <a id="4467" class="Symbol">:</a> <a id="4469" href="VerifiedCompilation.html#4431" class="Bound">X</a> <a id="4471" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4472" class="Symbol">}</a> <a id="4474" class="Symbol">→</a> <a id="4476" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4491" href="VerifiedCompilation.Certificate.html#793" class="InductiveConstructor">SimplifierTag.inlineT</a> <a id="4513" href="VerifiedCompilation.html#4458" class="Bound">ast</a> <a id="4517" href="VerifiedCompilation.html#4462" class="Bound">ast&#39;</a>
  <a id="Transformation.isCaseReduce"></a><a id="4524" href="VerifiedCompilation.html#4524" class="InductiveConstructor">isCaseReduce</a> <a id="4537" class="Symbol">:</a> <a id="4539" class="Symbol">{</a><a id="4540" href="VerifiedCompilation.html#4540" class="Bound">X</a> <a id="4542" class="Symbol">:</a> <a id="4544" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4547" class="Symbol">}</a> <a id="4564" class="Symbol">→</a> <a id="4566" class="Symbol">{</a><a id="4567" href="VerifiedCompilation.html#4567" class="Bound">ast</a> <a id="4571" href="VerifiedCompilation.html#4571" class="Bound">ast&#39;</a> <a id="4576" class="Symbol">:</a> <a id="4578" href="VerifiedCompilation.html#4540" class="Bound">X</a> <a id="4580" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4581" class="Symbol">}</a> <a id="4583" class="Symbol">→</a> <a id="4585" href="VerifiedCompilation.UCaseReduce.html#2991" class="Function">UCR.UCaseReduce</a> <a id="4601" href="VerifiedCompilation.html#4567" class="Bound">ast</a> <a id="4605" href="VerifiedCompilation.html#4571" class="Bound">ast&#39;</a> <a id="4610" class="Symbol">→</a> <a id="4612" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4627" href="VerifiedCompilation.Certificate.html#763" class="InductiveConstructor">SimplifierTag.caseReduceT</a> <a id="4653" href="VerifiedCompilation.html#4567" class="Bound">ast</a> <a id="4657" href="VerifiedCompilation.html#4571" class="Bound">ast&#39;</a>

<a id="4663" class="Keyword">data</a> <a id="Trace"></a><a id="4668" href="VerifiedCompilation.html#4668" class="Datatype">Trace</a> <a id="4674" class="Symbol">:</a> <a id="4676" class="Symbol">{</a> <a id="4678" href="VerifiedCompilation.html#4678" class="Bound">X</a> <a id="4680" class="Symbol">:</a> <a id="4682" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="4686" class="Symbol">}</a> <a id="4688" class="Symbol"></a> <a id="4704" class="Symbol">→</a> <a id="4706" href="Utils.html#5297" class="Datatype">List</a> <a id="4711" class="Symbol">(</a><a id="4712" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="4726" href="Utils.html#5059" class="Record Operator">×</a> <a id="4728" class="Symbol">(</a><a id="4729" href="VerifiedCompilation.html#4678" class="Bound">X</a> <a id="4731" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4732" class="Symbol">)</a> <a id="4734" href="Utils.html#5059" class="Record Operator">×</a> <a id="4736" class="Symbol">(</a><a id="4737" href="VerifiedCompilation.html#4678" class="Bound">X</a> <a id="4739" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4740" class="Symbol">))</a> <a id="4743" class="Symbol">→</a> <a id="4745" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="4750" class="Keyword">where</a>
  <a id="Trace.empty"></a><a id="4758" href="VerifiedCompilation.html#4758" class="InductiveConstructor">empty</a> <a id="4764" class="Symbol">:</a> <a id="4766" class="Symbol">{</a><a id="4767" href="VerifiedCompilation.html#4767" class="Bound">X</a> <a id="4769" class="Symbol">:</a> <a id="4771" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4774" class="Symbol">}</a> <a id="4791" class="Symbol">→</a> <a id="4793" href="VerifiedCompilation.html#4668" class="Datatype">Trace</a> <a id="4799" class="Symbol">{</a><a id="4800" href="VerifiedCompilation.html#4767" class="Bound">X</a><a id="4801" class="Symbol">}</a> <a id="4803" href="Utils.html#5326" class="InductiveConstructor">[]</a>
  <a id="Trace.cons"></a><a id="4808" href="VerifiedCompilation.html#4808" class="InductiveConstructor">cons</a>
    <a id="4817" class="Symbol">:</a> <a id="4819" class="Symbol">{</a><a id="4820" href="VerifiedCompilation.html#4820" class="Bound">X</a> <a id="4822" class="Symbol">:</a> <a id="4824" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4827" class="Symbol">}</a>
    <a id="4848" class="Symbol">{</a><a id="4849" href="VerifiedCompilation.html#4849" class="Bound">tag</a> <a id="4853" class="Symbol">:</a> <a id="4855" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="4868" class="Symbol">}</a> <a id="4870" class="Symbol">{</a><a id="4871" href="VerifiedCompilation.html#4871" class="Bound">x</a> <a id="4873" href="VerifiedCompilation.html#4873" class="Bound">x&#39;</a> <a id="4876" class="Symbol">:</a> <a id="4878" href="VerifiedCompilation.html#4820" class="Bound">X</a> <a id="4880" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4881" class="Symbol">}</a>
    <a id="4887" class="Symbol">{</a><a id="4888" href="VerifiedCompilation.html#4888" class="Bound">xs</a> <a id="4891" class="Symbol">:</a> <a id="4893" href="Utils.html#5297" class="Datatype">List</a> <a id="4898" class="Symbol">(</a><a id="4899" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="4913" href="Utils.html#5059" class="Record Operator">×</a> <a id="4915" class="Symbol">(</a><a id="4916" href="VerifiedCompilation.html#4820" class="Bound">X</a> <a id="4918" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4919" class="Symbol">)</a> <a id="4921" href="Utils.html#5059" class="Record Operator">×</a> <a id="4923" class="Symbol">(</a><a id="4924" href="VerifiedCompilation.html#4820" class="Bound">X</a> <a id="4926" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4927" class="Symbol">))}</a>
    <a id="4935" class="Symbol">→</a> <a id="4937" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4952" href="VerifiedCompilation.html#4849" class="Bound">tag</a> <a id="4956" href="VerifiedCompilation.html#4871" class="Bound">x</a> <a id="4958" href="VerifiedCompilation.html#4873" class="Bound">x&#39;</a>
    <a id="4965" class="Symbol">→</a> <a id="4967" href="VerifiedCompilation.html#4668" class="Datatype">Trace</a> <a id="4973" href="VerifiedCompilation.html#4888" class="Bound">xs</a>
    <a id="4980" class="Symbol">→</a> <a id="4982" href="VerifiedCompilation.html#4668" class="Datatype">Trace</a> <a id="4988" class="Symbol">((</a><a id="4990" href="VerifiedCompilation.html#4849" class="Bound">tag</a> <a id="4994" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="4996" href="VerifiedCompilation.html#4871" class="Bound">x</a> <a id="4998" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="5000" href="VerifiedCompilation.html#4873" class="Bound">x&#39;</a><a id="5002" class="Symbol">)</a> <a id="5004" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="5006" href="VerifiedCompilation.html#4888" class="Bound">xs</a><a id="5008" class="Symbol">)</a>

<a id="isTransformation?"></a><a id="5011" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="5029" class="Symbol">:</a> <a id="5031" class="Symbol">{</a><a id="5032" href="VerifiedCompilation.html#5032" class="Bound">X</a> <a id="5034" class="Symbol">:</a> <a id="5036" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="5039" class="Symbol">}</a> <a id="5041" class="Symbol"></a> <a id="5057" class="Symbol">→</a> <a id="5059" class="Symbol">(</a><a id="5060" href="VerifiedCompilation.html#5060" class="Bound">tag</a> <a id="5064" class="Symbol">:</a> <a id="5066" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="5079" class="Symbol">)</a> <a id="5081" class="Symbol">→</a> <a id="5083" href="VerifiedCompilation.Certificate.html#1493" class="Function">MatchOrCE</a> <a id="5093" class="Symbol">{</a><a id="5094" class="Argument">X</a> <a id="5096" class="Symbol">=</a> <a id="5098" href="VerifiedCompilation.html#5032" class="Bound">X</a> <a id="5100" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="5101" class="Symbol">}</a> <a id="5103" class="Symbol">(</a><a id="5104" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="5119" href="VerifiedCompilation.html#5060" class="Bound">tag</a><a id="5122" class="Symbol">)</a>
<a id="5124" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="5142" href="VerifiedCompilation.html#5142" class="Bound">tag</a> <a id="5146" href="VerifiedCompilation.html#5146" class="Bound">ast</a> <a id="5150" href="VerifiedCompilation.html#5150" class="Bound">ast&#39;</a> <a id="5155" class="Keyword">with</a> <a id="5160" href="VerifiedCompilation.html#5142" class="Bound">tag</a>
<a id="5164" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="5182" href="VerifiedCompilation.html#5182" class="Bound">tag</a> <a id="5186" href="VerifiedCompilation.html#5186" class="Bound">ast</a> <a id="5190" href="VerifiedCompilation.html#5190" class="Bound">ast&#39;</a> <a id="5195" class="Symbol">|</a> <a id="5197" href="VerifiedCompilation.Certificate.html#673" class="InductiveConstructor">SimplifierTag.floatDelayT</a> <a id="5223" class="Keyword">with</a> <a id="5228" href="VerifiedCompilation.UFloatDelay.html#6219" class="Function">UFlD.isFloatDelay?</a> <a id="5247" href="VerifiedCompilation.html#5186" class="Bound">ast</a> <a id="5251" href="VerifiedCompilation.html#5190" class="Bound">ast&#39;</a>
<a id="5256" class="Symbol">...</a> <a id="5260" class="Symbol">|</a> <a id="5262" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5265" href="VerifiedCompilation.html#5265" class="Bound">¬p</a> <a id="5268" href="VerifiedCompilation.html#5268" class="Bound">t</a> <a id="5270" href="VerifiedCompilation.html#5270" class="Bound">b</a> <a id="5272" href="VerifiedCompilation.html#5272" class="Bound">a</a> <a id="5274" class="Symbol">=</a> <a id="5276" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5279" class="Symbol">(λ</a> <a id="5282" class="Symbol">{</a> <a id="5284" class="Symbol">(</a><a id="5285" href="VerifiedCompilation.html#4071" class="InductiveConstructor">isFlD</a> <a id="5291" href="VerifiedCompilation.html#5291" class="Bound">x</a><a id="5292" class="Symbol">)</a> <a id="5294" class="Symbol">→</a> <a id="5296" href="VerifiedCompilation.html#5265" class="Bound">¬p</a> <a id="5299" href="VerifiedCompilation.html#5291" class="Bound">x</a><a id="5300" class="Symbol">})</a> <a id="5303" href="VerifiedCompilation.html#5268" class="Bound">t</a> <a id="5305" href="VerifiedCompilation.html#5270" class="Bound">b</a> <a id="5307" href="VerifiedCompilation.html#5272" class="Bound">a</a>
<a id="5309" class="Symbol">...</a> <a id="5313" class="Symbol">|</a> <a id="5315" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5321" href="VerifiedCompilation.html#5321" class="Bound">p</a> <a id="5323" class="Symbol">=</a> <a id="5325" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5331" class="Symbol">(</a><a id="5332" href="VerifiedCompilation.html#4071" class="InductiveConstructor">isFlD</a> <a id="5338" href="VerifiedCompilation.html#5321" class="Bound">p</a><a id="5339" class="Symbol">)</a>
<a id="5341" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="5359" href="VerifiedCompilation.html#5359" class="Bound">tag</a> <a id="5363" href="VerifiedCompilation.html#5363" class="Bound">ast</a> <a id="5367" href="VerifiedCompilation.html#5367" class="Bound">ast&#39;</a> <a id="5372" class="Symbol">|</a> <a id="5374" href="VerifiedCompilation.Certificate.html#703" class="InductiveConstructor">SimplifierTag.forceDelayT</a> <a id="5400" class="Keyword">with</a> <a id="5405" href="VerifiedCompilation.UForceDelay.html#18140" class="Function">UFD.isForceDelay?</a> <a id="5423" href="VerifiedCompilation.html#5363" class="Bound">ast</a> <a id="5427" href="VerifiedCompilation.html#5367" class="Bound">ast&#39;</a>
<a id="5432" class="Symbol">...</a> <a id="5436" class="Symbol">|</a> <a id="5438" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5441" href="VerifiedCompilation.html#5441" class="Bound">¬p</a> <a id="5444" href="VerifiedCompilation.html#5444" class="Bound">t</a> <a id="5446" href="VerifiedCompilation.html#5446" class="Bound">b</a> <a id="5448" href="VerifiedCompilation.html#5448" class="Bound">a</a> <a id="5450" class="Symbol">=</a> <a id="5452" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5455" class="Symbol">(λ</a> <a id="5458" class="Symbol">{</a> <a id="5460" class="Symbol">(</a><a id="5461" href="VerifiedCompilation.html#3940" class="InductiveConstructor">isFD</a> <a id="5466" href="VerifiedCompilation.html#5466" class="Bound">x</a><a id="5467" class="Symbol">)</a> <a id="5469" class="Symbol">→</a> <a id="5471" href="VerifiedCompilation.html#5441" class="Bound">¬p</a> <a id="5474" href="VerifiedCompilation.html#5466" class="Bound">x</a><a id="5475" class="Symbol">})</a> <a id="5478" href="VerifiedCompilation.html#5444" class="Bound">t</a> <a id="5480" href="VerifiedCompilation.html#5446" class="Bound">b</a> <a id="5482" href="VerifiedCompilation.html#5448" class="Bound">a</a>
<a id="5484" class="Symbol">...</a> <a id="5488" class="Symbol">|</a> <a id="5490" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5496" href="VerifiedCompilation.html#5496" class="Bound">p</a> <a id="5498" class="Symbol">=</a> <a id="5500" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5506" class="Symbol">(</a><a id="5507" href="VerifiedCompilation.html#3940" class="InductiveConstructor">isFD</a> <a id="5512" href="VerifiedCompilation.html#5496" class="Bound">p</a><a id="5513" class="Symbol">)</a>
<a id="5515" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="5533" href="VerifiedCompilation.html#5533" class="Bound">tag</a> <a id="5537" href="VerifiedCompilation.html#5537" class="Bound">ast</a> <a id="5541" href="VerifiedCompilation.html#5541" class="Bound">ast&#39;</a> <a id="5546" class="Symbol">|</a> <a id="5548" href="VerifiedCompilation.Certificate.html#733" class="InductiveConstructor">SimplifierTag.caseOfCaseT</a> <a id="5574" class="Keyword">with</a> <a id="5579" href="VerifiedCompilation.UCaseOfCase.html#6199" class="Function">UCC.isCaseOfCase?</a> <a id="5597" href="VerifiedCompilation.html#5537" class="Bound">ast</a> <a id="5601" href="VerifiedCompilation.html#5541" class="Bound">ast&#39;</a>
<a id="5606" class="Symbol">...</a> <a id="5610" class="Symbol">|</a> <a id="5612" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5615" href="VerifiedCompilation.html#5615" class="Bound">¬p</a> <a id="5618" href="VerifiedCompilation.html#5618" class="Bound">t</a> <a id="5620" href="VerifiedCompilation.html#5620" class="Bound">b</a> <a id="5622" href="VerifiedCompilation.html#5622" class="Bound">a</a> <a id="5624" class="Symbol">=</a> <a id="5626" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5629" class="Symbol">(λ</a> <a id="5632" class="Symbol">{</a> <a id="5634" class="Symbol">(</a><a id="5635" href="VerifiedCompilation.html#3808" class="InductiveConstructor">isCoC</a> <a id="5641" href="VerifiedCompilation.html#5641" class="Bound">x</a><a id="5642" class="Symbol">)</a> <a id="5644" class="Symbol">→</a> <a id="5646" href="VerifiedCompilation.html#5615" class="Bound">¬p</a> <a id="5649" href="VerifiedCompilation.html#5641" class="Bound">x</a><a id="5650" class="Symbol">})</a> <a id="5653" href="VerifiedCompilation.html#5618" class="Bound">t</a> <a id="5655" href="VerifiedCompilation.html#5620" class="Bound">b</a> <a id="5657" href="VerifiedCompilation.html#5622" class="Bound">a</a>
<a id="5659" class="Symbol">...</a> <a id="5663" class="Symbol">|</a> <a id="5665" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5671" href="VerifiedCompilation.html#5671" class="Bound">p</a> <a id="5673" class="Symbol">=</a> <a id="5675" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5681" class="Symbol">(</a><a id="5682" href="VerifiedCompilation.html#3808" class="InductiveConstructor">isCoC</a> <a id="5688" href="VerifiedCompilation.html#5671" class="Bound">p</a><a id="5689" class="Symbol">)</a>
<a id="5691" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="5709" href="VerifiedCompilation.html#5709" class="Bound">tag</a> <a id="5713" href="VerifiedCompilation.html#5713" class="Bound">ast</a> <a id="5717" href="VerifiedCompilation.html#5717" class="Bound">ast&#39;</a> <a id="5722" class="Symbol">|</a> <a id="5724" href="VerifiedCompilation.Certificate.html#763" class="InductiveConstructor">SimplifierTag.caseReduceT</a> <a id="5750" class="Keyword">with</a> <a id="5755" href="VerifiedCompilation.UCaseReduce.html#1983" class="Function">UCR.isCaseReduce?</a> <a id="5773" href="VerifiedCompilation.html#5713" class="Bound">ast</a> <a id="5777" href="VerifiedCompilation.html#5717" class="Bound">ast&#39;</a>
<a id="5782" class="Symbol">...</a> <a id="5786" class="Symbol">|</a> <a id="5788" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5791" href="VerifiedCompilation.html#5791" class="Bound">¬p</a> <a id="5794" href="VerifiedCompilation.html#5794" class="Bound">t</a> <a id="5796" href="VerifiedCompilation.html#5796" class="Bound">b</a> <a id="5798" href="VerifiedCompilation.html#5798" class="Bound">a</a> <a id="5800" class="Symbol">=</a> <a id="5802" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5805" class="Symbol">(λ</a> <a id="5808" class="Symbol">{</a> <a id="5810" class="Symbol">(</a><a id="5811" href="VerifiedCompilation.html#4524" class="InductiveConstructor">isCaseReduce</a> <a id="5824" href="VerifiedCompilation.html#5824" class="Bound">x</a><a id="5825" class="Symbol">)</a> <a id="5827" class="Symbol">→</a> <a id="5829" href="VerifiedCompilation.html#5791" class="Bound">¬p</a> <a id="5832" href="VerifiedCompilation.html#5824" class="Bound">x</a><a id="5833" class="Symbol">})</a> <a id="5836" href="VerifiedCompilation.html#5794" class="Bound">t</a> <a id="5838" href="VerifiedCompilation.html#5796" class="Bound">b</a> <a id="5840" href="VerifiedCompilation.html#5798" class="Bound">a</a>
<a id="5842" class="Symbol">...</a> <a id="5846" class="Symbol">|</a> <a id="5848" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5854" href="VerifiedCompilation.html#5854" class="Bound">p</a> <a id="5856" class="Symbol">=</a> <a id="5858" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5864" class="Symbol">(</a><a id="5865" href="VerifiedCompilation.html#4524" class="InductiveConstructor">isCaseReduce</a> <a id="5878" href="VerifiedCompilation.html#5854" class="Bound">p</a><a id="5879" class="Symbol">)</a>
<a id="5881" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="5899" href="VerifiedCompilation.html#5899" class="Bound">tag</a> <a id="5903" href="VerifiedCompilation.html#5903" class="Bound">ast</a> <a id="5907" href="VerifiedCompilation.html#5907" class="Bound">ast&#39;</a> <a id="5912" class="Symbol">|</a> <a id="5914" href="VerifiedCompilation.Certificate.html#793" class="InductiveConstructor">SimplifierTag.inlineT</a> <a id="5936" class="Symbol">=</a> <a id="5938" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5944" href="VerifiedCompilation.html#4407" class="InductiveConstructor">inlineNotImplemented</a>
<a id="5965" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="5983" href="VerifiedCompilation.html#5983" class="Bound">tag</a> <a id="5987" href="VerifiedCompilation.html#5987" class="Bound">ast</a> <a id="5991" href="VerifiedCompilation.html#5991" class="Bound">ast&#39;</a> <a id="5996" class="Symbol">|</a> <a id="5998" href="VerifiedCompilation.Certificate.html#819" class="InductiveConstructor">SimplifierTag.cseT</a> <a id="6017" class="Keyword">with</a> <a id="6022" href="VerifiedCompilation.UCSE.html#2036" class="Function">UCSE.isUntypedCSE?</a> <a id="6041" href="VerifiedCompilation.html#5987" class="Bound">ast</a> <a id="6045" href="VerifiedCompilation.html#5991" class="Bound">ast&#39;</a>
<a id="6050" class="Symbol">...</a> <a id="6054" class="Symbol">|</a> <a id="6056" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6059" href="VerifiedCompilation.html#6059" class="Bound">¬p</a> <a id="6062" href="VerifiedCompilation.html#6062" class="Bound">t</a> <a id="6064" href="VerifiedCompilation.html#6064" class="Bound">b</a> <a id="6066" href="VerifiedCompilation.html#6066" class="Bound">a</a> <a id="6068" class="Symbol">=</a> <a id="6070" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6073" class="Symbol">(λ</a> <a id="6076" class="Symbol">{</a> <a id="6078" class="Symbol">(</a><a id="6079" href="VerifiedCompilation.html#4204" class="InductiveConstructor">isCSE</a> <a id="6085" href="VerifiedCompilation.html#6085" class="Bound">x</a><a id="6086" class="Symbol">)</a> <a id="6088" class="Symbol">→</a> <a id="6090" href="VerifiedCompilation.html#6059" class="Bound">¬p</a> <a id="6093" href="VerifiedCompilation.html#6085" class="Bound">x</a><a id="6094" class="Symbol">})</a> <a id="6097" href="VerifiedCompilation.html#6062" class="Bound">t</a> <a id="6099" href="VerifiedCompilation.html#6064" class="Bound">b</a> <a id="6101" href="VerifiedCompilation.html#6066" class="Bound">a</a>
<a id="6103" class="Symbol">...</a> <a id="6107" class="Symbol">|</a> <a id="6109" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6115" href="VerifiedCompilation.html#6115" class="Bound">p</a> <a id="6117" class="Symbol">=</a> <a id="6119" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6125" class="Symbol">(</a><a id="6126" href="VerifiedCompilation.html#4204" class="InductiveConstructor">isCSE</a> <a id="6132" href="VerifiedCompilation.html#6115" class="Bound">p</a><a id="6133" class="Symbol">)</a>

<a id="isTrace?"></a><a id="6136" href="VerifiedCompilation.html#6136" class="Function">isTrace?</a> <a id="6145" class="Symbol">:</a> <a id="6147" class="Symbol">{</a><a id="6148" href="VerifiedCompilation.html#6148" class="Bound">X</a> <a id="6150" class="Symbol">:</a> <a id="6152" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="6155" class="Symbol">}</a> <a id="6157" class="Symbol"></a> <a id="6173" class="Symbol">→</a> <a id="6175" class="Symbol">(</a><a id="6176" href="VerifiedCompilation.html#6176" class="Bound">t</a> <a id="6178" class="Symbol">:</a> <a id="6180" href="Utils.html#5297" class="Datatype">List</a> <a id="6185" class="Symbol">(</a><a id="6186" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="6200" href="Utils.html#5059" class="Record Operator">×</a> <a id="6202" class="Symbol">(</a><a id="6203" href="VerifiedCompilation.html#6148" class="Bound">X</a> <a id="6205" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="6206" class="Symbol">)</a> <a id="6208" href="Utils.html#5059" class="Record Operator">×</a> <a id="6210" class="Symbol">(</a><a id="6211" href="VerifiedCompilation.html#6148" class="Bound">X</a> <a id="6213" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="6214" class="Symbol">)))</a> <a id="6218" class="Symbol">→</a> <a id="6220" href="VerifiedCompilation.Certificate.html#1061" class="Datatype">ProofOrCE</a> <a id="6230" class="Symbol">(</a><a id="6231" href="VerifiedCompilation.html#4668" class="Datatype">Trace</a> <a id="6237" class="Symbol">{</a><a id="6238" href="VerifiedCompilation.html#6148" class="Bound">X</a><a id="6239" class="Symbol">}</a> <a id="6241" href="VerifiedCompilation.html#6176" class="Bound">t</a><a id="6242" class="Symbol">)</a>
<a id="6244" href="VerifiedCompilation.html#6136" class="Function">isTrace?</a> <a id="6253" href="Utils.html#5326" class="InductiveConstructor">[]</a> <a id="6256" class="Symbol">=</a> <a id="6258" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6264" href="VerifiedCompilation.html#4758" class="InductiveConstructor">empty</a>
<a id="6270" href="VerifiedCompilation.html#6136" class="Function">isTrace?</a> <a id="6279" class="Symbol">{</a><a id="6280" href="VerifiedCompilation.html#6280" class="Bound">X</a><a id="6281" class="Symbol">}</a> <a id="6283" class="Symbol">((</a><a id="6285" href="VerifiedCompilation.html#6285" class="Bound">tag</a> <a id="6289" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="6291" href="VerifiedCompilation.html#6291" class="Bound">x₁</a> <a id="6294" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="6296" href="VerifiedCompilation.html#6296" class="Bound">x₂</a><a id="6298" class="Symbol">)</a> <a id="6300" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="6302" href="VerifiedCompilation.html#6302" class="Bound">xs</a><a id="6304" class="Symbol">)</a> <a id="6306" class="Keyword">with</a> <a id="6311" href="VerifiedCompilation.html#6136" class="Function">isTrace?</a> <a id="6320" href="VerifiedCompilation.html#6302" class="Bound">xs</a>
<a id="6323" class="Symbol">...</a> <a id="6327" class="Symbol">|</a> <a id="6329" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6332" href="VerifiedCompilation.html#6332" class="Bound">¬p</a> <a id="6335" href="VerifiedCompilation.html#6335" class="Bound">t</a> <a id="6337" href="VerifiedCompilation.html#6337" class="Bound">b</a> <a id="6339" href="VerifiedCompilation.html#6339" class="Bound">a</a> <a id="6341" class="Symbol">=</a> <a id="6343" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6346" class="Symbol">(λ</a> <a id="6349" class="Symbol">{</a> <a id="6351" class="Symbol">(</a><a id="6352" href="VerifiedCompilation.html#4808" class="InductiveConstructor">cons</a> <a id="6357" href="VerifiedCompilation.html#6357" class="Bound">x</a> <a id="6359" href="VerifiedCompilation.html#6359" class="Bound">xx</a><a id="6361" class="Symbol">)</a> <a id="6363" class="Symbol">→</a> <a id="6365" href="VerifiedCompilation.html#6332" class="Bound">¬p</a> <a id="6368" href="VerifiedCompilation.html#6359" class="Bound">xx</a><a id="6370" class="Symbol">})</a> <a id="6373" href="VerifiedCompilation.html#6335" class="Bound">t</a> <a id="6375" href="VerifiedCompilation.html#6337" class="Bound">b</a> <a id="6377" href="VerifiedCompilation.html#6339" class="Bound">a</a>
<a id="6379" class="Symbol">...</a> <a id="6383" class="Symbol">|</a> <a id="6385" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6391" href="VerifiedCompilation.html#6391" class="Bound">pₜ</a> <a id="6394" class="Keyword">with</a> <a id="6399" href="VerifiedCompilation.html#5011" class="Function">isTransformation?</a> <a id="6417" class="Symbol">{</a><a id="6418" class="Bound">X</a><a id="6419" class="Symbol">}</a> <a id="6421" class="Bound">tag</a> <a id="6425" class="Bound">x₁</a> <a id="6428" class="Bound">x₂</a>
<a id="6431" class="Symbol">...</a>                 <a id="6451" class="Symbol">|</a> <a id="6453" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6456" href="VerifiedCompilation.html#6456" class="Bound">¬p</a> <a id="6459" href="VerifiedCompilation.html#6459" class="Bound">t</a> <a id="6461" href="VerifiedCompilation.html#6461" class="Bound">b</a> <a id="6463" href="VerifiedCompilation.html#6463" class="Bound">a</a> <a id="6465" class="Symbol">=</a> <a id="6467" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6470" class="Symbol">(λ</a> <a id="6473" class="Symbol">{</a> <a id="6475" class="Symbol">(</a><a id="6476" href="VerifiedCompilation.html#4808" class="InductiveConstructor">cons</a> <a id="6481" href="VerifiedCompilation.html#6481" class="Bound">x</a> <a id="6483" href="VerifiedCompilation.html#6483" class="Bound">xx</a><a id="6485" class="Symbol">)</a> <a id="6487" class="Symbol">→</a> <a id="6489" href="VerifiedCompilation.html#6456" class="Bound">¬p</a> <a id="6492" href="VerifiedCompilation.html#6481" class="Bound">x</a><a id="6493" class="Symbol">})</a> <a id="6496" href="VerifiedCompilation.html#6459" class="Bound">t</a> <a id="6498" href="VerifiedCompilation.html#6461" class="Bound">b</a> <a id="6500" href="VerifiedCompilation.html#6463" class="Bound">a</a>
<a id="6502" class="Symbol">...</a>                 <a id="6522" class="Symbol">|</a> <a id="6524" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6530" href="VerifiedCompilation.html#6530" class="Bound">pₑ</a> <a id="6533" class="Symbol">=</a> <a id="6535" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6541" class="Symbol">(</a><a id="6542" href="VerifiedCompilation.html#4808" class="InductiveConstructor">cons</a> <a id="6547" href="VerifiedCompilation.html#6530" class="Bound">pₑ</a> <a id="6550" class="Bound">pₜ</a><a id="6552" class="Symbol">)</a>


</pre>

<h2 id="the-certification-function">The certification function</h2>

<p>The <code class="language-plaintext highlighter-rouge">runCertifier</code> function is the top-level function which can be called by the compiler.</p>

<pre class="Agda">
<a id="6690" class="Symbol">{-#</a> <a id="6694" class="Keyword">FOREIGN</a> <a id="6702" class="Pragma">GHC</a> <a id="6706" class="Pragma">import</a> <a id="6713" class="Pragma">qualified</a> <a id="6723" class="Pragma">Data.Text.IO</a> <a id="6736" class="Pragma">as</a> <a id="6739" class="Pragma">TextIO</a> <a id="6746" class="Symbol">#-}</a>
<a id="6750" class="Symbol">{-#</a> <a id="6754" class="Keyword">FOREIGN</a> <a id="6762" class="Pragma">GHC</a> <a id="6766" class="Pragma">import</a> <a id="6773" class="Pragma">qualified</a> <a id="6783" class="Pragma">System.IO</a> <a id="6793" class="Pragma">as</a> <a id="6796" class="Pragma">IO</a> <a id="6799" class="Symbol">#-}</a>
<a id="6803" class="Symbol">{-#</a> <a id="6807" class="Keyword">FOREIGN</a> <a id="6815" class="Pragma">GHC</a> <a id="6819" class="Pragma">import</a> <a id="6826" class="Pragma">qualified</a> <a id="6836" class="Pragma">Data.Text</a> <a id="6846" class="Pragma">as</a> <a id="6849" class="Pragma">Text</a> <a id="6854" class="Symbol">#-}</a>
<a id="6858" class="Symbol">{-#</a> <a id="6862" class="Keyword">FOREIGN</a> <a id="6870" class="Pragma">GHC</a> <a id="6874" class="Pragma">import</a> <a id="6881" class="Pragma">PlutusCore.Compiler.Types</a> <a id="6907" class="Symbol">#-}</a>

<a id="6912" class="Keyword">postulate</a> <a id="FileHandle"></a><a id="6922" href="VerifiedCompilation.html#6922" class="Postulate">FileHandle</a> <a id="6933" class="Symbol">:</a> <a id="6935" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="6939" class="Symbol">{-#</a> <a id="6943" class="Keyword">COMPILE</a> <a id="6951" class="Keyword">GHC</a> <a id="6955" href="VerifiedCompilation.html#6922" class="Postulate">FileHandle</a> <a id="6966" class="Pragma">=</a> <a id="6968" class="Pragma">type</a> <a id="6973" class="Pragma">IO.Handle</a> <a id="6983" class="Symbol">#-}</a>

<a id="6988" class="Keyword">postulate</a>
  <a id="writeFile"></a><a id="7000" href="VerifiedCompilation.html#7000" class="Postulate">writeFile</a> <a id="7010" class="Symbol">:</a> <a id="7012" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7019" class="Symbol">→</a> <a id="7021" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7028" class="Symbol">→</a> <a id="7030" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7033" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="stderr"></a><a id="7037" href="VerifiedCompilation.html#7037" class="Postulate">stderr</a> <a id="7044" class="Symbol">:</a> <a id="7046" href="VerifiedCompilation.html#6922" class="Postulate">FileHandle</a>
  <a id="hPutStrLn"></a><a id="7059" href="VerifiedCompilation.html#7059" class="Postulate">hPutStrLn</a> <a id="7069" class="Symbol">:</a> <a id="7071" href="VerifiedCompilation.html#6922" class="Postulate">FileHandle</a> <a id="7082" class="Symbol">→</a> <a id="7084" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7091" class="Symbol">→</a> <a id="7093" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7096" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="putStrLn"></a><a id="7100" href="VerifiedCompilation.html#7100" class="Postulate">putStrLn</a> <a id="7109" class="Symbol">:</a> <a id="7111" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7118" class="Symbol">→</a> <a id="7120" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7123" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="7126" class="Symbol">{-#</a> <a id="7130" class="Keyword">COMPILE</a> <a id="7138" class="Keyword">GHC</a> <a id="7142" href="VerifiedCompilation.html#7000" class="Postulate">writeFile</a> <a id="7152" class="Pragma">=</a> <a id="7154" class="Pragma">\f</a> <a id="7157" class="Pragma">-&gt;</a> <a id="7160" class="Pragma">TextIO.writeFile</a> <a id="7177" class="Pragma">(Text.unpack</a> <a id="7190" class="Pragma">f)</a> <a id="7193" class="Symbol">#-}</a>
<a id="7197" class="Symbol">{-#</a> <a id="7201" class="Keyword">COMPILE</a> <a id="7209" class="Keyword">GHC</a> <a id="7213" href="VerifiedCompilation.html#7037" class="Postulate">stderr</a> <a id="7220" class="Pragma">=</a> <a id="7222" class="Pragma">IO.stderr</a> <a id="7232" class="Symbol">#-}</a>
<a id="7236" class="Symbol">{-#</a> <a id="7240" class="Keyword">COMPILE</a> <a id="7248" class="Keyword">GHC</a> <a id="7252" href="VerifiedCompilation.html#7059" class="Postulate">hPutStrLn</a> <a id="7262" class="Pragma">=</a> <a id="7264" class="Pragma">TextIO.hPutStr</a> <a id="7279" class="Symbol">#-}</a>
<a id="7283" class="Symbol">{-#</a> <a id="7287" class="Keyword">COMPILE</a> <a id="7295" class="Keyword">GHC</a> <a id="7299" href="VerifiedCompilation.html#7100" class="Postulate">putStrLn</a> <a id="7308" class="Pragma">=</a> <a id="7310" class="Pragma">TextIO.putStrLn</a> <a id="7326" class="Symbol">#-}</a>

<a id="buildPairs"></a><a id="7331" href="VerifiedCompilation.html#7331" class="Function">buildPairs</a> <a id="7342" class="Symbol">:</a> <a id="7344" class="Symbol">{</a><a id="7345" href="VerifiedCompilation.html#7345" class="Bound">X</a> <a id="7347" class="Symbol">:</a> <a id="7349" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7352" class="Symbol">}</a> <a id="7354" class="Symbol">→</a> <a id="7356" href="Utils.html#5297" class="Datatype">List</a> <a id="7361" class="Symbol">(</a><a id="7362" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7368" href="VerifiedCompilation.html#7345" class="Bound">X</a> <a id="7370" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="7371" class="Symbol">)</a> <a id="7373" class="Symbol">-&gt;</a> <a id="7376" href="Utils.html#5297" class="Datatype">List</a> <a id="7381" class="Symbol">((</a><a id="7383" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7389" href="VerifiedCompilation.html#7345" class="Bound">X</a> <a id="7391" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="7392" class="Symbol">)</a> <a id="7394" href="Utils.html#5059" class="Record Operator">×</a> <a id="7396" class="Symbol">(</a><a id="7397" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7403" href="VerifiedCompilation.html#7345" class="Bound">X</a> <a id="7405" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="7406" class="Symbol">))</a>
<a id="7409" href="VerifiedCompilation.html#7331" class="Function">buildPairs</a> <a id="7420" href="Utils.html#5326" class="InductiveConstructor">[]</a> <a id="7423" class="Symbol">=</a> <a id="7425" href="Utils.html#5326" class="InductiveConstructor">[]</a>
<a id="7428" href="VerifiedCompilation.html#7331" class="Function">buildPairs</a> <a id="7439" class="Symbol">(</a><a id="7440" href="VerifiedCompilation.html#7440" class="Bound">x</a> <a id="7442" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7444" href="Utils.html#5326" class="InductiveConstructor">[]</a><a id="7446" class="Symbol">)</a> <a id="7448" class="Symbol">=</a> <a id="7450" class="Symbol">(</a><a id="7451" href="VerifiedCompilation.html#7440" class="Bound">x</a> <a id="7453" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7455" href="VerifiedCompilation.html#7440" class="Bound">x</a><a id="7456" class="Symbol">)</a> <a id="7458" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7460" href="Utils.html#5326" class="InductiveConstructor">[]</a>
<a id="7463" href="VerifiedCompilation.html#7331" class="Function">buildPairs</a> <a id="7474" class="Symbol">(</a><a id="7475" href="VerifiedCompilation.html#7475" class="Bound">x₁</a> <a id="7478" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7480" class="Symbol">(</a><a id="7481" href="VerifiedCompilation.html#7481" class="Bound">x₂</a> <a id="7484" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7486" href="VerifiedCompilation.html#7486" class="Bound">xs</a><a id="7488" class="Symbol">))</a> <a id="7491" class="Symbol">=</a> <a id="7493" class="Symbol">(</a><a id="7494" href="VerifiedCompilation.html#7475" class="Bound">x₁</a> <a id="7497" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7499" href="VerifiedCompilation.html#7481" class="Bound">x₂</a><a id="7501" class="Symbol">)</a> <a id="7503" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7505" href="VerifiedCompilation.html#7331" class="Function">buildPairs</a> <a id="7516" class="Symbol">(</a><a id="7517" href="VerifiedCompilation.html#7481" class="Bound">x₂</a> <a id="7520" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7522" href="VerifiedCompilation.html#7486" class="Bound">xs</a><a id="7524" class="Symbol">)</a>

<a id="traverseEitherList"></a><a id="7527" href="VerifiedCompilation.html#7527" class="Function">traverseEitherList</a> <a id="7546" class="Symbol">:</a> <a id="7548" class="Symbol">{</a><a id="7549" href="VerifiedCompilation.html#7549" class="Bound">A</a> <a id="7551" href="VerifiedCompilation.html#7551" class="Bound">B</a> <a id="7553" href="VerifiedCompilation.html#7553" class="Bound">E</a> <a id="7555" class="Symbol">:</a> <a id="7557" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7560" class="Symbol">}</a> <a id="7562" class="Symbol">→</a> <a id="7564" class="Symbol">(</a><a id="7565" href="VerifiedCompilation.html#7549" class="Bound">A</a> <a id="7567" class="Symbol">→</a> <a id="7569" href="Utils.html#1129" class="Datatype">Either</a> <a id="7576" href="VerifiedCompilation.html#7553" class="Bound">E</a> <a id="7578" href="VerifiedCompilation.html#7551" class="Bound">B</a><a id="7579" class="Symbol">)</a> <a id="7581" class="Symbol">→</a> <a id="7583" href="Utils.html#5297" class="Datatype">List</a> <a id="7588" class="Symbol">(</a><a id="7589" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7603" href="Utils.html#5059" class="Record Operator">×</a> <a id="7605" href="VerifiedCompilation.html#7549" class="Bound">A</a> <a id="7607" href="Utils.html#5059" class="Record Operator">×</a> <a id="7609" href="VerifiedCompilation.html#7549" class="Bound">A</a><a id="7610" class="Symbol">)</a> <a id="7612" class="Symbol">→</a> <a id="7614" href="Utils.html#1129" class="Datatype">Either</a> <a id="7621" href="VerifiedCompilation.html#7553" class="Bound">E</a> <a id="7623" class="Symbol">(</a><a id="7624" href="Utils.html#5297" class="Datatype">List</a> <a id="7629" class="Symbol">(</a><a id="7630" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7644" href="Utils.html#5059" class="Record Operator">×</a> <a id="7646" href="VerifiedCompilation.html#7551" class="Bound">B</a> <a id="7648" href="Utils.html#5059" class="Record Operator">×</a> <a id="7650" href="VerifiedCompilation.html#7551" class="Bound">B</a><a id="7651" class="Symbol">))</a>
<a id="7654" href="VerifiedCompilation.html#7527" class="Function">traverseEitherList</a> <a id="7673" class="Symbol">_</a> <a id="7675" href="Utils.html#5326" class="InductiveConstructor">[]</a> <a id="7678" class="Symbol">=</a> <a id="7680" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="7685" href="Utils.html#5326" class="InductiveConstructor">[]</a>
<a id="7688" href="VerifiedCompilation.html#7527" class="Function">traverseEitherList</a> <a id="7707" href="VerifiedCompilation.html#7707" class="Bound">f</a> <a id="7709" class="Symbol">((</a><a id="7711" href="VerifiedCompilation.html#7711" class="Bound">tag</a> <a id="7715" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7717" href="VerifiedCompilation.html#7717" class="Bound">before</a> <a id="7724" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7726" href="VerifiedCompilation.html#7726" class="Bound">after</a><a id="7731" class="Symbol">)</a> <a id="7733" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7735" href="VerifiedCompilation.html#7735" class="Bound">xs</a><a id="7737" class="Symbol">)</a> <a id="7739" class="Keyword">with</a> <a id="7744" href="VerifiedCompilation.html#7707" class="Bound">f</a> <a id="7746" href="VerifiedCompilation.html#7717" class="Bound">before</a>
<a id="7753" class="Symbol">...</a> <a id="7757" class="Symbol">|</a> <a id="7759" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="7764" href="VerifiedCompilation.html#7764" class="Bound">e</a> <a id="7766" class="Symbol">=</a> <a id="7768" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="7773" href="VerifiedCompilation.html#7764" class="Bound">e</a>
<a id="7775" class="Symbol">...</a> <a id="7779" class="Symbol">|</a> <a id="7781" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="7786" href="VerifiedCompilation.html#7786" class="Bound">b</a> <a id="7788" class="Keyword">with</a> <a id="7793" class="Bound">f</a> <a id="7795" class="Bound">after</a>
<a id="7801" class="Symbol">...</a> <a id="7805" class="Symbol">|</a> <a id="7807" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="7812" href="VerifiedCompilation.html#7812" class="Bound">e</a> <a id="7814" class="Symbol">=</a> <a id="7816" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="7821" href="VerifiedCompilation.html#7812" class="Bound">e</a>
<a id="7823" class="Symbol">...</a> <a id="7827" class="Symbol">|</a> <a id="7829" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="7834" href="VerifiedCompilation.html#7834" class="Bound">a</a> <a id="7836" class="Keyword">with</a> <a id="7841" href="VerifiedCompilation.html#7527" class="Function">traverseEitherList</a> <a id="7860" class="Bound">f</a> <a id="7862" class="Bound">xs</a>
<a id="7865" class="Symbol">...</a> <a id="7869" class="Symbol">|</a> <a id="7871" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="7876" href="VerifiedCompilation.html#7876" class="Bound">e</a> <a id="7878" class="Symbol">=</a> <a id="7880" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="7885" href="VerifiedCompilation.html#7876" class="Bound">e</a>
<a id="7887" class="Symbol">...</a> <a id="7891" class="Symbol">|</a> <a id="7893" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="7898" href="VerifiedCompilation.html#7898" class="Bound">xs&#39;</a> <a id="7902" class="Symbol">=</a> <a id="7904" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="7909" class="Symbol">(((</a><a id="7912" class="Bound">tag</a> <a id="7916" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7918" class="Bound">b</a> <a id="7920" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7922" class="Bound">a</a><a id="7923" class="Symbol">))</a> <a id="7926" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7928" href="VerifiedCompilation.html#7898" class="Bound">xs&#39;</a><a id="7931" class="Symbol">)</a>

<a id="7934" class="Keyword">data</a> <a id="Cert"></a><a id="7939" href="VerifiedCompilation.html#7939" class="Datatype">Cert</a> <a id="7944" class="Symbol">:</a> <a id="7946" href="Agda.Primitive.html#388" class="Primitive">Set₂</a> <a id="7951" class="Keyword">where</a>
  <a id="Cert.cert"></a><a id="7959" href="VerifiedCompilation.html#7959" class="InductiveConstructor">cert</a>
    <a id="7968" class="Symbol">:</a> <a id="7970" class="Symbol">{</a><a id="7971" href="VerifiedCompilation.html#7971" class="Bound">X</a> <a id="7973" class="Symbol">:</a> <a id="7975" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7978" class="Symbol">}</a> <a id="7980" class="Symbol">{</a><a id="7981" href="VerifiedCompilation.html#7981" class="Bound">result</a> <a id="7988" class="Symbol">:</a> <a id="7990" href="Utils.html#5297" class="Datatype">List</a> <a id="7995" class="Symbol">(</a><a id="7996" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8010" href="Utils.html#5059" class="Record Operator">×</a> <a id="8012" class="Symbol">(</a><a id="8013" href="VerifiedCompilation.html#7971" class="Bound">X</a> <a id="8015" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="8016" class="Symbol">)</a> <a id="8018" href="Utils.html#5059" class="Record Operator">×</a> <a id="8020" class="Symbol">(</a><a id="8021" href="VerifiedCompilation.html#7971" class="Bound">X</a> <a id="8023" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="8024" class="Symbol">))}</a> <a id="8028" class="Symbol"></a>
    <a id="8048" class="Symbol">→</a> <a id="8050" href="VerifiedCompilation.Certificate.html#1061" class="Datatype">ProofOrCE</a> <a id="8060" class="Symbol">(</a><a id="8061" href="VerifiedCompilation.html#4668" class="Datatype">Trace</a> <a id="8067" class="Symbol">{</a><a id="8068" href="VerifiedCompilation.html#7971" class="Bound">X</a><a id="8069" class="Symbol">}</a> <a id="8071" href="VerifiedCompilation.html#7981" class="Bound">result</a><a id="8077" class="Symbol">)</a>
    <a id="8083" class="Symbol">→</a> <a id="8085" href="VerifiedCompilation.html#7939" class="Datatype">Cert</a>

<a id="runCertifier"></a><a id="8091" href="VerifiedCompilation.html#8091" class="Function">runCertifier</a> <a id="8104" class="Symbol">:</a> <a id="8106" href="Utils.html#5297" class="Datatype">List</a> <a id="8111" class="Symbol">(</a><a id="8112" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8126" href="Utils.html#5059" class="Record Operator">×</a> <a id="8128" href="RawU.html#6377" class="Datatype">Untyped</a> <a id="8136" href="Utils.html#5059" class="Record Operator">×</a> <a id="8138" href="RawU.html#6377" class="Datatype">Untyped</a><a id="8145" class="Symbol">)</a> <a id="8147" class="Symbol">→</a> <a id="8149" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8155" href="VerifiedCompilation.html#7939" class="Datatype">Cert</a>
<a id="8160" href="VerifiedCompilation.html#8091" class="Function">runCertifier</a> <a id="8173" href="VerifiedCompilation.html#8173" class="Bound">rawInput</a> <a id="8182" class="Keyword">with</a> <a id="8187" href="VerifiedCompilation.html#7527" class="Function">traverseEitherList</a> <a id="8206" class="Symbol">(</a><a id="8207" href="Untyped.html#6965" class="Function">toWellScoped</a> <a id="8220" class="Symbol">{</a><a id="8221" href="Data.Empty.html#914" class="Function">⊥</a><a id="8222" class="Symbol">})</a> <a id="8225" href="VerifiedCompilation.html#8173" class="Bound">rawInput</a>
<a id="8234" class="Symbol">...</a> <a id="8238" class="Symbol">|</a> <a id="8240" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="8245" class="Symbol">_</a> <a id="8247" class="Symbol">=</a> <a id="8249" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8257" class="Symbol">...</a> <a id="8261" class="Symbol">|</a> <a id="8263" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="8268" href="VerifiedCompilation.html#8268" class="Bound">inputTrace</a> <a id="8279" class="Symbol">=</a> <a id="8281" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8286" class="Symbol">(</a><a id="8287" href="VerifiedCompilation.html#7959" class="InductiveConstructor">cert</a> <a id="8292" class="Symbol">(</a><a id="8293" href="VerifiedCompilation.html#6136" class="Function">isTrace?</a> <a id="8302" href="VerifiedCompilation.html#8268" class="Bound">inputTrace</a><a id="8312" class="Symbol">))</a>

<a id="getCE"></a><a id="8316" href="VerifiedCompilation.html#8316" class="Function">getCE</a> <a id="8322" class="Symbol">:</a> <a id="8324" class="Symbol">{</a><a id="8325" href="VerifiedCompilation.html#8325" class="Bound">A</a> <a id="8327" href="VerifiedCompilation.html#8327" class="Bound">B</a> <a id="8329" class="Symbol">:</a> <a id="8331" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="8334" class="Symbol">}</a> <a id="8336" class="Symbol">→</a> <a id="8338" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8344" href="VerifiedCompilation.html#7939" class="Datatype">Cert</a> <a id="8349" class="Symbol">→</a> <a id="8351" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8357" class="Symbol">(</a><a id="8358" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="8360" class="Symbol">_</a> <a id="8362" class="Symbol">\</a><a id="8363" href="VerifiedCompilation.html#8363" class="Bound">A</a> <a id="8365" class="Symbol">→</a> <a id="8367" class="Symbol">(</a><a id="8368" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="8370" class="Symbol">_</a> <a id="8372" class="Symbol">\</a><a id="8373" href="VerifiedCompilation.html#8373" class="Bound">B</a> <a id="8375" class="Symbol">→</a> <a id="8377" class="Symbol">(</a><a id="8378" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8392" href="Utils.html#5059" class="Record Operator">×</a> <a id="8394" href="VerifiedCompilation.html#8363" class="Bound">A</a> <a id="8396" href="Utils.html#5059" class="Record Operator">×</a> <a id="8398" href="VerifiedCompilation.html#8373" class="Bound">B</a><a id="8399" class="Symbol">)))</a>
<a id="8403" href="VerifiedCompilation.html#8316" class="Function">getCE</a> <a id="8409" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8417" class="Symbol">=</a> <a id="8419" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8427" href="VerifiedCompilation.html#8316" class="Function">getCE</a> <a id="8433" class="Symbol">(</a><a id="8434" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8439" class="Symbol">(</a><a id="8440" href="VerifiedCompilation.html#7959" class="InductiveConstructor">cert</a> <a id="8445" class="Symbol">(</a><a id="8446" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="8452" class="Symbol">_)))</a> <a id="8457" class="Symbol">=</a> <a id="8459" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8467" href="VerifiedCompilation.html#8316" class="Function">getCE</a> <a id="8473" class="Symbol">(</a><a id="8474" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8479" class="Symbol">(</a><a id="8480" href="VerifiedCompilation.html#7959" class="InductiveConstructor">cert</a> <a id="8485" class="Symbol">(</a><a id="8486" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="8489" class="Symbol">_</a> <a id="8491" class="Symbol">{</a><a id="8492" href="VerifiedCompilation.html#8492" class="Bound">X</a><a id="8493" class="Symbol">}</a> <a id="8495" class="Symbol">{</a><a id="8496" href="VerifiedCompilation.html#8496" class="Bound">X&#39;</a><a id="8498" class="Symbol">}</a> <a id="8500" href="VerifiedCompilation.html#8500" class="Bound">t</a> <a id="8502" href="VerifiedCompilation.html#8502" class="Bound">b</a> <a id="8504" href="VerifiedCompilation.html#8504" class="Bound">a</a><a id="8505" class="Symbol">)))</a> <a id="8509" class="Symbol">=</a> <a id="8511" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8516" class="Symbol">(</a><a id="8517" href="VerifiedCompilation.html#8492" class="Bound">X</a> <a id="8519" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8521" href="VerifiedCompilation.html#8496" class="Bound">X&#39;</a> <a id="8524" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8526" href="VerifiedCompilation.html#8500" class="Bound">t</a> <a id="8528" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="8530" href="VerifiedCompilation.html#8502" class="Bound">b</a> <a id="8532" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="8534" href="VerifiedCompilation.html#8504" class="Bound">a</a><a id="8535" class="Symbol">)</a>

<a id="8538" class="Keyword">open</a> <a id="8543" class="Keyword">import</a> <a id="8550" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="8565" class="Keyword">using</a> <a id="8571" class="Symbol">(</a><a id="8572" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="8576" class="Symbol">;</a> <a id="8578" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="8583" class="Symbol">;</a> <a id="8585" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="8589" class="Symbol">)</a>
<a id="8591" class="Keyword">open</a> <a id="8596" class="Keyword">import</a> <a id="8603" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a> <a id="8625" class="Keyword">using</a> <a id="8631" class="Symbol">(</a><a id="8632" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="8635" class="Symbol">;</a> <a id="8637" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="8641" class="Symbol">)</a>

<a id="passed?"></a><a id="8644" href="VerifiedCompilation.html#8644" class="Function">passed?</a> <a id="8652" class="Symbol">:</a> <a id="8654" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8660" href="VerifiedCompilation.html#7939" class="Datatype">Cert</a> <a id="8665" class="Symbol">→</a> <a id="8667" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="8672" href="VerifiedCompilation.html#8644" class="Function">passed?</a> <a id="8680" class="Symbol">(</a><a id="8681" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8686" class="Symbol">(</a><a id="8687" href="VerifiedCompilation.html#7959" class="InductiveConstructor">cert</a> <a id="8692" class="Symbol">(</a><a id="8693" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="8696" class="Symbol">_</a> <a id="8698" class="Symbol">_</a> <a id="8700" class="Symbol">_</a> <a id="8702" class="Symbol">_)))</a> <a id="8707" class="Symbol">=</a> <a id="8709" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="8715" href="VerifiedCompilation.html#8644" class="Function">passed?</a> <a id="8723" class="Symbol">(</a><a id="8724" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8729" class="Symbol">(</a><a id="8730" href="VerifiedCompilation.html#7959" class="InductiveConstructor">cert</a> <a id="8735" class="Symbol">(</a><a id="8736" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="8742" class="Symbol">_)))</a> <a id="8747" class="Symbol">=</a> <a id="8749" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="8754" href="VerifiedCompilation.html#8644" class="Function">passed?</a> <a id="8762" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8770" class="Symbol">=</a> <a id="8772" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>

<a id="runCertifierMain"></a><a id="8779" href="VerifiedCompilation.html#8779" class="Function">runCertifierMain</a> <a id="8796" class="Symbol">:</a> <a id="8798" href="Utils.html#5297" class="Datatype">List</a> <a id="8803" class="Symbol">(</a><a id="8804" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8818" href="Utils.html#5059" class="Record Operator">×</a> <a id="8820" href="RawU.html#6377" class="Datatype">Untyped</a> <a id="8828" href="Utils.html#5059" class="Record Operator">×</a> <a id="8830" href="RawU.html#6377" class="Datatype">Untyped</a><a id="8837" class="Symbol">)</a> <a id="8839" class="Symbol">→</a> <a id="8841" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8847" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="8852" href="VerifiedCompilation.html#8779" class="Function">runCertifierMain</a> <a id="8869" href="VerifiedCompilation.html#8869" class="Bound">asts</a> <a id="8874" class="Keyword">with</a> <a id="8879" href="VerifiedCompilation.html#8091" class="Function">runCertifier</a> <a id="8892" href="VerifiedCompilation.html#8869" class="Bound">asts</a>
<a id="8897" class="Symbol">...</a> <a id="8901" class="Symbol">|</a> <a id="8903" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8908" class="Symbol">(</a><a id="8909" href="VerifiedCompilation.html#7959" class="InductiveConstructor">cert</a> <a id="8914" class="Symbol">(</a><a id="8915" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="8921" href="VerifiedCompilation.html#8921" class="Bound">a</a><a id="8922" class="Symbol">))</a> <a id="8925" class="Symbol">=</a> <a id="8927" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8932" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="8937" class="Symbol">...</a> <a id="8941" class="Symbol">|</a> <a id="8943" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8948" class="Symbol">(</a><a id="8949" href="VerifiedCompilation.html#7959" class="InductiveConstructor">cert</a> <a id="8954" class="Symbol">(</a><a id="8955" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="8958" href="VerifiedCompilation.html#8958" class="Bound">¬p</a> <a id="8961" href="VerifiedCompilation.html#8961" class="Bound">t</a> <a id="8963" href="VerifiedCompilation.html#8963" class="Bound">b</a> <a id="8965" href="VerifiedCompilation.html#8965" class="Bound">a</a><a id="8966" class="Symbol">))</a> <a id="8969" class="Symbol">=</a> <a id="8971" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8976" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="8982" class="Symbol">...</a> <a id="8986" class="Symbol">|</a> <a id="8988" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8996" class="Symbol">=</a> <a id="8998" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="9006" class="Symbol">{-#</a> <a id="9010" class="Keyword">COMPILE</a> <a id="9018" class="Keyword">GHC</a> <a id="9022" href="VerifiedCompilation.html#8779" class="Function">runCertifierMain</a> <a id="9039" class="Pragma">as</a> <a id="9042" class="Pragma">runCertifierMain</a> <a id="9059" class="Symbol">#-}</a>
</pre>

    </section>
  </body>
</html>