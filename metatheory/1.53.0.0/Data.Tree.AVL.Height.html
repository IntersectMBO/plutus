<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Tree.AVL.Height</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Types and functions which are used to keep track of height</a>
<a id="168" class="Comment">-- invariants in AVL Trees</a>
<a id="195" class="Comment">------------------------------------------------------------------------</a>

<a id="269" class="Symbol">{-#</a> <a id="273" class="Keyword">OPTIONS</a> <a id="281" class="Pragma">--cubical-compatible</a> <a id="302" class="Pragma">--safe</a> <a id="309" class="Symbol">#-}</a>

<a id="314" class="Keyword">module</a> <a id="321" href="Data.Tree.AVL.Height.html" class="Module">Data.Tree.AVL.Height</a> <a id="342" class="Keyword">where</a>

<a id="349" class="Keyword">open</a> <a id="354" class="Keyword">import</a> <a id="361" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="375" class="Keyword">open</a> <a id="380" class="Keyword">import</a> <a id="387" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="401" class="Keyword">using</a> <a id="407" class="Symbol">(</a><a id="408" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a><a id="411" class="Symbol">;</a> <a id="413" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="417" class="Symbol">;</a> <a id="419" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a><a id="422" class="Symbol">)</a>

<a id="ℕ₂"></a><a id="425" href="Data.Tree.AVL.Height.html#425" class="Function">ℕ₂</a> <a id="428" class="Symbol">=</a> <a id="430" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="434" class="Number">2</a>
<a id="436" class="Keyword">pattern</a> <a id="0#"></a><a id="444" href="Data.Tree.AVL.Height.html#444" class="InductiveConstructor">0#</a> <a id="447" class="Symbol">=</a> <a id="449" class="InductiveConstructor">zero</a>
<a id="454" class="Keyword">pattern</a> <a id="1#"></a><a id="462" href="Data.Tree.AVL.Height.html#462" class="InductiveConstructor">1#</a> <a id="465" class="Symbol">=</a> <a id="467" class="InductiveConstructor">suc</a> <a id="471" class="InductiveConstructor">zero</a>
<a id="476" class="Keyword">pattern</a> <a id="##"></a><a id="484" href="Data.Tree.AVL.Height.html#484" class="InductiveConstructor">##</a> <a id="487" class="Symbol">=</a> <a id="489" class="InductiveConstructor">suc</a> <a id="493" class="Symbol">(</a><a id="494" class="InductiveConstructor">suc</a> <a id="498" class="Symbol">())</a>

<a id="503" class="Comment">-- Addition.</a>

<a id="517" class="Keyword">infixl</a> <a id="524" class="Number">6</a> <a id="526" href="Data.Tree.AVL.Height.html#531" class="Function Operator">_⊕_</a>

<a id="_⊕_"></a><a id="531" href="Data.Tree.AVL.Height.html#531" class="Function Operator">_⊕_</a> <a id="535" class="Symbol">:</a> <a id="537" href="Data.Tree.AVL.Height.html#425" class="Function">ℕ₂</a> <a id="540" class="Symbol">→</a> <a id="542" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="544" class="Symbol">→</a> <a id="546" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="548" href="Data.Tree.AVL.Height.html#444" class="InductiveConstructor">0#</a> <a id="551" href="Data.Tree.AVL.Height.html#531" class="Function Operator">⊕</a> <a id="553" href="Data.Tree.AVL.Height.html#553" class="Bound">n</a> <a id="555" class="Symbol">=</a> <a id="557" href="Data.Tree.AVL.Height.html#553" class="Bound">n</a>
<a id="559" href="Data.Tree.AVL.Height.html#462" class="InductiveConstructor">1#</a> <a id="562" href="Data.Tree.AVL.Height.html#531" class="Function Operator">⊕</a> <a id="564" href="Data.Tree.AVL.Height.html#564" class="Bound">n</a> <a id="566" class="Symbol">=</a> <a id="568" class="Number">1</a> <a id="570" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="572" href="Data.Tree.AVL.Height.html#564" class="Bound">n</a>

<a id="575" class="Comment">-- pred[ i ⊕ n ] = pred (i ⊕ n).</a>

<a id="pred[_⊕_]"></a><a id="609" href="Data.Tree.AVL.Height.html#609" class="Function Operator">pred[_⊕_]</a> <a id="619" class="Symbol">:</a> <a id="621" href="Data.Tree.AVL.Height.html#425" class="Function">ℕ₂</a> <a id="624" class="Symbol">→</a> <a id="626" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="628" class="Symbol">→</a> <a id="630" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="632" href="Data.Tree.AVL.Height.html#609" class="Function Operator">pred[</a> <a id="638" href="Data.Tree.AVL.Height.html#638" class="Bound">i</a> <a id="640" href="Data.Tree.AVL.Height.html#609" class="Function Operator">⊕</a> <a id="642" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>  <a id="648" href="Data.Tree.AVL.Height.html#609" class="Function Operator">]</a> <a id="650" class="Symbol">=</a> <a id="652" class="Number">0</a>
<a id="654" href="Data.Tree.AVL.Height.html#609" class="Function Operator">pred[</a> <a id="660" href="Data.Tree.AVL.Height.html#660" class="Bound">i</a> <a id="662" href="Data.Tree.AVL.Height.html#609" class="Function Operator">⊕</a> <a id="664" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="668" href="Data.Tree.AVL.Height.html#668" class="Bound">n</a> <a id="670" href="Data.Tree.AVL.Height.html#609" class="Function Operator">]</a> <a id="672" class="Symbol">=</a> <a id="674" href="Data.Tree.AVL.Height.html#660" class="Bound">i</a> <a id="676" href="Data.Tree.AVL.Height.html#531" class="Function Operator">⊕</a> <a id="678" href="Data.Tree.AVL.Height.html#668" class="Bound">n</a>

<a id="681" class="Keyword">infix</a> <a id="687" class="Number">4</a> <a id="689" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">_∼_⊔_</a>

<a id="696" class="Comment">-- If i ∼ j ⊔ m, then the difference between i and j is at most 1,</a>
<a id="763" class="Comment">-- and the maximum of i and j is m. _∼_⊔_ is used to record the</a>
<a id="827" class="Comment">-- balance factor of the AVL trees, and also to ensure that the</a>
<a id="891" class="Comment">-- absolute value of the balance factor is never more than 1.</a>

<a id="954" class="Keyword">data</a> <a id="_∼_⊔_"></a><a id="959" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">_∼_⊔_</a> <a id="965" class="Symbol">:</a> <a id="967" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="969" class="Symbol">→</a> <a id="971" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="973" class="Symbol">→</a> <a id="975" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="977" class="Symbol">→</a> <a id="979" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="983" class="Keyword">where</a>
  <a id="_∼_⊔_.∼+"></a><a id="991" href="Data.Tree.AVL.Height.html#991" class="InductiveConstructor">∼+</a> <a id="994" class="Symbol">:</a> <a id="996" class="Symbol">∀</a> <a id="998" class="Symbol">{</a><a id="999" href="Data.Tree.AVL.Height.html#999" class="Bound">n</a><a id="1000" class="Symbol">}</a> <a id="1002" class="Symbol">→</a>     <a id="1008" href="Data.Tree.AVL.Height.html#999" class="Bound">n</a> <a id="1010" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">∼</a> <a id="1012" class="Number">1</a> <a id="1014" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1016" href="Data.Tree.AVL.Height.html#999" class="Bound">n</a> <a id="1018" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">⊔</a> <a id="1020" class="Number">1</a> <a id="1022" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1024" href="Data.Tree.AVL.Height.html#999" class="Bound">n</a>
  <a id="_∼_⊔_.∼0"></a><a id="1028" href="Data.Tree.AVL.Height.html#1028" class="InductiveConstructor">∼0</a> <a id="1031" class="Symbol">:</a> <a id="1033" class="Symbol">∀</a> <a id="1035" class="Symbol">{</a><a id="1036" href="Data.Tree.AVL.Height.html#1036" class="Bound">n</a><a id="1037" class="Symbol">}</a> <a id="1039" class="Symbol">→</a>     <a id="1045" href="Data.Tree.AVL.Height.html#1036" class="Bound">n</a> <a id="1047" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">∼</a> <a id="1049" href="Data.Tree.AVL.Height.html#1036" class="Bound">n</a>     <a id="1055" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">⊔</a> <a id="1057" href="Data.Tree.AVL.Height.html#1036" class="Bound">n</a>
  <a id="_∼_⊔_.∼-"></a><a id="1061" href="Data.Tree.AVL.Height.html#1061" class="InductiveConstructor">∼-</a> <a id="1064" class="Symbol">:</a> <a id="1066" class="Symbol">∀</a> <a id="1068" class="Symbol">{</a><a id="1069" href="Data.Tree.AVL.Height.html#1069" class="Bound">n</a><a id="1070" class="Symbol">}</a> <a id="1072" class="Symbol">→</a> <a id="1074" class="Number">1</a> <a id="1076" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1078" href="Data.Tree.AVL.Height.html#1069" class="Bound">n</a> <a id="1080" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">∼</a> <a id="1082" href="Data.Tree.AVL.Height.html#1069" class="Bound">n</a>     <a id="1088" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">⊔</a> <a id="1090" class="Number">1</a> <a id="1092" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1094" href="Data.Tree.AVL.Height.html#1069" class="Bound">n</a>

<a id="1097" class="Comment">-- Some lemmas.</a>

<a id="max∼"></a><a id="1114" href="Data.Tree.AVL.Height.html#1114" class="Function">max∼</a> <a id="1119" class="Symbol">:</a> <a id="1121" class="Symbol">∀</a> <a id="1123" class="Symbol">{</a><a id="1124" href="Data.Tree.AVL.Height.html#1124" class="Bound">i</a> <a id="1126" href="Data.Tree.AVL.Height.html#1126" class="Bound">j</a> <a id="1128" href="Data.Tree.AVL.Height.html#1128" class="Bound">m</a><a id="1129" class="Symbol">}</a> <a id="1131" class="Symbol">→</a> <a id="1133" href="Data.Tree.AVL.Height.html#1124" class="Bound">i</a> <a id="1135" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">∼</a> <a id="1137" href="Data.Tree.AVL.Height.html#1126" class="Bound">j</a> <a id="1139" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">⊔</a> <a id="1141" href="Data.Tree.AVL.Height.html#1128" class="Bound">m</a> <a id="1143" class="Symbol">→</a> <a id="1145" href="Data.Tree.AVL.Height.html#1128" class="Bound">m</a> <a id="1147" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">∼</a> <a id="1149" href="Data.Tree.AVL.Height.html#1124" class="Bound">i</a> <a id="1151" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">⊔</a> <a id="1153" href="Data.Tree.AVL.Height.html#1128" class="Bound">m</a>
<a id="1155" href="Data.Tree.AVL.Height.html#1114" class="Function">max∼</a> <a id="1160" href="Data.Tree.AVL.Height.html#991" class="InductiveConstructor">∼+</a> <a id="1163" class="Symbol">=</a> <a id="1165" href="Data.Tree.AVL.Height.html#1061" class="InductiveConstructor">∼-</a>
<a id="1168" href="Data.Tree.AVL.Height.html#1114" class="Function">max∼</a> <a id="1173" href="Data.Tree.AVL.Height.html#1028" class="InductiveConstructor">∼0</a> <a id="1176" class="Symbol">=</a> <a id="1178" href="Data.Tree.AVL.Height.html#1028" class="InductiveConstructor">∼0</a>
<a id="1181" href="Data.Tree.AVL.Height.html#1114" class="Function">max∼</a> <a id="1186" href="Data.Tree.AVL.Height.html#1061" class="InductiveConstructor">∼-</a> <a id="1189" class="Symbol">=</a> <a id="1191" href="Data.Tree.AVL.Height.html#1028" class="InductiveConstructor">∼0</a>

<a id="∼max"></a><a id="1195" href="Data.Tree.AVL.Height.html#1195" class="Function">∼max</a> <a id="1200" class="Symbol">:</a> <a id="1202" class="Symbol">∀</a> <a id="1204" class="Symbol">{</a><a id="1205" href="Data.Tree.AVL.Height.html#1205" class="Bound">i</a> <a id="1207" href="Data.Tree.AVL.Height.html#1207" class="Bound">j</a> <a id="1209" href="Data.Tree.AVL.Height.html#1209" class="Bound">m</a><a id="1210" class="Symbol">}</a> <a id="1212" class="Symbol">→</a> <a id="1214" href="Data.Tree.AVL.Height.html#1205" class="Bound">i</a> <a id="1216" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">∼</a> <a id="1218" href="Data.Tree.AVL.Height.html#1207" class="Bound">j</a> <a id="1220" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">⊔</a> <a id="1222" href="Data.Tree.AVL.Height.html#1209" class="Bound">m</a> <a id="1224" class="Symbol">→</a> <a id="1226" href="Data.Tree.AVL.Height.html#1207" class="Bound">j</a> <a id="1228" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">∼</a> <a id="1230" href="Data.Tree.AVL.Height.html#1209" class="Bound">m</a> <a id="1232" href="Data.Tree.AVL.Height.html#959" class="Datatype Operator">⊔</a> <a id="1234" href="Data.Tree.AVL.Height.html#1209" class="Bound">m</a>
<a id="1236" href="Data.Tree.AVL.Height.html#1195" class="Function">∼max</a> <a id="1241" href="Data.Tree.AVL.Height.html#991" class="InductiveConstructor">∼+</a> <a id="1244" class="Symbol">=</a> <a id="1246" href="Data.Tree.AVL.Height.html#1028" class="InductiveConstructor">∼0</a>
<a id="1249" href="Data.Tree.AVL.Height.html#1195" class="Function">∼max</a> <a id="1254" href="Data.Tree.AVL.Height.html#1028" class="InductiveConstructor">∼0</a> <a id="1257" class="Symbol">=</a> <a id="1259" href="Data.Tree.AVL.Height.html#1028" class="InductiveConstructor">∼0</a>
<a id="1262" href="Data.Tree.AVL.Height.html#1195" class="Function">∼max</a> <a id="1267" href="Data.Tree.AVL.Height.html#1061" class="InductiveConstructor">∼-</a> <a id="1270" class="Symbol">=</a> <a id="1272" href="Data.Tree.AVL.Height.html#991" class="InductiveConstructor">∼+</a>
</pre></body></html>