<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>VerifiedCompilation</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>VerifiedCompilation</h1>
    <section>
      <h1 id="verified-compilation">Verified Compilation</h1>

<h2 id="introduction">Introduction</h2>

<p>The verified compilation project is a formalization of the Untyped Plutus Core compiler optimisation transformations in Agda.
The goal is to generate a formal proof that the optimisation component of the compiler has transformed the input program correctly
with respect to the Agda specification (*). Our approach is based on Jacco Krijnen’s work on
<a href="https://www.sciencedirect.com/science/article/pii/S0167642323001338">Translation certification for smart contracts</a>.</p>

<p>(*) <strong>Note</strong>: The current implementation does not guarantee corectness in the sense of semantic equivalence between
the original and the optimised program. This is planned future work.</p>

<h2 id="implementation-overview">Implementation overview</h2>

<p>The project is divided into several Agda modules, each of which is based on an optimisation stage of the compiler.
They each contain the respective Agda formalisation of the program transformation and a decision procedure which takes
two programs as input and decides whether the transformation is applicable.</p>

<p>This module is at the top of the project hierarchy and contains the main decision procedure which verifies the entire optimisation
process. The final certification function receives a list of intermediate program ASTs produced by the compiler and outputs a file
containing the generated proof object, a.k.a. the <em>certificate</em>. The certificate can then be verified by third parties by loading
it into Agda and checking that it is correctly typed.</p>

<pre class="Agda"><a id="1536" class="Keyword">module</a> <a id="1543" href="VerifiedCompilation.html" class="Module">VerifiedCompilation</a> <a id="1563" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="1590" class="Keyword">open</a> <a id="1595" class="Keyword">import</a> <a id="1602" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1619" class="Keyword">using</a> <a id="1625" class="Symbol">(</a><a id="1626" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a><a id="1629" class="Symbol">;</a> <a id="1631" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a><a id="1634" class="Symbol">;</a> <a id="1636" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a><a id="1638" class="Symbol">;</a> <a id="1640" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬_</a><a id="1642" class="Symbol">)</a>

<a id="1645" class="Keyword">open</a> <a id="1650" class="Keyword">import</a> <a id="1657" href="Untyped.html" class="Module">Untyped</a>
<a id="1665" class="Keyword">open</a> <a id="1670" class="Keyword">import</a> <a id="1677" href="Utils.html" class="Module">Utils</a> <a id="1683" class="Symbol">as</a> <a id="1686" class="Module">U</a> <a id="1688" class="Keyword">using</a> <a id="1694" class="Symbol">(</a><a id="1695" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="1700" class="Symbol">;</a><a id="1701" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1708" class="Symbol">;</a><a id="1709" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="1713" class="Symbol">;</a><a id="1714" href="Utils.html#1125" class="Datatype">Either</a><a id="1720" class="Symbol">;</a><a id="1721" href="Utils.html#1158" class="InductiveConstructor">inj₁</a><a id="1725" class="Symbol">;</a><a id="1726" href="Utils.html#1182" class="InductiveConstructor">inj₂</a><a id="1730" class="Symbol">;</a><a id="1731" href="Utils.html#5072" class="Datatype">List</a><a id="1735" class="Symbol">;</a><a id="1736" href="Utils.html#5101" class="InductiveConstructor">[]</a><a id="1738" class="Symbol">;</a><a id="1739" href="Utils.html#5116" class="InductiveConstructor Operator">_∷_</a><a id="1742" class="Symbol">;</a><a id="1743" href="Utils.html#4834" class="Record Operator">_×_</a><a id="1746" class="Symbol">;</a><a id="1747" href="Utils.html#4001" class="InductiveConstructor Operator">_,_</a><a id="1750" class="Symbol">)</a>
<a id="1752" class="Keyword">open</a> <a id="1757" class="Keyword">import</a> <a id="1764" href="RawU.html" class="Module">RawU</a> <a id="1769" class="Keyword">using</a> <a id="1775" class="Symbol">(</a><a id="1776" href="RawU.html#6377" class="Datatype">Untyped</a><a id="1783" class="Symbol">)</a>
<a id="1785" class="Keyword">open</a> <a id="1790" class="Keyword">import</a> <a id="1797" href="Data.String.html" class="Module">Data.String</a> <a id="1809" class="Keyword">using</a> <a id="1815" class="Symbol">(</a><a id="1816" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="1822" class="Symbol">)</a>
<a id="1824" class="Keyword">open</a> <a id="1829" class="Keyword">import</a> <a id="1836" href="Agda.Builtin.IO.html" class="Module">Agda.Builtin.IO</a> <a id="1852" class="Keyword">using</a> <a id="1858" class="Symbol">(</a><a id="1859" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a><a id="1861" class="Symbol">)</a>
<a id="1863" class="Keyword">open</a> <a id="1868" class="Keyword">import</a> <a id="1875" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="1893" class="Keyword">using</a> <a id="1899" class="Symbol">(</a><a id="1900" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="1901" class="Symbol">)</a>
<a id="1903" class="Keyword">import</a> <a id="1910" href="VerifiedCompilation.UCaseOfCase.html" class="Module">VerifiedCompilation.UCaseOfCase</a> <a id="1942" class="Symbol">as</a> <a id="1945" class="Module">UCC</a>
<a id="1949" class="Keyword">import</a> <a id="1956" href="VerifiedCompilation.UForceDelay.html" class="Module">VerifiedCompilation.UForceDelay</a> <a id="1988" class="Symbol">as</a> <a id="1991" class="Module">UFD</a>
<a id="1995" class="Keyword">import</a> <a id="2002" href="VerifiedCompilation.UFloatDelay.html" class="Module">VerifiedCompilation.UFloatDelay</a> <a id="2034" class="Symbol">as</a> <a id="2037" class="Module">UFlD</a>
<a id="2042" class="Keyword">import</a> <a id="2049" href="VerifiedCompilation.UCSE.html" class="Module">VerifiedCompilation.UCSE</a> <a id="2074" class="Symbol">as</a> <a id="2077" class="Module">UCSE</a>
<a id="2082" class="Keyword">import</a> <a id="2089" href="VerifiedCompilation.UInline.html" class="Module">VerifiedCompilation.UInline</a> <a id="2117" class="Symbol">as</a> <a id="2120" class="Module">UInline</a>
<a id="2128" class="Keyword">import</a> <a id="2135" href="VerifiedCompilation.UCaseReduce.html" class="Module">VerifiedCompilation.UCaseReduce</a> <a id="2167" class="Symbol">as</a> <a id="2170" class="Module">UCR</a>
<a id="2174" class="Keyword">open</a> <a id="2179" class="Keyword">import</a> <a id="2186" href="Data.Empty.html" class="Module">Data.Empty</a> <a id="2197" class="Keyword">using</a> <a id="2203" class="Symbol">(</a><a id="2204" href="Data.Empty.html#914" class="Function">⊥</a><a id="2205" class="Symbol">)</a>
<a id="2207" class="Keyword">open</a> <a id="2212" class="Keyword">import</a> <a id="2219" href="VerifiedCompilation.Equality.html" class="Module">VerifiedCompilation.Equality</a> <a id="2248" class="Keyword">using</a> <a id="2254" class="Symbol">(</a><a id="2255" href="VerifiedCompilation.Equality.html#2250" class="Record">DecEq</a><a id="2260" class="Symbol">)</a>
<a id="2262" class="Keyword">open</a> <a id="2267" class="Keyword">import</a> <a id="2274" href="VerifiedCompilation.UntypedTranslation.html" class="Module">VerifiedCompilation.UntypedTranslation</a> <a id="2313" class="Keyword">using</a> <a id="2319" class="Symbol">(</a><a id="2320" href="VerifiedCompilation.UntypedTranslation.html#1431" class="Function">Relation</a><a id="2328" class="Symbol">)</a>
<a id="2330" class="Keyword">import</a> <a id="2337" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="2352" class="Symbol">as</a> <a id="2355" class="Module">Unary</a> <a id="2361" class="Keyword">using</a> <a id="2367" class="Symbol">(</a><a id="2368" href="Relation.Unary.html#4543" class="Function">Decidable</a><a id="2377" class="Symbol">)</a>
<a id="2379" class="Keyword">import</a> <a id="2386" href="Agda.Builtin.Int.html" class="Module">Agda.Builtin.Int</a>
<a id="2403" class="Keyword">import</a> <a id="2410" href="Relation.Nary.html" class="Module">Relation.Nary</a> <a id="2424" class="Symbol">as</a> <a id="2427" class="Module">Nary</a> <a id="2432" class="Keyword">using</a> <a id="2438" class="Symbol">(</a><a id="2439" href="Relation.Nary.html#6405" class="Function">Decidable</a><a id="2448" class="Symbol">)</a>
<a id="2450" class="Keyword">import</a> <a id="2457" href="IO.Primitive.Core.html" class="Module">IO.Primitive.Core</a> <a id="2475" class="Symbol">as</a> <a id="2478" class="Module">IO</a>
</pre>
<h2 id="compiler-optimisation-traces">Compiler optimisation traces</h2>

<p>A <code class="language-plaintext highlighter-rouge">Trace</code> represents a sequence of optimisation transformations applied to a program. It is a list of pairs of ASTs
and a tag (<code class="language-plaintext highlighter-rouge">SimplifierTag</code>), where each pair represents the before and after of a transformation application and the
tag indicates which transformation was applied.
The <code class="language-plaintext highlighter-rouge">Transformation</code> type is a sum type that represents the possible transformations which are implemented in their
respective modules.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTrace?</code> decision procedure is at the core of the certification process. It produces the proof that the given
list of ASTs are in relation with one another according to the transformations implemented in the project.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTransformation?</code> decision procedure just dispatches to the decision procedure indicated by the tag.</p>

<p><strong>TODO</strong>: The <code class="language-plaintext highlighter-rouge">Trace</code> type or decision procedure should also enforce that the second element of a pair is the first
element of the next pair in the list. This might not be necessary if we decide that we can assume that the function
which produces a <code class="language-plaintext highlighter-rouge">Trace</code> always produces a correct one, although it might be useful to make this explicit in the type.</p>
<pre class="Agda">
<a id="3626" class="Keyword">data</a> <a id="SimplifierTag"></a><a id="3631" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="3645" class="Symbol">:</a> <a id="3647" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3651" class="Keyword">where</a>
  <a id="SimplifierTag.floatDelayT"></a><a id="3659" href="VerifiedCompilation.html#3659" class="InductiveConstructor">floatDelayT</a> <a id="3671" class="Symbol">:</a> <a id="3673" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a>
  <a id="SimplifierTag.forceDelayT"></a><a id="3689" href="VerifiedCompilation.html#3689" class="InductiveConstructor">forceDelayT</a> <a id="3701" class="Symbol">:</a> <a id="3703" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a>
  <a id="SimplifierTag.caseOfCaseT"></a><a id="3719" href="VerifiedCompilation.html#3719" class="InductiveConstructor">caseOfCaseT</a> <a id="3731" class="Symbol">:</a> <a id="3733" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a>
  <a id="SimplifierTag.caseReduceT"></a><a id="3749" href="VerifiedCompilation.html#3749" class="InductiveConstructor">caseReduceT</a> <a id="3761" class="Symbol">:</a> <a id="3763" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a>
  <a id="SimplifierTag.inlineT"></a><a id="3779" href="VerifiedCompilation.html#3779" class="InductiveConstructor">inlineT</a> <a id="3787" class="Symbol">:</a> <a id="3789" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a>
  <a id="SimplifierTag.cseT"></a><a id="3805" href="VerifiedCompilation.html#3805" class="InductiveConstructor">cseT</a> <a id="3810" class="Symbol">:</a> <a id="3812" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a>

<a id="3827" class="Symbol">{-#</a> <a id="3831" class="Keyword">FOREIGN</a> <a id="3839" class="Pragma">GHC</a> <a id="3843" class="Pragma">import</a> <a id="3850" class="Pragma">UntypedPlutusCore.Transform.Simplifier</a> <a id="3889" class="Symbol">#-}</a>
<a id="3893" class="Symbol">{-#</a> <a id="3897" class="Keyword">COMPILE</a> <a id="3905" class="Keyword">GHC</a> <a id="3909" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="3923" class="Pragma">=</a> <a id="3925" class="Pragma">data</a> <a id="3930" class="Pragma">SimplifierStage</a> <a id="3946" class="Pragma">(FloatDelay</a> <a id="3958" class="Pragma">|</a> <a id="3960" class="Pragma">ForceDelay</a> <a id="3971" class="Pragma">|</a> <a id="3973" class="Pragma">CaseOfCase</a> <a id="3984" class="Pragma">|</a> <a id="3986" class="Pragma">CaseReduce</a> <a id="3997" class="Pragma">|</a> <a id="3999" class="Pragma">Inline</a> <a id="4006" class="Pragma">|</a> <a id="4008" class="Pragma">CSE)</a> <a id="4013" class="Symbol">#-}</a>

<a id="4018" class="Keyword">data</a> <a id="Transformation"></a><a id="4023" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="4038" class="Symbol">:</a> <a id="4040" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="4054" class="Symbol">→</a> <a id="4056" href="VerifiedCompilation.UntypedTranslation.html#1431" class="Function">Relation</a> <a id="4065" class="Keyword">where</a>
  <a id="Transformation.isCoC"></a><a id="4073" href="VerifiedCompilation.html#4073" class="InductiveConstructor">isCoC</a> <a id="4079" class="Symbol">:</a> <a id="4081" class="Symbol">{</a><a id="4082" href="VerifiedCompilation.html#4082" class="Bound">X</a> <a id="4084" class="Symbol">:</a> <a id="4086" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4089" class="Symbol">}</a> <a id="4106" class="Symbol">→</a> <a id="4108" class="Symbol">{</a><a id="4109" href="VerifiedCompilation.html#4109" class="Bound">ast</a> <a id="4113" href="VerifiedCompilation.html#4113" class="Bound">ast&#39;</a> <a id="4118" class="Symbol">:</a> <a id="4120" href="VerifiedCompilation.html#4082" class="Bound">X</a> <a id="4122" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="4123" class="Symbol">}</a> <a id="4125" class="Symbol">→</a> <a id="4127" href="VerifiedCompilation.UCaseOfCase.html#2278" class="Function">UCC.CaseOfCase</a> <a id="4142" href="VerifiedCompilation.html#4109" class="Bound">ast</a> <a id="4146" href="VerifiedCompilation.html#4113" class="Bound">ast&#39;</a> <a id="4151" class="Symbol">→</a> <a id="4153" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="4168" href="VerifiedCompilation.html#3719" class="InductiveConstructor">caseOfCaseT</a> <a id="4180" href="VerifiedCompilation.html#4109" class="Bound">ast</a> <a id="4184" href="VerifiedCompilation.html#4113" class="Bound">ast&#39;</a>
  <a id="Transformation.isFD"></a><a id="4191" href="VerifiedCompilation.html#4191" class="InductiveConstructor">isFD</a> <a id="4196" class="Symbol">:</a> <a id="4198" class="Symbol">{</a><a id="4199" href="VerifiedCompilation.html#4199" class="Bound">X</a> <a id="4201" class="Symbol">:</a> <a id="4203" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4206" class="Symbol">}</a> <a id="4223" class="Symbol">→</a> <a id="4225" class="Symbol">{</a><a id="4226" href="VerifiedCompilation.html#4226" class="Bound">ast</a> <a id="4230" href="VerifiedCompilation.html#4230" class="Bound">ast&#39;</a> <a id="4235" class="Symbol">:</a> <a id="4237" href="VerifiedCompilation.html#4199" class="Bound">X</a> <a id="4239" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="4240" class="Symbol">}</a> <a id="4242" class="Symbol">→</a> <a id="4244" href="VerifiedCompilation.UForceDelay.html#7551" class="Function">UFD.ForceDelay</a> <a id="4259" href="VerifiedCompilation.html#4226" class="Bound">ast</a> <a id="4263" href="VerifiedCompilation.html#4230" class="Bound">ast&#39;</a> <a id="4268" class="Symbol">→</a> <a id="4270" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="4285" href="VerifiedCompilation.html#3689" class="InductiveConstructor">forceDelayT</a> <a id="4297" href="VerifiedCompilation.html#4226" class="Bound">ast</a> <a id="4301" href="VerifiedCompilation.html#4230" class="Bound">ast&#39;</a>
  <a id="Transformation.isFlD"></a><a id="4308" href="VerifiedCompilation.html#4308" class="InductiveConstructor">isFlD</a> <a id="4314" class="Symbol">:</a> <a id="4316" class="Symbol">{</a><a id="4317" href="VerifiedCompilation.html#4317" class="Bound">X</a> <a id="4319" class="Symbol">:</a> <a id="4321" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4324" class="Symbol">}</a> <a id="4341" class="Symbol">→</a> <a id="4343" class="Symbol">{</a><a id="4344" href="VerifiedCompilation.html#4344" class="Bound">ast</a> <a id="4348" href="VerifiedCompilation.html#4348" class="Bound">ast&#39;</a> <a id="4353" class="Symbol">:</a> <a id="4355" href="VerifiedCompilation.html#4317" class="Bound">X</a> <a id="4357" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="4358" class="Symbol">}</a> <a id="4360" class="Symbol">→</a> <a id="4362" href="VerifiedCompilation.UFloatDelay.html#5989" class="Function">UFlD.FloatDelay</a> <a id="4378" href="VerifiedCompilation.html#4344" class="Bound">ast</a> <a id="4382" href="VerifiedCompilation.html#4348" class="Bound">ast&#39;</a> <a id="4387" class="Symbol">→</a> <a id="4389" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="4404" href="VerifiedCompilation.html#3659" class="InductiveConstructor">floatDelayT</a> <a id="4416" href="VerifiedCompilation.html#4344" class="Bound">ast</a> <a id="4420" href="VerifiedCompilation.html#4348" class="Bound">ast&#39;</a>
  <a id="Transformation.isCSE"></a><a id="4427" href="VerifiedCompilation.html#4427" class="InductiveConstructor">isCSE</a> <a id="4433" class="Symbol">:</a> <a id="4435" class="Symbol">{</a><a id="4436" href="VerifiedCompilation.html#4436" class="Bound">X</a> <a id="4438" class="Symbol">:</a> <a id="4440" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4443" class="Symbol">}</a> <a id="4460" class="Symbol">→</a> <a id="4462" class="Symbol">{</a><a id="4463" href="VerifiedCompilation.html#4463" class="Bound">ast</a> <a id="4467" href="VerifiedCompilation.html#4467" class="Bound">ast&#39;</a> <a id="4472" class="Symbol">:</a> <a id="4474" href="VerifiedCompilation.html#4436" class="Bound">X</a> <a id="4476" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="4477" class="Symbol">}</a> <a id="4479" class="Symbol">→</a> <a id="4481" href="VerifiedCompilation.UCSE.html#1664" class="Function">UCSE.UntypedCSE</a> <a id="4497" href="VerifiedCompilation.html#4463" class="Bound">ast</a> <a id="4501" href="VerifiedCompilation.html#4467" class="Bound">ast&#39;</a> <a id="4506" class="Symbol">→</a> <a id="4508" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="4523" href="VerifiedCompilation.html#3805" class="InductiveConstructor">cseT</a> <a id="4528" href="VerifiedCompilation.html#4463" class="Bound">ast</a> <a id="4532" href="VerifiedCompilation.html#4467" class="Bound">ast&#39;</a>
  <a id="4539" class="Comment">-- TODO: the decision procedure for Inline is broken, so we leave it as &quot;not implemented&quot;</a>
  <a id="4631" class="Comment">-- isUInline : {X : Set} → {ast ast&#39; : X ⊢} → UInline.UInline ast ast&#39; → Transformation inlineT ast ast&#39;</a>
  <a id="Transformation.inlineNotImplemented"></a><a id="4753" href="VerifiedCompilation.html#4753" class="InductiveConstructor">inlineNotImplemented</a> <a id="4774" class="Symbol">:</a> <a id="4776" class="Symbol">{</a><a id="4777" href="VerifiedCompilation.html#4777" class="Bound">X</a> <a id="4779" class="Symbol">:</a> <a id="4781" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4784" class="Symbol">}</a> <a id="4801" class="Symbol">→</a> <a id="4803" class="Symbol">{</a><a id="4804" href="VerifiedCompilation.html#4804" class="Bound">ast</a> <a id="4808" href="VerifiedCompilation.html#4808" class="Bound">ast&#39;</a> <a id="4813" class="Symbol">:</a> <a id="4815" href="VerifiedCompilation.html#4777" class="Bound">X</a> <a id="4817" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="4818" class="Symbol">}</a> <a id="4820" class="Symbol">→</a> <a id="4822" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="4837" href="VerifiedCompilation.html#3779" class="InductiveConstructor">inlineT</a> <a id="4845" href="VerifiedCompilation.html#4804" class="Bound">ast</a> <a id="4849" href="VerifiedCompilation.html#4808" class="Bound">ast&#39;</a>
  <a id="Transformation.isCaseReduce"></a><a id="4856" href="VerifiedCompilation.html#4856" class="InductiveConstructor">isCaseReduce</a> <a id="4869" class="Symbol">:</a> <a id="4871" class="Symbol">{</a><a id="4872" href="VerifiedCompilation.html#4872" class="Bound">X</a> <a id="4874" class="Symbol">:</a> <a id="4876" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4879" class="Symbol">}</a> <a id="4896" class="Symbol">→</a> <a id="4898" class="Symbol">{</a><a id="4899" href="VerifiedCompilation.html#4899" class="Bound">ast</a> <a id="4903" href="VerifiedCompilation.html#4903" class="Bound">ast&#39;</a> <a id="4908" class="Symbol">:</a> <a id="4910" href="VerifiedCompilation.html#4872" class="Bound">X</a> <a id="4912" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="4913" class="Symbol">}</a> <a id="4915" class="Symbol">→</a> <a id="4917" href="VerifiedCompilation.UCaseReduce.html#2842" class="Function">UCR.UCaseReduce</a> <a id="4933" href="VerifiedCompilation.html#4899" class="Bound">ast</a> <a id="4937" href="VerifiedCompilation.html#4903" class="Bound">ast&#39;</a> <a id="4942" class="Symbol">→</a> <a id="4944" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="4959" href="VerifiedCompilation.html#3749" class="InductiveConstructor">caseReduceT</a> <a id="4971" href="VerifiedCompilation.html#4899" class="Bound">ast</a> <a id="4975" href="VerifiedCompilation.html#4903" class="Bound">ast&#39;</a>

<a id="4981" class="Keyword">data</a> <a id="Trace"></a><a id="4986" href="VerifiedCompilation.html#4986" class="Datatype">Trace</a> <a id="4992" class="Symbol">:</a> <a id="4994" class="Symbol">{</a> <a id="4996" href="VerifiedCompilation.html#4996" class="Bound">X</a> <a id="4998" class="Symbol">:</a> <a id="5000" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="5004" class="Symbol">}</a> <a id="5006" class="Symbol"></a> <a id="5022" class="Symbol">→</a> <a id="5024" href="Utils.html#5072" class="Datatype">List</a> <a id="5029" class="Symbol">(</a><a id="5030" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="5044" href="Utils.html#4834" class="Record Operator">×</a> <a id="5046" class="Symbol">(</a><a id="5047" href="VerifiedCompilation.html#4996" class="Bound">X</a> <a id="5049" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="5050" class="Symbol">)</a> <a id="5052" href="Utils.html#4834" class="Record Operator">×</a> <a id="5054" class="Symbol">(</a><a id="5055" href="VerifiedCompilation.html#4996" class="Bound">X</a> <a id="5057" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="5058" class="Symbol">))</a> <a id="5061" class="Symbol">→</a> <a id="5063" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="5068" class="Keyword">where</a>
  <a id="Trace.empty"></a><a id="5076" href="VerifiedCompilation.html#5076" class="InductiveConstructor">empty</a> <a id="5082" class="Symbol">:</a> <a id="5084" class="Symbol">{</a><a id="5085" href="VerifiedCompilation.html#5085" class="Bound">X</a> <a id="5087" class="Symbol">:</a> <a id="5089" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="5092" class="Symbol">}</a> <a id="5109" class="Symbol">→</a> <a id="5111" href="VerifiedCompilation.html#4986" class="Datatype">Trace</a> <a id="5117" class="Symbol">{</a><a id="5118" href="VerifiedCompilation.html#5085" class="Bound">X</a><a id="5119" class="Symbol">}</a> <a id="5121" href="Utils.html#5101" class="InductiveConstructor">[]</a>
  <a id="Trace.cons"></a><a id="5126" href="VerifiedCompilation.html#5126" class="InductiveConstructor">cons</a>
    <a id="5135" class="Symbol">:</a> <a id="5137" class="Symbol">{</a><a id="5138" href="VerifiedCompilation.html#5138" class="Bound">X</a> <a id="5140" class="Symbol">:</a> <a id="5142" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="5145" class="Symbol">}</a> 
    <a id="5167" class="Symbol">{</a><a id="5168" href="VerifiedCompilation.html#5168" class="Bound">tag</a> <a id="5172" class="Symbol">:</a> <a id="5174" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a><a id="5187" class="Symbol">}</a> <a id="5189" class="Symbol">{</a><a id="5190" href="VerifiedCompilation.html#5190" class="Bound">x</a> <a id="5192" href="VerifiedCompilation.html#5192" class="Bound">x&#39;</a> <a id="5195" class="Symbol">:</a> <a id="5197" href="VerifiedCompilation.html#5138" class="Bound">X</a> <a id="5199" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="5200" class="Symbol">}</a>
    <a id="5206" class="Symbol">{</a><a id="5207" href="VerifiedCompilation.html#5207" class="Bound">xs</a> <a id="5210" class="Symbol">:</a> <a id="5212" href="Utils.html#5072" class="Datatype">List</a> <a id="5217" class="Symbol">(</a><a id="5218" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="5232" href="Utils.html#4834" class="Record Operator">×</a> <a id="5234" class="Symbol">(</a><a id="5235" href="VerifiedCompilation.html#5138" class="Bound">X</a> <a id="5237" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="5238" class="Symbol">)</a> <a id="5240" href="Utils.html#4834" class="Record Operator">×</a> <a id="5242" class="Symbol">(</a><a id="5243" href="VerifiedCompilation.html#5138" class="Bound">X</a> <a id="5245" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="5246" class="Symbol">))}</a>
    <a id="5254" class="Symbol">→</a> <a id="5256" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="5271" href="VerifiedCompilation.html#5168" class="Bound">tag</a> <a id="5275" href="VerifiedCompilation.html#5190" class="Bound">x</a> <a id="5277" href="VerifiedCompilation.html#5192" class="Bound">x&#39;</a>
    <a id="5284" class="Symbol">→</a> <a id="5286" href="VerifiedCompilation.html#4986" class="Datatype">Trace</a> <a id="5292" href="VerifiedCompilation.html#5207" class="Bound">xs</a>
    <a id="5299" class="Symbol">→</a> <a id="5301" href="VerifiedCompilation.html#4986" class="Datatype">Trace</a> <a id="5307" class="Symbol">((</a><a id="5309" href="VerifiedCompilation.html#5168" class="Bound">tag</a> <a id="5313" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="5315" href="VerifiedCompilation.html#5190" class="Bound">x</a> <a id="5317" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="5319" href="VerifiedCompilation.html#5192" class="Bound">x&#39;</a><a id="5321" class="Symbol">)</a> <a id="5323" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="5325" href="VerifiedCompilation.html#5207" class="Bound">xs</a><a id="5327" class="Symbol">)</a>

<a id="isTransformation?"></a><a id="5330" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="5348" class="Symbol">:</a> <a id="5350" class="Symbol">{</a><a id="5351" href="VerifiedCompilation.html#5351" class="Bound">X</a> <a id="5353" class="Symbol">:</a> <a id="5355" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="5358" class="Symbol">}</a> <a id="5360" class="Symbol"></a> <a id="5376" class="Symbol">→</a> <a id="5378" class="Symbol">(</a><a id="5379" href="VerifiedCompilation.html#5379" class="Bound">tag</a> <a id="5383" class="Symbol">:</a> <a id="5385" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a><a id="5398" class="Symbol">)</a> <a id="5400" class="Symbol">→</a> <a id="5402" class="Symbol">(</a><a id="5403" href="VerifiedCompilation.html#5403" class="Bound">ast</a> <a id="5407" href="VerifiedCompilation.html#5407" class="Bound">ast&#39;</a> <a id="5412" class="Symbol">:</a> <a id="5414" href="VerifiedCompilation.html#5351" class="Bound">X</a> <a id="5416" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="5417" class="Symbol">)</a> <a id="5419" class="Symbol">→</a> <a id="5421" href="Relation.Nary.html#6405" class="Function">Nary.Decidable</a> <a id="5436" class="Symbol">(</a><a id="5437" href="VerifiedCompilation.html#4023" class="Datatype">Transformation</a> <a id="5452" href="VerifiedCompilation.html#5379" class="Bound">tag</a> <a id="5456" href="VerifiedCompilation.html#5403" class="Bound">ast</a> <a id="5460" href="VerifiedCompilation.html#5407" class="Bound">ast&#39;</a><a id="5464" class="Symbol">)</a>
<a id="5466" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="5484" href="VerifiedCompilation.html#5484" class="Bound">tag</a> <a id="5488" href="VerifiedCompilation.html#5488" class="Bound">ast</a> <a id="5492" href="VerifiedCompilation.html#5492" class="Bound">ast&#39;</a> <a id="5497" class="Keyword">with</a> <a id="5502" href="VerifiedCompilation.html#5484" class="Bound">tag</a>
<a id="5506" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="5524" href="VerifiedCompilation.html#5524" class="Bound">tag</a> <a id="5528" href="VerifiedCompilation.html#5528" class="Bound">ast</a> <a id="5532" href="VerifiedCompilation.html#5532" class="Bound">ast&#39;</a> <a id="5537" class="Symbol">|</a> <a id="5539" href="VerifiedCompilation.html#3659" class="InductiveConstructor">floatDelayT</a> <a id="5551" class="Keyword">with</a> <a id="5556" href="VerifiedCompilation.UFloatDelay.html#6125" class="Function">UFlD.isFloatDelay?</a> <a id="5575" href="VerifiedCompilation.html#5528" class="Bound">ast</a> <a id="5579" href="VerifiedCompilation.html#5532" class="Bound">ast&#39;</a>
<a id="5584" class="Symbol">...</a> <a id="5588" class="Symbol">|</a> <a id="5590" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="5593" href="VerifiedCompilation.html#5593" class="Bound">¬p</a> <a id="5596" class="Symbol">=</a> <a id="5598" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="5601" class="Symbol">λ</a> <a id="5603" class="Symbol">{</a> <a id="5605" class="Symbol">(</a><a id="5606" href="VerifiedCompilation.html#4308" class="InductiveConstructor">isFlD</a> <a id="5612" href="VerifiedCompilation.html#5612" class="Bound">x</a><a id="5613" class="Symbol">)</a> <a id="5615" class="Symbol">→</a> <a id="5617" href="VerifiedCompilation.html#5593" class="Bound">¬p</a> <a id="5620" href="VerifiedCompilation.html#5612" class="Bound">x</a> <a id="5622" class="Symbol">}</a>
<a id="5624" class="Symbol">...</a> <a id="5628" class="Symbol">|</a> <a id="5630" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="5634" href="VerifiedCompilation.html#5634" class="Bound">p</a> <a id="5636" class="Symbol">=</a> <a id="5638" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="5642" class="Symbol">(</a><a id="5643" href="VerifiedCompilation.html#4308" class="InductiveConstructor">isFlD</a> <a id="5649" href="VerifiedCompilation.html#5634" class="Bound">p</a><a id="5650" class="Symbol">)</a>
<a id="5652" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="5670" href="VerifiedCompilation.html#5670" class="Bound">tag</a> <a id="5674" href="VerifiedCompilation.html#5674" class="Bound">ast</a> <a id="5678" href="VerifiedCompilation.html#5678" class="Bound">ast&#39;</a> <a id="5683" class="Symbol">|</a> <a id="5685" href="VerifiedCompilation.html#3689" class="InductiveConstructor">forceDelayT</a> <a id="5697" class="Keyword">with</a> <a id="5702" href="VerifiedCompilation.UForceDelay.html#18028" class="Function">UFD.isForceDelay?</a> <a id="5720" href="VerifiedCompilation.html#5674" class="Bound">ast</a> <a id="5724" href="VerifiedCompilation.html#5678" class="Bound">ast&#39;</a>
<a id="5729" class="Symbol">...</a> <a id="5733" class="Symbol">|</a> <a id="5735" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="5738" href="VerifiedCompilation.html#5738" class="Bound">¬p</a> <a id="5741" class="Symbol">=</a> <a id="5743" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="5746" class="Symbol">λ</a> <a id="5748" class="Symbol">{</a> <a id="5750" class="Symbol">(</a><a id="5751" href="VerifiedCompilation.html#4191" class="InductiveConstructor">isFD</a> <a id="5756" href="VerifiedCompilation.html#5756" class="Bound">x</a><a id="5757" class="Symbol">)</a> <a id="5759" class="Symbol">→</a> <a id="5761" href="VerifiedCompilation.html#5738" class="Bound">¬p</a> <a id="5764" href="VerifiedCompilation.html#5756" class="Bound">x</a> <a id="5766" class="Symbol">}</a>
<a id="5768" class="Symbol">...</a> <a id="5772" class="Symbol">|</a> <a id="5774" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="5778" href="VerifiedCompilation.html#5778" class="Bound">p</a> <a id="5780" class="Symbol">=</a> <a id="5782" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="5786" class="Symbol">(</a><a id="5787" href="VerifiedCompilation.html#4191" class="InductiveConstructor">isFD</a> <a id="5792" href="VerifiedCompilation.html#5778" class="Bound">p</a><a id="5793" class="Symbol">)</a>
<a id="5795" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="5813" href="VerifiedCompilation.html#5813" class="Bound">tag</a> <a id="5817" href="VerifiedCompilation.html#5817" class="Bound">ast</a> <a id="5821" href="VerifiedCompilation.html#5821" class="Bound">ast&#39;</a> <a id="5826" class="Symbol">|</a> <a id="5828" href="VerifiedCompilation.html#3719" class="InductiveConstructor">caseOfCaseT</a> <a id="5840" class="Keyword">with</a> <a id="5845" href="VerifiedCompilation.UCaseOfCase.html#6099" class="Function">UCC.isCaseOfCase?</a> <a id="5863" href="VerifiedCompilation.html#5817" class="Bound">ast</a> <a id="5867" href="VerifiedCompilation.html#5821" class="Bound">ast&#39;</a>
<a id="5872" class="Symbol">...</a> <a id="5876" class="Symbol">|</a> <a id="5878" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="5881" href="VerifiedCompilation.html#5881" class="Bound">¬p</a> <a id="5884" class="Symbol">=</a> <a id="5886" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="5889" class="Symbol">λ</a> <a id="5891" class="Symbol">{</a> <a id="5893" class="Symbol">(</a><a id="5894" href="VerifiedCompilation.html#4073" class="InductiveConstructor">isCoC</a> <a id="5900" href="VerifiedCompilation.html#5900" class="Bound">x</a><a id="5901" class="Symbol">)</a> <a id="5903" class="Symbol">→</a> <a id="5905" href="VerifiedCompilation.html#5881" class="Bound">¬p</a> <a id="5908" href="VerifiedCompilation.html#5900" class="Bound">x</a> <a id="5910" class="Symbol">}</a>
<a id="5912" class="Symbol">...</a> <a id="5916" class="Symbol">|</a> <a id="5918" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="5922" href="VerifiedCompilation.html#5922" class="Bound">p</a> <a id="5924" class="Symbol">=</a> <a id="5926" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="5930" class="Symbol">(</a><a id="5931" href="VerifiedCompilation.html#4073" class="InductiveConstructor">isCoC</a> <a id="5937" href="VerifiedCompilation.html#5922" class="Bound">p</a><a id="5938" class="Symbol">)</a>
<a id="5940" class="Comment">-- isTransformation? tag ast ast&#39; | caseReduceT = yes caseReduceNotImplemented</a>
<a id="6019" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="6037" href="VerifiedCompilation.html#6037" class="Bound">tag</a> <a id="6041" href="VerifiedCompilation.html#6041" class="Bound">ast</a> <a id="6045" href="VerifiedCompilation.html#6045" class="Bound">ast&#39;</a> <a id="6050" class="Symbol">|</a> <a id="6052" href="VerifiedCompilation.html#3749" class="InductiveConstructor">caseReduceT</a> <a id="6064" class="Keyword">with</a> <a id="6069" href="VerifiedCompilation.UCaseReduce.html#1954" class="Function">UCR.isCaseReduce?</a> <a id="6087" href="VerifiedCompilation.html#6041" class="Bound">ast</a> <a id="6091" href="VerifiedCompilation.html#6045" class="Bound">ast&#39;</a>
<a id="6096" class="Symbol">...</a> <a id="6100" class="Symbol">|</a> <a id="6102" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6105" href="VerifiedCompilation.html#6105" class="Bound">¬p</a> <a id="6108" class="Symbol">=</a> <a id="6110" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6113" class="Symbol">λ</a> <a id="6115" class="Symbol">{</a> <a id="6117" class="Symbol">(</a><a id="6118" href="VerifiedCompilation.html#4856" class="InductiveConstructor">isCaseReduce</a> <a id="6131" href="VerifiedCompilation.html#6131" class="Bound">x</a><a id="6132" class="Symbol">)</a> <a id="6134" class="Symbol">→</a> <a id="6136" href="VerifiedCompilation.html#6105" class="Bound">¬p</a> <a id="6139" href="VerifiedCompilation.html#6131" class="Bound">x</a> <a id="6141" class="Symbol">}</a>
<a id="6143" class="Symbol">...</a> <a id="6147" class="Symbol">|</a> <a id="6149" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6153" href="VerifiedCompilation.html#6153" class="Bound">p</a> <a id="6155" class="Symbol">=</a> <a id="6157" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6161" class="Symbol">(</a><a id="6162" href="VerifiedCompilation.html#4856" class="InductiveConstructor">isCaseReduce</a> <a id="6175" href="VerifiedCompilation.html#6153" class="Bound">p</a><a id="6176" class="Symbol">)</a>
<a id="6178" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="6196" href="VerifiedCompilation.html#6196" class="Bound">tag</a> <a id="6200" href="VerifiedCompilation.html#6200" class="Bound">ast</a> <a id="6204" href="VerifiedCompilation.html#6204" class="Bound">ast&#39;</a> <a id="6209" class="Symbol">|</a> <a id="6211" href="VerifiedCompilation.html#3779" class="InductiveConstructor">inlineT</a> <a id="6219" class="Symbol">=</a> <a id="6221" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6225" href="VerifiedCompilation.html#4753" class="InductiveConstructor">inlineNotImplemented</a>
<a id="6246" class="Comment">-- isTransformation? tag ast ast&#39; | inlineT with UInline.isInline? ast ast&#39;</a>
<a id="6322" class="Comment">-- ... | no ¬p = no λ { (isUInline x) → ¬p x }</a>
<a id="6369" class="Comment">-- ... | yes p = yes (isUInline p)</a>
<a id="6404" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="6422" href="VerifiedCompilation.html#6422" class="Bound">tag</a> <a id="6426" href="VerifiedCompilation.html#6426" class="Bound">ast</a> <a id="6430" href="VerifiedCompilation.html#6430" class="Bound">ast&#39;</a> <a id="6435" class="Symbol">|</a> <a id="6437" href="VerifiedCompilation.html#3805" class="InductiveConstructor">cseT</a> <a id="6442" class="Keyword">with</a> <a id="6447" href="VerifiedCompilation.UCSE.html#1803" class="Function">UCSE.isUntypedCSE?</a> <a id="6466" href="VerifiedCompilation.html#6426" class="Bound">ast</a> <a id="6470" href="VerifiedCompilation.html#6430" class="Bound">ast&#39;</a>
<a id="6475" class="Symbol">...</a> <a id="6479" class="Symbol">|</a> <a id="6481" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6484" href="VerifiedCompilation.html#6484" class="Bound">¬p</a> <a id="6487" class="Symbol">=</a> <a id="6489" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6492" class="Symbol">λ</a> <a id="6494" class="Symbol">{</a> <a id="6496" class="Symbol">(</a><a id="6497" href="VerifiedCompilation.html#4427" class="InductiveConstructor">isCSE</a> <a id="6503" href="VerifiedCompilation.html#6503" class="Bound">x</a><a id="6504" class="Symbol">)</a> <a id="6506" class="Symbol">→</a> <a id="6508" href="VerifiedCompilation.html#6484" class="Bound">¬p</a> <a id="6511" href="VerifiedCompilation.html#6503" class="Bound">x</a> <a id="6513" class="Symbol">}</a>
<a id="6515" class="Symbol">...</a> <a id="6519" class="Symbol">|</a> <a id="6521" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6525" href="VerifiedCompilation.html#6525" class="Bound">p</a> <a id="6527" class="Symbol">=</a> <a id="6529" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6533" class="Symbol">(</a><a id="6534" href="VerifiedCompilation.html#4427" class="InductiveConstructor">isCSE</a> <a id="6540" href="VerifiedCompilation.html#6525" class="Bound">p</a><a id="6541" class="Symbol">)</a>

<a id="isTrace?"></a><a id="6544" href="VerifiedCompilation.html#6544" class="Function">isTrace?</a> <a id="6553" class="Symbol">:</a> <a id="6555" class="Symbol">{</a><a id="6556" href="VerifiedCompilation.html#6556" class="Bound">X</a> <a id="6558" class="Symbol">:</a> <a id="6560" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="6563" class="Symbol">}</a> <a id="6565" class="Symbol"></a> <a id="6581" class="Symbol">→</a> <a id="6583" href="Relation.Unary.html#4543" class="Function">Unary.Decidable</a> <a id="6599" class="Symbol">(</a><a id="6600" href="VerifiedCompilation.html#4986" class="Datatype">Trace</a> <a id="6606" class="Symbol">{</a><a id="6607" href="VerifiedCompilation.html#6556" class="Bound">X</a><a id="6608" class="Symbol">})</a>
<a id="6611" href="VerifiedCompilation.html#6544" class="Function">isTrace?</a> <a id="6620" href="Utils.html#5101" class="InductiveConstructor">[]</a> <a id="6623" class="Symbol">=</a> <a id="6625" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6629" href="VerifiedCompilation.html#5076" class="InductiveConstructor">empty</a>
<a id="6635" href="VerifiedCompilation.html#6544" class="Function">isTrace?</a> <a id="6644" class="Symbol">((</a><a id="6646" href="VerifiedCompilation.html#6646" class="Bound">tag</a> <a id="6650" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="6652" href="VerifiedCompilation.html#6652" class="Bound">x₁</a> <a id="6655" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="6657" href="VerifiedCompilation.html#6657" class="Bound">x₂</a><a id="6659" class="Symbol">)</a> <a id="6661" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="6663" href="VerifiedCompilation.html#6663" class="Bound">xs</a><a id="6665" class="Symbol">)</a> <a id="6667" class="Keyword">with</a> <a id="6672" href="VerifiedCompilation.html#6544" class="Function">isTrace?</a> <a id="6681" href="VerifiedCompilation.html#6663" class="Bound">xs</a>
<a id="6684" class="Symbol">...</a> <a id="6688" class="Symbol">|</a> <a id="6690" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6693" href="VerifiedCompilation.html#6693" class="Bound">¬pₜ</a> <a id="6697" class="Symbol">=</a> <a id="6699" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6702" class="Symbol">λ</a> <a id="6704" class="Symbol">{(</a><a id="6706" href="VerifiedCompilation.html#5126" class="InductiveConstructor">cons</a> <a id="6711" class="Symbol">_</a> <a id="6713" href="VerifiedCompilation.html#6713" class="Bound">rest</a><a id="6717" class="Symbol">)</a> <a id="6719" class="Symbol">→</a> <a id="6721" href="VerifiedCompilation.html#6693" class="Bound">¬pₜ</a> <a id="6725" href="VerifiedCompilation.html#6713" class="Bound">rest</a><a id="6729" class="Symbol">}</a>
<a id="6731" class="Symbol">...</a> <a id="6735" class="Symbol">|</a> <a id="6737" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6741" href="VerifiedCompilation.html#6741" class="Bound">pₜ</a> <a id="6744" class="Keyword">with</a> <a id="6749" href="VerifiedCompilation.html#5330" class="Function">isTransformation?</a> <a id="6767" class="Bound">tag</a> <a id="6771" class="Bound">x₁</a> <a id="6774" class="Bound">x₂</a>
<a id="6777" class="Symbol">...</a>                 <a id="6797" class="Symbol">|</a> <a id="6799" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6802" href="VerifiedCompilation.html#6802" class="Bound">¬pₑ</a> <a id="6806" class="Symbol">=</a> <a id="6808" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6811" class="Symbol">λ</a> <a id="6813" class="Symbol">{(</a><a id="6815" href="VerifiedCompilation.html#5126" class="InductiveConstructor">cons</a> <a id="6820" href="VerifiedCompilation.html#6820" class="Bound">x</a> <a id="6822" class="Symbol">_)</a> <a id="6825" class="Symbol">→</a> <a id="6827" href="VerifiedCompilation.html#6802" class="Bound">¬pₑ</a> <a id="6831" href="VerifiedCompilation.html#6820" class="Bound">x</a><a id="6832" class="Symbol">}</a>
<a id="6834" class="Symbol">...</a>                 <a id="6854" class="Symbol">|</a> <a id="6856" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6860" href="VerifiedCompilation.html#6860" class="Bound">pₑ</a> <a id="6863" class="Symbol">=</a> <a id="6865" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6869" class="Symbol">(</a><a id="6870" href="VerifiedCompilation.html#5126" class="InductiveConstructor">cons</a> <a id="6875" href="VerifiedCompilation.html#6860" class="Bound">pₑ</a> <a id="6878" class="Bound">pₜ</a><a id="6880" class="Symbol">)</a>


</pre>

<h2 id="the-certification-function">The certification function</h2>

<p>The <code class="language-plaintext highlighter-rouge">runCertifier</code> function is the top-level function which can be called by the compiler.</p>

<pre class="Agda">
<a id="7018" class="Symbol">{-#</a> <a id="7022" class="Keyword">FOREIGN</a> <a id="7030" class="Pragma">GHC</a> <a id="7034" class="Pragma">import</a> <a id="7041" class="Pragma">qualified</a> <a id="7051" class="Pragma">Data.Text.IO</a> <a id="7064" class="Pragma">as</a> <a id="7067" class="Pragma">TextIO</a> <a id="7074" class="Symbol">#-}</a>
<a id="7078" class="Symbol">{-#</a> <a id="7082" class="Keyword">FOREIGN</a> <a id="7090" class="Pragma">GHC</a> <a id="7094" class="Pragma">import</a> <a id="7101" class="Pragma">qualified</a> <a id="7111" class="Pragma">System.IO</a> <a id="7121" class="Pragma">as</a> <a id="7124" class="Pragma">IO</a> <a id="7127" class="Symbol">#-}</a>
<a id="7131" class="Symbol">{-#</a> <a id="7135" class="Keyword">FOREIGN</a> <a id="7143" class="Pragma">GHC</a> <a id="7147" class="Pragma">import</a> <a id="7154" class="Pragma">qualified</a> <a id="7164" class="Pragma">Data.Text</a> <a id="7174" class="Pragma">as</a> <a id="7177" class="Pragma">Text</a> <a id="7182" class="Symbol">#-}</a>
<a id="7186" class="Symbol">{-#</a> <a id="7190" class="Keyword">FOREIGN</a> <a id="7198" class="Pragma">GHC</a> <a id="7202" class="Pragma">import</a> <a id="7209" class="Pragma">PlutusCore.Compiler.Types</a> <a id="7235" class="Symbol">#-}</a>

<a id="7240" class="Keyword">postulate</a> <a id="FileHandle"></a><a id="7250" href="VerifiedCompilation.html#7250" class="Postulate">FileHandle</a> <a id="7261" class="Symbol">:</a> <a id="7263" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="7267" class="Symbol">{-#</a> <a id="7271" class="Keyword">COMPILE</a> <a id="7279" class="Keyword">GHC</a> <a id="7283" href="VerifiedCompilation.html#7250" class="Postulate">FileHandle</a> <a id="7294" class="Pragma">=</a> <a id="7296" class="Pragma">type</a> <a id="7301" class="Pragma">IO.Handle</a> <a id="7311" class="Symbol">#-}</a>

<a id="7316" class="Keyword">postulate</a>
  <a id="writeFile"></a><a id="7328" href="VerifiedCompilation.html#7328" class="Postulate">writeFile</a> <a id="7338" class="Symbol">:</a> <a id="7340" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7347" class="Symbol">→</a> <a id="7349" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7356" class="Symbol">→</a> <a id="7358" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7361" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="stderr"></a><a id="7365" href="VerifiedCompilation.html#7365" class="Postulate">stderr</a> <a id="7372" class="Symbol">:</a> <a id="7374" href="VerifiedCompilation.html#7250" class="Postulate">FileHandle</a>
  <a id="hPutStrLn"></a><a id="7387" href="VerifiedCompilation.html#7387" class="Postulate">hPutStrLn</a> <a id="7397" class="Symbol">:</a> <a id="7399" href="VerifiedCompilation.html#7250" class="Postulate">FileHandle</a> <a id="7410" class="Symbol">→</a> <a id="7412" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7419" class="Symbol">→</a> <a id="7421" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7424" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="putStrLn"></a><a id="7428" href="VerifiedCompilation.html#7428" class="Postulate">putStrLn</a> <a id="7437" class="Symbol">:</a> <a id="7439" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7446" class="Symbol">→</a> <a id="7448" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7451" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="7454" class="Symbol">{-#</a> <a id="7458" class="Keyword">COMPILE</a> <a id="7466" class="Keyword">GHC</a> <a id="7470" href="VerifiedCompilation.html#7328" class="Postulate">writeFile</a> <a id="7480" class="Pragma">=</a> <a id="7482" class="Pragma">\f</a> <a id="7485" class="Pragma">-&gt;</a> <a id="7488" class="Pragma">TextIO.writeFile</a> <a id="7505" class="Pragma">(Text.unpack</a> <a id="7518" class="Pragma">f)</a> <a id="7521" class="Symbol">#-}</a>
<a id="7525" class="Symbol">{-#</a> <a id="7529" class="Keyword">COMPILE</a> <a id="7537" class="Keyword">GHC</a> <a id="7541" href="VerifiedCompilation.html#7365" class="Postulate">stderr</a> <a id="7548" class="Pragma">=</a> <a id="7550" class="Pragma">IO.stderr</a> <a id="7560" class="Symbol">#-}</a>
<a id="7564" class="Symbol">{-#</a> <a id="7568" class="Keyword">COMPILE</a> <a id="7576" class="Keyword">GHC</a> <a id="7580" href="VerifiedCompilation.html#7387" class="Postulate">hPutStrLn</a> <a id="7590" class="Pragma">=</a> <a id="7592" class="Pragma">TextIO.hPutStr</a> <a id="7607" class="Symbol">#-}</a>
<a id="7611" class="Symbol">{-#</a> <a id="7615" class="Keyword">COMPILE</a> <a id="7623" class="Keyword">GHC</a> <a id="7627" href="VerifiedCompilation.html#7428" class="Postulate">putStrLn</a> <a id="7636" class="Pragma">=</a> <a id="7638" class="Pragma">TextIO.putStrLn</a> <a id="7654" class="Symbol">#-}</a>

<a id="buildPairs"></a><a id="7659" href="VerifiedCompilation.html#7659" class="Function">buildPairs</a> <a id="7670" class="Symbol">:</a> <a id="7672" class="Symbol">{</a><a id="7673" href="VerifiedCompilation.html#7673" class="Bound">X</a> <a id="7675" class="Symbol">:</a> <a id="7677" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7680" class="Symbol">}</a> <a id="7682" class="Symbol">→</a> <a id="7684" href="Utils.html#5072" class="Datatype">List</a> <a id="7689" class="Symbol">(</a><a id="7690" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7696" href="VerifiedCompilation.html#7673" class="Bound">X</a> <a id="7698" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="7699" class="Symbol">)</a> <a id="7701" class="Symbol">-&gt;</a> <a id="7704" href="Utils.html#5072" class="Datatype">List</a> <a id="7709" class="Symbol">((</a><a id="7711" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7717" href="VerifiedCompilation.html#7673" class="Bound">X</a> <a id="7719" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="7720" class="Symbol">)</a> <a id="7722" href="Utils.html#4834" class="Record Operator">×</a> <a id="7724" class="Symbol">(</a><a id="7725" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7731" href="VerifiedCompilation.html#7673" class="Bound">X</a> <a id="7733" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="7734" class="Symbol">))</a>
<a id="7737" href="VerifiedCompilation.html#7659" class="Function">buildPairs</a> <a id="7748" href="Utils.html#5101" class="InductiveConstructor">[]</a> <a id="7751" class="Symbol">=</a> <a id="7753" href="Utils.html#5101" class="InductiveConstructor">[]</a>
<a id="7756" href="VerifiedCompilation.html#7659" class="Function">buildPairs</a> <a id="7767" class="Symbol">(</a><a id="7768" href="VerifiedCompilation.html#7768" class="Bound">x</a> <a id="7770" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7772" href="Utils.html#5101" class="InductiveConstructor">[]</a><a id="7774" class="Symbol">)</a> <a id="7776" class="Symbol">=</a> <a id="7778" class="Symbol">(</a><a id="7779" href="VerifiedCompilation.html#7768" class="Bound">x</a> <a id="7781" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="7783" href="VerifiedCompilation.html#7768" class="Bound">x</a><a id="7784" class="Symbol">)</a> <a id="7786" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7788" href="Utils.html#5101" class="InductiveConstructor">[]</a>
<a id="7791" href="VerifiedCompilation.html#7659" class="Function">buildPairs</a> <a id="7802" class="Symbol">(</a><a id="7803" href="VerifiedCompilation.html#7803" class="Bound">x₁</a> <a id="7806" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7808" class="Symbol">(</a><a id="7809" href="VerifiedCompilation.html#7809" class="Bound">x₂</a> <a id="7812" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7814" href="VerifiedCompilation.html#7814" class="Bound">xs</a><a id="7816" class="Symbol">))</a> <a id="7819" class="Symbol">=</a> <a id="7821" class="Symbol">(</a><a id="7822" href="VerifiedCompilation.html#7803" class="Bound">x₁</a> <a id="7825" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="7827" href="VerifiedCompilation.html#7809" class="Bound">x₂</a><a id="7829" class="Symbol">)</a> <a id="7831" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7833" href="VerifiedCompilation.html#7659" class="Function">buildPairs</a> <a id="7844" class="Symbol">(</a><a id="7845" href="VerifiedCompilation.html#7809" class="Bound">x₂</a> <a id="7848" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7850" href="VerifiedCompilation.html#7814" class="Bound">xs</a><a id="7852" class="Symbol">)</a>

<a id="traverseEitherList"></a><a id="7855" href="VerifiedCompilation.html#7855" class="Function">traverseEitherList</a> <a id="7874" class="Symbol">:</a> <a id="7876" class="Symbol">{</a><a id="7877" href="VerifiedCompilation.html#7877" class="Bound">A</a> <a id="7879" href="VerifiedCompilation.html#7879" class="Bound">B</a> <a id="7881" href="VerifiedCompilation.html#7881" class="Bound">E</a> <a id="7883" class="Symbol">:</a> <a id="7885" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7888" class="Symbol">}</a> <a id="7890" class="Symbol">→</a> <a id="7892" class="Symbol">(</a><a id="7893" href="VerifiedCompilation.html#7877" class="Bound">A</a> <a id="7895" class="Symbol">→</a> <a id="7897" href="Utils.html#1125" class="Datatype">Either</a> <a id="7904" href="VerifiedCompilation.html#7881" class="Bound">E</a> <a id="7906" href="VerifiedCompilation.html#7879" class="Bound">B</a><a id="7907" class="Symbol">)</a> <a id="7909" class="Symbol">→</a> <a id="7911" href="Utils.html#5072" class="Datatype">List</a> <a id="7916" class="Symbol">(</a><a id="7917" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="7931" href="Utils.html#4834" class="Record Operator">×</a> <a id="7933" href="VerifiedCompilation.html#7877" class="Bound">A</a> <a id="7935" href="Utils.html#4834" class="Record Operator">×</a> <a id="7937" href="VerifiedCompilation.html#7877" class="Bound">A</a><a id="7938" class="Symbol">)</a> <a id="7940" class="Symbol">→</a> <a id="7942" href="Utils.html#1125" class="Datatype">Either</a> <a id="7949" href="VerifiedCompilation.html#7881" class="Bound">E</a> <a id="7951" class="Symbol">(</a><a id="7952" href="Utils.html#5072" class="Datatype">List</a> <a id="7957" class="Symbol">(</a><a id="7958" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="7972" href="Utils.html#4834" class="Record Operator">×</a> <a id="7974" href="VerifiedCompilation.html#7879" class="Bound">B</a> <a id="7976" href="Utils.html#4834" class="Record Operator">×</a> <a id="7978" href="VerifiedCompilation.html#7879" class="Bound">B</a><a id="7979" class="Symbol">))</a>
<a id="7982" href="VerifiedCompilation.html#7855" class="Function">traverseEitherList</a> <a id="8001" class="Symbol">_</a> <a id="8003" href="Utils.html#5101" class="InductiveConstructor">[]</a> <a id="8006" class="Symbol">=</a> <a id="8008" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="8013" href="Utils.html#5101" class="InductiveConstructor">[]</a>
<a id="8016" href="VerifiedCompilation.html#7855" class="Function">traverseEitherList</a> <a id="8035" href="VerifiedCompilation.html#8035" class="Bound">f</a> <a id="8037" class="Symbol">((</a><a id="8039" href="VerifiedCompilation.html#8039" class="Bound">tag</a> <a id="8043" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="8045" href="VerifiedCompilation.html#8045" class="Bound">before</a> <a id="8052" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="8054" href="VerifiedCompilation.html#8054" class="Bound">after</a><a id="8059" class="Symbol">)</a> <a id="8061" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="8063" href="VerifiedCompilation.html#8063" class="Bound">xs</a><a id="8065" class="Symbol">)</a> <a id="8067" class="Keyword">with</a> <a id="8072" href="VerifiedCompilation.html#8035" class="Bound">f</a> <a id="8074" href="VerifiedCompilation.html#8045" class="Bound">before</a>
<a id="8081" class="Symbol">...</a> <a id="8085" class="Symbol">|</a> <a id="8087" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="8092" href="VerifiedCompilation.html#8092" class="Bound">e</a> <a id="8094" class="Symbol">=</a> <a id="8096" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="8101" href="VerifiedCompilation.html#8092" class="Bound">e</a>
<a id="8103" class="Symbol">...</a> <a id="8107" class="Symbol">|</a> <a id="8109" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="8114" href="VerifiedCompilation.html#8114" class="Bound">b</a> <a id="8116" class="Keyword">with</a> <a id="8121" class="Bound">f</a> <a id="8123" class="Bound">after</a>
<a id="8129" class="Symbol">...</a> <a id="8133" class="Symbol">|</a> <a id="8135" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="8140" href="VerifiedCompilation.html#8140" class="Bound">e</a> <a id="8142" class="Symbol">=</a> <a id="8144" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="8149" href="VerifiedCompilation.html#8140" class="Bound">e</a>
<a id="8151" class="Symbol">...</a> <a id="8155" class="Symbol">|</a> <a id="8157" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="8162" href="VerifiedCompilation.html#8162" class="Bound">a</a> <a id="8164" class="Keyword">with</a> <a id="8169" href="VerifiedCompilation.html#7855" class="Function">traverseEitherList</a> <a id="8188" class="Bound">f</a> <a id="8190" class="Bound">xs</a>
<a id="8193" class="Symbol">...</a> <a id="8197" class="Symbol">|</a> <a id="8199" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="8204" href="VerifiedCompilation.html#8204" class="Bound">e</a> <a id="8206" class="Symbol">=</a> <a id="8208" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="8213" href="VerifiedCompilation.html#8204" class="Bound">e</a>
<a id="8215" class="Symbol">...</a> <a id="8219" class="Symbol">|</a> <a id="8221" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="8226" href="VerifiedCompilation.html#8226" class="Bound">xs&#39;</a> <a id="8230" class="Symbol">=</a> <a id="8232" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="8237" class="Symbol">(((</a><a id="8240" class="Bound">tag</a> <a id="8244" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="8246" class="Bound">b</a> <a id="8248" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="8250" class="Bound">a</a><a id="8251" class="Symbol">))</a> <a id="8254" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="8256" href="VerifiedCompilation.html#8226" class="Bound">xs&#39;</a><a id="8259" class="Symbol">)</a>

<a id="8262" class="Keyword">data</a> <a id="Proof"></a><a id="8267" href="VerifiedCompilation.html#8267" class="Datatype">Proof</a> <a id="8273" class="Symbol">:</a> <a id="8275" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="8280" class="Keyword">where</a>
  <a id="Proof.proof"></a><a id="8288" href="VerifiedCompilation.html#8288" class="InductiveConstructor">proof</a>
    <a id="8298" class="Symbol">:</a> <a id="8300" class="Symbol">{</a><a id="8301" href="VerifiedCompilation.html#8301" class="Bound">X</a> <a id="8303" class="Symbol">:</a> <a id="8305" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="8308" class="Symbol">}</a> <a id="8310" class="Symbol">{</a><a id="8311" href="VerifiedCompilation.html#8311" class="Bound">result</a> <a id="8318" class="Symbol">:</a> <a id="8320" href="Utils.html#5072" class="Datatype">List</a> <a id="8325" class="Symbol">(</a><a id="8326" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="8340" href="Utils.html#4834" class="Record Operator">×</a> <a id="8342" class="Symbol">(</a><a id="8343" href="VerifiedCompilation.html#8301" class="Bound">X</a> <a id="8345" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="8346" class="Symbol">)</a> <a id="8348" href="Utils.html#4834" class="Record Operator">×</a> <a id="8350" class="Symbol">(</a><a id="8351" href="VerifiedCompilation.html#8301" class="Bound">X</a> <a id="8353" href="Untyped.html#1671" class="Datatype Operator">⊢</a><a id="8354" class="Symbol">))}</a> <a id="8358" class="Symbol"></a>
    <a id="8378" class="Symbol">→</a> <a id="8380" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="8384" class="Symbol">(</a><a id="8385" href="VerifiedCompilation.html#4986" class="Datatype">Trace</a> <a id="8391" class="Symbol">{</a><a id="8392" href="VerifiedCompilation.html#8301" class="Bound">X</a><a id="8393" class="Symbol">}</a> <a id="8395" href="VerifiedCompilation.html#8311" class="Bound">result</a><a id="8401" class="Symbol">)</a>
    <a id="8407" class="Symbol">→</a> <a id="8409" href="VerifiedCompilation.html#8267" class="Datatype">Proof</a>

<a id="runCertifier"></a><a id="8416" href="VerifiedCompilation.html#8416" class="Function">runCertifier</a> <a id="8429" class="Symbol">:</a> <a id="8431" href="Utils.html#5072" class="Datatype">List</a> <a id="8436" class="Symbol">(</a><a id="8437" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="8451" href="Utils.html#4834" class="Record Operator">×</a> <a id="8453" href="RawU.html#6377" class="Datatype">Untyped</a> <a id="8461" href="Utils.html#4834" class="Record Operator">×</a> <a id="8463" href="RawU.html#6377" class="Datatype">Untyped</a><a id="8470" class="Symbol">)</a> <a id="8472" class="Symbol">→</a> <a id="8474" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8480" href="VerifiedCompilation.html#8267" class="Datatype">Proof</a>
<a id="8486" href="VerifiedCompilation.html#8416" class="Function">runCertifier</a> <a id="8499" href="VerifiedCompilation.html#8499" class="Bound">rawInput</a> <a id="8508" class="Keyword">with</a> <a id="8513" href="VerifiedCompilation.html#7855" class="Function">traverseEitherList</a> <a id="8532" class="Symbol">(</a><a id="8533" href="Untyped.html#6966" class="Function">toWellScoped</a> <a id="8546" class="Symbol">{</a><a id="8547" href="Data.Empty.html#914" class="Function">⊥</a><a id="8548" class="Symbol">})</a> <a id="8551" href="VerifiedCompilation.html#8499" class="Bound">rawInput</a>
<a id="8560" class="Symbol">...</a> <a id="8564" class="Symbol">|</a> <a id="8566" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="8571" class="Symbol">_</a> <a id="8573" class="Symbol">=</a> <a id="8575" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8583" class="Symbol">...</a> <a id="8587" class="Symbol">|</a> <a id="8589" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="8594" href="VerifiedCompilation.html#8594" class="Bound">inputTrace</a> <a id="8605" class="Symbol">=</a> <a id="8607" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8612" class="Symbol">(</a><a id="8613" href="VerifiedCompilation.html#8288" class="InductiveConstructor">proof</a> <a id="8619" class="Symbol">(</a><a id="8620" href="VerifiedCompilation.html#6544" class="Function">isTrace?</a> <a id="8629" href="VerifiedCompilation.html#8594" class="Bound">inputTrace</a><a id="8639" class="Symbol">))</a>

<a id="8643" class="Keyword">open</a> <a id="8648" class="Keyword">import</a> <a id="8655" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="8670" class="Keyword">using</a> <a id="8676" class="Symbol">(</a><a id="8677" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="8681" class="Symbol">;</a> <a id="8683" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="8688" class="Symbol">;</a> <a id="8690" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="8694" class="Symbol">)</a>
<a id="8696" class="Keyword">open</a> <a id="8701" class="Keyword">import</a> <a id="8708" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a> <a id="8730" class="Keyword">using</a> <a id="8736" class="Symbol">(</a><a id="8737" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="8740" class="Symbol">;</a> <a id="8742" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="8746" class="Symbol">)</a>

<a id="passed?"></a><a id="8749" href="VerifiedCompilation.html#8749" class="Function">passed?</a> <a id="8757" class="Symbol">:</a> <a id="8759" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8765" href="VerifiedCompilation.html#8267" class="Datatype">Proof</a> <a id="8771" class="Symbol">→</a> <a id="8773" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="8778" href="VerifiedCompilation.html#8749" class="Function">passed?</a> <a id="8786" class="Symbol">(</a><a id="8787" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8792" class="Symbol">(</a><a id="8793" href="VerifiedCompilation.html#8288" class="InductiveConstructor">proof</a> <a id="8799" class="Symbol">(</a><a id="8800" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="8803" href="VerifiedCompilation.html#8803" class="Bound">¬a</a><a id="8805" class="Symbol">)))</a> <a id="8809" class="Symbol">=</a> <a id="8811" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="8817" href="VerifiedCompilation.html#8749" class="Function">passed?</a> <a id="8825" class="Symbol">(</a><a id="8826" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8831" class="Symbol">(</a><a id="8832" href="VerifiedCompilation.html#8288" class="InductiveConstructor">proof</a> <a id="8838" class="Symbol">(</a><a id="8839" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="8843" href="VerifiedCompilation.html#8843" class="Bound">a</a><a id="8844" class="Symbol">)))</a> <a id="8848" class="Symbol">=</a> <a id="8850" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="8855" href="VerifiedCompilation.html#8749" class="Function">passed?</a> <a id="8863" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8871" class="Symbol">=</a> <a id="8873" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>

<a id="runCertifierMain"></a><a id="8880" href="VerifiedCompilation.html#8880" class="Function">runCertifierMain</a> <a id="8897" class="Symbol">:</a> <a id="8899" href="Utils.html#5072" class="Datatype">List</a> <a id="8904" class="Symbol">(</a><a id="8905" href="VerifiedCompilation.html#3631" class="Datatype">SimplifierTag</a> <a id="8919" href="Utils.html#4834" class="Record Operator">×</a> <a id="8921" href="RawU.html#6377" class="Datatype">Untyped</a> <a id="8929" href="Utils.html#4834" class="Record Operator">×</a> <a id="8931" href="RawU.html#6377" class="Datatype">Untyped</a><a id="8938" class="Symbol">)</a> <a id="8940" class="Symbol">→</a> <a id="8942" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="8945" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="8947" href="VerifiedCompilation.html#8880" class="Function">runCertifierMain</a> <a id="8964" href="VerifiedCompilation.html#8964" class="Bound">asts</a> <a id="8969" class="Keyword">with</a> <a id="8974" href="VerifiedCompilation.html#8416" class="Function">runCertifier</a> <a id="8987" href="VerifiedCompilation.html#8964" class="Bound">asts</a>
<a id="8992" class="Symbol">...</a> <a id="8996" class="Symbol">|</a> <a id="8998" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9003" class="Symbol">(</a><a id="9004" href="VerifiedCompilation.html#8288" class="InductiveConstructor">proof</a> <a id="9010" class="Symbol">(</a><a id="9011" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="9015" href="VerifiedCompilation.html#9015" class="Bound">a</a><a id="9016" class="Symbol">))</a> <a id="9019" class="Symbol">=</a> 
  <a id="9024" href="VerifiedCompilation.html#7428" class="Postulate">putStrLn</a> <a id="9033" class="String">&quot;The compilation was successfully certified.&quot;</a>
<a id="9079" class="Symbol">...</a> <a id="9083" class="Symbol">|</a> <a id="9085" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9090" class="Symbol">(</a><a id="9091" href="VerifiedCompilation.html#8288" class="InductiveConstructor">proof</a> <a id="9097" class="Symbol">(</a><a id="9098" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="9101" href="VerifiedCompilation.html#9101" class="Bound">¬a</a><a id="9103" class="Symbol">))</a> <a id="9106" class="Symbol">=</a> 
  <a id="9111" href="VerifiedCompilation.html#7428" class="Postulate">putStrLn</a> <a id="9120" class="String">&quot;The compilation was not successfully certified. Please open a bug report at https://www.github.com/IntersectMBO/plutus and attach the faulty certificate.&quot;</a>
<a id="9276" class="Symbol">...</a> <a id="9280" class="Symbol">|</a> <a id="9282" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9290" class="Symbol">=</a>
  <a id="9294" href="VerifiedCompilation.html#7428" class="Postulate">putStrLn</a> <a id="9303" class="String">&quot;The certifier was unable to check the compilation. Please open a bug report at https://www.github.com/IntersectMBO/plutus.&quot;</a>
<a id="9428" class="Symbol">{-#</a> <a id="9432" class="Keyword">COMPILE</a> <a id="9440" class="Keyword">GHC</a> <a id="9444" href="VerifiedCompilation.html#8880" class="Function">runCertifierMain</a> <a id="9461" class="Pragma">as</a> <a id="9464" class="Pragma">runCertifierMain</a> <a id="9481" class="Symbol">#-}</a>
</pre>

    </section>
  </body>
</html>