<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cost.Model</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>Cost.Model</h1>
    <section>
      <h1 id="builtin-cost-models">Builtin Cost Models</h1>

<pre class="Agda"><a id="67" class="Keyword">module</a> <a id="74" href="Cost.Model.html" class="Module">Cost.Model</a> <a id="85" class="Keyword">where</a>

</pre>
<h1 id="imports">Imports</h1>

<pre class="Agda"><a id="112" class="Keyword">open</a> <a id="117" class="Keyword">import</a> <a id="124" href="Agda.Builtin.Int.html" class="Module">Agda.Builtin.Int</a> <a id="141" class="Keyword">using</a> <a id="147" class="Symbol">(</a><a id="148" href="Agda.Builtin.Int.html#245" class="Datatype">Int</a><a id="151" class="Symbol">;</a><a id="152" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">pos</a><a id="155" class="Symbol">)</a>
<a id="157" class="Keyword">open</a> <a id="162" class="Keyword">import</a> <a id="169" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="179" class="Keyword">using</a> <a id="185" class="Symbol">(</a><a id="186" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="190" class="Symbol">;</a><a id="191" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="196" class="Symbol">;</a><a id="197" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a><a id="210" class="Symbol">;</a><a id="211" href="Data.Bool.Base.html#941" class="Function">not</a><a id="214" class="Symbol">)</a>
<a id="216" class="Keyword">open</a> <a id="221" class="Keyword">import</a> <a id="228" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="237" class="Keyword">using</a> <a id="243" class="Symbol">(</a><a id="244" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a><a id="247" class="Symbol">;</a><a id="248" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="252" class="Symbol">;</a><a id="253" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a><a id="256" class="Symbol">)</a>
<a id="258" class="Keyword">open</a> <a id="263" class="Keyword">import</a> <a id="270" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="281" class="Keyword">using</a> <a id="287" class="Symbol">(</a><a id="288" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="293" class="Symbol">;</a><a id="294" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="298" class="Symbol">;</a><a id="299" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="306" class="Symbol">)</a> <a id="308" class="Keyword">renaming</a> <a id="317" class="Symbol">(</a><a id="318" href="Data.Maybe.Base.html#1934" class="Function">map</a> <a id="322" class="Symbol">to</a> <a id="325" class="Function">mapMaybe</a><a id="333" class="Symbol">)</a>
<a id="335" class="Keyword">open</a> <a id="340" class="Keyword">import</a> <a id="347" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="356" class="Keyword">using</a> <a id="362" class="Symbol">(</a><a id="363" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="364" class="Symbol">;</a><a id="365" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="369" class="Symbol">;</a><a id="370" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="373" class="Symbol">;</a><a id="374" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a><a id="377" class="Symbol">;</a><a id="378" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">_*_</a><a id="381" class="Symbol">;</a><a id="382" href="Data.Nat.Base.html#4456" class="Primitive Operator">_∸_</a><a id="385" class="Symbol">;</a><a id="386" href="Data.Nat.Base.html#5479" class="Function Operator">_⊔_</a><a id="389" class="Symbol">;</a><a id="390" href="Data.Nat.Base.html#5845" class="Function Operator">_⊓_</a><a id="393" class="Symbol">;</a><a id="394" href="Data.Nat.Base.html#1457" class="Primitive Operator">_&lt;ᵇ_</a><a id="398" class="Symbol">;</a><a id="399" href="Data.Nat.Base.html#1283" class="Primitive Operator">_≡ᵇ_</a><a id="403" class="Symbol">)</a>
<a id="405" class="Keyword">open</a> <a id="410" class="Keyword">import</a> <a id="417" href="Data.Nat.DivMod.html" class="Module">Data.Nat.DivMod</a> <a id="433" class="Keyword">using</a> <a id="439" class="Symbol">(</a><a id="440" href="Data.Nat.Base.html#7096" class="Function Operator">_/_</a><a id="443" class="Symbol">)</a>
<a id="445" class="Keyword">open</a> <a id="450" class="Keyword">import</a> <a id="457" href="Data.List.html" class="Module">Data.List</a> <a id="467" class="Keyword">using</a> <a id="473" class="Symbol">(</a><a id="474" href="Data.List.Base.html#7599" class="InductiveConstructor">[]</a><a id="476" class="Symbol">;</a><a id="477" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">_∷_</a><a id="480" class="Symbol">)</a>
<a id="482" class="Keyword">import</a> <a id="489" href="Data.List.html" class="Module">Data.List</a> <a id="499" class="Symbol">as</a> <a id="502" class="Module">L</a>
<a id="504" class="Keyword">open</a> <a id="509" class="Keyword">import</a> <a id="516" href="Data.Product.html" class="Module">Data.Product</a> <a id="529" class="Keyword">using</a> <a id="535" class="Symbol">(</a><a id="536" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="537" class="Symbol">;</a><a id="538" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="541" class="Symbol">)</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Data.String.html" class="Module">Data.String</a> <a id="567" class="Keyword">using</a> <a id="573" class="Symbol">(</a><a id="574" href="Data.String.Properties.html#4799" class="Function Operator">_==_</a><a id="578" class="Symbol">)</a>
<a id="580" class="Keyword">open</a> <a id="585" class="Keyword">import</a> <a id="592" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="609" class="Keyword">using</a> <a id="615" class="Symbol">(</a><a id="616" href="Relation.Nullary.Decidable.Core.html#1905" class="InductiveConstructor Operator">_because_</a><a id="625" class="Symbol">;</a><a id="626" href="Relation.Nullary.Reflects.html#1054" class="InductiveConstructor">ofʸ</a><a id="629" class="Symbol">)</a>
<a id="631" class="Keyword">open</a> <a id="636" class="Keyword">import</a> <a id="643" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="681" class="Keyword">using</a> <a id="687" class="Symbol">(</a><a id="688" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="692" class="Symbol">)</a>

<a id="695" class="Keyword">open</a> <a id="700" class="Keyword">import</a> <a id="707" href="Utils.html" class="Module">Utils</a> <a id="713" class="Keyword">using</a> <a id="719" class="Symbol">(</a><a id="720" href="Utils.html#5113" class="Datatype">List</a><a id="724" class="Symbol">;</a><a id="725" href="Utils.html#4875" class="Record Operator">_×_</a><a id="728" class="Symbol">;</a><a id="729" href="Utils.html#5142" class="InductiveConstructor">[]</a><a id="731" class="Symbol">;</a><a id="732" href="Utils.html#5157" class="InductiveConstructor Operator">_∷_</a><a id="735" class="Symbol">;</a><a id="736" href="Utils.html#4005" class="InductiveConstructor Operator">_,_</a><a id="739" class="Symbol">;</a><a id="740" href="Utils.html#5184" class="Function">length</a><a id="746" class="Symbol">)</a>
<a id="748" class="Keyword">open</a> <a id="753" class="Keyword">import</a> <a id="760" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="769" class="Keyword">using</a> <a id="775" class="Symbol">(</a><a id="776" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a><a id="779" class="Symbol">;</a><a id="780" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="782" class="Symbol">;</a><a id="783" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">_∷_</a><a id="786" class="Symbol">;</a><a id="787" href="Data.Vec.Base.html#6105" class="Function">sum</a><a id="790" class="Symbol">;</a><a id="791" href="Data.Vec.Base.html#5424" class="Function">foldr</a><a id="796" class="Symbol">;</a><a id="797" href="Data.Vec.Base.html#1676" class="Function">lookup</a><a id="803" class="Symbol">;</a><a id="804" href="Data.Vec.Base.html#2955" class="Function">map</a><a id="807" class="Symbol">)</a>
<a id="809" class="Keyword">open</a> <a id="814" class="Keyword">import</a> <a id="821" href="Cost.Base.html" class="Module">Cost.Base</a>
<a id="831" class="Keyword">open</a> <a id="836" class="Keyword">import</a> <a id="843" href="Cost.Raw.html" class="Module">Cost.Raw</a> <a id="852" class="Keyword">renaming</a> <a id="861" class="Symbol">(</a><a id="862" href="Cost.Raw.html#2862" class="InductiveConstructor">mkLinearFunction</a> <a id="879" class="Symbol">to</a> <a id="882" class="InductiveConstructor">mkLF</a><a id="886" class="Symbol">;</a> <a id="888" href="Cost.Raw.html#3389" class="InductiveConstructor">mkTwoVariableLinearFunction</a> <a id="916" class="Symbol">to</a> <a id="919" class="InductiveConstructor">mkLF2</a><a id="924" class="Symbol">;</a>
  <a id="928" href="Cost.Raw.html#3086" class="InductiveConstructor">mkOneVariableQuadraticFunction</a> <a id="959" class="Symbol">to</a> <a id="962" class="InductiveConstructor">mkQF1</a><a id="967" class="Symbol">;</a> <a id="969" href="Cost.Raw.html#3686" class="InductiveConstructor">mkTwoVariableQuadraticFunction</a> <a id="1000" class="Symbol">to</a> <a id="1003" class="InductiveConstructor">mkQF2</a><a id="1008" class="Symbol">)</a>
<a id="1010" class="Keyword">open</a> <a id="1015" class="Keyword">import</a> <a id="1022" href="Cost.Size.html" class="Module">Cost.Size</a> <a id="1032" class="Keyword">using</a> <a id="1038" class="Symbol">()</a> <a id="1041" class="Keyword">renaming</a> <a id="1050" class="Symbol">(</a><a id="1051" href="Cost.Size.html#3156" class="Function">defaultValueMeasure</a> <a id="1071" class="Symbol">to</a> <a id="1074" class="Function">sizeOf</a><a id="1080" class="Symbol">)</a>
<a id="1082" class="Keyword">open</a> <a id="1087" class="Keyword">import</a> <a id="1094" href="Builtin.html" class="Module">Builtin</a> <a id="1102" class="Keyword">using</a> <a id="1108" class="Symbol">(</a><a id="1109" href="Builtin.html#1417" class="Datatype">Builtin</a><a id="1116" class="Symbol">;</a><a id="1117" href="Builtin.html#16320" class="Function">arity</a><a id="1122" class="Symbol">;</a><a id="1123" href="Builtin.html#33294" class="Function">builtinList</a><a id="1134" class="Symbol">;</a><a id="1135" href="Builtin.html#33149" class="Function">showBuiltin</a><a id="1146" class="Symbol">;</a><a id="1147" href="Builtin.html#33003" class="Function">decBuiltin</a><a id="1157" class="Symbol">)</a>
<a id="1159" class="Keyword">open</a> <a id="1164" class="Keyword">import</a> <a id="1171" href="Builtin.Signature.html" class="Module">Builtin.Signature</a> <a id="1189" class="Keyword">using</a> <a id="1195" class="Symbol">(</a><a id="1196" href="Builtin.Signature.html#1821" class="Datatype Operator">_⊢♯</a><a id="1199" class="Symbol">)</a>
<a id="1201" class="Keyword">open</a> <a id="1206" href="Builtin.Signature.html#1821" class="Module Operator">_⊢♯</a>
<a id="1210" class="Keyword">open</a> <a id="1215" class="Keyword">import</a> <a id="1222" href="Builtin.Constant.AtomicType.html" class="Module">Builtin.Constant.AtomicType</a> <a id="1250" class="Keyword">using</a> <a id="1256" class="Symbol">(</a><a id="1257" href="Builtin.Constant.AtomicType.html#570" class="Datatype">AtomicTyCon</a><a id="1268" class="Symbol">;</a><a id="1269" href="Builtin.Constant.AtomicType.html#596" class="InductiveConstructor">aInteger</a><a id="1277" class="Symbol">)</a>
<a id="1279" class="Keyword">open</a> <a id="1284" class="Keyword">import</a> <a id="1291" href="Untyped.CEK.html" class="Module">Untyped.CEK</a> <a id="1303" class="Keyword">using</a> <a id="1309" class="Symbol">(</a><a id="1310" href="Untyped.CEK.html#1342" class="Datatype">Value</a><a id="1315" class="Symbol">;</a><a id="1316" href="Untyped.CEK.html#1611" class="InductiveConstructor">V-con</a><a id="1321" class="Symbol">)</a>
</pre>
<h2 id="basic-definitions">Basic Definitions</h2>

<pre class="Agda"><a id="Intercept"></a><a id="1354" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="1364" class="Symbol">:</a> <a id="1366" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1370" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="1380" class="Symbol">=</a> <a id="1382" href="Cost.Base.html#778" class="Function">CostingNat</a>

<a id="Slope"></a><a id="1394" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="1400" class="Symbol">:</a> <a id="1402" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1406" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="1412" class="Symbol">=</a> <a id="1414" href="Cost.Base.html#778" class="Function">CostingNat</a>
</pre>
<h2 id="models">Models</h2>

<p>A model is indexed by the number of arguments.</p>

<p>For example, for <code class="language-plaintext highlighter-rouge">ifThenElse</code> we would assign a model <code class="language-plaintext highlighter-rouge">constantCost : CostingModel 3</code>,
which is a model for a builtin that takes three arguments.</p>

<p>For <code class="language-plaintext highlighter-rouge">linearCost</code> the model takes an index indicating on which argument the cost
should be calculated.</p>

<pre class="Agda"><a id="1743" class="Keyword">data</a> <a id="CostingModel"></a><a id="1748" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="1761" class="Symbol">:</a> <a id="1763" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1765" class="Symbol">→</a> <a id="1767" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1771" class="Keyword">where</a>
   <a id="1780" class="Comment">-- Any number of arguments</a>
  <a id="CostingModel.constantCost"></a><a id="1809" href="Cost.Model.html#1809" class="InductiveConstructor">constantCost</a>       <a id="1828" class="Symbol">:</a> <a id="1830" class="Symbol">∀{</a><a id="1832" href="Cost.Model.html#1832" class="Bound">n</a><a id="1833" class="Symbol">}</a> <a id="1835" class="Symbol">→</a> <a id="1837" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="1848" class="Symbol">→</a> <a id="1850" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="1863" href="Cost.Model.html#1832" class="Bound">n</a>
  <a id="CostingModel.linearCostIn"></a><a id="1867" href="Cost.Model.html#1867" class="InductiveConstructor">linearCostIn</a>       <a id="1886" class="Symbol">:</a> <a id="1888" class="Symbol">∀{</a><a id="1890" href="Cost.Model.html#1890" class="Bound">n</a><a id="1891" class="Symbol">}</a> <a id="1893" class="Symbol">→</a> <a id="1895" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="1899" href="Cost.Model.html#1890" class="Bound">n</a> <a id="1901" class="Symbol">→</a> <a id="1903" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="1913" class="Symbol">→</a> <a id="1915" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="1921" class="Symbol">→</a> <a id="1923" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="1936" href="Cost.Model.html#1890" class="Bound">n</a>
  <a id="CostingModel.quadraticCostIn1"></a><a id="1940" href="Cost.Model.html#1940" class="InductiveConstructor">quadraticCostIn1</a>   <a id="1959" class="Symbol">:</a> <a id="1961" class="Symbol">∀{</a><a id="1963" href="Cost.Model.html#1963" class="Bound">n</a><a id="1964" class="Symbol">}</a> <a id="1966" class="Symbol">→</a> <a id="1968" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="1972" href="Cost.Model.html#1963" class="Bound">n</a> <a id="1974" class="Symbol">→</a> <a id="1976" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="1987" class="Symbol">→</a> <a id="1989" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2000" class="Symbol">→</a> <a id="2002" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2013" class="Symbol">→</a> <a id="2015" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2028" href="Cost.Model.html#1963" class="Bound">n</a>
  <a id="CostingModel.quadraticCostIn2"></a><a id="2032" href="Cost.Model.html#2032" class="InductiveConstructor">quadraticCostIn2</a>   <a id="2051" class="Symbol">:</a> <a id="2053" class="Symbol">∀{</a><a id="2055" href="Cost.Model.html#2055" class="Bound">n</a><a id="2056" class="Symbol">}</a> <a id="2058" class="Symbol">→</a> <a id="2060" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="2064" href="Cost.Model.html#2055" class="Bound">n</a> <a id="2066" class="Symbol">→</a> <a id="2068" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="2072" href="Cost.Model.html#2055" class="Bound">n</a> <a id="2074" class="Symbol">→</a> <a id="2076" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2087" class="Symbol">→</a> <a id="2089" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2100" class="Symbol">→</a> <a id="2102" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2113" class="Symbol">→</a> <a id="2115" href="Cost.Base.html#778" class="Function">CostingNat</a>
                            <a id="2154" class="Symbol">→</a> <a id="2156" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2167" class="Symbol">→</a> <a id="2169" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2180" class="Symbol">→</a> <a id="2182" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2193" class="Symbol">→</a> <a id="2195" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2208" href="Cost.Model.html#2055" class="Bound">n</a>
   <a id="2213" class="Comment">-- take the cost literally if it is a positive integer, or else, use the provided model.</a>
  <a id="CostingModel.literalCostIn"></a><a id="2304" href="Cost.Model.html#2304" class="InductiveConstructor">literalCostIn</a>      <a id="2323" class="Symbol">:</a> <a id="2325" class="Symbol">∀{</a><a id="2327" href="Cost.Model.html#2327" class="Bound">n</a><a id="2328" class="Symbol">}</a> <a id="2330" class="Symbol">→</a> <a id="2332" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="2336" href="Cost.Model.html#2327" class="Bound">n</a> <a id="2338" class="Symbol">→</a> <a id="2340" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2353" href="Cost.Model.html#2327" class="Bound">n</a> <a id="2355" class="Symbol">→</a> <a id="2357" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2370" href="Cost.Model.html#2327" class="Bound">n</a>
  <a id="CostingModel.addedSizes"></a><a id="2374" href="Cost.Model.html#2374" class="InductiveConstructor">addedSizes</a>         <a id="2393" class="Symbol">:</a> <a id="2395" class="Symbol">∀{</a><a id="2397" href="Cost.Model.html#2397" class="Bound">n</a><a id="2398" class="Symbol">}</a> <a id="2400" class="Symbol">→</a> <a id="2402" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="2412" class="Symbol">→</a> <a id="2414" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="2420" class="Symbol">→</a> <a id="2422" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2435" href="Cost.Model.html#2397" class="Bound">n</a>
  <a id="CostingModel.multipliedSizes"></a><a id="2439" href="Cost.Model.html#2439" class="InductiveConstructor">multipliedSizes</a>    <a id="2458" class="Symbol">:</a> <a id="2460" class="Symbol">∀{</a><a id="2462" href="Cost.Model.html#2462" class="Bound">n</a><a id="2463" class="Symbol">}</a> <a id="2465" class="Symbol">→</a> <a id="2467" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="2477" class="Symbol">→</a> <a id="2479" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="2485" class="Symbol">→</a> <a id="2487" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2500" href="Cost.Model.html#2462" class="Bound">n</a>
  <a id="2504" class="Comment">-- at least one argument</a>
  <a id="CostingModel.minSize"></a><a id="2531" href="Cost.Model.html#2531" class="InductiveConstructor">minSize</a>            <a id="2550" class="Symbol">:</a> <a id="2552" class="Symbol">∀{</a><a id="2554" href="Cost.Model.html#2554" class="Bound">n</a><a id="2555" class="Symbol">}</a> <a id="2557" class="Symbol">→</a> <a id="2559" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="2569" class="Symbol">→</a> <a id="2571" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="2577" class="Symbol">→</a> <a id="2579" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2592" class="Symbol">(</a><a id="2593" class="Number">1</a> <a id="2595" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2597" href="Cost.Model.html#2554" class="Bound">n</a><a id="2598" class="Symbol">)</a>
  <a id="CostingModel.maxSize"></a><a id="2602" href="Cost.Model.html#2602" class="InductiveConstructor">maxSize</a>            <a id="2621" class="Symbol">:</a> <a id="2623" class="Symbol">∀{</a><a id="2625" href="Cost.Model.html#2625" class="Bound">n</a><a id="2626" class="Symbol">}</a> <a id="2628" class="Symbol">→</a> <a id="2630" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="2640" class="Symbol">→</a> <a id="2642" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="2648" class="Symbol">→</a> <a id="2650" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2663" class="Symbol">(</a><a id="2664" class="Number">1</a> <a id="2666" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2668" href="Cost.Model.html#2625" class="Bound">n</a><a id="2669" class="Symbol">)</a>
   <a id="2674" class="Comment">-- exactly two arguments</a>
  <a id="CostingModel.twoArgumentsSubtractedSizes"></a><a id="2701" href="Cost.Model.html#2701" class="InductiveConstructor">twoArgumentsSubtractedSizes</a>    <a id="2732" class="Symbol">:</a> <a id="2734" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="2744" class="Symbol">→</a> <a id="2746" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="2752" class="Symbol">→</a> <a id="2754" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2765" class="Symbol">→</a> <a id="2767" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2780" class="Number">2</a>
  <a id="CostingModel.twoArgumentsConstAboveDiagonal"></a><a id="2784" href="Cost.Model.html#2784" class="InductiveConstructor">twoArgumentsConstAboveDiagonal</a> <a id="2815" class="Symbol">:</a> <a id="2817" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2828" class="Symbol">→</a> <a id="2830" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2843" class="Number">2</a> <a id="2845" class="Symbol">→</a> <a id="2847" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2860" class="Number">2</a>
  <a id="CostingModel.twoArgumentsConstBelowDiagonal"></a><a id="2864" href="Cost.Model.html#2864" class="InductiveConstructor">twoArgumentsConstBelowDiagonal</a> <a id="2895" class="Symbol">:</a> <a id="2897" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2908" class="Symbol">→</a> <a id="2910" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2923" class="Number">2</a> <a id="2925" class="Symbol">→</a> <a id="2927" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="2940" class="Number">2</a>
  <a id="CostingModel.twoArgumentsConstOffDiagonal"></a><a id="2944" href="Cost.Model.html#2944" class="InductiveConstructor">twoArgumentsConstOffDiagonal</a>   <a id="2975" class="Symbol">:</a> <a id="2977" href="Cost.Base.html#778" class="Function">CostingNat</a> <a id="2988" class="Symbol">→</a> <a id="2990" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="3003" class="Number">2</a> <a id="3005" class="Symbol">→</a> <a id="3007" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="3020" class="Number">2</a>
  <a id="3024" class="Comment">-- exactly 3 arguments</a>
  <a id="CostingModel.twoArgumentsLinearInYAndZ"></a><a id="3049" href="Cost.Model.html#3049" class="InductiveConstructor">twoArgumentsLinearInYAndZ</a>      <a id="3080" class="Symbol">:</a> <a id="3082" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="3092" class="Symbol">→</a> <a id="3094" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="3100" class="Symbol">→</a> <a id="3102" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="3108" class="Symbol">→</a> <a id="3110" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="3123" class="Number">3</a>
  <a id="CostingModel.twoArgumentsLinearInMaxYZ"></a><a id="3127" href="Cost.Model.html#3127" class="InductiveConstructor">twoArgumentsLinearInMaxYZ</a>      <a id="3158" class="Symbol">:</a> <a id="3160" href="Cost.Model.html#1354" class="Function">Intercept</a> <a id="3170" class="Symbol">→</a> <a id="3172" href="Cost.Model.html#1394" class="Function">Slope</a> <a id="3178" class="Symbol">→</a> <a id="3180" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="3193" class="Number">3</a>
</pre>
<p>A model of a builtin consists of a pair of costing models, one for CPU and one for memory.</p>

<pre class="Agda"><a id="3296" class="Keyword">record</a> <a id="BuiltinModel"></a><a id="3303" href="Cost.Model.html#3303" class="Record">BuiltinModel</a> <a id="3316" class="Symbol">(</a><a id="3317" href="Cost.Model.html#3317" class="Bound">ar</a> <a id="3320" class="Symbol">:</a> <a id="3322" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="3323" class="Symbol">)</a> <a id="3325" class="Symbol">:</a> <a id="3327" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3331" class="Keyword">where</a>
    <a id="3341" class="Keyword">field</a>
        <a id="BuiltinModel.costingCPU"></a><a id="3355" href="Cost.Model.html#3355" class="Field">costingCPU</a> <a id="BuiltinModel.costingMem"></a><a id="3366" href="Cost.Model.html#3366" class="Field">costingMem</a> <a id="3377" class="Symbol">:</a> <a id="3379" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="3392" href="Cost.Model.html#3317" class="Bound">ar</a>

<a id="3396" class="Keyword">open</a> <a id="3401" href="Cost.Model.html#3303" class="Module">BuiltinModel</a> <a id="3414" class="Keyword">public</a>
</pre>
<h3 id="model-interpretations">Model interpretations</h3>

<p>Some helper functions.</p>

<pre class="Agda"><a id="prod"></a><a id="3481" href="Cost.Model.html#3481" class="Function">prod</a> <a id="3486" class="Symbol">:</a> <a id="3488" class="Symbol">∀</a> <a id="3490" class="Symbol">{</a><a id="3491" href="Cost.Model.html#3491" class="Bound">n</a><a id="3492" class="Symbol">}</a> <a id="3494" class="Symbol">→</a> <a id="3496" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="3500" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3502" href="Cost.Model.html#3491" class="Bound">n</a> <a id="3504" class="Symbol">→</a> <a id="3506" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="3508" href="Cost.Model.html#3481" class="Function">prod</a> <a id="3513" class="Symbol">=</a> <a id="3515" href="Data.Vec.Base.html#5424" class="Function">foldr</a> <a id="3521" class="Symbol">_</a> <a id="3523" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">_*_</a> <a id="3527" class="Number">1</a>

<a id="maximum"></a><a id="3530" href="Cost.Model.html#3530" class="Function">maximum</a> <a id="minimum"></a><a id="3538" href="Cost.Model.html#3538" class="Function">minimum</a> <a id="3546" class="Symbol">:</a> <a id="3548" class="Symbol">∀</a> <a id="3550" class="Symbol">{</a><a id="3551" href="Cost.Model.html#3551" class="Bound">n</a><a id="3552" class="Symbol">}</a> <a id="3554" class="Symbol">→</a> <a id="3556" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="3560" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3562" class="Symbol">(</a><a id="3563" class="InductiveConstructor">suc</a> <a id="3567" href="Cost.Model.html#3551" class="Bound">n</a><a id="3568" class="Symbol">)</a> <a id="3570" class="Symbol">→</a> <a id="3572" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="3574" href="Cost.Model.html#3530" class="Function">maximum</a> <a id="3582" class="Symbol">(</a><a id="3583" href="Cost.Model.html#3583" class="Bound">a</a> <a id="3585" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3587" href="Cost.Model.html#3587" class="Bound">xs</a><a id="3589" class="Symbol">)</a> <a id="3591" class="Symbol">=</a> <a id="3593" href="Data.Vec.Base.html#5424" class="Function">foldr</a> <a id="3599" class="Symbol">_</a> <a id="3601" href="Data.Nat.Base.html#5479" class="Function Operator">_⊔_</a> <a id="3605" href="Cost.Model.html#3583" class="Bound">a</a> <a id="3607" href="Cost.Model.html#3587" class="Bound">xs</a>
<a id="3610" href="Cost.Model.html#3538" class="Function">minimum</a> <a id="3618" class="Symbol">(</a><a id="3619" href="Cost.Model.html#3619" class="Bound">a</a> <a id="3621" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3623" href="Cost.Model.html#3623" class="Bound">xs</a><a id="3625" class="Symbol">)</a> <a id="3627" class="Symbol">=</a> <a id="3629" href="Data.Vec.Base.html#5424" class="Function">foldr</a> <a id="3635" class="Symbol">_</a> <a id="3637" href="Data.Nat.Base.html#5845" class="Function Operator">_⊓_</a> <a id="3641" href="Cost.Model.html#3619" class="Bound">a</a> <a id="3643" href="Cost.Model.html#3623" class="Bound">xs</a>
</pre>
<p>Given a model and the sizes of the arguments we can compute a cost.</p>

<pre class="Agda"><a id="runModel"></a><a id="3724" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="3733" class="Symbol">:</a> <a id="3735" class="Symbol">∀{</a><a id="3737" href="Cost.Model.html#3737" class="Bound">n</a><a id="3738" class="Symbol">}</a> <a id="3740" class="Symbol">→</a> <a id="3742" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="3755" href="Cost.Model.html#3737" class="Bound">n</a> <a id="3757" class="Symbol">→</a> <a id="3759" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="3763" href="Untyped.CEK.html#1342" class="Datatype">Value</a> <a id="3769" href="Cost.Model.html#3737" class="Bound">n</a> <a id="3771" class="Symbol">→</a> <a id="3773" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="3784" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="3793" class="Symbol">(</a><a id="3794" href="Cost.Model.html#1809" class="InductiveConstructor">constantCost</a> <a id="3807" href="Cost.Model.html#3807" class="Bound">x</a><a id="3808" class="Symbol">)</a> <a id="3810" class="Symbol">_</a> <a id="3812" class="Symbol">=</a> <a id="3814" href="Cost.Model.html#3807" class="Bound">x</a>
<a id="3816" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="3825" class="Symbol">(</a><a id="3826" href="Cost.Model.html#1867" class="InductiveConstructor">linearCostIn</a> <a id="3839" href="Cost.Model.html#3839" class="Bound">n</a> <a id="3841" href="Cost.Model.html#3841" class="Bound">i</a> <a id="3843" href="Cost.Model.html#3843" class="Bound">s</a><a id="3844" class="Symbol">)</a> <a id="3846" href="Cost.Model.html#3846" class="Bound">xs</a> <a id="3849" class="Symbol">=</a> <a id="3851" href="Cost.Model.html#3841" class="Bound">i</a> <a id="3853" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3855" href="Cost.Model.html#3843" class="Bound">s</a> <a id="3857" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3859" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="3866" class="Symbol">(</a><a id="3867" href="Data.Vec.Base.html#1676" class="Function">lookup</a> <a id="3874" href="Cost.Model.html#3846" class="Bound">xs</a> <a id="3877" href="Cost.Model.html#3839" class="Bound">n</a><a id="3878" class="Symbol">)</a>
<a id="3880" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="3889" class="Symbol">(</a><a id="3890" href="Cost.Model.html#1940" class="InductiveConstructor">quadraticCostIn1</a> <a id="3907" href="Cost.Model.html#3907" class="Bound">n</a> <a id="3909" href="Cost.Model.html#3909" class="Bound">c0</a> <a id="3912" href="Cost.Model.html#3912" class="Bound">c1</a> <a id="3915" href="Cost.Model.html#3915" class="Bound">c2</a><a id="3917" class="Symbol">)</a> <a id="3919" href="Cost.Model.html#3919" class="Bound">xs</a> <a id="3922" class="Symbol">=</a> <a id="3924" class="Keyword">let</a> <a id="3928" href="Cost.Model.html#3928" class="Bound">x</a> <a id="3930" class="Symbol">=</a> <a id="3932" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="3939" class="Symbol">(</a><a id="3940" href="Data.Vec.Base.html#1676" class="Function">lookup</a> <a id="3947" href="Cost.Model.html#3919" class="Bound">xs</a> <a id="3950" href="Cost.Model.html#3907" class="Bound">n</a><a id="3951" class="Symbol">)</a> <a id="3953" class="Keyword">in</a> <a id="3956" href="Cost.Model.html#3909" class="Bound">c0</a> <a id="3959" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3961" href="Cost.Model.html#3912" class="Bound">c1</a> <a id="3964" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3966" href="Cost.Model.html#3928" class="Bound">x</a> <a id="3968" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3970" href="Cost.Model.html#3915" class="Bound">c2</a> <a id="3973" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3975" href="Cost.Model.html#3928" class="Bound">x</a> <a id="3977" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3979" href="Cost.Model.html#3928" class="Bound">x</a>
<a id="3981" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="3990" class="Symbol">(</a><a id="3991" href="Cost.Model.html#2032" class="InductiveConstructor">quadraticCostIn2</a> <a id="4008" href="Cost.Model.html#4008" class="Bound">m</a> <a id="4010" href="Cost.Model.html#4010" class="Bound">n</a> <a id="4012" href="Cost.Model.html#4012" class="Bound">min</a> <a id="4016" href="Cost.Model.html#4016" class="Bound">c00</a> <a id="4020" href="Cost.Model.html#4020" class="Bound">c10</a> <a id="4024" href="Cost.Model.html#4024" class="Bound">c01</a> <a id="4028" href="Cost.Model.html#4028" class="Bound">c20</a> <a id="4032" href="Cost.Model.html#4032" class="Bound">c11</a> <a id="4036" href="Cost.Model.html#4036" class="Bound">c02</a><a id="4039" class="Symbol">)</a> <a id="4041" href="Cost.Model.html#4041" class="Bound">xs</a> <a id="4044" class="Symbol">=</a>
  <a id="4048" class="Keyword">let</a> <a id="4052" href="Cost.Model.html#4052" class="Bound">x</a> <a id="4054" class="Symbol">=</a> <a id="4056" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4063" class="Symbol">(</a><a id="4064" href="Data.Vec.Base.html#1676" class="Function">lookup</a> <a id="4071" href="Cost.Model.html#4041" class="Bound">xs</a> <a id="4074" href="Cost.Model.html#4008" class="Bound">m</a><a id="4075" class="Symbol">)</a>
      <a id="4083" href="Cost.Model.html#4083" class="Bound">y</a> <a id="4085" class="Symbol">=</a> <a id="4087" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4094" class="Symbol">(</a><a id="4095" href="Data.Vec.Base.html#1676" class="Function">lookup</a> <a id="4102" href="Cost.Model.html#4041" class="Bound">xs</a> <a id="4105" href="Cost.Model.html#4010" class="Bound">n</a><a id="4106" class="Symbol">)</a>
      <a id="4114" href="Cost.Model.html#4114" class="Bound">r</a> <a id="4116" class="Symbol">=</a> <a id="4118" href="Cost.Model.html#4016" class="Bound">c00</a> <a id="4122" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4124" href="Cost.Model.html#4020" class="Bound">c10</a> <a id="4128" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4130" href="Cost.Model.html#4052" class="Bound">x</a> <a id="4132" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4134" href="Cost.Model.html#4024" class="Bound">c01</a> <a id="4138" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4140" href="Cost.Model.html#4083" class="Bound">y</a> <a id="4142" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4144" href="Cost.Model.html#4028" class="Bound">c20</a> <a id="4148" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4150" href="Cost.Model.html#4052" class="Bound">x</a> <a id="4152" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4154" href="Cost.Model.html#4052" class="Bound">x</a> <a id="4156" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4158" href="Cost.Model.html#4032" class="Bound">c11</a> <a id="4162" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4164" href="Cost.Model.html#4052" class="Bound">x</a> <a id="4166" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4168" href="Cost.Model.html#4083" class="Bound">y</a> <a id="4170" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4172" href="Cost.Model.html#4036" class="Bound">c02</a> <a id="4176" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4178" href="Cost.Model.html#4083" class="Bound">y</a> <a id="4180" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4182" href="Cost.Model.html#4083" class="Bound">y</a>
  <a id="4186" class="Keyword">in</a> <a id="4189" href="Cost.Model.html#4012" class="Bound">min</a> <a id="4193" href="Data.Nat.Base.html#5479" class="Function Operator">⊔</a> <a id="4195" href="Cost.Model.html#4114" class="Bound">r</a>
<a id="4197" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4206" class="Symbol">(</a><a id="4207" href="Cost.Model.html#2374" class="InductiveConstructor">addedSizes</a> <a id="4218" href="Cost.Model.html#4218" class="Bound">i</a> <a id="4220" href="Cost.Model.html#4220" class="Bound">s</a><a id="4221" class="Symbol">)</a> <a id="4223" href="Cost.Model.html#4223" class="Bound">xs</a> <a id="4226" class="Symbol">=</a> <a id="4228" href="Cost.Model.html#4218" class="Bound">i</a> <a id="4230" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4232" href="Cost.Model.html#4220" class="Bound">s</a> <a id="4234" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4236" class="Symbol">(</a><a id="4237" href="Data.Vec.Base.html#6105" class="Function">sum</a> <a id="4241" class="Symbol">(</a><a id="4242" href="Data.Vec.Base.html#2955" class="Function">map</a> <a id="4246" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4253" href="Cost.Model.html#4223" class="Bound">xs</a><a id="4255" class="Symbol">))</a>
<a id="4258" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4267" class="Symbol">(</a><a id="4268" href="Cost.Model.html#2439" class="InductiveConstructor">multipliedSizes</a> <a id="4284" href="Cost.Model.html#4284" class="Bound">i</a> <a id="4286" href="Cost.Model.html#4286" class="Bound">s</a><a id="4287" class="Symbol">)</a> <a id="4289" href="Cost.Model.html#4289" class="Bound">xs</a> <a id="4292" class="Symbol">=</a> <a id="4294" href="Cost.Model.html#4284" class="Bound">i</a> <a id="4296" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4298" href="Cost.Model.html#4286" class="Bound">s</a> <a id="4300" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4302" class="Symbol">(</a><a id="4303" href="Cost.Model.html#3481" class="Function">prod</a> <a id="4308" class="Symbol">(</a><a id="4309" href="Data.Vec.Base.html#2955" class="Function">map</a> <a id="4313" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4320" href="Cost.Model.html#4289" class="Bound">xs</a><a id="4322" class="Symbol">))</a>
<a id="4325" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4334" class="Symbol">(</a><a id="4335" href="Cost.Model.html#2531" class="InductiveConstructor">minSize</a> <a id="4343" href="Cost.Model.html#4343" class="Bound">i</a> <a id="4345" href="Cost.Model.html#4345" class="Bound">s</a><a id="4346" class="Symbol">)</a> <a id="4348" href="Cost.Model.html#4348" class="Bound">xs</a> <a id="4351" class="Symbol">=</a> <a id="4353" href="Cost.Model.html#4343" class="Bound">i</a> <a id="4355" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4357" href="Cost.Model.html#4345" class="Bound">s</a> <a id="4359" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4361" href="Cost.Model.html#3538" class="Function">minimum</a> <a id="4369" class="Symbol">(</a><a id="4370" href="Data.Vec.Base.html#2955" class="Function">map</a> <a id="4374" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4381" href="Cost.Model.html#4348" class="Bound">xs</a><a id="4383" class="Symbol">)</a>
<a id="4385" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4394" class="Symbol">(</a><a id="4395" href="Cost.Model.html#2602" class="InductiveConstructor">maxSize</a> <a id="4403" href="Cost.Model.html#4403" class="Bound">i</a> <a id="4405" href="Cost.Model.html#4405" class="Bound">s</a><a id="4406" class="Symbol">)</a> <a id="4408" href="Cost.Model.html#4408" class="Bound">xs</a> <a id="4411" class="Symbol">=</a> <a id="4413" href="Cost.Model.html#4403" class="Bound">i</a> <a id="4415" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4417" href="Cost.Model.html#4405" class="Bound">s</a> <a id="4419" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4421" href="Cost.Model.html#3530" class="Function">maximum</a> <a id="4429" class="Symbol">(</a><a id="4430" href="Data.Vec.Base.html#2955" class="Function">map</a> <a id="4434" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4441" href="Cost.Model.html#4408" class="Bound">xs</a><a id="4443" class="Symbol">)</a>
<a id="4445" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4454" class="Symbol">(</a><a id="4455" href="Cost.Model.html#3049" class="InductiveConstructor">twoArgumentsLinearInYAndZ</a> <a id="4481" href="Cost.Model.html#4481" class="Bound">i</a> <a id="4483" href="Cost.Model.html#4483" class="Bound">s₁</a> <a id="4486" href="Cost.Model.html#4486" class="Bound">s₂</a><a id="4488" class="Symbol">)</a> <a id="4490" class="Symbol">(_</a> <a id="4493" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4495" href="Cost.Model.html#4495" class="Bound">y</a> <a id="4497" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4499" href="Cost.Model.html#4499" class="Bound">z</a> <a id="4501" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4503" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="4505" class="Symbol">)</a> <a id="4507" class="Symbol">=</a>
  <a id="4511" class="Keyword">let</a> <a id="4515" href="Cost.Model.html#4515" class="Bound">a</a> <a id="4517" class="Symbol">=</a> <a id="4519" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4526" href="Cost.Model.html#4495" class="Bound">y</a>
      <a id="4534" href="Cost.Model.html#4534" class="Bound">b</a> <a id="4536" class="Symbol">=</a> <a id="4538" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4545" href="Cost.Model.html#4499" class="Bound">z</a>
  <a id="4549" class="Keyword">in</a> <a id="4552" href="Cost.Model.html#4481" class="Bound">i</a> <a id="4554" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4556" href="Cost.Model.html#4483" class="Bound">s₁</a> <a id="4559" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4561" href="Cost.Model.html#4515" class="Bound">a</a> <a id="4563" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4565" href="Cost.Model.html#4486" class="Bound">s₂</a> <a id="4568" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4570" href="Cost.Model.html#4534" class="Bound">b</a>
<a id="4572" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4581" class="Symbol">(</a><a id="4582" href="Cost.Model.html#3127" class="InductiveConstructor">twoArgumentsLinearInMaxYZ</a> <a id="4608" href="Cost.Model.html#4608" class="Bound">i</a> <a id="4610" href="Cost.Model.html#4610" class="Bound">s</a><a id="4611" class="Symbol">)</a> <a id="4613" class="Symbol">(_</a> <a id="4616" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4618" href="Cost.Model.html#4618" class="Bound">y</a> <a id="4620" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4622" href="Cost.Model.html#4622" class="Bound">z</a> <a id="4624" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4626" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="4628" class="Symbol">)</a> <a id="4630" class="Symbol">=</a>
  <a id="4634" class="Keyword">let</a> <a id="4638" href="Cost.Model.html#4638" class="Bound">a</a> <a id="4640" class="Symbol">=</a> <a id="4642" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4649" href="Cost.Model.html#4618" class="Bound">y</a>
      <a id="4657" href="Cost.Model.html#4657" class="Bound">b</a> <a id="4659" class="Symbol">=</a> <a id="4661" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4668" href="Cost.Model.html#4622" class="Bound">z</a>
  <a id="4672" class="Keyword">in</a> <a id="4675" href="Cost.Model.html#4608" class="Bound">i</a> <a id="4677" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4679" href="Cost.Model.html#4610" class="Bound">s</a> <a id="4681" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4683" href="Cost.Model.html#3530" class="Function">maximum</a> <a id="4691" class="Symbol">(</a><a id="4692" href="Cost.Model.html#4638" class="Bound">a</a> <a id="4694" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4696" href="Cost.Model.html#4657" class="Bound">b</a> <a id="4698" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4700" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="4702" class="Symbol">)</a>
<a id="4704" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4713" class="Symbol">(</a><a id="4714" href="Cost.Model.html#2701" class="InductiveConstructor">twoArgumentsSubtractedSizes</a> <a id="4742" href="Cost.Model.html#4742" class="Bound">i</a> <a id="4744" href="Cost.Model.html#4744" class="Bound">s</a> <a id="4746" href="Cost.Model.html#4746" class="Bound">min</a><a id="4749" class="Symbol">)</a> <a id="4751" class="Symbol">(</a><a id="4752" href="Cost.Model.html#4752" class="Bound">x</a> <a id="4754" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4756" href="Cost.Model.html#4756" class="Bound">y</a> <a id="4758" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4760" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="4762" class="Symbol">)</a> <a id="4764" class="Symbol">=</a>
  <a id="4768" class="Keyword">let</a> <a id="4772" href="Cost.Model.html#4772" class="Bound">a</a> <a id="4774" class="Symbol">=</a> <a id="4776" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4783" href="Cost.Model.html#4752" class="Bound">x</a>
      <a id="4791" href="Cost.Model.html#4791" class="Bound">b</a> <a id="4793" class="Symbol">=</a> <a id="4795" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4802" href="Cost.Model.html#4756" class="Bound">y</a>
  <a id="4806" class="Keyword">in</a> <a id="4809" href="Cost.Model.html#4742" class="Bound">i</a> <a id="4811" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="4813" href="Cost.Model.html#4744" class="Bound">s</a> <a id="4815" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4817" class="Symbol">(</a><a id="4818" href="Cost.Model.html#4746" class="Bound">min</a> <a id="4822" href="Data.Nat.Base.html#5479" class="Function Operator">⊔</a> <a id="4824" class="Symbol">(</a><a id="4825" href="Cost.Model.html#4772" class="Bound">a</a> <a id="4827" href="Data.Nat.Base.html#4456" class="Primitive Operator">∸</a> <a id="4829" href="Cost.Model.html#4791" class="Bound">b</a><a id="4830" class="Symbol">))</a>
<a id="4833" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4842" class="Symbol">(</a><a id="4843" href="Cost.Model.html#2784" class="InductiveConstructor">twoArgumentsConstAboveDiagonal</a> <a id="4874" href="Cost.Model.html#4874" class="Bound">c</a> <a id="4876" href="Cost.Model.html#4876" class="Bound">m</a><a id="4877" class="Symbol">)</a> <a id="4879" class="Symbol">(</a><a id="4880" href="Cost.Model.html#4880" class="Bound">x</a> <a id="4882" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4884" href="Cost.Model.html#4884" class="Bound">y</a> <a id="4886" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4888" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="4890" class="Symbol">)</a> <a id="4892" class="Symbol">=</a>
  <a id="4896" class="Keyword">let</a> <a id="4900" href="Cost.Model.html#4900" class="Bound">a</a> <a id="4902" class="Symbol">=</a> <a id="4904" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4911" href="Cost.Model.html#4880" class="Bound">x</a>
      <a id="4919" href="Cost.Model.html#4919" class="Bound">b</a> <a id="4921" class="Symbol">=</a> <a id="4923" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="4930" href="Cost.Model.html#4884" class="Bound">y</a>
  <a id="4934" class="Keyword">in</a> <a id="4937" href="Data.Bool.Base.html#1505" class="Function Operator">if</a> <a id="4940" href="Cost.Model.html#4900" class="Bound">a</a> <a id="4942" href="Data.Nat.Base.html#1457" class="Primitive Operator">&lt;ᵇ</a> <a id="4945" href="Cost.Model.html#4919" class="Bound">b</a>
      <a id="4953" href="Data.Bool.Base.html#1505" class="Function Operator">then</a> <a id="4958" href="Cost.Model.html#4874" class="Bound">c</a>
      <a id="4966" href="Data.Bool.Base.html#1505" class="Function Operator">else</a> <a id="4971" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="4980" href="Cost.Model.html#4876" class="Bound">m</a> <a id="4982" class="Symbol">(</a><a id="4983" href="Cost.Model.html#4880" class="Bound">x</a> <a id="4985" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4987" href="Cost.Model.html#4884" class="Bound">y</a> <a id="4989" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="4991" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="4993" class="Symbol">)</a>
<a id="4995" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="5004" class="Symbol">(</a><a id="5005" href="Cost.Model.html#2864" class="InductiveConstructor">twoArgumentsConstBelowDiagonal</a> <a id="5036" href="Cost.Model.html#5036" class="Bound">c</a> <a id="5038" href="Cost.Model.html#5038" class="Bound">m</a><a id="5039" class="Symbol">)</a> <a id="5041" class="Symbol">(</a><a id="5042" href="Cost.Model.html#5042" class="Bound">x</a> <a id="5044" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="5046" href="Cost.Model.html#5046" class="Bound">y</a> <a id="5048" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="5050" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="5052" class="Symbol">)</a> <a id="5054" class="Symbol">=</a>
  <a id="5058" class="Keyword">let</a> <a id="5062" href="Cost.Model.html#5062" class="Bound">a</a> <a id="5064" class="Symbol">=</a> <a id="5066" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="5073" href="Cost.Model.html#5042" class="Bound">x</a>
      <a id="5081" href="Cost.Model.html#5081" class="Bound">b</a> <a id="5083" class="Symbol">=</a> <a id="5085" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="5092" href="Cost.Model.html#5046" class="Bound">y</a>
  <a id="5096" class="Keyword">in</a> <a id="5099" href="Data.Bool.Base.html#1505" class="Function Operator">if</a> <a id="5102" href="Cost.Model.html#5081" class="Bound">b</a> <a id="5104" href="Data.Nat.Base.html#1457" class="Primitive Operator">&lt;ᵇ</a> <a id="5107" href="Cost.Model.html#5062" class="Bound">a</a>
      <a id="5115" href="Data.Bool.Base.html#1505" class="Function Operator">then</a> <a id="5120" href="Cost.Model.html#5036" class="Bound">c</a>
      <a id="5128" href="Data.Bool.Base.html#1505" class="Function Operator">else</a> <a id="5133" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="5142" href="Cost.Model.html#5038" class="Bound">m</a> <a id="5144" class="Symbol">(</a><a id="5145" href="Cost.Model.html#5042" class="Bound">x</a> <a id="5147" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="5149" href="Cost.Model.html#5046" class="Bound">y</a> <a id="5151" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="5153" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="5155" class="Symbol">)</a>
<a id="5157" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="5166" class="Symbol">(</a><a id="5167" href="Cost.Model.html#2944" class="InductiveConstructor">twoArgumentsConstOffDiagonal</a> <a id="5196" href="Cost.Model.html#5196" class="Bound">c</a> <a id="5198" href="Cost.Model.html#5198" class="Bound">m</a><a id="5199" class="Symbol">)</a> <a id="5201" class="Symbol">(</a><a id="5202" href="Cost.Model.html#5202" class="Bound">x</a> <a id="5204" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="5206" href="Cost.Model.html#5206" class="Bound">y</a> <a id="5208" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="5210" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="5212" class="Symbol">)</a> <a id="5214" class="Symbol">=</a>
  <a id="5218" class="Keyword">let</a> <a id="5222" href="Cost.Model.html#5222" class="Bound">a</a> <a id="5224" class="Symbol">=</a> <a id="5226" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="5233" href="Cost.Model.html#5202" class="Bound">x</a>
      <a id="5241" href="Cost.Model.html#5241" class="Bound">b</a> <a id="5243" class="Symbol">=</a> <a id="5245" href="Cost.Model.html#1074" class="Function">sizeOf</a> <a id="5252" href="Cost.Model.html#5206" class="Bound">y</a>
  <a id="5256" class="Keyword">in</a> <a id="5259" href="Data.Bool.Base.html#1505" class="Function Operator">if</a> <a id="5262" href="Data.Bool.Base.html#941" class="Function">not</a> <a id="5266" class="Symbol">(</a><a id="5267" href="Cost.Model.html#5222" class="Bound">a</a> <a id="5269" href="Data.Nat.Base.html#1283" class="Primitive Operator">≡ᵇ</a> <a id="5272" href="Cost.Model.html#5241" class="Bound">b</a><a id="5273" class="Symbol">)</a>
      <a id="5281" href="Data.Bool.Base.html#1505" class="Function Operator">then</a> <a id="5286" href="Cost.Model.html#5196" class="Bound">c</a>
      <a id="5294" href="Data.Bool.Base.html#1505" class="Function Operator">else</a> <a id="5299" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="5308" href="Cost.Model.html#5198" class="Bound">m</a> <a id="5310" class="Symbol">(</a><a id="5311" href="Cost.Model.html#5202" class="Bound">x</a> <a id="5313" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="5315" href="Cost.Model.html#5206" class="Bound">y</a> <a id="5317" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="5319" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="5321" class="Symbol">)</a>
<a id="5323" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="5332" class="Symbol">(</a><a id="5333" href="Cost.Model.html#2304" class="InductiveConstructor">literalCostIn</a> <a id="5347" href="Cost.Model.html#5347" class="Bound">n</a> <a id="5349" href="Cost.Model.html#5349" class="Bound">m</a><a id="5350" class="Symbol">)</a> <a id="5352" href="Cost.Model.html#5352" class="Bound">xs</a> <a id="5355" class="Keyword">with</a> <a id="5360" href="Data.Vec.Base.html#1676" class="Function">lookup</a> <a id="5367" href="Cost.Model.html#5352" class="Bound">xs</a> <a id="5370" href="Cost.Model.html#5347" class="Bound">n</a>
<a id="5372" class="Symbol">...</a> <a id="5376" class="Symbol">|</a> <a id="5378" href="Untyped.CEK.html#1611" class="InductiveConstructor">V-con</a> <a id="5384" class="Symbol">(</a><a id="5385" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="5392" href="Builtin.Constant.AtomicType.html#596" class="InductiveConstructor">aInteger</a><a id="5400" class="Symbol">)</a> <a id="5402" class="Symbol">(</a><a id="5403" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">pos</a> <a id="5407" class="Symbol">(</a><a id="5408" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5412" href="Cost.Model.html#5412" class="Bound">n</a><a id="5413" class="Symbol">))</a> <a id="5416" class="Symbol">=</a> <a id="5418" class="Symbol">(</a><a id="5419" href="Cost.Model.html#5412" class="Bound">n</a> <a id="5421" href="Data.Nat.Base.html#7096" class="Function Operator">/</a> <a id="5423" class="Number">8</a><a id="5424" class="Symbol">)</a> <a id="5426" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="5428" class="Number">1</a>
  <a id="5432" class="Comment">--only uses the literal size if positive integer.</a>
<a id="5482" class="CatchallClause Symbol">...</a><a id="5485" class="CatchallClause"> </a><a id="5486" class="CatchallClause Symbol">|</a><a id="5487" class="CatchallClause"> </a><a id="5488" class="CatchallClause Symbol">_</a> <a id="5490" class="Symbol">=</a> <a id="5492" href="Cost.Model.html#3724" class="Function">runModel</a> <a id="5501" class="Bound">m</a> <a id="5503" class="Bound">xs</a>
</pre>
<h2 id="convert-from-raw-model">Convert from Raw Model</h2>

<p>May fail if the model doesn’t correspond to the number of arguments.</p>

<pre class="Agda"><a id="convertRawModel"></a><a id="5612" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="5628" class="Symbol">:</a> <a id="5630" class="Symbol">∀{</a><a id="5632" href="Cost.Model.html#5632" class="Bound">n</a><a id="5633" class="Symbol">}</a> <a id="5635" class="Symbol">→</a> <a id="5637" href="Cost.Raw.html#4052" class="Datatype">RawModel</a> <a id="5646" class="Symbol">→</a> <a id="5648" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5654" class="Symbol">(</a><a id="5655" href="Cost.Model.html#1748" class="Datatype">CostingModel</a> <a id="5668" href="Cost.Model.html#5632" class="Bound">n</a><a id="5669" class="Symbol">)</a>
<a id="5671" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="5687" class="Symbol">(</a><a id="5688" href="Cost.Raw.html#4077" class="InductiveConstructor">ConstantCost</a> <a id="5701" href="Cost.Model.html#5701" class="Bound">c</a><a id="5702" class="Symbol">)</a> <a id="5704" class="Symbol">=</a> <a id="5706" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5711" class="Symbol">(</a><a id="5712" href="Cost.Model.html#1809" class="InductiveConstructor">constantCost</a> <a id="5725" href="Cost.Model.html#5701" class="Bound">c</a><a id="5726" class="Symbol">)</a>
<a id="5728" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="5744" class="Symbol">(</a><a id="5745" href="Cost.Raw.html#4127" class="InductiveConstructor">AddedSizes</a> <a id="5756" class="Symbol">(</a><a id="5757" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="5762" href="Cost.Model.html#5762" class="Bound">intercept</a> <a id="5772" href="Cost.Model.html#5772" class="Bound">slope</a><a id="5777" class="Symbol">))</a> <a id="5780" class="Symbol">=</a> <a id="5782" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5787" class="Symbol">(</a><a id="5788" href="Cost.Model.html#2374" class="InductiveConstructor">addedSizes</a> <a id="5799" href="Cost.Model.html#5762" class="Bound">intercept</a> <a id="5809" href="Cost.Model.html#5772" class="Bound">slope</a><a id="5814" class="Symbol">)</a>
<a id="5816" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="5832" class="Symbol">(</a><a id="5833" href="Cost.Raw.html#4181" class="InductiveConstructor">MultipliedSizes</a> <a id="5849" class="Symbol">(</a><a id="5850" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="5855" href="Cost.Model.html#5855" class="Bound">intercept</a> <a id="5865" href="Cost.Model.html#5865" class="Bound">slope</a><a id="5870" class="Symbol">))</a> <a id="5873" class="Symbol">=</a> <a id="5875" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5880" class="Symbol">(</a><a id="5881" href="Cost.Model.html#2439" class="InductiveConstructor">multipliedSizes</a> <a id="5897" href="Cost.Model.html#5855" class="Bound">intercept</a> <a id="5907" href="Cost.Model.html#5865" class="Bound">slope</a><a id="5912" class="Symbol">)</a>
<a id="5914" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="5930" class="Symbol">{</a><a id="5931" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5935" href="Cost.Model.html#5935" class="Bound">n</a><a id="5936" class="Symbol">}</a> <a id="5938" class="Symbol">(</a><a id="5939" href="Cost.Raw.html#4235" class="InductiveConstructor">MinSize</a> <a id="5947" class="Symbol">(</a><a id="5948" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="5953" href="Cost.Model.html#5953" class="Bound">intercept</a> <a id="5963" href="Cost.Model.html#5963" class="Bound">slope</a><a id="5968" class="Symbol">))</a> <a id="5971" class="Symbol">=</a> <a id="5973" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5978" class="Symbol">(</a><a id="5979" href="Cost.Model.html#2531" class="InductiveConstructor">minSize</a> <a id="5987" href="Cost.Model.html#5953" class="Bound">intercept</a> <a id="5997" href="Cost.Model.html#5963" class="Bound">slope</a><a id="6002" class="Symbol">)</a>
<a id="6004" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6020" class="Symbol">{</a><a id="6021" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6025" href="Cost.Model.html#6025" class="Bound">n</a><a id="6026" class="Symbol">}</a> <a id="6028" class="Symbol">(</a><a id="6029" href="Cost.Raw.html#4289" class="InductiveConstructor">MaxSize</a> <a id="6037" class="Symbol">(</a><a id="6038" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="6043" href="Cost.Model.html#6043" class="Bound">intercept</a> <a id="6053" href="Cost.Model.html#6053" class="Bound">slope</a><a id="6058" class="Symbol">))</a> <a id="6061" class="Symbol">=</a> <a id="6063" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6068" class="Symbol">(</a><a id="6069" href="Cost.Model.html#2602" class="InductiveConstructor">maxSize</a> <a id="6077" href="Cost.Model.html#6043" class="Bound">intercept</a> <a id="6087" href="Cost.Model.html#6053" class="Bound">slope</a><a id="6092" class="Symbol">)</a>
<a id="6094" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6110" class="Symbol">{</a><a id="6111" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6115" href="Cost.Model.html#6115" class="Bound">n</a><a id="6116" class="Symbol">}</a> <a id="6118" class="Symbol">(</a><a id="6119" href="Cost.Raw.html#4343" class="InductiveConstructor">LinearInX</a> <a id="6129" class="Symbol">(</a><a id="6130" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="6135" href="Cost.Model.html#6135" class="Bound">intercept</a> <a id="6145" href="Cost.Model.html#6145" class="Bound">slope</a><a id="6150" class="Symbol">))</a> <a id="6153" class="Symbol">=</a> <a id="6155" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6160" class="Symbol">(</a><a id="6161" href="Cost.Model.html#1867" class="InductiveConstructor">linearCostIn</a> <a id="6174" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a> <a id="6179" href="Cost.Model.html#6135" class="Bound">intercept</a> <a id="6189" href="Cost.Model.html#6145" class="Bound">slope</a><a id="6194" class="Symbol">)</a>
<a id="6196" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6212" class="Symbol">{</a><a id="6213" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6217" class="Symbol">(</a><a id="6218" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6222" href="Cost.Model.html#6222" class="Bound">n</a><a id="6223" class="Symbol">)}</a> <a id="6226" class="Symbol">(</a><a id="6227" href="Cost.Raw.html#4397" class="InductiveConstructor">LinearInY</a> <a id="6237" class="Symbol">(</a><a id="6238" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="6243" href="Cost.Model.html#6243" class="Bound">intercept</a> <a id="6253" href="Cost.Model.html#6253" class="Bound">slope</a><a id="6258" class="Symbol">))</a> <a id="6261" class="Symbol">=</a> <a id="6263" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6268" class="Symbol">(</a><a id="6269" href="Cost.Model.html#1867" class="InductiveConstructor">linearCostIn</a> <a id="6282" class="Symbol">(</a><a id="6283" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="6287" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="6291" class="Symbol">)</a> <a id="6293" href="Cost.Model.html#6243" class="Bound">intercept</a> <a id="6303" href="Cost.Model.html#6253" class="Bound">slope</a><a id="6308" class="Symbol">)</a>
<a id="6310" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6326" class="Symbol">{</a><a id="6327" class="Number">3</a><a id="6328" class="Symbol">}</a> <a id="6330" class="Symbol">(</a><a id="6331" href="Cost.Raw.html#4613" class="InductiveConstructor">LinearInYAndZ</a> <a id="6345" class="Symbol">(</a><a id="6346" href="Cost.Model.html#919" class="InductiveConstructor">mkLF2</a> <a id="6352" href="Cost.Model.html#6352" class="Bound">intercept</a> <a id="6362" href="Cost.Model.html#6362" class="Bound">slope1</a> <a id="6369" href="Cost.Model.html#6369" class="Bound">slope2</a><a id="6375" class="Symbol">))</a> <a id="6378" class="Symbol">=</a>
                   <a id="6399" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6404" class="Symbol">(</a><a id="6405" href="Cost.Model.html#3049" class="InductiveConstructor">twoArgumentsLinearInYAndZ</a> <a id="6431" href="Cost.Model.html#6352" class="Bound">intercept</a> <a id="6441" href="Cost.Model.html#6362" class="Bound">slope1</a> <a id="6448" href="Cost.Model.html#6369" class="Bound">slope2</a><a id="6454" class="Symbol">)</a>
<a id="6456" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6472" class="Symbol">{</a><a id="6473" class="Number">3</a><a id="6474" class="Symbol">}</a> <a id="6476" class="Symbol">(</a><a id="6477" href="Cost.Raw.html#4559" class="InductiveConstructor">LinearInMaxYZ</a> <a id="6491" class="Symbol">(</a><a id="6492" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="6497" href="Cost.Model.html#6497" class="Bound">intercept</a> <a id="6507" href="Cost.Model.html#6507" class="Bound">slope</a><a id="6512" class="Symbol">))</a> <a id="6515" class="Symbol">=</a> <a id="6517" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6522" class="Symbol">(</a><a id="6523" href="Cost.Model.html#3127" class="InductiveConstructor">twoArgumentsLinearInMaxYZ</a> <a id="6549" href="Cost.Model.html#6497" class="Bound">intercept</a> <a id="6559" href="Cost.Model.html#6507" class="Bound">slope</a><a id="6564" class="Symbol">)</a>
<a id="6566" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6582" class="Symbol">{</a><a id="6583" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6587" class="Symbol">(</a><a id="6588" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6592" href="Cost.Model.html#6592" class="Bound">n</a><a id="6593" class="Symbol">)}</a> <a id="6596" class="Symbol">(</a><a id="6597" href="Cost.Raw.html#4679" class="InductiveConstructor">QuadraticInY</a> <a id="6610" class="Symbol">(</a><a id="6611" href="Cost.Model.html#962" class="InductiveConstructor">mkQF1</a> <a id="6617" href="Cost.Model.html#6617" class="Bound">c0</a> <a id="6620" href="Cost.Model.html#6620" class="Bound">c1</a> <a id="6623" href="Cost.Model.html#6623" class="Bound">c2</a><a id="6625" class="Symbol">))</a> <a id="6628" class="Symbol">=</a> <a id="6630" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6635" class="Symbol">(</a><a id="6636" href="Cost.Model.html#1940" class="InductiveConstructor">quadraticCostIn1</a> <a id="6653" class="Symbol">(</a><a id="6654" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="6658" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="6662" class="Symbol">)</a> <a id="6664" href="Cost.Model.html#6617" class="Bound">c0</a> <a id="6667" href="Cost.Model.html#6620" class="Bound">c1</a> <a id="6670" href="Cost.Model.html#6623" class="Bound">c2</a><a id="6672" class="Symbol">)</a>
<a id="6674" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6690" class="Symbol">{</a><a id="6691" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6695" class="Symbol">(</a><a id="6696" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6700" class="Symbol">(</a><a id="6701" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6705" href="Cost.Model.html#6705" class="Bound">n</a><a id="6706" class="Symbol">))}(</a><a id="6710" href="Cost.Raw.html#4451" class="InductiveConstructor">LinearInZ</a> <a id="6720" class="Symbol">(</a><a id="6721" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="6726" href="Cost.Model.html#6726" class="Bound">intercept</a> <a id="6736" href="Cost.Model.html#6736" class="Bound">slope</a><a id="6741" class="Symbol">))</a> <a id="6744" class="Symbol">=</a> <a id="6746" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6751" class="Symbol">(</a><a id="6752" href="Cost.Model.html#1867" class="InductiveConstructor">linearCostIn</a> <a id="6765" class="Symbol">(</a><a id="6766" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="6770" class="Symbol">(</a><a id="6771" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="6775" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="6779" class="Symbol">))</a> <a id="6782" href="Cost.Model.html#6726" class="Bound">intercept</a> <a id="6792" href="Cost.Model.html#6736" class="Bound">slope</a><a id="6797" class="Symbol">)</a>
<a id="6799" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6815" class="Symbol">{</a><a id="6816" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6820" class="Symbol">(</a><a id="6821" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6825" class="Symbol">(</a><a id="6826" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6830" href="Cost.Model.html#6830" class="Bound">n</a><a id="6831" class="Symbol">))}</a> <a id="6835" class="Symbol">(</a><a id="6836" href="Cost.Raw.html#4747" class="InductiveConstructor">QuadraticInZ</a> <a id="6849" class="Symbol">(</a><a id="6850" href="Cost.Model.html#962" class="InductiveConstructor">mkQF1</a> <a id="6856" href="Cost.Model.html#6856" class="Bound">c0</a> <a id="6859" href="Cost.Model.html#6859" class="Bound">c1</a> <a id="6862" href="Cost.Model.html#6862" class="Bound">c2</a><a id="6864" class="Symbol">))</a> <a id="6867" class="Symbol">=</a> <a id="6869" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6874" class="Symbol">(</a><a id="6875" href="Cost.Model.html#1940" class="InductiveConstructor">quadraticCostIn1</a> <a id="6892" class="Symbol">(</a><a id="6893" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="6897" class="Symbol">(</a><a id="6898" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="6902" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="6906" class="Symbol">))</a> <a id="6909" href="Cost.Model.html#6856" class="Bound">c0</a> <a id="6912" href="Cost.Model.html#6859" class="Bound">c1</a> <a id="6915" href="Cost.Model.html#6862" class="Bound">c2</a><a id="6917" class="Symbol">)</a>
<a id="6919" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="6935" class="Symbol">{</a><a id="6936" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6940" class="Symbol">(</a><a id="6941" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6945" href="Cost.Model.html#6945" class="Bound">n</a><a id="6946" class="Symbol">)}</a> <a id="6949" class="Symbol">(</a><a id="6950" href="Cost.Raw.html#4815" class="InductiveConstructor">QuadraticInXAndY</a> <a id="6967" class="Symbol">(</a><a id="6968" href="Cost.Model.html#1003" class="InductiveConstructor">mkQF2</a> <a id="6974" href="Cost.Model.html#6974" class="Bound">minVal</a> <a id="6981" href="Cost.Model.html#6981" class="Bound">c00</a> <a id="6985" href="Cost.Model.html#6985" class="Bound">c10</a> <a id="6989" href="Cost.Model.html#6989" class="Bound">c01</a> <a id="6993" href="Cost.Model.html#6993" class="Bound">c20</a> <a id="6997" href="Cost.Model.html#6997" class="Bound">c11</a> <a id="7001" href="Cost.Model.html#7001" class="Bound">c02</a><a id="7004" class="Symbol">))</a> <a id="7007" class="Symbol">=</a>
    <a id="7013" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7018" class="Symbol">(</a><a id="7019" href="Cost.Model.html#2032" class="InductiveConstructor">quadraticCostIn2</a> <a id="7036" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a> <a id="7041" class="Symbol">(</a><a id="7042" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="7046" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="7050" class="Symbol">)</a> <a id="7052" href="Cost.Model.html#6974" class="Bound">minVal</a> <a id="7059" href="Cost.Model.html#6981" class="Bound">c00</a> <a id="7063" href="Cost.Model.html#6985" class="Bound">c10</a> <a id="7067" href="Cost.Model.html#6989" class="Bound">c01</a> <a id="7071" href="Cost.Model.html#6993" class="Bound">c20</a> <a id="7075" href="Cost.Model.html#6997" class="Bound">c11</a> <a id="7079" href="Cost.Model.html#7001" class="Bound">c02</a><a id="7082" class="Symbol">)</a>
<a id="7084" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7100" class="Symbol">{</a><a id="7101" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="7105" class="Symbol">(</a><a id="7106" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="7110" class="Symbol">(</a><a id="7111" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="7115" href="Cost.Model.html#7115" class="Bound">n</a><a id="7116" class="Symbol">))}</a> <a id="7120" class="Symbol">(</a><a id="7121" href="Cost.Raw.html#4505" class="InductiveConstructor">LiteralInYOrLinearInZ</a> <a id="7143" class="Symbol">(</a><a id="7144" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="7149" href="Cost.Model.html#7149" class="Bound">intercept</a> <a id="7159" href="Cost.Model.html#7159" class="Bound">slope</a><a id="7164" class="Symbol">))</a> <a id="7167" class="Symbol">=</a>
    <a id="7173" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7178" class="Symbol">(</a><a id="7179" href="Cost.Model.html#2304" class="InductiveConstructor">literalCostIn</a>  <a id="7194" class="Symbol">(</a><a id="7195" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="7199" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="7203" class="Symbol">)</a> <a id="7205" class="Symbol">(</a><a id="7206" href="Cost.Model.html#1867" class="InductiveConstructor">linearCostIn</a> <a id="7219" class="Symbol">(</a><a id="7220" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="7224" class="Symbol">(</a><a id="7225" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="7229" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="7233" class="Symbol">))</a> <a id="7236" href="Cost.Model.html#7149" class="Bound">intercept</a> <a id="7246" href="Cost.Model.html#7159" class="Bound">slope</a><a id="7251" class="Symbol">))</a>
<a id="7254" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7270" class="Symbol">{</a><a id="7271" class="Number">2</a><a id="7272" class="Symbol">}</a> <a id="7274" class="Symbol">(</a><a id="7275" href="Cost.Raw.html#4883" class="InductiveConstructor">SubtractedSizes</a> <a id="7291" class="Symbol">(</a><a id="7292" href="Cost.Model.html#882" class="InductiveConstructor">mkLF</a> <a id="7297" href="Cost.Model.html#7297" class="Bound">intercept</a> <a id="7307" href="Cost.Model.html#7307" class="Bound">slope</a><a id="7312" class="Symbol">)</a> <a id="7314" href="Cost.Model.html#7314" class="Bound">c</a><a id="7315" class="Symbol">)</a> <a id="7317" class="Symbol">=</a> <a id="7319" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7324" class="Symbol">(</a><a id="7325" href="Cost.Model.html#2701" class="InductiveConstructor">twoArgumentsSubtractedSizes</a> <a id="7353" href="Cost.Model.html#7297" class="Bound">intercept</a> <a id="7363" href="Cost.Model.html#7307" class="Bound">slope</a> <a id="7369" href="Cost.Model.html#7314" class="Bound">c</a><a id="7370" class="Symbol">)</a>
<a id="7372" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7388" class="Symbol">{</a><a id="7389" class="Number">2</a><a id="7390" class="Symbol">}</a> <a id="7392" class="Symbol">(</a><a id="7393" href="Cost.Raw.html#4950" class="InductiveConstructor">ConstAboveDiagonal</a> <a id="7412" href="Cost.Model.html#7412" class="Bound">c</a> <a id="7414" href="Cost.Model.html#7414" class="Bound">m</a><a id="7415" class="Symbol">)</a> <a id="7417" class="Symbol">=</a> <a id="7419" href="Cost.Model.html#325" class="Function">mapMaybe</a> <a id="7428" class="Symbol">(</a><a id="7429" href="Cost.Model.html#2784" class="InductiveConstructor">twoArgumentsConstAboveDiagonal</a> <a id="7460" href="Cost.Model.html#7412" class="Bound">c</a><a id="7461" class="Symbol">)</a> <a id="7463" class="Symbol">(</a><a id="7464" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7480" href="Cost.Model.html#7414" class="Bound">m</a><a id="7481" class="Symbol">)</a>
<a id="7483" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7499" class="Symbol">{</a><a id="7500" class="Number">2</a><a id="7501" class="Symbol">}</a> <a id="7503" class="Symbol">(</a><a id="7504" href="Cost.Raw.html#5011" class="InductiveConstructor">ConstBelowDiagonal</a> <a id="7523" href="Cost.Model.html#7523" class="Bound">c</a> <a id="7525" href="Cost.Model.html#7525" class="Bound">m</a><a id="7526" class="Symbol">)</a> <a id="7528" class="Symbol">=</a> <a id="7530" href="Cost.Model.html#325" class="Function">mapMaybe</a> <a id="7539" class="Symbol">(</a><a id="7540" href="Cost.Model.html#2864" class="InductiveConstructor">twoArgumentsConstBelowDiagonal</a> <a id="7571" href="Cost.Model.html#7523" class="Bound">c</a><a id="7572" class="Symbol">)</a> <a id="7574" class="Symbol">(</a><a id="7575" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7591" href="Cost.Model.html#7525" class="Bound">m</a><a id="7592" class="Symbol">)</a>
<a id="7594" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7610" class="Symbol">{</a><a id="7611" class="Number">2</a><a id="7612" class="Symbol">}</a> <a id="7614" class="Symbol">(</a><a id="7615" href="Cost.Raw.html#5072" class="InductiveConstructor">ConstOffDiagonal</a> <a id="7632" href="Cost.Model.html#7632" class="Bound">c</a> <a id="7634" href="Cost.Model.html#7634" class="Bound">m</a><a id="7635" class="Symbol">)</a> <a id="7637" class="Symbol">=</a> <a id="7639" href="Cost.Model.html#325" class="Function">mapMaybe</a> <a id="7648" class="Symbol">(</a><a id="7649" href="Cost.Model.html#2944" class="InductiveConstructor">twoArgumentsConstOffDiagonal</a> <a id="7678" href="Cost.Model.html#7632" class="Bound">c</a><a id="7679" class="Symbol">)</a> <a id="7681" class="Symbol">(</a><a id="7682" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7698" href="Cost.Model.html#7634" class="Bound">m</a><a id="7699" class="Symbol">)</a>
<a id="7701" href="Cost.Model.html#5612" class="CatchallClause Function">convertRawModel</a><a id="7716" class="CatchallClause"> </a><a id="7717" class="CatchallClause Symbol">_</a> <a id="7719" class="Symbol">=</a> <a id="7721" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

<a id="convertCpuAndMemoryModel"></a><a id="7730" href="Cost.Model.html#7730" class="Function">convertCpuAndMemoryModel</a> <a id="7755" class="Symbol">:</a> <a id="7757" class="Symbol">∀{</a><a id="7759" href="Cost.Model.html#7759" class="Bound">n</a><a id="7760" class="Symbol">}</a> <a id="7762" class="Symbol">→</a> <a id="7764" href="Cost.Raw.html#5481" class="Record">CpuAndMemoryModel</a> <a id="7782" class="Symbol">→</a> <a id="7784" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7790" class="Symbol">(</a><a id="7791" href="Cost.Model.html#3303" class="Record">BuiltinModel</a> <a id="7804" href="Cost.Model.html#7759" class="Bound">n</a><a id="7805" class="Symbol">)</a>
<a id="7807" href="Cost.Model.html#7730" class="Function">convertCpuAndMemoryModel</a> <a id="7832" class="Symbol">(</a><a id="7833" href="Cost.Raw.html#5528" class="InductiveConstructor">mkCpuAndMemoryModel</a> <a id="7853" href="Cost.Model.html#7853" class="Bound">cpuModel</a> <a id="7862" href="Cost.Model.html#7862" class="Bound">memoryModel</a><a id="7873" class="Symbol">)</a> <a id="7875" class="Keyword">with</a> <a id="7880" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7896" href="Cost.Model.html#7853" class="Bound">cpuModel</a> <a id="7905" class="Symbol">|</a> <a id="7907" href="Cost.Model.html#5612" class="Function">convertRawModel</a> <a id="7923" href="Cost.Model.html#7862" class="Bound">memoryModel</a>
<a id="7935" class="Symbol">...</a> <a id="7939" class="Symbol">|</a> <a id="7941" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7946" href="Cost.Model.html#7946" class="Bound">cm</a> <a id="7949" class="Symbol">|</a> <a id="7951" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7956" href="Cost.Model.html#7956" class="Bound">mm</a> <a id="7959" class="Symbol">=</a> <a id="7961" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7966" class="Symbol">(</a><a id="7967" class="Keyword">record</a> <a id="7974" class="Symbol">{</a> <a id="7976" href="Cost.Model.html#3355" class="Field">costingCPU</a> <a id="7987" class="Symbol">=</a> <a id="7989" href="Cost.Model.html#7946" class="Bound">cm</a> <a id="7992" class="Symbol">;</a> <a id="7994" href="Cost.Model.html#3366" class="Field">costingMem</a> <a id="8005" class="Symbol">=</a> <a id="8007" href="Cost.Model.html#7956" class="Bound">mm</a> <a id="8010" class="Symbol">})</a>
<a id="8013" class="CatchallClause Symbol">...</a><a id="8016" class="CatchallClause"> </a><a id="8017" class="CatchallClause Symbol">|</a><a id="8018" class="CatchallClause"> </a><a id="8019" class="CatchallClause Symbol">_</a><a id="8020" class="CatchallClause"> </a><a id="8021" class="CatchallClause Symbol">|</a><a id="8022" class="CatchallClause"> </a><a id="8023" class="CatchallClause Symbol">_</a> <a id="8025" class="Symbol">=</a> <a id="8027" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
</pre>
<h2 id="creation-of-mapping-function">Creation of mapping function</h2>

<p>Creates a function mapping builtins to their corresponding costing models,
starting from a <code class="language-plaintext highlighter-rouge">BuiltinCostMap</code>.</p>

<p>We need to construct a <code class="language-plaintext highlighter-rouge">BuiltinModel (arity b)</code> for each <code class="language-plaintext highlighter-rouge">b</code>, and this may fail if
the model in the map doesn’t correspond to the arity.</p>

<pre class="Agda"><a id="getModel"></a><a id="8325" href="Cost.Model.html#8325" class="Function">getModel</a> <a id="8334" class="Symbol">:</a> <a id="8336" href="Builtin.html#1417" class="Datatype">Builtin</a> <a id="8344" class="Symbol">→</a> <a id="8346" href="Cost.Raw.html#5703" class="Function">BuiltinCostMap</a> <a id="8361" class="Symbol">→</a> <a id="8363" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8369" class="Symbol">(</a><a id="8370" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="8372" href="Builtin.html#1417" class="Datatype">Builtin</a> <a id="8380" class="Symbol">(λ</a> <a id="8383" href="Cost.Model.html#8383" class="Bound">b</a> <a id="8385" class="Symbol">→</a> <a id="8387" class="Symbol">(</a><a id="8388" href="Cost.Model.html#3303" class="Record">BuiltinModel</a> <a id="8401" class="Symbol">(</a><a id="8402" href="Builtin.html#16320" class="Function">arity</a> <a id="8408" href="Cost.Model.html#8383" class="Bound">b</a><a id="8409" class="Symbol">))))</a>
<a id="8414" href="Cost.Model.html#8325" class="Function">getModel</a> <a id="8423" href="Cost.Model.html#8423" class="Bound">b</a> <a id="8425" href="Utils.html#5142" class="InductiveConstructor">[]</a> <a id="8428" class="Symbol">=</a> <a id="8430" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8438" href="Cost.Model.html#8325" class="Function">getModel</a> <a id="8447" href="Cost.Model.html#8447" class="Bound">b</a> <a id="8449" class="Symbol">((</a><a id="8451" href="Cost.Model.html#8451" class="Bound">bn</a> <a id="8454" href="Utils.html#4919" class="InductiveConstructor Operator">,</a> <a id="8456" href="Cost.Model.html#8456" class="Bound">rm</a><a id="8458" class="Symbol">)</a> <a id="8460" href="Utils.html#5157" class="InductiveConstructor Operator">∷</a> <a id="8462" href="Cost.Model.html#8462" class="Bound">xs</a><a id="8464" class="Symbol">)</a> <a id="8466" class="Keyword">with</a> <a id="8471" href="Builtin.html#33149" class="Function">showBuiltin</a> <a id="8483" href="Cost.Model.html#8447" class="Bound">b</a> <a id="8485" href="Data.String.Properties.html#4799" class="Function Operator">==</a> <a id="8488" href="Cost.Model.html#8451" class="Bound">bn</a>
<a id="8491" class="Symbol">...</a> <a id="8495" class="Symbol">|</a> <a id="8497" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="8503" class="Symbol">=</a> <a id="8505" href="Cost.Model.html#8325" class="Function">getModel</a> <a id="8514" class="Bound">b</a> <a id="8516" class="Bound">xs</a>
<a id="8519" class="Symbol">...</a> <a id="8523" class="Symbol">|</a> <a id="8525" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8530" class="Symbol">=</a> <a id="8532" href="Cost.Model.html#325" class="Function">mapMaybe</a> <a id="8541" class="Symbol">(</a><a id="8542" class="Bound">b</a> <a id="8544" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="8546" class="Symbol">)</a> <a id="8548" class="Symbol">(</a><a id="8549" href="Cost.Model.html#7730" class="Function">convertCpuAndMemoryModel</a> <a id="8574" class="Bound">rm</a><a id="8576" class="Symbol">)</a>
</pre>
<p>Once we have a list of all the builtins and their corresponding model,
we need to turn this into a function.</p>

<p>However Agda doesn’t know that we are providing a model for <em>every</em> constructor,
so we provide a <code class="language-plaintext highlighter-rouge">dummyModel</code> to answer in the <code class="language-plaintext highlighter-rouge">[]</code> case.</p>

<pre class="Agda"><a id="dummyModel"></a><a id="8836" href="Cost.Model.html#8836" class="Function">dummyModel</a> <a id="8847" class="Symbol">:</a>  <a id="8850" class="Symbol">∀{</a><a id="8852" href="Cost.Model.html#8852" class="Bound">n</a><a id="8853" class="Symbol">}</a> <a id="8855" class="Symbol">→</a> <a id="8857" href="Cost.Model.html#3303" class="Record">BuiltinModel</a> <a id="8870" href="Cost.Model.html#8852" class="Bound">n</a>
<a id="8872" href="Cost.Model.html#8836" class="Function">dummyModel</a> <a id="8883" class="Symbol">=</a> <a id="8885" class="Keyword">record</a> <a id="8892" class="Symbol">{</a> <a id="8894" href="Cost.Model.html#3355" class="Field">costingCPU</a> <a id="8905" class="Symbol">=</a> <a id="8907" href="Cost.Model.html#1809" class="InductiveConstructor">constantCost</a> <a id="8920" class="Number">0</a> <a id="8922" class="Symbol">;</a> <a id="8924" href="Cost.Model.html#3366" class="Field">costingMem</a> <a id="8935" class="Symbol">=</a> <a id="8937" href="Cost.Model.html#1809" class="InductiveConstructor">constantCost</a> <a id="8950" class="Number">0</a> <a id="8952" class="Symbol">}</a>

<a id="lookupModel"></a><a id="8955" href="Cost.Model.html#8955" class="Function">lookupModel</a> <a id="8967" class="Symbol">:</a> <a id="8969" href="Agda.Builtin.List.html#147" class="Datatype">L.List</a> <a id="8976" class="Symbol">(</a><a id="8977" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="8979" href="Builtin.html#1417" class="Datatype">Builtin</a> <a id="8987" class="Symbol">(λ</a> <a id="8990" href="Cost.Model.html#8990" class="Bound">b</a> <a id="8992" class="Symbol">→</a> <a id="8994" class="Symbol">(</a><a id="8995" href="Cost.Model.html#3303" class="Record">BuiltinModel</a> <a id="9008" class="Symbol">(</a><a id="9009" href="Builtin.html#16320" class="Function">arity</a> <a id="9015" href="Cost.Model.html#8990" class="Bound">b</a><a id="9016" class="Symbol">))))</a> <a id="9021" class="Symbol">→</a> <a id="9023" class="Symbol">(</a><a id="9024" href="Cost.Model.html#9024" class="Bound">b</a> <a id="9026" class="Symbol">:</a> <a id="9028" href="Builtin.html#1417" class="Datatype">Builtin</a><a id="9035" class="Symbol">)</a> <a id="9037" class="Symbol">→</a> <a id="9039" href="Cost.Model.html#3303" class="Record">BuiltinModel</a> <a id="9052" class="Symbol">(</a><a id="9053" href="Builtin.html#16320" class="Function">arity</a> <a id="9059" href="Cost.Model.html#9024" class="Bound">b</a><a id="9060" class="Symbol">)</a>
<a id="9062" href="Cost.Model.html#8955" class="Function">lookupModel</a> <a id="9074" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9077" class="Symbol">_</a> <a id="9079" class="Symbol">=</a> <a id="9081" href="Cost.Model.html#8836" class="Function">dummyModel</a>  <a id="9093" class="Comment">--should not happen if builtinList is complete</a>
                                  <a id="9174" class="Comment">--but Agda doesn&#39;t know this (we do).</a>
<a id="9212" href="Cost.Model.html#8955" class="Function">lookupModel</a> <a id="9224" class="Symbol">((</a><a id="9226" href="Cost.Model.html#9226" class="Bound">b</a> <a id="9228" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9230" href="Cost.Model.html#9230" class="Bound">bm</a><a id="9232" class="Symbol">)</a> <a id="9234" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9236" href="Cost.Model.html#9236" class="Bound">xs</a><a id="9238" class="Symbol">)</a> <a id="9240" href="Cost.Model.html#9240" class="Bound">b&#39;</a> <a id="9243" class="Keyword">with</a> <a id="9248" href="Builtin.html#33003" class="Function">decBuiltin</a> <a id="9259" href="Cost.Model.html#9226" class="Bound">b</a> <a id="9261" href="Cost.Model.html#9240" class="Bound">b&#39;</a>
<a id="9264" class="Symbol">...</a> <a id="9268" class="Symbol">|</a> <a id="9270" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="9276" href="Relation.Nullary.Decidable.Core.html#1905" class="InductiveConstructor Operator">because</a> <a id="9284" href="Cost.Model.html#9284" class="Bound">p</a> <a id="9286" class="Symbol">=</a> <a id="9288" href="Cost.Model.html#8955" class="Function">lookupModel</a> <a id="9300" class="Bound">xs</a> <a id="9303" class="Bound">b&#39;</a>
<a id="9306" class="Symbol">...</a> <a id="9310" class="Symbol">|</a> <a id="9312" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9317" href="Relation.Nullary.Decidable.Core.html#1905" class="InductiveConstructor Operator">because</a> <a id="9325" href="Relation.Nullary.Reflects.html#1054" class="InductiveConstructor">ofʸ</a> <a id="9329" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="9334" class="Symbol">=</a> <a id="9336" class="Bound">bm</a>

<a id="allJust"></a><a id="9340" href="Cost.Model.html#9340" class="Function">allJust</a> <a id="9348" class="Symbol">:</a> <a id="9350" class="Symbol">{</a><a id="9351" href="Cost.Model.html#9351" class="Bound">A</a> <a id="9353" class="Symbol">:</a> <a id="9355" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="9358" class="Symbol">}</a> <a id="9360" class="Symbol">→</a> <a id="9362" class="Symbol">(</a><a id="9363" href="Cost.Model.html#9363" class="Bound">xs</a> <a id="9366" class="Symbol">:</a> <a id="9368" href="Agda.Builtin.List.html#147" class="Datatype">L.List</a> <a id="9375" class="Symbol">(</a><a id="9376" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9382" href="Cost.Model.html#9351" class="Bound">A</a><a id="9383" class="Symbol">))</a> <a id="9386" class="Symbol">→</a> <a id="9388" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9394" class="Symbol">(</a><a id="9395" href="Agda.Builtin.List.html#147" class="Datatype">L.List</a> <a id="9402" href="Cost.Model.html#9351" class="Bound">A</a><a id="9403" class="Symbol">)</a>
<a id="9405" href="Cost.Model.html#9340" class="Function">allJust</a> <a id="9413" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9416" class="Symbol">=</a> <a id="9418" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9423" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="9426" href="Cost.Model.html#9340" class="Function">allJust</a> <a id="9434" class="Symbol">(</a><a id="9435" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9440" href="Cost.Model.html#9440" class="Bound">x</a> <a id="9442" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9444" href="Cost.Model.html#9444" class="Bound">xs</a><a id="9446" class="Symbol">)</a> <a id="9448" class="Keyword">with</a> <a id="9453" href="Cost.Model.html#9340" class="Function">allJust</a> <a id="9461" href="Cost.Model.html#9444" class="Bound">xs</a>
<a id="9464" class="Symbol">...</a> <a id="9468" class="Symbol">|</a> <a id="9470" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9475" href="Cost.Model.html#9475" class="Bound">xs&#39;</a> <a id="9479" class="Symbol">=</a> <a id="9481" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9486" class="Symbol">(</a><a id="9487" class="Bound">x</a> <a id="9489" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9491" href="Cost.Model.html#9475" class="Bound">xs&#39;</a><a id="9494" class="Symbol">)</a>
<a id="9496" class="Symbol">...</a> <a id="9500" class="Symbol">|</a> <a id="9502" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9510" class="Symbol">=</a> <a id="9512" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="9520" href="Cost.Model.html#9340" class="Function">allJust</a> <a id="9528" class="Symbol">(</a><a id="9529" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9537" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9539" href="Cost.Model.html#9539" class="Bound">xs</a><a id="9541" class="Symbol">)</a> <a id="9543" class="Symbol">=</a> <a id="9545" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

<a id="ModelAssignment"></a><a id="9554" href="Cost.Model.html#9554" class="Function">ModelAssignment</a> <a id="9570" class="Symbol">:</a> <a id="9572" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="9576" href="Cost.Model.html#9554" class="Function">ModelAssignment</a> <a id="9592" class="Symbol">=</a> <a id="9594" class="Symbol">(</a><a id="9595" href="Cost.Model.html#9595" class="Bound">b</a> <a id="9597" class="Symbol">:</a> <a id="9599" href="Builtin.html#1417" class="Datatype">Builtin</a><a id="9606" class="Symbol">)</a> <a id="9608" class="Symbol">→</a> <a id="9610" href="Cost.Model.html#3303" class="Record">BuiltinModel</a> <a id="9623" class="Symbol">(</a><a id="9624" href="Builtin.html#16320" class="Function">arity</a> <a id="9630" href="Cost.Model.html#9595" class="Bound">b</a><a id="9631" class="Symbol">)</a>

<a id="createMap"></a><a id="9634" href="Cost.Model.html#9634" class="Function">createMap</a> <a id="9644" class="Symbol">:</a> <a id="9646" href="Cost.Raw.html#5703" class="Function">BuiltinCostMap</a> <a id="9661" class="Symbol">→</a> <a id="9663" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9669" href="Cost.Model.html#9554" class="Function">ModelAssignment</a>
<a id="9685" href="Cost.Model.html#9634" class="Function">createMap</a> <a id="9695" href="Cost.Model.html#9695" class="Bound">bmap</a> <a id="9700" class="Symbol">=</a>
      <a id="9708" class="Keyword">let</a> <a id="9712" href="Cost.Model.html#9712" class="Bound">modelMaybeList</a> <a id="9727" class="Symbol">=</a> <a id="9729" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="9735" class="Symbol">(λ</a> <a id="9738" href="Cost.Model.html#9738" class="Bound">b</a> <a id="9740" class="Symbol">→</a> <a id="9742" href="Cost.Model.html#8325" class="Function">getModel</a> <a id="9751" href="Cost.Model.html#9738" class="Bound">b</a> <a id="9753" href="Cost.Model.html#9695" class="Bound">bmap</a><a id="9757" class="Symbol">)</a> <a id="9759" href="Builtin.html#33294" class="Function">builtinList</a>
          <a id="9781" href="Cost.Model.html#9781" class="Bound">maybeModelList</a> <a id="9796" class="Symbol">=</a> <a id="9798" href="Cost.Model.html#9340" class="Function">allJust</a> <a id="9806" href="Cost.Model.html#9712" class="Bound">modelMaybeList</a>
      <a id="9827" class="Keyword">in</a> <a id="9830" href="Cost.Model.html#325" class="Function">mapMaybe</a> <a id="9839" href="Cost.Model.html#8955" class="Function">lookupModel</a> <a id="9851" href="Cost.Model.html#9781" class="Bound">maybeModelList</a>
</pre>

    </section>
  </body>
</html>