<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Algorithmic.Evaluation</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>Algorithmic.Evaluation</h1>
    <section>
      <pre class="Agda"><a id="56" class="Keyword">module</a> <a id="63" href="Algorithmic.Evaluation.html" class="Module">Algorithmic.Evaluation</a> <a id="86" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="113" class="Keyword">open</a> <a id="118" class="Keyword">import</a> <a id="125" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="134" class="Keyword">using</a> <a id="140" class="Symbol">(</a><a id="141" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="142" class="Symbol">;</a><a id="143" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="147" class="Symbol">;</a><a id="148" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="151" class="Symbol">)</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="203" class="Keyword">using</a> <a id="209" class="Symbol">(</a><a id="210" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="214" class="Symbol">)</a>
<a id="216" class="Keyword">open</a> <a id="221" class="Keyword">import</a> <a id="228" href="Utils.html" class="Module">Utils</a> <a id="234" class="Keyword">using</a> <a id="240" class="Symbol">(</a><a id="241" href="Utils.html#7316" class="InductiveConstructor">*</a><a id="242" class="Symbol">;</a><a id="243" href="Utils.html#1125" class="Datatype">Either</a><a id="249" class="Symbol">;</a><a id="250" href="Utils.html#1158" class="InductiveConstructor">inj₁</a><a id="254" class="Symbol">;</a><a id="255" href="Utils.html#4355" class="Datatype">RuntimeError</a><a id="267" class="Symbol">;</a><a id="268" href="Utils.html#2909" class="Field">return</a><a id="274" class="Symbol">)</a>
<a id="276" class="Keyword">open</a> <a id="281" href="Utils.html#4355" class="Module">RuntimeError</a>

<a id="295" class="Keyword">open</a> <a id="300" class="Keyword">import</a> <a id="307" href="Type.html" class="Module">Type</a> <a id="312" class="Keyword">using</a> <a id="318" class="Symbol">(</a><a id="319" href="Type.html#534" class="InductiveConstructor">∅</a><a id="320" class="Symbol">)</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Type.BetaNormal.html" class="Module">Type.BetaNormal</a> <a id="350" class="Keyword">using</a> <a id="356" class="Symbol">(</a><a id="357" href="Type.BetaNormal.html#1044" class="Datatype Operator">_⊢Nf⋆_</a><a id="363" class="Symbol">)</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Algorithmic.html" class="Module">Algorithmic</a> <a id="389" class="Keyword">using</a> <a id="395" class="Symbol">(</a><a id="396" href="Algorithmic.html#5277" class="Datatype Operator">_⊢_</a><a id="399" class="Symbol">;</a><a id="400" href="Algorithmic.html#1667" class="InductiveConstructor">∅</a><a id="401" class="Symbol">)</a>
<a id="403" class="Keyword">open</a> <a id="408" href="Algorithmic.html#5277" class="Module Operator">_⊢_</a>
<a id="412" class="Keyword">open</a> <a id="417" class="Keyword">import</a> <a id="424" href="Algorithmic.ReductionEC.html" class="Module">Algorithmic.ReductionEC</a> <a id="448" class="Keyword">using</a> <a id="454" class="Symbol">(</a><a id="455" href="Algorithmic.ReductionEC.html#2130" class="Datatype">Value</a><a id="460" class="Symbol">;</a><a id="461" href="Algorithmic.ReductionEC.html#5668" class="Datatype">Error</a><a id="466" class="Symbol">;</a><a id="467" href="Algorithmic.ReductionEC.html#10826" class="Datatype Operator">_—↠_</a><a id="471" class="Symbol">;</a><a id="472" href="Algorithmic.ReductionEC.html#10349" class="Datatype Operator">_—→_</a><a id="476" class="Symbol">;</a><a id="477" href="Algorithmic.ReductionEC.html#5748" class="InductiveConstructor">E-error</a><a id="484" class="Symbol">)</a>
<a id="486" class="Keyword">open</a> <a id="491" class="Keyword">import</a> <a id="498" href="Algorithmic.ReductionEC.Progress.html" class="Module">Algorithmic.ReductionEC.Progress</a> <a id="531" class="Keyword">using</a>  <a id="538" class="Symbol">(</a><a id="539" href="Algorithmic.ReductionEC.Progress.html#892" class="Datatype">Progress</a><a id="547" class="Symbol">;</a><a id="548" href="Algorithmic.ReductionEC.Progress.html#1014" class="InductiveConstructor">done</a><a id="552" class="Symbol">;</a><a id="553" href="Algorithmic.ReductionEC.Progress.html#2067" class="Function">progress</a><a id="561" class="Symbol">;</a><a id="562" href="Algorithmic.ReductionEC.Progress.html#942" class="InductiveConstructor">step</a><a id="566" class="Symbol">)</a>
<a id="568" class="Keyword">open</a> <a id="573" href="Algorithmic.ReductionEC.html#10826" class="Module Operator">_—↠_</a>
</pre>
<h2 id="evaluation">Evaluation</h2>

<p>As previously, gas is specified by a natural number.</p>
<pre class="Agda"><a id="655" class="Keyword">data</a> <a id="Gas"></a><a id="660" href="Algorithmic.Evaluation.html#660" class="Datatype">Gas</a> <a id="664" class="Symbol">:</a> <a id="666" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="670" class="Keyword">where</a>
  <a id="Gas.gas"></a><a id="678" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="682" class="Symbol">:</a> <a id="684" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="686" class="Symbol">→</a> <a id="688" href="Algorithmic.Evaluation.html#660" class="Datatype">Gas</a>
</pre>
<p>When our evaluator returns a term <code class="language-plaintext highlighter-rouge">N</code>, it will either give evidence that
<code class="language-plaintext highlighter-rouge">N</code> is a value or indicate that it ran out of gas.</p>
<pre class="Agda"><a id="824" class="Keyword">data</a> <a id="Finished"></a><a id="829" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="838" class="Symbol">{</a><a id="839" href="Algorithmic.Evaluation.html#839" class="Bound">A</a> <a id="841" class="Symbol">:</a> <a id="843" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="845" href="Type.BetaNormal.html#1044" class="Datatype Operator">⊢Nf⋆</a> <a id="850" href="Utils.html#7316" class="InductiveConstructor">*</a><a id="851" class="Symbol">}</a> <a id="853" class="Symbol">:</a>  <a id="856" class="Symbol">(</a><a id="857" href="Algorithmic.Evaluation.html#857" class="Bound">N</a> <a id="859" class="Symbol">:</a> <a id="861" href="Algorithmic.html#1667" class="InductiveConstructor">∅</a> <a id="863" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="865" href="Algorithmic.Evaluation.html#839" class="Bound">A</a><a id="866" class="Symbol">)</a> <a id="868" class="Symbol">→</a>  <a id="871" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="875" class="Keyword">where</a>

   <a id="Finished.done"></a><a id="885" href="Algorithmic.Evaluation.html#885" class="InductiveConstructor">done</a> <a id="890" class="Symbol">:</a> <a id="892" class="Symbol">∀</a> <a id="894" href="Algorithmic.Evaluation.html#894" class="Bound">N</a> <a id="896" class="Symbol">→</a>
       <a id="905" href="Algorithmic.ReductionEC.html#2130" class="Datatype">Value</a> <a id="911" href="Algorithmic.Evaluation.html#894" class="Bound">N</a>
       <a id="920" class="Comment">----------</a>
     <a id="936" class="Symbol">→</a> <a id="938" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="947" href="Algorithmic.Evaluation.html#894" class="Bound">N</a>

   <a id="Finished.out-of-gas"></a><a id="953" href="Algorithmic.Evaluation.html#953" class="InductiveConstructor">out-of-gas</a> <a id="964" class="Symbol">:</a> <a id="966" class="Symbol">∀{</a><a id="968" href="Algorithmic.Evaluation.html#968" class="Bound">N</a><a id="969" class="Symbol">}</a> <a id="971" class="Symbol">→</a>
       <a id="980" class="Comment">----------</a>
       <a id="998" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="1007" href="Algorithmic.Evaluation.html#968" class="Bound">N</a>

   <a id="Finished.error"></a><a id="1013" href="Algorithmic.Evaluation.html#1013" class="InductiveConstructor">error</a> <a id="1019" class="Symbol">:</a> <a id="1021" class="Symbol">{</a><a id="1022" href="Algorithmic.Evaluation.html#1022" class="Bound">L</a> <a id="1024" class="Symbol">:</a> <a id="1026" href="Algorithmic.html#1667" class="InductiveConstructor">∅</a> <a id="1028" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="1030" href="Algorithmic.Evaluation.html#839" class="Bound">A</a><a id="1031" class="Symbol">}</a> <a id="1033" class="Symbol">→</a> <a id="1035" href="Algorithmic.ReductionEC.html#5668" class="Datatype">Error</a> <a id="1041" href="Algorithmic.Evaluation.html#1022" class="Bound">L</a> <a id="1043" class="Symbol">→</a> <a id="1045" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="1054" href="Algorithmic.Evaluation.html#1022" class="Bound">L</a>

   <a id="1060" class="Comment">-- is this actually possible?</a>
<a id="1090" class="Comment">--   neutral : {L : ∅ ⊢ A} → Neutral L → Finished L</a>
</pre>
<p>Given a term <code class="language-plaintext highlighter-rouge">L</code> of type <code class="language-plaintext highlighter-rouge">A</code>, the evaluator will, for some <code class="language-plaintext highlighter-rouge">N</code>, return
Ma reduction sequence from <code class="language-plaintext highlighter-rouge">L</code> to <code class="language-plaintext highlighter-rouge">N</code> and an indication of whether
reduction finished.</p>
<pre class="Agda"><a id="1308" class="Keyword">data</a> <a id="Steps"></a><a id="1313" href="Algorithmic.Evaluation.html#1313" class="Datatype">Steps</a> <a id="1319" class="Symbol">:</a> <a id="1321" class="Symbol">∀</a> <a id="1323" class="Symbol">{</a><a id="1324" href="Algorithmic.Evaluation.html#1324" class="Bound">A</a> <a id="1326" class="Symbol">:</a> <a id="1328" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="1330" href="Type.BetaNormal.html#1044" class="Datatype Operator">⊢Nf⋆</a> <a id="1335" href="Utils.html#7316" class="InductiveConstructor">*</a><a id="1336" class="Symbol">}</a> <a id="1338" class="Symbol">→</a> <a id="1340" href="Algorithmic.html#1667" class="InductiveConstructor">∅</a> <a id="1342" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="1344" href="Algorithmic.Evaluation.html#1324" class="Bound">A</a> <a id="1346" class="Symbol">→</a> <a id="1348" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1352" class="Keyword">where</a>

  <a id="Steps.steps"></a><a id="1361" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="1367" class="Symbol">:</a> <a id="1369" class="Symbol">{</a><a id="1370" href="Algorithmic.Evaluation.html#1370" class="Bound">A</a> <a id="1372" class="Symbol">:</a> <a id="1374" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="1376" href="Type.BetaNormal.html#1044" class="Datatype Operator">⊢Nf⋆</a> <a id="1381" href="Utils.html#7316" class="InductiveConstructor">*</a><a id="1382" class="Symbol">}</a> <a id="1384" class="Symbol">{</a><a id="1385" href="Algorithmic.Evaluation.html#1385" class="Bound">L</a> <a id="1387" href="Algorithmic.Evaluation.html#1387" class="Bound">N</a> <a id="1389" class="Symbol">:</a> <a id="1391" href="Algorithmic.html#1667" class="InductiveConstructor">∅</a> <a id="1393" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="1395" href="Algorithmic.Evaluation.html#1370" class="Bound">A</a><a id="1396" class="Symbol">}</a>
    <a id="1402" class="Symbol">→</a> <a id="1404" href="Algorithmic.Evaluation.html#1385" class="Bound">L</a> <a id="1406" href="Algorithmic.ReductionEC.html#10826" class="Datatype Operator">—↠</a> <a id="1409" href="Algorithmic.Evaluation.html#1387" class="Bound">N</a>
    <a id="1415" class="Symbol">→</a> <a id="1417" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="1426" href="Algorithmic.Evaluation.html#1387" class="Bound">N</a>
      <a id="1434" class="Comment">----------</a>
    <a id="1449" class="Symbol">→</a> <a id="1451" href="Algorithmic.Evaluation.html#1313" class="Datatype">Steps</a> <a id="1457" href="Algorithmic.Evaluation.html#1385" class="Bound">L</a>


</pre>
<pre class="Agda"><a id="eval—→"></a><a id="1470" href="Algorithmic.Evaluation.html#1470" class="Function">eval—→</a>  <a id="1478" class="Symbol">:</a> <a id="1480" class="Symbol">∀{</a><a id="1482" href="Algorithmic.Evaluation.html#1482" class="Bound">A</a> <a id="1484" class="Symbol">:</a> <a id="1486" class="InductiveConstructor">∅</a> <a id="1488" href="Type.BetaNormal.html#1044" class="Datatype Operator">⊢Nf⋆</a> <a id="1493" href="Utils.html#7316" class="InductiveConstructor">*</a><a id="1494" class="Symbol">}</a> <a id="1496" class="Symbol">→</a> <a id="1498" class="Symbol">{</a><a id="1499" href="Algorithmic.Evaluation.html#1499" class="Bound">t</a> <a id="1501" href="Algorithmic.Evaluation.html#1501" class="Bound">t&#39;</a> <a id="1504" class="Symbol">:</a> <a id="1506" class="InductiveConstructor">∅</a> <a id="1508" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="1510" href="Algorithmic.Evaluation.html#1482" class="Bound">A</a><a id="1511" class="Symbol">}</a> <a id="1513" class="Symbol">→</a> <a id="1515" href="Algorithmic.Evaluation.html#1499" class="Bound">t</a> <a id="1517" href="Algorithmic.ReductionEC.html#10349" class="Datatype Operator">—→</a> <a id="1520" href="Algorithmic.Evaluation.html#1501" class="Bound">t&#39;</a> <a id="1523" class="Symbol">→</a>
  <a id="1527" href="Algorithmic.Evaluation.html#1313" class="Datatype">Steps</a> <a id="1533" href="Algorithmic.Evaluation.html#1501" class="Bound">t&#39;</a> <a id="1536" class="Symbol">→</a> <a id="1538" href="Algorithmic.Evaluation.html#1313" class="Datatype">Steps</a> <a id="1544" href="Algorithmic.Evaluation.html#1499" class="Bound">t</a>
<a id="1546" href="Algorithmic.Evaluation.html#1470" class="Function">eval—→</a> <a id="1553" href="Algorithmic.Evaluation.html#1553" class="Bound">p</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="1562" href="Algorithmic.Evaluation.html#1562" class="Bound">ps</a> <a id="1565" href="Algorithmic.Evaluation.html#1565" class="Bound">q</a><a id="1566" class="Symbol">)</a> <a id="1568" class="Symbol">=</a> <a id="1570" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="1576" class="Symbol">(</a><a id="1577" href="Algorithmic.ReductionEC.html#10937" class="InductiveConstructor">trans—↠</a> <a id="1585" href="Algorithmic.Evaluation.html#1553" class="Bound">p</a> <a id="1587" href="Algorithmic.Evaluation.html#1562" class="Bound">ps</a><a id="1589" class="Symbol">)</a> <a id="1591" href="Algorithmic.Evaluation.html#1565" class="Bound">q</a>
</pre>
<p>The evaluator takes gas and a term and returns the corresponding steps.</p>
<pre class="Agda"><a id="eval"></a><a id="1674" href="Algorithmic.Evaluation.html#1674" class="Function">eval</a> <a id="1679" class="Symbol">:</a> <a id="1681" class="Symbol">∀</a> <a id="1683" class="Symbol">{</a><a id="1684" href="Algorithmic.Evaluation.html#1684" class="Bound">A</a> <a id="1686" class="Symbol">:</a> <a id="1688" class="InductiveConstructor">∅</a> <a id="1690" href="Type.BetaNormal.html#1044" class="Datatype Operator">⊢Nf⋆</a> <a id="1695" href="Utils.html#7316" class="InductiveConstructor">*</a><a id="1696" class="Symbol">}</a> <a id="1698" class="Symbol">→</a> <a id="1700" href="Algorithmic.Evaluation.html#660" class="Datatype">Gas</a> <a id="1704" class="Symbol">→</a> <a id="1706" class="Symbol">(</a><a id="1707" href="Algorithmic.Evaluation.html#1707" class="Bound">M</a> <a id="1709" class="Symbol">:</a> <a id="1711" class="InductiveConstructor">∅</a> <a id="1713" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="1715" href="Algorithmic.Evaluation.html#1684" class="Bound">A</a><a id="1716" class="Symbol">)</a> <a id="1718" class="Symbol">→</a> <a id="1720" href="Algorithmic.Evaluation.html#1313" class="Datatype">Steps</a> <a id="1726" href="Algorithmic.Evaluation.html#1707" class="Bound">M</a>
<a id="evalProg"></a><a id="1728" href="Algorithmic.Evaluation.html#1728" class="Function">evalProg</a> <a id="1737" class="Symbol">:</a> <a id="1739" class="Symbol">∀{</a><a id="1741" href="Algorithmic.Evaluation.html#1741" class="Bound">A</a> <a id="1743" class="Symbol">:</a> <a id="1745" class="InductiveConstructor">∅</a> <a id="1747" href="Type.BetaNormal.html#1044" class="Datatype Operator">⊢Nf⋆</a> <a id="1752" href="Utils.html#7316" class="InductiveConstructor">*</a><a id="1753" class="Symbol">}</a> <a id="1755" class="Symbol">→</a> <a id="1757" href="Algorithmic.Evaluation.html#660" class="Datatype">Gas</a> <a id="1761" class="Symbol">→</a> <a id="1763" class="Symbol">{</a><a id="1764" href="Algorithmic.Evaluation.html#1764" class="Bound">t</a> <a id="1766" class="Symbol">:</a> <a id="1768" class="InductiveConstructor">∅</a> <a id="1770" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="1772" href="Algorithmic.Evaluation.html#1741" class="Bound">A</a><a id="1773" class="Symbol">}</a> <a id="1775" class="Symbol">→</a> <a id="1777" href="Algorithmic.ReductionEC.Progress.html#892" class="Datatype">Progress</a> <a id="1786" href="Algorithmic.Evaluation.html#1764" class="Bound">t</a> <a id="1788" class="Symbol">→</a> <a id="1790" href="Algorithmic.Evaluation.html#1313" class="Datatype">Steps</a> <a id="1796" href="Algorithmic.Evaluation.html#1764" class="Bound">t</a>

<a id="1799" href="Algorithmic.Evaluation.html#1674" class="Function">eval</a> <a id="1804" class="Symbol">(</a><a id="1805" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="1809" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="1813" class="Symbol">)</a> <a id="1815" href="Algorithmic.Evaluation.html#1815" class="Bound">M</a> <a id="1817" class="Symbol">=</a> <a id="1819" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="1825" href="Algorithmic.ReductionEC.html#10881" class="InductiveConstructor">refl—↠</a> <a id="1832" href="Algorithmic.Evaluation.html#953" class="InductiveConstructor">out-of-gas</a>
<a id="1843" href="Algorithmic.Evaluation.html#1674" class="Function">eval</a> <a id="1848" class="Symbol">(</a><a id="1849" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="1853" class="Symbol">(</a><a id="1854" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1858" href="Algorithmic.Evaluation.html#1858" class="Bound">n</a><a id="1859" class="Symbol">))</a> <a id="1862" href="Algorithmic.Evaluation.html#1862" class="Bound">M</a> <a id="1864" class="Symbol">=</a> <a id="1866" href="Algorithmic.Evaluation.html#1728" class="Function">evalProg</a> <a id="1875" class="Symbol">(</a><a id="1876" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="1880" href="Algorithmic.Evaluation.html#1858" class="Bound">n</a><a id="1881" class="Symbol">)</a> <a id="1883" class="Symbol">(</a><a id="1884" href="Algorithmic.ReductionEC.Progress.html#2067" class="Function">progress</a> <a id="1893" href="Algorithmic.Evaluation.html#1862" class="Bound">M</a><a id="1894" class="Symbol">)</a>

<a id="1897" href="Algorithmic.Evaluation.html#1728" class="Function">evalProg</a> <a id="1906" href="Algorithmic.Evaluation.html#1906" class="Bound">g</a> <a id="1908" class="Symbol">(</a><a id="1909" href="Algorithmic.ReductionEC.Progress.html#942" class="InductiveConstructor">step</a> <a id="1914" class="Symbol">{</a><a id="1915" class="Argument">N</a> <a id="1917" class="Symbol">=</a> <a id="1919" class="DottedPattern Symbol">.(</a><a id="1921" href="Algorithmic.html#7621" class="DottedPattern InductiveConstructor">error</a> <a id="1927" class="DottedPattern Symbol">_)</a><a id="1929" class="Symbol">}</a> <a id="1931" class="Symbol">(</a><a id="1932" href="Algorithmic.ReductionEC.html#10595" class="InductiveConstructor">_—→_.ruleErr</a> <a id="1945" href="Algorithmic.ReductionEC.html#7376" class="InductiveConstructor">Algorithmic.ReductionEC.[]</a> <a id="1972" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="1976" class="Symbol">))</a> <a id="1979" class="Symbol">=</a> <a id="1981" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="1987" href="Algorithmic.ReductionEC.html#10881" class="InductiveConstructor">refl—↠</a> <a id="1994" class="Symbol">(</a><a id="1995" href="Algorithmic.Evaluation.html#1013" class="InductiveConstructor">error</a> <a id="2001" href="Algorithmic.ReductionEC.html#5748" class="InductiveConstructor">E-error</a><a id="2008" class="Symbol">)</a>
<a id="2010" href="Algorithmic.Evaluation.html#1728" class="CatchallClause Function">evalProg</a><a id="2018" class="CatchallClause"> </a><a id="2019" href="Algorithmic.Evaluation.html#2019" class="CatchallClause Bound">g</a><a id="2020" class="CatchallClause"> </a><a id="2021" class="CatchallClause Symbol">(</a><a id="2022" href="Algorithmic.ReductionEC.Progress.html#942" class="CatchallClause InductiveConstructor">step</a><a id="2026" class="CatchallClause"> </a><a id="2027" class="CatchallClause Symbol">{</a><a id="2028" class="CatchallClause Argument">N</a><a id="2029" class="CatchallClause"> </a><a id="2030" class="CatchallClause Symbol">=</a><a id="2031" class="CatchallClause"> </a><a id="2032" href="Algorithmic.Evaluation.html#2032" class="CatchallClause Bound">t&#39;</a><a id="2034" class="CatchallClause Symbol">}</a><a id="2035" class="CatchallClause"> </a><a id="2036" href="Algorithmic.Evaluation.html#2036" class="CatchallClause Bound">p</a><a id="2037" class="CatchallClause Symbol">)</a>  <a id="2040" class="Symbol">=</a> <a id="2042" href="Algorithmic.Evaluation.html#1470" class="Function">eval—→</a> <a id="2049" href="Algorithmic.Evaluation.html#2036" class="Bound">p</a> <a id="2051" class="Symbol">(</a><a id="2052" href="Algorithmic.Evaluation.html#1674" class="Function">eval</a> <a id="2057" href="Algorithmic.Evaluation.html#2019" class="Bound">g</a> <a id="2059" href="Algorithmic.Evaluation.html#2032" class="Bound">t&#39;</a><a id="2061" class="Symbol">)</a>
<a id="2063" href="Algorithmic.Evaluation.html#1728" class="Function">evalProg</a> <a id="2072" href="Algorithmic.Evaluation.html#2072" class="Bound">g</a> <a id="2074" class="Symbol">(</a><a id="2075" href="Algorithmic.ReductionEC.Progress.html#1014" class="InductiveConstructor">done</a> <a id="2080" href="Algorithmic.Evaluation.html#2080" class="Bound">VM</a><a id="2082" class="Symbol">)</a> <a id="2084" class="Symbol">=</a> <a id="2086" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="2092" href="Algorithmic.ReductionEC.html#10881" class="InductiveConstructor">refl—↠</a> <a id="2099" class="Symbol">(</a><a id="2100" href="Algorithmic.Evaluation.html#885" class="InductiveConstructor">done</a> <a id="2105" class="Symbol">_</a> <a id="2107" href="Algorithmic.Evaluation.html#2080" class="Bound">VM</a><a id="2109" class="Symbol">)</a>

<a id="stepper"></a><a id="2112" href="Algorithmic.Evaluation.html#2112" class="Function">stepper</a> <a id="2120" class="Symbol">:</a> <a id="2122" class="Symbol">{</a><a id="2123" href="Algorithmic.Evaluation.html#2123" class="Bound">A</a> <a id="2125" class="Symbol">:</a> <a id="2127" class="InductiveConstructor">∅</a> <a id="2129" href="Type.BetaNormal.html#1044" class="Datatype Operator">⊢Nf⋆</a> <a id="2134" href="Utils.html#7316" class="InductiveConstructor">*</a><a id="2135" class="Symbol">}</a> <a id="2137" class="Symbol">→</a> <a id="2139" class="InductiveConstructor">∅</a> <a id="2141" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="2143" href="Algorithmic.Evaluation.html#2123" class="Bound">A</a> <a id="2145" class="Symbol">→</a> <a id="2147" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2149" class="Symbol">→</a> <a id="2151" href="Utils.html#1125" class="Datatype">Either</a> <a id="2158" href="Utils.html#4355" class="Datatype">RuntimeError</a> <a id="2171" class="Symbol">(</a><a id="2172" class="InductiveConstructor">∅</a> <a id="2174" href="Algorithmic.html#5277" class="Datatype Operator">⊢</a> <a id="2176" href="Algorithmic.Evaluation.html#2123" class="Bound">A</a><a id="2177" class="Symbol">)</a>
<a id="2179" href="Algorithmic.Evaluation.html#2112" class="Function">stepper</a> <a id="2187" class="Symbol">{</a><a id="2188" href="Algorithmic.Evaluation.html#2188" class="Bound">A</a><a id="2189" class="Symbol">}</a> <a id="2191" href="Algorithmic.Evaluation.html#2191" class="Bound">t</a> <a id="2193" href="Algorithmic.Evaluation.html#2193" class="Bound">n</a> <a id="2195" class="Keyword">with</a> <a id="2200" href="Algorithmic.Evaluation.html#1674" class="Function">eval</a> <a id="2205" class="Symbol">(</a><a id="2206" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="2210" href="Algorithmic.Evaluation.html#2193" class="Bound">n</a><a id="2211" class="Symbol">)</a> <a id="2213" href="Algorithmic.Evaluation.html#2191" class="Bound">t</a>
<a id="2215" class="Symbol">...</a> <a id="2219" class="Symbol">|</a> <a id="2221" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="2227" href="Algorithmic.Evaluation.html#2227" class="Bound">x</a> <a id="2229" class="Symbol">(</a><a id="2230" href="Algorithmic.Evaluation.html#885" class="InductiveConstructor">done</a> <a id="2235" href="Algorithmic.Evaluation.html#2235" class="Bound">t&#39;</a> <a id="2238" href="Algorithmic.Evaluation.html#2238" class="Bound">v</a><a id="2239" class="Symbol">)</a> <a id="2241" class="Symbol">=</a> <a id="2243" href="Utils.html#2909" class="Field">return</a> <a id="2250" href="Algorithmic.Evaluation.html#2235" class="Bound">t&#39;</a>
<a id="2253" class="Symbol">...</a> <a id="2257" class="Symbol">|</a> <a id="2259" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="2265" href="Algorithmic.Evaluation.html#2265" class="Bound">x</a> <a id="2267" href="Algorithmic.Evaluation.html#953" class="InductiveConstructor">out-of-gas</a>  <a id="2279" class="Symbol">=</a> <a id="2281" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="2286" href="Utils.html#4382" class="InductiveConstructor">gasError</a>
<a id="2295" class="Symbol">...</a> <a id="2299" class="Symbol">|</a> <a id="2301" href="Algorithmic.Evaluation.html#1361" class="InductiveConstructor">steps</a> <a id="2307" href="Algorithmic.Evaluation.html#2307" class="Bound">x</a> <a id="2309" class="Symbol">(</a><a id="2310" href="Algorithmic.Evaluation.html#1013" class="InductiveConstructor">error</a> <a id="2316" class="Symbol">_)</a>   <a id="2321" class="Symbol">=</a> <a id="2323" href="Utils.html#2909" class="Field">return</a> <a id="2330" class="Symbol">(</a><a id="2331" href="Algorithmic.html#7621" class="InductiveConstructor">error</a> <a id="2337" class="Bound">A</a><a id="2338" class="Symbol">)</a>

</pre>

    </section>
  </body>
</html>