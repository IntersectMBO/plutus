<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>VerifiedCompilation</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>VerifiedCompilation</h1>
    <section>
      <h1 id="verified-compilation">Verified Compilation</h1>

<h2 id="introduction">Introduction</h2>

<p>The verified compilation project is a formalization of the Untyped Plutus Core compiler optimisation transformations in Agda.
The goal is to generate a formal proof that the optimisation component of the compiler has transformed the input program correctly
with respect to the Agda specification (*). Our approach is based on Jacco Krijnen’s work on
<a href="https://www.sciencedirect.com/science/article/pii/S0167642323001338">Translation certification for smart contracts</a>.</p>

<p>(*) <strong>Note</strong>: The current implementation does not guarantee corectness in the sense of semantic equivalence between
the original and the optimised program. This is planned future work.</p>

<h2 id="implementation-overview">Implementation overview</h2>

<p>The project is divided into several Agda modules, each of which is based on an optimisation stage of the compiler.
They each contain the respective Agda formalisation of the program transformation and a decision procedure which takes
two programs as input and decides whether the transformation is applicable.</p>

<p>This module is at the top of the project hierarchy and contains the main decision procedure which verifies the entire optimisation
process. The final certification function receives a list of intermediate program ASTs produced by the compiler and outputs a file
containing the generated proof object, a.k.a. the <em>certificate</em>. The certificate can then be verified by third parties by loading
it into Agda and checking that it is correctly typed.</p>

<pre class="Agda"><a id="1536" class="Keyword">module</a> <a id="1543" href="VerifiedCompilation.html" class="Module">VerifiedCompilation</a> <a id="1563" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="1590" class="Keyword">open</a> <a id="1595" class="Keyword">import</a> <a id="1602" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1619" class="Keyword">using</a> <a id="1625" class="Symbol">(</a><a id="1626" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a><a id="1629" class="Symbol">;</a> <a id="1631" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a><a id="1634" class="Symbol">;</a> <a id="1636" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a><a id="1638" class="Symbol">;</a> <a id="1640" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬_</a><a id="1642" class="Symbol">)</a>

<a id="1645" class="Keyword">open</a> <a id="1650" class="Keyword">import</a> <a id="1657" href="Untyped.html" class="Module">Untyped</a>
<a id="1665" class="Keyword">open</a> <a id="1670" class="Keyword">import</a> <a id="1677" href="Utils.html" class="Module">Utils</a> <a id="1683" class="Symbol">as</a> <a id="1686" class="Module">U</a> <a id="1688" class="Keyword">using</a> <a id="1694" class="Symbol">(</a><a id="1695" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="1700" class="Symbol">;</a><a id="1701" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1708" class="Symbol">;</a><a id="1709" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="1713" class="Symbol">;</a><a id="1714" href="Utils.html#1125" class="Datatype">Either</a><a id="1720" class="Symbol">;</a><a id="1721" href="Utils.html#1158" class="InductiveConstructor">inj₁</a><a id="1725" class="Symbol">;</a><a id="1726" href="Utils.html#1182" class="InductiveConstructor">inj₂</a><a id="1730" class="Symbol">;</a><a id="1731" href="Utils.html#5072" class="Datatype">List</a><a id="1735" class="Symbol">;</a><a id="1736" href="Utils.html#5101" class="InductiveConstructor">[]</a><a id="1738" class="Symbol">;</a><a id="1739" href="Utils.html#5116" class="InductiveConstructor Operator">_∷_</a><a id="1742" class="Symbol">;</a><a id="1743" href="Utils.html#4834" class="Record Operator">_×_</a><a id="1746" class="Symbol">;</a><a id="1747" href="Utils.html#4001" class="InductiveConstructor Operator">_,_</a><a id="1750" class="Symbol">)</a>
<a id="1752" class="Keyword">open</a> <a id="1757" class="Keyword">import</a> <a id="1764" href="RawU.html" class="Module">RawU</a> <a id="1769" class="Keyword">using</a> <a id="1775" class="Symbol">(</a><a id="1776" href="RawU.html#6377" class="Datatype">Untyped</a><a id="1783" class="Symbol">)</a>
<a id="1785" class="Keyword">open</a> <a id="1790" class="Keyword">import</a> <a id="1797" href="Data.String.html" class="Module">Data.String</a> <a id="1809" class="Keyword">using</a> <a id="1815" class="Symbol">(</a><a id="1816" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="1822" class="Symbol">)</a>
<a id="1824" class="Keyword">open</a> <a id="1829" class="Keyword">import</a> <a id="1836" href="Agda.Builtin.IO.html" class="Module">Agda.Builtin.IO</a> <a id="1852" class="Keyword">using</a> <a id="1858" class="Symbol">(</a><a id="1859" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a><a id="1861" class="Symbol">)</a>
<a id="1863" class="Keyword">open</a> <a id="1868" class="Keyword">import</a> <a id="1875" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="1893" class="Keyword">using</a> <a id="1899" class="Symbol">(</a><a id="1900" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="1901" class="Symbol">)</a>
<a id="1903" class="Keyword">import</a> <a id="1910" href="VerifiedCompilation.UCaseOfCase.html" class="Module">VerifiedCompilation.UCaseOfCase</a> <a id="1942" class="Symbol">as</a> <a id="1945" class="Module">UCC</a>
<a id="1949" class="Keyword">import</a> <a id="1956" href="VerifiedCompilation.UForceDelay.html" class="Module">VerifiedCompilation.UForceDelay</a> <a id="1988" class="Symbol">as</a> <a id="1991" class="Module">UFD</a>
<a id="1995" class="Keyword">import</a> <a id="2002" href="VerifiedCompilation.UFloatDelay.html" class="Module">VerifiedCompilation.UFloatDelay</a> <a id="2034" class="Symbol">as</a> <a id="2037" class="Module">UFlD</a>
<a id="2042" class="Keyword">import</a> <a id="2049" href="VerifiedCompilation.UCSE.html" class="Module">VerifiedCompilation.UCSE</a> <a id="2074" class="Symbol">as</a> <a id="2077" class="Module">UCSE</a>
<a id="2082" class="Keyword">import</a> <a id="2089" href="VerifiedCompilation.UInline.html" class="Module">VerifiedCompilation.UInline</a> <a id="2117" class="Symbol">as</a> <a id="2120" class="Module">UInline</a>
<a id="2128" class="Keyword">import</a> <a id="2135" href="VerifiedCompilation.UCaseReduce.html" class="Module">VerifiedCompilation.UCaseReduce</a> <a id="2167" class="Symbol">as</a> <a id="2170" class="Module">UCR</a>
<a id="2174" class="Keyword">open</a> <a id="2179" class="Keyword">import</a> <a id="2186" href="Data.Empty.html" class="Module">Data.Empty</a> <a id="2197" class="Keyword">using</a> <a id="2203" class="Symbol">(</a><a id="2204" href="Data.Empty.html#914" class="Function">⊥</a><a id="2205" class="Symbol">)</a>
<a id="2207" class="Keyword">open</a> <a id="2212" class="Keyword">import</a> <a id="2219" href="VerifiedCompilation.Equality.html" class="Module">VerifiedCompilation.Equality</a> <a id="2248" class="Keyword">using</a> <a id="2254" class="Symbol">(</a><a id="2255" href="VerifiedCompilation.Equality.html#2250" class="Record">DecEq</a><a id="2260" class="Symbol">)</a>
<a id="2262" class="Keyword">open</a> <a id="2267" class="Keyword">import</a> <a id="2274" href="VerifiedCompilation.UntypedTranslation.html" class="Module">VerifiedCompilation.UntypedTranslation</a> <a id="2313" class="Keyword">using</a> <a id="2319" class="Symbol">(</a><a id="2320" href="VerifiedCompilation.UntypedTranslation.html#1585" class="Function">Relation</a><a id="2328" class="Symbol">)</a>
<a id="2330" class="Keyword">import</a> <a id="2337" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="2352" class="Symbol">as</a> <a id="2355" class="Module">Unary</a> <a id="2361" class="Keyword">using</a> <a id="2367" class="Symbol">(</a><a id="2368" href="Relation.Unary.html#4543" class="Function">Decidable</a><a id="2377" class="Symbol">)</a>
<a id="2379" class="Keyword">import</a> <a id="2386" href="Agda.Builtin.Int.html" class="Module">Agda.Builtin.Int</a>
<a id="2403" class="Keyword">import</a> <a id="2410" href="Relation.Nary.html" class="Module">Relation.Nary</a> <a id="2424" class="Symbol">as</a> <a id="2427" class="Module">Nary</a> <a id="2432" class="Keyword">using</a> <a id="2438" class="Symbol">(</a><a id="2439" href="Relation.Nary.html#6405" class="Function">Decidable</a><a id="2448" class="Symbol">)</a>
<a id="2450" class="Keyword">open</a> <a id="2455" class="Keyword">import</a> <a id="2462" href="VerifiedCompilation.Certificate.html" class="Module">VerifiedCompilation.Certificate</a> <a id="2494" class="Keyword">using</a> <a id="2500" class="Symbol">(</a><a id="2501" href="VerifiedCompilation.Certificate.html#1061" class="Datatype">ProofOrCE</a><a id="2510" class="Symbol">;</a> <a id="2512" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a><a id="2514" class="Symbol">;</a> <a id="2516" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a><a id="2521" class="Symbol">;</a> <a id="2523" href="VerifiedCompilation.Certificate.html#1823" class="Function">pcePointwise</a><a id="2535" class="Symbol">;</a> <a id="2537" href="VerifiedCompilation.Certificate.html#1493" class="Function">MatchOrCE</a><a id="2546" class="Symbol">;</a> <a id="2548" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="2561" class="Symbol">)</a>
</pre>
<h2 id="compiler-optimisation-traces">Compiler optimisation traces</h2>

<p>A <code class="language-plaintext highlighter-rouge">Trace</code> represents a sequence of optimisation transformations applied to a program. It is a list of pairs of ASTs
and a tag (<code class="language-plaintext highlighter-rouge">SimplifierTag</code>), where each pair represents the before and after of a transformation application and the
tag indicates which transformation was applied.
The <code class="language-plaintext highlighter-rouge">Transformation</code> type is a sum type that represents the possible transformations which are implemented in their
respective modules.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTrace?</code> decision procedure is at the core of the certification process. It produces the proof that the given
list of ASTs are in relation with one another according to the transformations implemented in the project.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTransformation?</code> decision procedure just dispatches to the decision procedure indicated by the tag.</p>

<p><strong>TODO</strong>: The <code class="language-plaintext highlighter-rouge">Trace</code> type or decision procedure should also enforce that the second element of a pair is the first
element of the next pair in the list. This might not be necessary if we decide that we can assume that the function
which produces a <code class="language-plaintext highlighter-rouge">Trace</code> always produces a correct one, although it might be useful to make this explicit in the type.</p>
<pre class="Agda">
<a id="3707" class="Keyword">data</a> <a id="Transformation"></a><a id="3712" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="3727" class="Symbol">:</a> <a id="3729" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="3743" class="Symbol">→</a> <a id="3745" href="VerifiedCompilation.UntypedTranslation.html#1585" class="Function">Relation</a> <a id="3754" class="Keyword">where</a>
  <a id="Transformation.isCoC"></a><a id="3762" href="VerifiedCompilation.html#3762" class="InductiveConstructor">isCoC</a> <a id="3768" class="Symbol">:</a> <a id="3770" class="Symbol">{</a><a id="3771" href="VerifiedCompilation.html#3771" class="Bound">X</a> <a id="3773" class="Symbol">:</a> <a id="3775" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3778" class="Symbol">}</a> <a id="3795" class="Symbol">→</a> <a id="3797" class="Symbol">{</a><a id="3798" href="VerifiedCompilation.html#3798" class="Bound">ast</a> <a id="3802" href="VerifiedCompilation.html#3802" class="Bound">ast&#39;</a> <a id="3807" class="Symbol">:</a> <a id="3809" href="VerifiedCompilation.html#3771" class="Bound">X</a> <a id="3811" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="3812" class="Symbol">}</a> <a id="3814" class="Symbol">→</a> <a id="3816" href="VerifiedCompilation.UCaseOfCase.html#2378" class="Function">UCC.CaseOfCase</a> <a id="3831" href="VerifiedCompilation.html#3798" class="Bound">ast</a> <a id="3835" href="VerifiedCompilation.html#3802" class="Bound">ast&#39;</a> <a id="3840" class="Symbol">→</a> <a id="3842" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="3857" href="VerifiedCompilation.Certificate.html#733" class="InductiveConstructor">SimplifierTag.caseOfCaseT</a> <a id="3883" href="VerifiedCompilation.html#3798" class="Bound">ast</a> <a id="3887" href="VerifiedCompilation.html#3802" class="Bound">ast&#39;</a>
  <a id="Transformation.isFD"></a><a id="3894" href="VerifiedCompilation.html#3894" class="InductiveConstructor">isFD</a> <a id="3899" class="Symbol">:</a> <a id="3901" class="Symbol">{</a><a id="3902" href="VerifiedCompilation.html#3902" class="Bound">X</a> <a id="3904" class="Symbol">:</a> <a id="3906" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3909" class="Symbol">}</a> <a id="3926" class="Symbol">→</a> <a id="3928" class="Symbol">{</a><a id="3929" href="VerifiedCompilation.html#3929" class="Bound">ast</a> <a id="3933" href="VerifiedCompilation.html#3933" class="Bound">ast&#39;</a> <a id="3938" class="Symbol">:</a> <a id="3940" href="VerifiedCompilation.html#3902" class="Bound">X</a> <a id="3942" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="3943" class="Symbol">}</a> <a id="3945" class="Symbol">→</a> <a id="3947" href="VerifiedCompilation.UForceDelay.html#7663" class="Function">UFD.ForceDelay</a> <a id="3962" href="VerifiedCompilation.html#3929" class="Bound">ast</a> <a id="3966" href="VerifiedCompilation.html#3933" class="Bound">ast&#39;</a> <a id="3971" class="Symbol">→</a> <a id="3973" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="3988" href="VerifiedCompilation.Certificate.html#703" class="InductiveConstructor">SimplifierTag.forceDelayT</a> <a id="4014" href="VerifiedCompilation.html#3929" class="Bound">ast</a> <a id="4018" href="VerifiedCompilation.html#3933" class="Bound">ast&#39;</a>
  <a id="Transformation.isFlD"></a><a id="4025" href="VerifiedCompilation.html#4025" class="InductiveConstructor">isFlD</a> <a id="4031" class="Symbol">:</a> <a id="4033" class="Symbol">{</a><a id="4034" href="VerifiedCompilation.html#4034" class="Bound">X</a> <a id="4036" class="Symbol">:</a> <a id="4038" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4041" class="Symbol">}</a> <a id="4058" class="Symbol">→</a> <a id="4060" class="Symbol">{</a><a id="4061" href="VerifiedCompilation.html#4061" class="Bound">ast</a> <a id="4065" href="VerifiedCompilation.html#4065" class="Bound">ast&#39;</a> <a id="4070" class="Symbol">:</a> <a id="4072" href="VerifiedCompilation.html#4034" class="Bound">X</a> <a id="4074" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4075" class="Symbol">}</a> <a id="4077" class="Symbol">→</a> <a id="4079" href="VerifiedCompilation.UFloatDelay.html#6100" class="Function">UFlD.FloatDelay</a> <a id="4095" href="VerifiedCompilation.html#4061" class="Bound">ast</a> <a id="4099" href="VerifiedCompilation.html#4065" class="Bound">ast&#39;</a> <a id="4104" class="Symbol">→</a> <a id="4106" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="4121" href="VerifiedCompilation.Certificate.html#673" class="InductiveConstructor">SimplifierTag.floatDelayT</a> <a id="4147" href="VerifiedCompilation.html#4061" class="Bound">ast</a> <a id="4151" href="VerifiedCompilation.html#4065" class="Bound">ast&#39;</a>
  <a id="Transformation.isCSE"></a><a id="4158" href="VerifiedCompilation.html#4158" class="InductiveConstructor">isCSE</a> <a id="4164" class="Symbol">:</a> <a id="4166" class="Symbol">{</a><a id="4167" href="VerifiedCompilation.html#4167" class="Bound">X</a> <a id="4169" class="Symbol">:</a> <a id="4171" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4174" class="Symbol">}</a> <a id="4191" class="Symbol">→</a> <a id="4193" class="Symbol">{</a><a id="4194" href="VerifiedCompilation.html#4194" class="Bound">ast</a> <a id="4198" href="VerifiedCompilation.html#4198" class="Bound">ast&#39;</a> <a id="4203" class="Symbol">:</a> <a id="4205" href="VerifiedCompilation.html#4167" class="Bound">X</a> <a id="4207" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4208" class="Symbol">}</a> <a id="4210" class="Symbol">→</a> <a id="4212" href="VerifiedCompilation.UCSE.html#1769" class="Function">UCSE.UntypedCSE</a> <a id="4228" href="VerifiedCompilation.html#4194" class="Bound">ast</a> <a id="4232" href="VerifiedCompilation.html#4198" class="Bound">ast&#39;</a> <a id="4237" class="Symbol">→</a> <a id="4239" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="4254" href="VerifiedCompilation.Certificate.html#819" class="InductiveConstructor">SimplifierTag.cseT</a> <a id="4273" href="VerifiedCompilation.html#4194" class="Bound">ast</a> <a id="4277" href="VerifiedCompilation.html#4198" class="Bound">ast&#39;</a>
  <a id="4284" class="Comment">-- FIXME: Inline currently rejects some valid translations so is disabled.</a>
  <a id="Transformation.inlineNotImplemented"></a><a id="4361" href="VerifiedCompilation.html#4361" class="InductiveConstructor">inlineNotImplemented</a> <a id="4382" class="Symbol">:</a> <a id="4384" class="Symbol">{</a><a id="4385" href="VerifiedCompilation.html#4385" class="Bound">X</a> <a id="4387" class="Symbol">:</a> <a id="4389" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4392" class="Symbol">}</a> <a id="4409" class="Symbol">→</a> <a id="4411" class="Symbol">{</a><a id="4412" href="VerifiedCompilation.html#4412" class="Bound">ast</a> <a id="4416" href="VerifiedCompilation.html#4416" class="Bound">ast&#39;</a> <a id="4421" class="Symbol">:</a> <a id="4423" href="VerifiedCompilation.html#4385" class="Bound">X</a> <a id="4425" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4426" class="Symbol">}</a> <a id="4428" class="Symbol">→</a> <a id="4430" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="4445" href="VerifiedCompilation.Certificate.html#793" class="InductiveConstructor">SimplifierTag.inlineT</a> <a id="4467" href="VerifiedCompilation.html#4412" class="Bound">ast</a> <a id="4471" href="VerifiedCompilation.html#4416" class="Bound">ast&#39;</a>
  <a id="Transformation.isCaseReduce"></a><a id="4478" href="VerifiedCompilation.html#4478" class="InductiveConstructor">isCaseReduce</a> <a id="4491" class="Symbol">:</a> <a id="4493" class="Symbol">{</a><a id="4494" href="VerifiedCompilation.html#4494" class="Bound">X</a> <a id="4496" class="Symbol">:</a> <a id="4498" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4501" class="Symbol">}</a> <a id="4518" class="Symbol">→</a> <a id="4520" class="Symbol">{</a><a id="4521" href="VerifiedCompilation.html#4521" class="Bound">ast</a> <a id="4525" href="VerifiedCompilation.html#4525" class="Bound">ast&#39;</a> <a id="4530" class="Symbol">:</a> <a id="4532" href="VerifiedCompilation.html#4494" class="Bound">X</a> <a id="4534" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4535" class="Symbol">}</a> <a id="4537" class="Symbol">→</a> <a id="4539" href="VerifiedCompilation.UCaseReduce.html#3049" class="Function">UCR.UCaseReduce</a> <a id="4555" href="VerifiedCompilation.html#4521" class="Bound">ast</a> <a id="4559" href="VerifiedCompilation.html#4525" class="Bound">ast&#39;</a> <a id="4564" class="Symbol">→</a> <a id="4566" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="4581" href="VerifiedCompilation.Certificate.html#763" class="InductiveConstructor">SimplifierTag.caseReduceT</a> <a id="4607" href="VerifiedCompilation.html#4521" class="Bound">ast</a> <a id="4611" href="VerifiedCompilation.html#4525" class="Bound">ast&#39;</a>

<a id="4617" class="Keyword">data</a> <a id="Trace"></a><a id="4622" href="VerifiedCompilation.html#4622" class="Datatype">Trace</a> <a id="4628" class="Symbol">:</a> <a id="4630" class="Symbol">{</a> <a id="4632" href="VerifiedCompilation.html#4632" class="Bound">X</a> <a id="4634" class="Symbol">:</a> <a id="4636" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="4640" class="Symbol">}</a> <a id="4642" class="Symbol"></a> <a id="4658" class="Symbol">→</a> <a id="4660" href="Utils.html#5072" class="Datatype">List</a> <a id="4665" class="Symbol">(</a><a id="4666" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="4680" href="Utils.html#4834" class="Record Operator">×</a> <a id="4682" class="Symbol">(</a><a id="4683" href="VerifiedCompilation.html#4632" class="Bound">X</a> <a id="4685" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4686" class="Symbol">)</a> <a id="4688" href="Utils.html#4834" class="Record Operator">×</a> <a id="4690" class="Symbol">(</a><a id="4691" href="VerifiedCompilation.html#4632" class="Bound">X</a> <a id="4693" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4694" class="Symbol">))</a> <a id="4697" class="Symbol">→</a> <a id="4699" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="4704" class="Keyword">where</a>
  <a id="Trace.empty"></a><a id="4712" href="VerifiedCompilation.html#4712" class="InductiveConstructor">empty</a> <a id="4718" class="Symbol">:</a> <a id="4720" class="Symbol">{</a><a id="4721" href="VerifiedCompilation.html#4721" class="Bound">X</a> <a id="4723" class="Symbol">:</a> <a id="4725" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4728" class="Symbol">}</a> <a id="4745" class="Symbol">→</a> <a id="4747" href="VerifiedCompilation.html#4622" class="Datatype">Trace</a> <a id="4753" class="Symbol">{</a><a id="4754" href="VerifiedCompilation.html#4721" class="Bound">X</a><a id="4755" class="Symbol">}</a> <a id="4757" href="Utils.html#5101" class="InductiveConstructor">[]</a>
  <a id="Trace.cons"></a><a id="4762" href="VerifiedCompilation.html#4762" class="InductiveConstructor">cons</a>
    <a id="4771" class="Symbol">:</a> <a id="4773" class="Symbol">{</a><a id="4774" href="VerifiedCompilation.html#4774" class="Bound">X</a> <a id="4776" class="Symbol">:</a> <a id="4778" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4781" class="Symbol">}</a>
    <a id="4802" class="Symbol">{</a><a id="4803" href="VerifiedCompilation.html#4803" class="Bound">tag</a> <a id="4807" class="Symbol">:</a> <a id="4809" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="4822" class="Symbol">}</a> <a id="4824" class="Symbol">{</a><a id="4825" href="VerifiedCompilation.html#4825" class="Bound">x</a> <a id="4827" href="VerifiedCompilation.html#4827" class="Bound">x&#39;</a> <a id="4830" class="Symbol">:</a> <a id="4832" href="VerifiedCompilation.html#4774" class="Bound">X</a> <a id="4834" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4835" class="Symbol">}</a>
    <a id="4841" class="Symbol">{</a><a id="4842" href="VerifiedCompilation.html#4842" class="Bound">xs</a> <a id="4845" class="Symbol">:</a> <a id="4847" href="Utils.html#5072" class="Datatype">List</a> <a id="4852" class="Symbol">(</a><a id="4853" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="4867" href="Utils.html#4834" class="Record Operator">×</a> <a id="4869" class="Symbol">(</a><a id="4870" href="VerifiedCompilation.html#4774" class="Bound">X</a> <a id="4872" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4873" class="Symbol">)</a> <a id="4875" href="Utils.html#4834" class="Record Operator">×</a> <a id="4877" class="Symbol">(</a><a id="4878" href="VerifiedCompilation.html#4774" class="Bound">X</a> <a id="4880" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="4881" class="Symbol">))}</a>
    <a id="4889" class="Symbol">→</a> <a id="4891" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="4906" href="VerifiedCompilation.html#4803" class="Bound">tag</a> <a id="4910" href="VerifiedCompilation.html#4825" class="Bound">x</a> <a id="4912" href="VerifiedCompilation.html#4827" class="Bound">x&#39;</a>
    <a id="4919" class="Symbol">→</a> <a id="4921" href="VerifiedCompilation.html#4622" class="Datatype">Trace</a> <a id="4927" href="VerifiedCompilation.html#4842" class="Bound">xs</a>
    <a id="4934" class="Symbol">→</a> <a id="4936" href="VerifiedCompilation.html#4622" class="Datatype">Trace</a> <a id="4942" class="Symbol">((</a><a id="4944" href="VerifiedCompilation.html#4803" class="Bound">tag</a> <a id="4948" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="4950" href="VerifiedCompilation.html#4825" class="Bound">x</a> <a id="4952" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="4954" href="VerifiedCompilation.html#4827" class="Bound">x&#39;</a><a id="4956" class="Symbol">)</a> <a id="4958" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="4960" href="VerifiedCompilation.html#4842" class="Bound">xs</a><a id="4962" class="Symbol">)</a>

<a id="isTransformation?"></a><a id="4965" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="4983" class="Symbol">:</a> <a id="4985" class="Symbol">{</a><a id="4986" href="VerifiedCompilation.html#4986" class="Bound">X</a> <a id="4988" class="Symbol">:</a> <a id="4990" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4993" class="Symbol">}</a> <a id="4995" class="Symbol"></a> <a id="5011" class="Symbol">→</a> <a id="5013" class="Symbol">(</a><a id="5014" href="VerifiedCompilation.html#5014" class="Bound">tag</a> <a id="5018" class="Symbol">:</a> <a id="5020" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="5033" class="Symbol">)</a> <a id="5035" class="Symbol">→</a> <a id="5037" href="VerifiedCompilation.Certificate.html#1493" class="Function">MatchOrCE</a> <a id="5047" class="Symbol">{</a><a id="5048" class="Argument">X</a> <a id="5050" class="Symbol">=</a> <a id="5052" href="VerifiedCompilation.html#4986" class="Bound">X</a> <a id="5054" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="5055" class="Symbol">}</a> <a id="5057" class="Symbol">(</a><a id="5058" href="VerifiedCompilation.html#3712" class="Datatype">Transformation</a> <a id="5073" href="VerifiedCompilation.html#5014" class="Bound">tag</a><a id="5076" class="Symbol">)</a>
<a id="5078" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="5096" href="VerifiedCompilation.html#5096" class="Bound">tag</a> <a id="5100" href="VerifiedCompilation.html#5100" class="Bound">ast</a> <a id="5104" href="VerifiedCompilation.html#5104" class="Bound">ast&#39;</a> <a id="5109" class="Keyword">with</a> <a id="5114" href="VerifiedCompilation.html#5096" class="Bound">tag</a>
<a id="5118" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="5136" href="VerifiedCompilation.html#5136" class="Bound">tag</a> <a id="5140" href="VerifiedCompilation.html#5140" class="Bound">ast</a> <a id="5144" href="VerifiedCompilation.html#5144" class="Bound">ast&#39;</a> <a id="5149" class="Symbol">|</a> <a id="5151" href="VerifiedCompilation.Certificate.html#673" class="InductiveConstructor">SimplifierTag.floatDelayT</a> <a id="5177" class="Keyword">with</a> <a id="5182" href="VerifiedCompilation.UFloatDelay.html#6236" class="Function">UFlD.isFloatDelay?</a> <a id="5201" href="VerifiedCompilation.html#5140" class="Bound">ast</a> <a id="5205" href="VerifiedCompilation.html#5144" class="Bound">ast&#39;</a>
<a id="5210" class="Symbol">...</a> <a id="5214" class="Symbol">|</a> <a id="5216" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5219" href="VerifiedCompilation.html#5219" class="Bound">¬p</a> <a id="5222" href="VerifiedCompilation.html#5222" class="Bound">t</a> <a id="5224" href="VerifiedCompilation.html#5224" class="Bound">b</a> <a id="5226" href="VerifiedCompilation.html#5226" class="Bound">a</a> <a id="5228" class="Symbol">=</a> <a id="5230" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5233" class="Symbol">(λ</a> <a id="5236" class="Symbol">{</a> <a id="5238" class="Symbol">(</a><a id="5239" href="VerifiedCompilation.html#4025" class="InductiveConstructor">isFlD</a> <a id="5245" href="VerifiedCompilation.html#5245" class="Bound">x</a><a id="5246" class="Symbol">)</a> <a id="5248" class="Symbol">→</a> <a id="5250" href="VerifiedCompilation.html#5219" class="Bound">¬p</a> <a id="5253" href="VerifiedCompilation.html#5245" class="Bound">x</a><a id="5254" class="Symbol">})</a> <a id="5257" href="VerifiedCompilation.html#5222" class="Bound">t</a> <a id="5259" href="VerifiedCompilation.html#5224" class="Bound">b</a> <a id="5261" href="VerifiedCompilation.html#5226" class="Bound">a</a>
<a id="5263" class="Symbol">...</a> <a id="5267" class="Symbol">|</a> <a id="5269" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5275" href="VerifiedCompilation.html#5275" class="Bound">p</a> <a id="5277" class="Symbol">=</a> <a id="5279" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5285" class="Symbol">(</a><a id="5286" href="VerifiedCompilation.html#4025" class="InductiveConstructor">isFlD</a> <a id="5292" href="VerifiedCompilation.html#5275" class="Bound">p</a><a id="5293" class="Symbol">)</a>
<a id="5295" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="5313" href="VerifiedCompilation.html#5313" class="Bound">tag</a> <a id="5317" href="VerifiedCompilation.html#5317" class="Bound">ast</a> <a id="5321" href="VerifiedCompilation.html#5321" class="Bound">ast&#39;</a> <a id="5326" class="Symbol">|</a> <a id="5328" href="VerifiedCompilation.Certificate.html#703" class="InductiveConstructor">SimplifierTag.forceDelayT</a> <a id="5354" class="Keyword">with</a> <a id="5359" href="VerifiedCompilation.UForceDelay.html#18140" class="Function">UFD.isForceDelay?</a> <a id="5377" href="VerifiedCompilation.html#5317" class="Bound">ast</a> <a id="5381" href="VerifiedCompilation.html#5321" class="Bound">ast&#39;</a>
<a id="5386" class="Symbol">...</a> <a id="5390" class="Symbol">|</a> <a id="5392" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5395" href="VerifiedCompilation.html#5395" class="Bound">¬p</a> <a id="5398" href="VerifiedCompilation.html#5398" class="Bound">t</a> <a id="5400" href="VerifiedCompilation.html#5400" class="Bound">b</a> <a id="5402" href="VerifiedCompilation.html#5402" class="Bound">a</a> <a id="5404" class="Symbol">=</a> <a id="5406" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5409" class="Symbol">(λ</a> <a id="5412" class="Symbol">{</a> <a id="5414" class="Symbol">(</a><a id="5415" href="VerifiedCompilation.html#3894" class="InductiveConstructor">isFD</a> <a id="5420" href="VerifiedCompilation.html#5420" class="Bound">x</a><a id="5421" class="Symbol">)</a> <a id="5423" class="Symbol">→</a> <a id="5425" href="VerifiedCompilation.html#5395" class="Bound">¬p</a> <a id="5428" href="VerifiedCompilation.html#5420" class="Bound">x</a><a id="5429" class="Symbol">})</a> <a id="5432" href="VerifiedCompilation.html#5398" class="Bound">t</a> <a id="5434" href="VerifiedCompilation.html#5400" class="Bound">b</a> <a id="5436" href="VerifiedCompilation.html#5402" class="Bound">a</a>
<a id="5438" class="Symbol">...</a> <a id="5442" class="Symbol">|</a> <a id="5444" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5450" href="VerifiedCompilation.html#5450" class="Bound">p</a> <a id="5452" class="Symbol">=</a> <a id="5454" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5460" class="Symbol">(</a><a id="5461" href="VerifiedCompilation.html#3894" class="InductiveConstructor">isFD</a> <a id="5466" href="VerifiedCompilation.html#5450" class="Bound">p</a><a id="5467" class="Symbol">)</a>
<a id="5469" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="5487" href="VerifiedCompilation.html#5487" class="Bound">tag</a> <a id="5491" href="VerifiedCompilation.html#5491" class="Bound">ast</a> <a id="5495" href="VerifiedCompilation.html#5495" class="Bound">ast&#39;</a> <a id="5500" class="Symbol">|</a> <a id="5502" href="VerifiedCompilation.Certificate.html#733" class="InductiveConstructor">SimplifierTag.caseOfCaseT</a> <a id="5528" class="Keyword">with</a> <a id="5533" href="VerifiedCompilation.UCaseOfCase.html#6199" class="Function">UCC.isCaseOfCase?</a> <a id="5551" href="VerifiedCompilation.html#5491" class="Bound">ast</a> <a id="5555" href="VerifiedCompilation.html#5495" class="Bound">ast&#39;</a>
<a id="5560" class="Symbol">...</a> <a id="5564" class="Symbol">|</a> <a id="5566" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5569" href="VerifiedCompilation.html#5569" class="Bound">¬p</a> <a id="5572" href="VerifiedCompilation.html#5572" class="Bound">t</a> <a id="5574" href="VerifiedCompilation.html#5574" class="Bound">b</a> <a id="5576" href="VerifiedCompilation.html#5576" class="Bound">a</a> <a id="5578" class="Symbol">=</a> <a id="5580" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5583" class="Symbol">(λ</a> <a id="5586" class="Symbol">{</a> <a id="5588" class="Symbol">(</a><a id="5589" href="VerifiedCompilation.html#3762" class="InductiveConstructor">isCoC</a> <a id="5595" href="VerifiedCompilation.html#5595" class="Bound">x</a><a id="5596" class="Symbol">)</a> <a id="5598" class="Symbol">→</a> <a id="5600" href="VerifiedCompilation.html#5569" class="Bound">¬p</a> <a id="5603" href="VerifiedCompilation.html#5595" class="Bound">x</a><a id="5604" class="Symbol">})</a> <a id="5607" href="VerifiedCompilation.html#5572" class="Bound">t</a> <a id="5609" href="VerifiedCompilation.html#5574" class="Bound">b</a> <a id="5611" href="VerifiedCompilation.html#5576" class="Bound">a</a>
<a id="5613" class="Symbol">...</a> <a id="5617" class="Symbol">|</a> <a id="5619" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5625" href="VerifiedCompilation.html#5625" class="Bound">p</a> <a id="5627" class="Symbol">=</a> <a id="5629" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5635" class="Symbol">(</a><a id="5636" href="VerifiedCompilation.html#3762" class="InductiveConstructor">isCoC</a> <a id="5642" href="VerifiedCompilation.html#5625" class="Bound">p</a><a id="5643" class="Symbol">)</a>
<a id="5645" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="5663" href="VerifiedCompilation.html#5663" class="Bound">tag</a> <a id="5667" href="VerifiedCompilation.html#5667" class="Bound">ast</a> <a id="5671" href="VerifiedCompilation.html#5671" class="Bound">ast&#39;</a> <a id="5676" class="Symbol">|</a> <a id="5678" href="VerifiedCompilation.Certificate.html#763" class="InductiveConstructor">SimplifierTag.caseReduceT</a> <a id="5704" class="Keyword">with</a> <a id="5709" href="VerifiedCompilation.UCaseReduce.html#2041" class="Function">UCR.isCaseReduce?</a> <a id="5727" href="VerifiedCompilation.html#5667" class="Bound">ast</a> <a id="5731" href="VerifiedCompilation.html#5671" class="Bound">ast&#39;</a>
<a id="5736" class="Symbol">...</a> <a id="5740" class="Symbol">|</a> <a id="5742" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5745" href="VerifiedCompilation.html#5745" class="Bound">¬p</a> <a id="5748" href="VerifiedCompilation.html#5748" class="Bound">t</a> <a id="5750" href="VerifiedCompilation.html#5750" class="Bound">b</a> <a id="5752" href="VerifiedCompilation.html#5752" class="Bound">a</a> <a id="5754" class="Symbol">=</a> <a id="5756" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="5759" class="Symbol">(λ</a> <a id="5762" class="Symbol">{</a> <a id="5764" class="Symbol">(</a><a id="5765" href="VerifiedCompilation.html#4478" class="InductiveConstructor">isCaseReduce</a> <a id="5778" href="VerifiedCompilation.html#5778" class="Bound">x</a><a id="5779" class="Symbol">)</a> <a id="5781" class="Symbol">→</a> <a id="5783" href="VerifiedCompilation.html#5745" class="Bound">¬p</a> <a id="5786" href="VerifiedCompilation.html#5778" class="Bound">x</a><a id="5787" class="Symbol">})</a> <a id="5790" href="VerifiedCompilation.html#5748" class="Bound">t</a> <a id="5792" href="VerifiedCompilation.html#5750" class="Bound">b</a> <a id="5794" href="VerifiedCompilation.html#5752" class="Bound">a</a>
<a id="5796" class="Symbol">...</a> <a id="5800" class="Symbol">|</a> <a id="5802" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5808" href="VerifiedCompilation.html#5808" class="Bound">p</a> <a id="5810" class="Symbol">=</a> <a id="5812" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5818" class="Symbol">(</a><a id="5819" href="VerifiedCompilation.html#4478" class="InductiveConstructor">isCaseReduce</a> <a id="5832" href="VerifiedCompilation.html#5808" class="Bound">p</a><a id="5833" class="Symbol">)</a>
<a id="5835" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="5853" href="VerifiedCompilation.html#5853" class="Bound">tag</a> <a id="5857" href="VerifiedCompilation.html#5857" class="Bound">ast</a> <a id="5861" href="VerifiedCompilation.html#5861" class="Bound">ast&#39;</a> <a id="5866" class="Symbol">|</a> <a id="5868" href="VerifiedCompilation.Certificate.html#793" class="InductiveConstructor">SimplifierTag.inlineT</a> <a id="5890" class="Symbol">=</a> <a id="5892" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="5898" href="VerifiedCompilation.html#4361" class="InductiveConstructor">inlineNotImplemented</a>
<a id="5919" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="5937" href="VerifiedCompilation.html#5937" class="Bound">tag</a> <a id="5941" href="VerifiedCompilation.html#5941" class="Bound">ast</a> <a id="5945" href="VerifiedCompilation.html#5945" class="Bound">ast&#39;</a> <a id="5950" class="Symbol">|</a> <a id="5952" href="VerifiedCompilation.Certificate.html#819" class="InductiveConstructor">SimplifierTag.cseT</a> <a id="5971" class="Keyword">with</a> <a id="5976" href="VerifiedCompilation.UCSE.html#1908" class="Function">UCSE.isUntypedCSE?</a> <a id="5995" href="VerifiedCompilation.html#5941" class="Bound">ast</a> <a id="5999" href="VerifiedCompilation.html#5945" class="Bound">ast&#39;</a>
<a id="6004" class="Symbol">...</a> <a id="6008" class="Symbol">|</a> <a id="6010" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6013" href="VerifiedCompilation.html#6013" class="Bound">¬p</a> <a id="6016" href="VerifiedCompilation.html#6016" class="Bound">t</a> <a id="6018" href="VerifiedCompilation.html#6018" class="Bound">b</a> <a id="6020" href="VerifiedCompilation.html#6020" class="Bound">a</a> <a id="6022" class="Symbol">=</a> <a id="6024" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6027" class="Symbol">(λ</a> <a id="6030" class="Symbol">{</a> <a id="6032" class="Symbol">(</a><a id="6033" href="VerifiedCompilation.html#4158" class="InductiveConstructor">isCSE</a> <a id="6039" href="VerifiedCompilation.html#6039" class="Bound">x</a><a id="6040" class="Symbol">)</a> <a id="6042" class="Symbol">→</a> <a id="6044" href="VerifiedCompilation.html#6013" class="Bound">¬p</a> <a id="6047" href="VerifiedCompilation.html#6039" class="Bound">x</a><a id="6048" class="Symbol">})</a> <a id="6051" href="VerifiedCompilation.html#6016" class="Bound">t</a> <a id="6053" href="VerifiedCompilation.html#6018" class="Bound">b</a> <a id="6055" href="VerifiedCompilation.html#6020" class="Bound">a</a>
<a id="6057" class="Symbol">...</a> <a id="6061" class="Symbol">|</a> <a id="6063" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6069" href="VerifiedCompilation.html#6069" class="Bound">p</a> <a id="6071" class="Symbol">=</a> <a id="6073" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6079" class="Symbol">(</a><a id="6080" href="VerifiedCompilation.html#4158" class="InductiveConstructor">isCSE</a> <a id="6086" href="VerifiedCompilation.html#6069" class="Bound">p</a><a id="6087" class="Symbol">)</a>

<a id="isTrace?"></a><a id="6090" href="VerifiedCompilation.html#6090" class="Function">isTrace?</a> <a id="6099" class="Symbol">:</a> <a id="6101" class="Symbol">{</a><a id="6102" href="VerifiedCompilation.html#6102" class="Bound">X</a> <a id="6104" class="Symbol">:</a> <a id="6106" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="6109" class="Symbol">}</a> <a id="6111" class="Symbol"></a> <a id="6127" class="Symbol">→</a> <a id="6129" class="Symbol">(</a><a id="6130" href="VerifiedCompilation.html#6130" class="Bound">t</a> <a id="6132" class="Symbol">:</a> <a id="6134" href="Utils.html#5072" class="Datatype">List</a> <a id="6139" class="Symbol">(</a><a id="6140" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="6154" href="Utils.html#4834" class="Record Operator">×</a> <a id="6156" class="Symbol">(</a><a id="6157" href="VerifiedCompilation.html#6102" class="Bound">X</a> <a id="6159" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="6160" class="Symbol">)</a> <a id="6162" href="Utils.html#4834" class="Record Operator">×</a> <a id="6164" class="Symbol">(</a><a id="6165" href="VerifiedCompilation.html#6102" class="Bound">X</a> <a id="6167" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="6168" class="Symbol">)))</a> <a id="6172" class="Symbol">→</a> <a id="6174" href="VerifiedCompilation.Certificate.html#1061" class="Datatype">ProofOrCE</a> <a id="6184" class="Symbol">(</a><a id="6185" href="VerifiedCompilation.html#4622" class="Datatype">Trace</a> <a id="6191" class="Symbol">{</a><a id="6192" href="VerifiedCompilation.html#6102" class="Bound">X</a><a id="6193" class="Symbol">}</a> <a id="6195" href="VerifiedCompilation.html#6130" class="Bound">t</a><a id="6196" class="Symbol">)</a>
<a id="6198" href="VerifiedCompilation.html#6090" class="Function">isTrace?</a> <a id="6207" href="Utils.html#5101" class="InductiveConstructor">[]</a> <a id="6210" class="Symbol">=</a> <a id="6212" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6218" href="VerifiedCompilation.html#4712" class="InductiveConstructor">empty</a>
<a id="6224" href="VerifiedCompilation.html#6090" class="Function">isTrace?</a> <a id="6233" class="Symbol">{</a><a id="6234" href="VerifiedCompilation.html#6234" class="Bound">X</a><a id="6235" class="Symbol">}</a> <a id="6237" class="Symbol">((</a><a id="6239" href="VerifiedCompilation.html#6239" class="Bound">tag</a> <a id="6243" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="6245" href="VerifiedCompilation.html#6245" class="Bound">x₁</a> <a id="6248" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="6250" href="VerifiedCompilation.html#6250" class="Bound">x₂</a><a id="6252" class="Symbol">)</a> <a id="6254" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="6256" href="VerifiedCompilation.html#6256" class="Bound">xs</a><a id="6258" class="Symbol">)</a> <a id="6260" class="Keyword">with</a> <a id="6265" href="VerifiedCompilation.html#6090" class="Function">isTrace?</a> <a id="6274" href="VerifiedCompilation.html#6256" class="Bound">xs</a>
<a id="6277" class="Symbol">...</a> <a id="6281" class="Symbol">|</a> <a id="6283" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6286" href="VerifiedCompilation.html#6286" class="Bound">¬p</a> <a id="6289" href="VerifiedCompilation.html#6289" class="Bound">t</a> <a id="6291" href="VerifiedCompilation.html#6291" class="Bound">b</a> <a id="6293" href="VerifiedCompilation.html#6293" class="Bound">a</a> <a id="6295" class="Symbol">=</a> <a id="6297" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6300" class="Symbol">(λ</a> <a id="6303" class="Symbol">{</a> <a id="6305" class="Symbol">(</a><a id="6306" href="VerifiedCompilation.html#4762" class="InductiveConstructor">cons</a> <a id="6311" href="VerifiedCompilation.html#6311" class="Bound">x</a> <a id="6313" href="VerifiedCompilation.html#6313" class="Bound">xx</a><a id="6315" class="Symbol">)</a> <a id="6317" class="Symbol">→</a> <a id="6319" href="VerifiedCompilation.html#6286" class="Bound">¬p</a> <a id="6322" href="VerifiedCompilation.html#6313" class="Bound">xx</a><a id="6324" class="Symbol">})</a> <a id="6327" href="VerifiedCompilation.html#6289" class="Bound">t</a> <a id="6329" href="VerifiedCompilation.html#6291" class="Bound">b</a> <a id="6331" href="VerifiedCompilation.html#6293" class="Bound">a</a>
<a id="6333" class="Symbol">...</a> <a id="6337" class="Symbol">|</a> <a id="6339" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6345" href="VerifiedCompilation.html#6345" class="Bound">pₜ</a> <a id="6348" class="Keyword">with</a> <a id="6353" href="VerifiedCompilation.html#4965" class="Function">isTransformation?</a> <a id="6371" class="Symbol">{</a><a id="6372" class="Bound">X</a><a id="6373" class="Symbol">}</a> <a id="6375" class="Bound">tag</a> <a id="6379" class="Bound">x₁</a> <a id="6382" class="Bound">x₂</a>
<a id="6385" class="Symbol">...</a>                 <a id="6405" class="Symbol">|</a> <a id="6407" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6410" href="VerifiedCompilation.html#6410" class="Bound">¬p</a> <a id="6413" href="VerifiedCompilation.html#6413" class="Bound">t</a> <a id="6415" href="VerifiedCompilation.html#6415" class="Bound">b</a> <a id="6417" href="VerifiedCompilation.html#6417" class="Bound">a</a> <a id="6419" class="Symbol">=</a> <a id="6421" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="6424" class="Symbol">(λ</a> <a id="6427" class="Symbol">{</a> <a id="6429" class="Symbol">(</a><a id="6430" href="VerifiedCompilation.html#4762" class="InductiveConstructor">cons</a> <a id="6435" href="VerifiedCompilation.html#6435" class="Bound">x</a> <a id="6437" href="VerifiedCompilation.html#6437" class="Bound">xx</a><a id="6439" class="Symbol">)</a> <a id="6441" class="Symbol">→</a> <a id="6443" href="VerifiedCompilation.html#6410" class="Bound">¬p</a> <a id="6446" href="VerifiedCompilation.html#6435" class="Bound">x</a><a id="6447" class="Symbol">})</a> <a id="6450" href="VerifiedCompilation.html#6413" class="Bound">t</a> <a id="6452" href="VerifiedCompilation.html#6415" class="Bound">b</a> <a id="6454" href="VerifiedCompilation.html#6417" class="Bound">a</a>
<a id="6456" class="Symbol">...</a>                 <a id="6476" class="Symbol">|</a> <a id="6478" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6484" href="VerifiedCompilation.html#6484" class="Bound">pₑ</a> <a id="6487" class="Symbol">=</a> <a id="6489" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="6495" class="Symbol">(</a><a id="6496" href="VerifiedCompilation.html#4762" class="InductiveConstructor">cons</a> <a id="6501" href="VerifiedCompilation.html#6484" class="Bound">pₑ</a> <a id="6504" class="Bound">pₜ</a><a id="6506" class="Symbol">)</a>


</pre>

<h2 id="the-certification-function">The certification function</h2>

<p>The <code class="language-plaintext highlighter-rouge">runCertifier</code> function is the top-level function which can be called by the compiler.</p>

<pre class="Agda">
<a id="6644" class="Symbol">{-#</a> <a id="6648" class="Keyword">FOREIGN</a> <a id="6656" class="Pragma">GHC</a> <a id="6660" class="Pragma">import</a> <a id="6667" class="Pragma">qualified</a> <a id="6677" class="Pragma">Data.Text.IO</a> <a id="6690" class="Pragma">as</a> <a id="6693" class="Pragma">TextIO</a> <a id="6700" class="Symbol">#-}</a>
<a id="6704" class="Symbol">{-#</a> <a id="6708" class="Keyword">FOREIGN</a> <a id="6716" class="Pragma">GHC</a> <a id="6720" class="Pragma">import</a> <a id="6727" class="Pragma">qualified</a> <a id="6737" class="Pragma">System.IO</a> <a id="6747" class="Pragma">as</a> <a id="6750" class="Pragma">IO</a> <a id="6753" class="Symbol">#-}</a>
<a id="6757" class="Symbol">{-#</a> <a id="6761" class="Keyword">FOREIGN</a> <a id="6769" class="Pragma">GHC</a> <a id="6773" class="Pragma">import</a> <a id="6780" class="Pragma">qualified</a> <a id="6790" class="Pragma">Data.Text</a> <a id="6800" class="Pragma">as</a> <a id="6803" class="Pragma">Text</a> <a id="6808" class="Symbol">#-}</a>
<a id="6812" class="Symbol">{-#</a> <a id="6816" class="Keyword">FOREIGN</a> <a id="6824" class="Pragma">GHC</a> <a id="6828" class="Pragma">import</a> <a id="6835" class="Pragma">PlutusCore.Compiler.Types</a> <a id="6861" class="Symbol">#-}</a>

<a id="6866" class="Keyword">postulate</a> <a id="FileHandle"></a><a id="6876" href="VerifiedCompilation.html#6876" class="Postulate">FileHandle</a> <a id="6887" class="Symbol">:</a> <a id="6889" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="6893" class="Symbol">{-#</a> <a id="6897" class="Keyword">COMPILE</a> <a id="6905" class="Keyword">GHC</a> <a id="6909" href="VerifiedCompilation.html#6876" class="Postulate">FileHandle</a> <a id="6920" class="Pragma">=</a> <a id="6922" class="Pragma">type</a> <a id="6927" class="Pragma">IO.Handle</a> <a id="6937" class="Symbol">#-}</a>

<a id="6942" class="Keyword">postulate</a>
  <a id="writeFile"></a><a id="6954" href="VerifiedCompilation.html#6954" class="Postulate">writeFile</a> <a id="6964" class="Symbol">:</a> <a id="6966" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="6973" class="Symbol">→</a> <a id="6975" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="6982" class="Symbol">→</a> <a id="6984" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="6987" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="stderr"></a><a id="6991" href="VerifiedCompilation.html#6991" class="Postulate">stderr</a> <a id="6998" class="Symbol">:</a> <a id="7000" href="VerifiedCompilation.html#6876" class="Postulate">FileHandle</a>
  <a id="hPutStrLn"></a><a id="7013" href="VerifiedCompilation.html#7013" class="Postulate">hPutStrLn</a> <a id="7023" class="Symbol">:</a> <a id="7025" href="VerifiedCompilation.html#6876" class="Postulate">FileHandle</a> <a id="7036" class="Symbol">→</a> <a id="7038" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7045" class="Symbol">→</a> <a id="7047" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7050" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="putStrLn"></a><a id="7054" href="VerifiedCompilation.html#7054" class="Postulate">putStrLn</a> <a id="7063" class="Symbol">:</a> <a id="7065" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7072" class="Symbol">→</a> <a id="7074" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7077" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="7080" class="Symbol">{-#</a> <a id="7084" class="Keyword">COMPILE</a> <a id="7092" class="Keyword">GHC</a> <a id="7096" href="VerifiedCompilation.html#6954" class="Postulate">writeFile</a> <a id="7106" class="Pragma">=</a> <a id="7108" class="Pragma">\f</a> <a id="7111" class="Pragma">-&gt;</a> <a id="7114" class="Pragma">TextIO.writeFile</a> <a id="7131" class="Pragma">(Text.unpack</a> <a id="7144" class="Pragma">f)</a> <a id="7147" class="Symbol">#-}</a>
<a id="7151" class="Symbol">{-#</a> <a id="7155" class="Keyword">COMPILE</a> <a id="7163" class="Keyword">GHC</a> <a id="7167" href="VerifiedCompilation.html#6991" class="Postulate">stderr</a> <a id="7174" class="Pragma">=</a> <a id="7176" class="Pragma">IO.stderr</a> <a id="7186" class="Symbol">#-}</a>
<a id="7190" class="Symbol">{-#</a> <a id="7194" class="Keyword">COMPILE</a> <a id="7202" class="Keyword">GHC</a> <a id="7206" href="VerifiedCompilation.html#7013" class="Postulate">hPutStrLn</a> <a id="7216" class="Pragma">=</a> <a id="7218" class="Pragma">TextIO.hPutStr</a> <a id="7233" class="Symbol">#-}</a>
<a id="7237" class="Symbol">{-#</a> <a id="7241" class="Keyword">COMPILE</a> <a id="7249" class="Keyword">GHC</a> <a id="7253" href="VerifiedCompilation.html#7054" class="Postulate">putStrLn</a> <a id="7262" class="Pragma">=</a> <a id="7264" class="Pragma">TextIO.putStrLn</a> <a id="7280" class="Symbol">#-}</a>

<a id="buildPairs"></a><a id="7285" href="VerifiedCompilation.html#7285" class="Function">buildPairs</a> <a id="7296" class="Symbol">:</a> <a id="7298" class="Symbol">{</a><a id="7299" href="VerifiedCompilation.html#7299" class="Bound">X</a> <a id="7301" class="Symbol">:</a> <a id="7303" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7306" class="Symbol">}</a> <a id="7308" class="Symbol">→</a> <a id="7310" href="Utils.html#5072" class="Datatype">List</a> <a id="7315" class="Symbol">(</a><a id="7316" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7322" href="VerifiedCompilation.html#7299" class="Bound">X</a> <a id="7324" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="7325" class="Symbol">)</a> <a id="7327" class="Symbol">-&gt;</a> <a id="7330" href="Utils.html#5072" class="Datatype">List</a> <a id="7335" class="Symbol">((</a><a id="7337" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7343" href="VerifiedCompilation.html#7299" class="Bound">X</a> <a id="7345" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="7346" class="Symbol">)</a> <a id="7348" href="Utils.html#4834" class="Record Operator">×</a> <a id="7350" class="Symbol">(</a><a id="7351" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7357" href="VerifiedCompilation.html#7299" class="Bound">X</a> <a id="7359" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="7360" class="Symbol">))</a>
<a id="7363" href="VerifiedCompilation.html#7285" class="Function">buildPairs</a> <a id="7374" href="Utils.html#5101" class="InductiveConstructor">[]</a> <a id="7377" class="Symbol">=</a> <a id="7379" href="Utils.html#5101" class="InductiveConstructor">[]</a>
<a id="7382" href="VerifiedCompilation.html#7285" class="Function">buildPairs</a> <a id="7393" class="Symbol">(</a><a id="7394" href="VerifiedCompilation.html#7394" class="Bound">x</a> <a id="7396" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7398" href="Utils.html#5101" class="InductiveConstructor">[]</a><a id="7400" class="Symbol">)</a> <a id="7402" class="Symbol">=</a> <a id="7404" class="Symbol">(</a><a id="7405" href="VerifiedCompilation.html#7394" class="Bound">x</a> <a id="7407" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="7409" href="VerifiedCompilation.html#7394" class="Bound">x</a><a id="7410" class="Symbol">)</a> <a id="7412" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7414" href="Utils.html#5101" class="InductiveConstructor">[]</a>
<a id="7417" href="VerifiedCompilation.html#7285" class="Function">buildPairs</a> <a id="7428" class="Symbol">(</a><a id="7429" href="VerifiedCompilation.html#7429" class="Bound">x₁</a> <a id="7432" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7434" class="Symbol">(</a><a id="7435" href="VerifiedCompilation.html#7435" class="Bound">x₂</a> <a id="7438" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7440" href="VerifiedCompilation.html#7440" class="Bound">xs</a><a id="7442" class="Symbol">))</a> <a id="7445" class="Symbol">=</a> <a id="7447" class="Symbol">(</a><a id="7448" href="VerifiedCompilation.html#7429" class="Bound">x₁</a> <a id="7451" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="7453" href="VerifiedCompilation.html#7435" class="Bound">x₂</a><a id="7455" class="Symbol">)</a> <a id="7457" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7459" href="VerifiedCompilation.html#7285" class="Function">buildPairs</a> <a id="7470" class="Symbol">(</a><a id="7471" href="VerifiedCompilation.html#7435" class="Bound">x₂</a> <a id="7474" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7476" href="VerifiedCompilation.html#7440" class="Bound">xs</a><a id="7478" class="Symbol">)</a>

<a id="traverseEitherList"></a><a id="7481" href="VerifiedCompilation.html#7481" class="Function">traverseEitherList</a> <a id="7500" class="Symbol">:</a> <a id="7502" class="Symbol">{</a><a id="7503" href="VerifiedCompilation.html#7503" class="Bound">A</a> <a id="7505" href="VerifiedCompilation.html#7505" class="Bound">B</a> <a id="7507" href="VerifiedCompilation.html#7507" class="Bound">E</a> <a id="7509" class="Symbol">:</a> <a id="7511" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7514" class="Symbol">}</a> <a id="7516" class="Symbol">→</a> <a id="7518" class="Symbol">(</a><a id="7519" href="VerifiedCompilation.html#7503" class="Bound">A</a> <a id="7521" class="Symbol">→</a> <a id="7523" href="Utils.html#1125" class="Datatype">Either</a> <a id="7530" href="VerifiedCompilation.html#7507" class="Bound">E</a> <a id="7532" href="VerifiedCompilation.html#7505" class="Bound">B</a><a id="7533" class="Symbol">)</a> <a id="7535" class="Symbol">→</a> <a id="7537" href="Utils.html#5072" class="Datatype">List</a> <a id="7542" class="Symbol">(</a><a id="7543" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7557" href="Utils.html#4834" class="Record Operator">×</a> <a id="7559" href="VerifiedCompilation.html#7503" class="Bound">A</a> <a id="7561" href="Utils.html#4834" class="Record Operator">×</a> <a id="7563" href="VerifiedCompilation.html#7503" class="Bound">A</a><a id="7564" class="Symbol">)</a> <a id="7566" class="Symbol">→</a> <a id="7568" href="Utils.html#1125" class="Datatype">Either</a> <a id="7575" href="VerifiedCompilation.html#7507" class="Bound">E</a> <a id="7577" class="Symbol">(</a><a id="7578" href="Utils.html#5072" class="Datatype">List</a> <a id="7583" class="Symbol">(</a><a id="7584" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7598" href="Utils.html#4834" class="Record Operator">×</a> <a id="7600" href="VerifiedCompilation.html#7505" class="Bound">B</a> <a id="7602" href="Utils.html#4834" class="Record Operator">×</a> <a id="7604" href="VerifiedCompilation.html#7505" class="Bound">B</a><a id="7605" class="Symbol">))</a>
<a id="7608" href="VerifiedCompilation.html#7481" class="Function">traverseEitherList</a> <a id="7627" class="Symbol">_</a> <a id="7629" href="Utils.html#5101" class="InductiveConstructor">[]</a> <a id="7632" class="Symbol">=</a> <a id="7634" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="7639" href="Utils.html#5101" class="InductiveConstructor">[]</a>
<a id="7642" href="VerifiedCompilation.html#7481" class="Function">traverseEitherList</a> <a id="7661" href="VerifiedCompilation.html#7661" class="Bound">f</a> <a id="7663" class="Symbol">((</a><a id="7665" href="VerifiedCompilation.html#7665" class="Bound">tag</a> <a id="7669" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="7671" href="VerifiedCompilation.html#7671" class="Bound">before</a> <a id="7678" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="7680" href="VerifiedCompilation.html#7680" class="Bound">after</a><a id="7685" class="Symbol">)</a> <a id="7687" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7689" href="VerifiedCompilation.html#7689" class="Bound">xs</a><a id="7691" class="Symbol">)</a> <a id="7693" class="Keyword">with</a> <a id="7698" href="VerifiedCompilation.html#7661" class="Bound">f</a> <a id="7700" href="VerifiedCompilation.html#7671" class="Bound">before</a>
<a id="7707" class="Symbol">...</a> <a id="7711" class="Symbol">|</a> <a id="7713" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="7718" href="VerifiedCompilation.html#7718" class="Bound">e</a> <a id="7720" class="Symbol">=</a> <a id="7722" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="7727" href="VerifiedCompilation.html#7718" class="Bound">e</a>
<a id="7729" class="Symbol">...</a> <a id="7733" class="Symbol">|</a> <a id="7735" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="7740" href="VerifiedCompilation.html#7740" class="Bound">b</a> <a id="7742" class="Keyword">with</a> <a id="7747" class="Bound">f</a> <a id="7749" class="Bound">after</a>
<a id="7755" class="Symbol">...</a> <a id="7759" class="Symbol">|</a> <a id="7761" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="7766" href="VerifiedCompilation.html#7766" class="Bound">e</a> <a id="7768" class="Symbol">=</a> <a id="7770" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="7775" href="VerifiedCompilation.html#7766" class="Bound">e</a>
<a id="7777" class="Symbol">...</a> <a id="7781" class="Symbol">|</a> <a id="7783" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="7788" href="VerifiedCompilation.html#7788" class="Bound">a</a> <a id="7790" class="Keyword">with</a> <a id="7795" href="VerifiedCompilation.html#7481" class="Function">traverseEitherList</a> <a id="7814" class="Bound">f</a> <a id="7816" class="Bound">xs</a>
<a id="7819" class="Symbol">...</a> <a id="7823" class="Symbol">|</a> <a id="7825" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="7830" href="VerifiedCompilation.html#7830" class="Bound">e</a> <a id="7832" class="Symbol">=</a> <a id="7834" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="7839" href="VerifiedCompilation.html#7830" class="Bound">e</a>
<a id="7841" class="Symbol">...</a> <a id="7845" class="Symbol">|</a> <a id="7847" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="7852" href="VerifiedCompilation.html#7852" class="Bound">xs&#39;</a> <a id="7856" class="Symbol">=</a> <a id="7858" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="7863" class="Symbol">(((</a><a id="7866" class="Bound">tag</a> <a id="7870" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="7872" class="Bound">b</a> <a id="7874" href="Utils.html#4878" class="InductiveConstructor Operator">,</a> <a id="7876" class="Bound">a</a><a id="7877" class="Symbol">))</a> <a id="7880" href="Utils.html#5116" class="InductiveConstructor Operator">∷</a> <a id="7882" href="VerifiedCompilation.html#7852" class="Bound">xs&#39;</a><a id="7885" class="Symbol">)</a>

<a id="7888" class="Keyword">data</a> <a id="Cert"></a><a id="7893" href="VerifiedCompilation.html#7893" class="Datatype">Cert</a> <a id="7898" class="Symbol">:</a> <a id="7900" href="Agda.Primitive.html#388" class="Primitive">Set₂</a> <a id="7905" class="Keyword">where</a>
  <a id="Cert.cert"></a><a id="7913" href="VerifiedCompilation.html#7913" class="InductiveConstructor">cert</a>
    <a id="7922" class="Symbol">:</a> <a id="7924" class="Symbol">{</a><a id="7925" href="VerifiedCompilation.html#7925" class="Bound">X</a> <a id="7927" class="Symbol">:</a> <a id="7929" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7932" class="Symbol">}</a> <a id="7934" class="Symbol">{</a><a id="7935" href="VerifiedCompilation.html#7935" class="Bound">result</a> <a id="7942" class="Symbol">:</a> <a id="7944" href="Utils.html#5072" class="Datatype">List</a> <a id="7949" class="Symbol">(</a><a id="7950" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7964" href="Utils.html#4834" class="Record Operator">×</a> <a id="7966" class="Symbol">(</a><a id="7967" href="VerifiedCompilation.html#7925" class="Bound">X</a> <a id="7969" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="7970" class="Symbol">)</a> <a id="7972" href="Utils.html#4834" class="Record Operator">×</a> <a id="7974" class="Symbol">(</a><a id="7975" href="VerifiedCompilation.html#7925" class="Bound">X</a> <a id="7977" href="Untyped.html#1670" class="Datatype Operator">⊢</a><a id="7978" class="Symbol">))}</a> <a id="7982" class="Symbol"></a>
    <a id="8002" class="Symbol">→</a> <a id="8004" href="VerifiedCompilation.Certificate.html#1061" class="Datatype">ProofOrCE</a><a id="8013" class="Symbol">(</a><a id="8014" href="VerifiedCompilation.html#4622" class="Datatype">Trace</a> <a id="8020" class="Symbol">{</a><a id="8021" href="VerifiedCompilation.html#7925" class="Bound">X</a><a id="8022" class="Symbol">}</a> <a id="8024" href="VerifiedCompilation.html#7935" class="Bound">result</a><a id="8030" class="Symbol">)</a>
    <a id="8036" class="Symbol">→</a> <a id="8038" href="VerifiedCompilation.html#7893" class="Datatype">Cert</a>

<a id="runCertifier"></a><a id="8044" href="VerifiedCompilation.html#8044" class="Function">runCertifier</a> <a id="8057" class="Symbol">:</a> <a id="8059" href="Utils.html#5072" class="Datatype">List</a> <a id="8064" class="Symbol">(</a><a id="8065" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8079" href="Utils.html#4834" class="Record Operator">×</a> <a id="8081" href="RawU.html#6377" class="Datatype">Untyped</a> <a id="8089" href="Utils.html#4834" class="Record Operator">×</a> <a id="8091" href="RawU.html#6377" class="Datatype">Untyped</a><a id="8098" class="Symbol">)</a> <a id="8100" class="Symbol">→</a> <a id="8102" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8108" href="VerifiedCompilation.html#7893" class="Datatype">Cert</a>
<a id="8113" href="VerifiedCompilation.html#8044" class="Function">runCertifier</a> <a id="8126" href="VerifiedCompilation.html#8126" class="Bound">rawInput</a> <a id="8135" class="Keyword">with</a> <a id="8140" href="VerifiedCompilation.html#7481" class="Function">traverseEitherList</a> <a id="8159" class="Symbol">(</a><a id="8160" href="Untyped.html#6965" class="Function">toWellScoped</a> <a id="8173" class="Symbol">{</a><a id="8174" href="Data.Empty.html#914" class="Function">⊥</a><a id="8175" class="Symbol">})</a> <a id="8178" href="VerifiedCompilation.html#8126" class="Bound">rawInput</a>
<a id="8187" class="Symbol">...</a> <a id="8191" class="Symbol">|</a> <a id="8193" href="Utils.html#1158" class="InductiveConstructor">inj₁</a> <a id="8198" class="Symbol">_</a> <a id="8200" class="Symbol">=</a> <a id="8202" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8210" class="Symbol">...</a> <a id="8214" class="Symbol">|</a> <a id="8216" href="Utils.html#1182" class="InductiveConstructor">inj₂</a> <a id="8221" href="VerifiedCompilation.html#8221" class="Bound">inputTrace</a> <a id="8232" class="Symbol">=</a> <a id="8234" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8239" class="Symbol">(</a><a id="8240" href="VerifiedCompilation.html#7913" class="InductiveConstructor">cert</a> <a id="8245" class="Symbol">(</a><a id="8246" href="VerifiedCompilation.html#6090" class="Function">isTrace?</a> <a id="8255" href="VerifiedCompilation.html#8221" class="Bound">inputTrace</a><a id="8265" class="Symbol">))</a>

<a id="8269" class="Keyword">open</a> <a id="8274" class="Keyword">import</a> <a id="8281" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="8296" class="Keyword">using</a> <a id="8302" class="Symbol">(</a><a id="8303" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="8307" class="Symbol">;</a> <a id="8309" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="8314" class="Symbol">;</a> <a id="8316" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="8320" class="Symbol">)</a>
<a id="8322" class="Keyword">open</a> <a id="8327" class="Keyword">import</a> <a id="8334" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a> <a id="8356" class="Keyword">using</a> <a id="8362" class="Symbol">(</a><a id="8363" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="8366" class="Symbol">;</a> <a id="8368" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="8372" class="Symbol">)</a>

<a id="passed?"></a><a id="8375" href="VerifiedCompilation.html#8375" class="Function">passed?</a> <a id="8383" class="Symbol">:</a> <a id="8385" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8391" href="VerifiedCompilation.html#7893" class="Datatype">Cert</a> <a id="8396" class="Symbol">→</a> <a id="8398" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="8403" href="VerifiedCompilation.html#8375" class="Function">passed?</a> <a id="8411" class="Symbol">(</a><a id="8412" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8417" class="Symbol">(</a><a id="8418" href="VerifiedCompilation.html#7913" class="InductiveConstructor">cert</a> <a id="8423" class="Symbol">(</a><a id="8424" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="8427" class="Symbol">_</a> <a id="8429" class="Symbol">_</a> <a id="8431" class="Symbol">_</a> <a id="8433" class="Symbol">_)))</a> <a id="8438" class="Symbol">=</a> <a id="8440" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="8446" href="VerifiedCompilation.html#8375" class="Function">passed?</a> <a id="8454" class="Symbol">(</a><a id="8455" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8460" class="Symbol">(</a><a id="8461" href="VerifiedCompilation.html#7913" class="InductiveConstructor">cert</a> <a id="8466" class="Symbol">(</a><a id="8467" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="8473" class="Symbol">_)))</a> <a id="8478" class="Symbol">=</a> <a id="8480" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="8485" href="VerifiedCompilation.html#8375" class="Function">passed?</a> <a id="8493" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8501" class="Symbol">=</a> <a id="8503" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>

<a id="runCertifierMain"></a><a id="8510" href="VerifiedCompilation.html#8510" class="Function">runCertifierMain</a> <a id="8527" class="Symbol">:</a> <a id="8529" href="Utils.html#5072" class="Datatype">List</a> <a id="8534" class="Symbol">(</a><a id="8535" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8549" href="Utils.html#4834" class="Record Operator">×</a> <a id="8551" href="RawU.html#6377" class="Datatype">Untyped</a> <a id="8559" href="Utils.html#4834" class="Record Operator">×</a> <a id="8561" href="RawU.html#6377" class="Datatype">Untyped</a><a id="8568" class="Symbol">)</a> <a id="8570" class="Symbol">→</a> <a id="8572" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="8575" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="8577" href="VerifiedCompilation.html#8510" class="Function">runCertifierMain</a> <a id="8594" href="VerifiedCompilation.html#8594" class="Bound">asts</a> <a id="8599" class="Keyword">with</a> <a id="8604" href="VerifiedCompilation.html#8044" class="Function">runCertifier</a> <a id="8617" href="VerifiedCompilation.html#8594" class="Bound">asts</a>
<a id="8622" class="Symbol">...</a> <a id="8626" class="Symbol">|</a> <a id="8628" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8633" class="Symbol">(</a><a id="8634" href="VerifiedCompilation.html#7913" class="InductiveConstructor">cert</a> <a id="8639" class="Symbol">(</a><a id="8640" href="VerifiedCompilation.Certificate.html#1105" class="InductiveConstructor">proof</a> <a id="8646" href="VerifiedCompilation.html#8646" class="Bound">a</a><a id="8647" class="Symbol">))</a> <a id="8650" class="Symbol">=</a>
  <a id="8654" href="VerifiedCompilation.html#7054" class="Postulate">putStrLn</a> <a id="8663" class="String">&quot;The compilation was successfully certified.&quot;</a>
<a id="8709" class="Symbol">...</a> <a id="8713" class="Symbol">|</a> <a id="8715" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8720" class="Symbol">(</a><a id="8721" href="VerifiedCompilation.html#7913" class="InductiveConstructor">cert</a> <a id="8726" class="Symbol">(</a><a id="8727" href="VerifiedCompilation.Certificate.html#1137" class="InductiveConstructor">ce</a> <a id="8730" href="VerifiedCompilation.html#8730" class="Bound">¬p</a> <a id="8733" href="VerifiedCompilation.html#8733" class="Bound">t</a> <a id="8735" href="VerifiedCompilation.html#8735" class="Bound">b</a> <a id="8737" href="VerifiedCompilation.html#8737" class="Bound">a</a><a id="8738" class="Symbol">))</a> <a id="8741" class="Symbol">=</a>
  <a id="8745" href="VerifiedCompilation.html#7054" class="Postulate">putStrLn</a> <a id="8754" class="String">&quot;The compilation was not successfully certified. Please open a bug report at https://www.github.com/IntersectMBO/plutus and attach the faulty certificate.&quot;</a>
<a id="8910" class="Symbol">...</a> <a id="8914" class="Symbol">|</a> <a id="8916" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8924" class="Symbol">=</a>
  <a id="8928" href="VerifiedCompilation.html#7054" class="Postulate">putStrLn</a> <a id="8937" class="String">&quot;The certifier was unable to check the compilation. Please open a bug report at https://www.github.com/IntersectMBO/plutus.&quot;</a>
<a id="9062" class="Symbol">{-#</a> <a id="9066" class="Keyword">COMPILE</a> <a id="9074" class="Keyword">GHC</a> <a id="9078" href="VerifiedCompilation.html#8510" class="Function">runCertifierMain</a> <a id="9095" class="Pragma">as</a> <a id="9098" class="Pragma">runCertifierMain</a> <a id="9115" class="Symbol">#-}</a>
</pre>

    </section>
  </body>
</html>