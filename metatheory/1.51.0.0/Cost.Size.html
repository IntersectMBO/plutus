<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cost.Size</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>Cost.Size</h1>
    <section>
      <h1 id="size-of-constants">Size of Constants</h1>

<pre class="Agda"><a id="64" class="Keyword">module</a> <a id="71" href="Cost.Size.html" class="Module">Cost.Size</a> <a id="81" class="Keyword">where</a>

</pre>
<h1 id="imports">Imports</h1>

<pre class="Agda"><a id="108" class="Keyword">open</a> <a id="113" class="Keyword">import</a> <a id="120" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="130" class="Keyword">using</a> <a id="136" class="Symbol">(</a><a id="137" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="141" class="Symbol">)</a>
<a id="143" class="Keyword">open</a> <a id="148" class="Keyword">import</a> <a id="155" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="165" class="Keyword">using</a> <a id="171" class="Symbol">(</a><a id="172" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="173" class="Symbol">)</a>
<a id="175" class="Keyword">open</a> <a id="180" class="Keyword">import</a> <a id="187" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="196" class="Keyword">using</a> <a id="202" class="Symbol">(</a><a id="203" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="204" class="Symbol">;</a><a id="205" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a><a id="208" class="Symbol">)</a>
<a id="210" class="Keyword">open</a> <a id="215" class="Keyword">import</a> <a id="222" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="235" class="Keyword">using</a> <a id="241" class="Symbol">(</a><a id="242" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a><a id="243" class="Symbol">)</a>
<a id="245" class="Keyword">open</a> <a id="250" class="Keyword">import</a> <a id="257" href="Data.String.html" class="Module">Data.String</a> <a id="269" class="Keyword">using</a> <a id="275" class="Symbol">(</a><a id="276" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="282" class="Symbol">)</a>

<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="Utils.html" class="Module">Utils</a> <a id="303" class="Keyword">using</a> <a id="309" class="Symbol">(</a><a id="310" href="Utils.html#4009" class="InductiveConstructor Operator">_,_</a><a id="313" class="Symbol">;</a><a id="314" href="Utils.html#5345" class="InductiveConstructor Operator">_∷_</a><a id="317" class="Symbol">;</a><a id="318" href="Utils.html#5330" class="InductiveConstructor">[]</a><a id="320" class="Symbol">;</a><a id="321" href="Utils.html#6996" class="Datatype">DATA</a><a id="325" class="Symbol">;</a><a id="326" href="Utils.html#5301" class="Datatype">List</a><a id="330" class="Symbol">;</a><a id="331" href="Utils.html#4582" class="Postulate">ByteString</a><a id="341" class="Symbol">)</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Builtin.Signature.html" class="Module">Builtin.Signature</a> <a id="373" class="Keyword">using</a> <a id="379" class="Symbol">(</a><a id="380" href="Builtin.Signature.html#1821" class="Datatype Operator">_⊢♯</a><a id="383" class="Symbol">)</a>
<a id="385" class="Keyword">open</a> <a id="390" href="Builtin.Signature.html#1821" class="Module Operator">_⊢♯</a>
<a id="394" class="Keyword">open</a> <a id="399" class="Keyword">import</a> <a id="406" href="Builtin.Constant.AtomicType.html" class="Module">Builtin.Constant.AtomicType</a> <a id="434" class="Keyword">using</a> <a id="440" class="Symbol">(</a><a id="441" href="Builtin.Constant.AtomicType.html#570" class="Datatype">AtomicTyCon</a><a id="452" class="Symbol">)</a>
<a id="454" class="Keyword">open</a> <a id="459" href="Builtin.Constant.AtomicType.html#570" class="Module">AtomicTyCon</a>
<a id="471" class="Keyword">open</a> <a id="476" class="Keyword">import</a> <a id="483" href="Cost.Base.html" class="Module">Cost.Base</a>
<a id="493" class="Keyword">open</a> <a id="498" class="Keyword">import</a> <a id="505" href="Untyped.CEK.html" class="Module">Untyped.CEK</a> <a id="517" class="Keyword">using</a> <a id="523" class="Symbol">(</a><a id="524" href="Untyped.CEK.html#1344" class="Datatype">Value</a><a id="529" class="Symbol">;</a><a id="530" href="Untyped.CEK.html#1613" class="InductiveConstructor">V-con</a><a id="535" class="Symbol">)</a>
<a id="537" class="Keyword">open</a> <a id="542" class="Keyword">import</a> <a id="549" href="RawU.html" class="Module">RawU</a> <a id="554" class="Keyword">using</a> <a id="560" class="Symbol">(</a><a id="561" href="RawU.html#8012" class="Datatype">TmCon</a><a id="566" class="Symbol">;</a><a id="567" href="RawU.html#8032" class="InductiveConstructor">tmCon</a><a id="572" class="Symbol">)</a>
</pre>
<h2 id="memory-usage-of-type-constants">Memory usage of type constants</h2>

<p>For each type constant we calculate its size, as a measure of memory usage.</p>

<p>First we bring some functions from Haskell world.</p>

<pre class="Agda"><a id="746" class="Keyword">postulate</a> <a id="integerSize"></a><a id="756" href="Cost.Size.html#756" class="Postulate">integerSize</a> <a id="768" class="Symbol">:</a> <a id="770" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a> <a id="772" class="Symbol">→</a> <a id="774" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="785" class="Keyword">postulate</a> <a id="byteStringSize"></a><a id="795" href="Cost.Size.html#795" class="Postulate">byteStringSize</a> <a id="810" class="Symbol">:</a> <a id="812" href="Utils.html#4582" class="Postulate">ByteString</a> <a id="823" class="Symbol">→</a> <a id="825" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="836" class="Keyword">postulate</a> <a id="g1ElementSize"></a><a id="846" href="Cost.Size.html#846" class="Postulate">g1ElementSize</a> <a id="860" class="Symbol">:</a> <a id="862" href="Utils.html#9162" class="Postulate">Utils.Bls12-381-G1-Element</a> <a id="889" class="Symbol">→</a> <a id="891" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="902" class="Keyword">postulate</a> <a id="g2ElementSize"></a><a id="912" href="Cost.Size.html#912" class="Postulate">g2ElementSize</a> <a id="926" class="Symbol">:</a> <a id="928" href="Utils.html#9655" class="Postulate">Utils.Bls12-381-G2-Element</a> <a id="955" class="Symbol">→</a> <a id="957" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="968" class="Keyword">postulate</a> <a id="mlResultElementSize"></a><a id="978" href="Cost.Size.html#978" class="Postulate">mlResultElementSize</a> <a id="998" class="Symbol">:</a> <a id="1000" href="Utils.html#10148" class="Postulate">Utils.Bls12-381-MlResult</a> <a id="1025" class="Symbol">→</a> <a id="1027" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="1038" class="Keyword">postulate</a> <a id="dataSize"></a><a id="1048" href="Cost.Size.html#1048" class="Postulate">dataSize</a> <a id="1057" class="Symbol">:</a> <a id="1059" href="Utils.html#6996" class="Datatype">DATA</a> <a id="1064" class="Symbol">→</a> <a id="1066" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="1077" class="Keyword">postulate</a> <a id="boolSize"></a><a id="1087" href="Cost.Size.html#1087" class="Postulate">boolSize</a> <a id="1096" class="Symbol">:</a> <a id="1098" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="1103" class="Symbol">→</a> <a id="1105" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="1116" class="Keyword">postulate</a> <a id="unitSize"></a><a id="1126" href="Cost.Size.html#1126" class="Postulate">unitSize</a> <a id="1135" class="Symbol">:</a> <a id="1137" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="1139" class="Symbol">→</a> <a id="1141" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="1152" class="Keyword">postulate</a> <a id="stringSize"></a><a id="1162" href="Cost.Size.html#1162" class="Postulate">stringSize</a> <a id="1173" class="Symbol">:</a> <a id="1175" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1182" class="Symbol">→</a> <a id="1184" href="Cost.Base.html#778" class="Function">CostingNat</a>

<a id="1196" class="Symbol">{-#</a> <a id="1200" class="Keyword">FOREIGN</a> <a id="1208" class="Pragma">GHC</a> <a id="1212" class="Pragma">import</a> <a id="1219" class="Pragma">PlutusCore.Evaluation.Machine.ExMemoryUsage</a> <a id="1263" class="Symbol">#-}</a>
<a id="1267" class="Symbol">{-#</a> <a id="1271" class="Keyword">FOREIGN</a> <a id="1279" class="Pragma">GHC</a> <a id="1283" class="Pragma">import</a> <a id="1290" class="Pragma">PlutusCore.Evaluation.Machine.CostStream</a> <a id="1331" class="Symbol">#-}</a>
<a id="1335" class="Symbol">{-#</a> <a id="1339" class="Keyword">FOREIGN</a> <a id="1347" class="Pragma">GHC</a> <a id="1351" class="Pragma">import</a> <a id="1358" class="Pragma">Data.SatInt</a> <a id="1370" class="Symbol">#-}</a>
<a id="1374" class="Symbol">{-#</a> <a id="1378" class="Keyword">FOREIGN</a> <a id="1386" class="Pragma">GHC</a> <a id="1390" class="Pragma">size</a> <a id="1395" class="Pragma">=</a> <a id="1397" class="Pragma">fromSatInt</a> <a id="1408" class="Pragma">.</a> <a id="1410" class="Pragma">sumCostStream</a> <a id="1424" class="Pragma">.</a> <a id="1426" class="Pragma">flattenCostRose</a> <a id="1442" class="Pragma">.</a> <a id="1444" class="Pragma">memoryUsage</a> <a id="1456" class="Symbol">#-}</a>
<a id="1460" class="Symbol">{-#</a> <a id="1464" class="Keyword">COMPILE</a> <a id="1472" class="Keyword">GHC</a> <a id="1476" href="Cost.Size.html#756" class="Postulate">integerSize</a> <a id="1488" class="Pragma">=</a> <a id="1490" class="Pragma">size</a>  <a id="1496" class="Symbol">#-}</a>
<a id="1500" class="Symbol">{-#</a> <a id="1504" class="Keyword">COMPILE</a> <a id="1512" class="Keyword">GHC</a> <a id="1516" href="Cost.Size.html#795" class="Postulate">byteStringSize</a> <a id="1531" class="Pragma">=</a> <a id="1533" class="Pragma">size</a>  <a id="1539" class="Symbol">#-}</a>
<a id="1543" class="Symbol">{-#</a> <a id="1547" class="Keyword">COMPILE</a> <a id="1555" class="Keyword">GHC</a> <a id="1559" href="Cost.Size.html#846" class="Postulate">g1ElementSize</a> <a id="1573" class="Pragma">=</a> <a id="1575" class="Pragma">size</a> <a id="1580" class="Symbol">#-}</a>
<a id="1584" class="Symbol">{-#</a> <a id="1588" class="Keyword">COMPILE</a> <a id="1596" class="Keyword">GHC</a> <a id="1600" href="Cost.Size.html#912" class="Postulate">g2ElementSize</a> <a id="1614" class="Pragma">=</a> <a id="1616" class="Pragma">size</a> <a id="1621" class="Symbol">#-}</a>
<a id="1625" class="Symbol">{-#</a> <a id="1629" class="Keyword">COMPILE</a> <a id="1637" class="Keyword">GHC</a> <a id="1641" href="Cost.Size.html#978" class="Postulate">mlResultElementSize</a> <a id="1661" class="Pragma">=</a> <a id="1663" class="Pragma">size</a> <a id="1668" class="Symbol">#-}</a>
<a id="1672" class="Symbol">{-#</a> <a id="1676" class="Keyword">COMPILE</a> <a id="1684" class="Keyword">GHC</a> <a id="1688" href="Cost.Size.html#1048" class="Postulate">dataSize</a>  <a id="1698" class="Pragma">=</a> <a id="1700" class="Pragma">size</a> <a id="1705" class="Symbol">#-}</a>
<a id="1709" class="Symbol">{-#</a> <a id="1713" class="Keyword">COMPILE</a> <a id="1721" class="Keyword">GHC</a> <a id="1725" href="Cost.Size.html#1087" class="Postulate">boolSize</a> <a id="1734" class="Pragma">=</a> <a id="1736" class="Pragma">size</a> <a id="1741" class="Symbol">#-}</a>
<a id="1745" class="Symbol">{-#</a> <a id="1749" class="Keyword">COMPILE</a> <a id="1757" class="Keyword">GHC</a> <a id="1761" href="Cost.Size.html#1126" class="Postulate">unitSize</a> <a id="1770" class="Pragma">=</a> <a id="1772" class="Pragma">size</a> <a id="1777" class="Symbol">#-}</a>
<a id="1781" class="Symbol">{-#</a> <a id="1785" class="Keyword">COMPILE</a> <a id="1793" class="Keyword">GHC</a> <a id="1797" href="Cost.Size.html#1162" class="Postulate">stringSize</a>  <a id="1809" class="Pragma">=</a> <a id="1811" class="Pragma">size</a> <a id="1816" class="Symbol">#-}</a>
</pre>
<p>For each constant we return the corresponding size.
These <em>must</em> match the size functions defined in
<code class="language-plaintext highlighter-rouge">PlutusCore.Evaluation.Machine.ExMemoryUsage</code></p>
<pre class="Agda"><a id="defaultConstantMeasure"></a><a id="1976" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="1999" class="Symbol">:</a> <a id="2001" href="RawU.html#8012" class="Datatype">TmCon</a> <a id="2007" class="Symbol">→</a> <a id="2009" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="2020" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2043" class="Symbol">(</a><a id="2044" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2050" class="Symbol">(</a><a id="2051" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2058" href="Builtin.Constant.AtomicType.html#596" class="InductiveConstructor">aInteger</a><a id="2066" class="Symbol">)</a> <a id="2068" href="Cost.Size.html#2068" class="Bound">x</a><a id="2069" class="Symbol">)</a> <a id="2071" class="Symbol">=</a> <a id="2073" href="Cost.Size.html#756" class="Postulate">integerSize</a> <a id="2085" href="Cost.Size.html#2068" class="Bound">x</a>
<a id="2087" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2110" class="Symbol">(</a><a id="2111" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2117" class="Symbol">(</a><a id="2118" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2125" href="Builtin.Constant.AtomicType.html#634" class="InductiveConstructor">aBytestring</a><a id="2136" class="Symbol">)</a> <a id="2138" href="Cost.Size.html#2138" class="Bound">x</a><a id="2139" class="Symbol">)</a> <a id="2141" class="Symbol">=</a> <a id="2143" href="Cost.Size.html#795" class="Postulate">byteStringSize</a> <a id="2158" href="Cost.Size.html#2138" class="Bound">x</a>
<a id="2160" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2183" class="Symbol">(</a><a id="2184" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2190" class="Symbol">(</a><a id="2191" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2198" href="Builtin.Constant.AtomicType.html#672" class="InductiveConstructor">aString</a><a id="2205" class="Symbol">)</a> <a id="2207" href="Cost.Size.html#2207" class="Bound">x</a><a id="2208" class="Symbol">)</a> <a id="2210" class="Symbol">=</a> <a id="2212" href="Cost.Size.html#1162" class="Postulate">stringSize</a> <a id="2223" href="Cost.Size.html#2207" class="Bound">x</a>
<a id="2225" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2248" class="Symbol">(</a><a id="2249" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2255" class="Symbol">(</a><a id="2256" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2263" href="Builtin.Constant.AtomicType.html#710" class="InductiveConstructor">aUnit</a><a id="2268" class="Symbol">)</a> <a id="2270" href="Cost.Size.html#2270" class="Bound">x</a><a id="2271" class="Symbol">)</a> <a id="2273" class="Symbol">=</a> <a id="2275" href="Cost.Size.html#1126" class="Postulate">unitSize</a> <a id="2284" href="Cost.Size.html#2270" class="Bound">x</a>
<a id="2286" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2309" class="Symbol">(</a><a id="2310" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2316" class="Symbol">(</a><a id="2317" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2324" href="Builtin.Constant.AtomicType.html#748" class="InductiveConstructor">aBool</a><a id="2329" class="Symbol">)</a> <a id="2331" href="Cost.Size.html#2331" class="Bound">x</a><a id="2332" class="Symbol">)</a> <a id="2334" class="Symbol">=</a> <a id="2336" href="Cost.Size.html#1087" class="Postulate">boolSize</a> <a id="2345" href="Cost.Size.html#2331" class="Bound">x</a>
<a id="2347" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2370" class="Symbol">(</a><a id="2371" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2377" class="Symbol">(</a><a id="2378" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2385" href="Builtin.Constant.AtomicType.html#786" class="InductiveConstructor">aData</a><a id="2390" class="Symbol">)</a> <a id="2392" href="Cost.Size.html#2392" class="Bound">d</a><a id="2393" class="Symbol">)</a> <a id="2395" class="Symbol">=</a> <a id="2397" href="Cost.Size.html#1048" class="Postulate">dataSize</a> <a id="2406" href="Cost.Size.html#2392" class="Bound">d</a>
<a id="2408" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2431" class="Symbol">(</a><a id="2432" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2438" class="Symbol">(</a><a id="2439" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2446" href="Builtin.Constant.AtomicType.html#824" class="InductiveConstructor">aBls12-381-g1-element</a><a id="2467" class="Symbol">)</a> <a id="2469" href="Cost.Size.html#2469" class="Bound">x</a><a id="2470" class="Symbol">)</a> <a id="2472" class="Symbol">=</a> <a id="2474" href="Cost.Size.html#846" class="Postulate">g1ElementSize</a> <a id="2488" href="Cost.Size.html#2469" class="Bound">x</a>
<a id="2490" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2513" class="Symbol">(</a><a id="2514" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2520" class="Symbol">(</a><a id="2521" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2528" href="Builtin.Constant.AtomicType.html#862" class="InductiveConstructor">aBls12-381-g2-element</a><a id="2549" class="Symbol">)</a> <a id="2551" href="Cost.Size.html#2551" class="Bound">x</a><a id="2552" class="Symbol">)</a> <a id="2554" class="Symbol">=</a> <a id="2556" href="Cost.Size.html#912" class="Postulate">g2ElementSize</a> <a id="2570" href="Cost.Size.html#2551" class="Bound">x</a>
<a id="2572" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2595" class="Symbol">(</a><a id="2596" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2602" class="Symbol">(</a><a id="2603" href="Builtin.Signature.html#1941" class="InductiveConstructor">atomic</a> <a id="2610" href="Builtin.Constant.AtomicType.html#900" class="InductiveConstructor">aBls12-381-mlresult</a><a id="2629" class="Symbol">)</a> <a id="2631" href="Cost.Size.html#2631" class="Bound">x</a><a id="2632" class="Symbol">)</a> <a id="2634" class="Symbol">=</a> <a id="2636" href="Cost.Size.html#978" class="Postulate">mlResultElementSize</a> <a id="2656" href="Cost.Size.html#2631" class="Bound">x</a>
<a id="2658" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2681" class="Symbol">(</a><a id="2682" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2688" class="Symbol">(</a><a id="2689" href="Builtin.Signature.html#2070" class="InductiveConstructor">list</a> <a id="2694" href="Cost.Size.html#2694" class="Bound">t</a><a id="2695" class="Symbol">)</a> <a id="2697" href="Utils.html#5330" class="InductiveConstructor">[]</a><a id="2699" class="Symbol">)</a> <a id="2701" class="Symbol">=</a> <a id="2703" class="Number">1</a>
<a id="2705" href="Cost.Size.html#1976" class="CatchallClause Function">defaultConstantMeasure</a><a id="2727" class="CatchallClause"> </a><a id="2728" class="CatchallClause Symbol">(</a><a id="2729" href="RawU.html#8032" class="CatchallClause InductiveConstructor">tmCon</a><a id="2734" class="CatchallClause"> </a><a id="2735" class="CatchallClause Symbol">(</a><a id="2736" href="Builtin.Signature.html#2070" class="CatchallClause InductiveConstructor">list</a><a id="2740" class="CatchallClause"> </a><a id="2741" href="Cost.Size.html#2741" class="CatchallClause Bound">t</a><a id="2742" class="CatchallClause Symbol">)</a><a id="2743" class="CatchallClause"> </a><a id="2744" href="Cost.Size.html#2744" class="CatchallClause Bound">l</a><a id="2745" class="CatchallClause Symbol">)</a> <a id="2747" class="Symbol">=</a> <a id="2749" href="Utils.html#5372" class="Function">Utils.length</a> <a id="2762" href="Cost.Size.html#2744" class="Bound">l</a>
<a id="2764" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2787" class="Symbol">(</a><a id="2788" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2794" class="Symbol">(</a><a id="2795" href="Builtin.Signature.html#2130" class="InductiveConstructor">array</a> <a id="2801" href="Cost.Size.html#2801" class="Bound">t</a><a id="2802" class="Symbol">)</a> <a id="2804" href="Cost.Size.html#2804" class="Bound">a</a><a id="2805" class="Symbol">)</a> <a id="2807" class="Keyword">with</a> <a id="2812" href="Utils.html#6439" class="Postulate">Utils.HSlengthOfArray</a> <a id="2834" href="Cost.Size.html#2804" class="Bound">a</a>
<a id="2836" class="Symbol">...</a> <a id="2840" class="Symbol">|</a> <a id="2842" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">ℤ.pos</a> <a id="2848" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">ℕ.zero</a> <a id="2855" class="Symbol">=</a> <a id="2857" class="Number">1</a>
<a id="2859" class="Symbol">...</a> <a id="2863" class="Symbol">|</a> <a id="2865" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">ℤ.pos</a> <a id="2871" class="Symbol">(</a><a id="2872" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">ℕ.suc</a> <a id="2878" href="Cost.Size.html#2878" class="Bound">n</a><a id="2879" class="Symbol">)</a> <a id="2881" class="Symbol">=</a> <a id="2883" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">ℕ.suc</a> <a id="2889" href="Cost.Size.html#2878" class="Bound">n</a>
<a id="2891" class="Symbol">...</a> <a id="2895" class="Symbol">|</a> <a id="2897" href="Agda.Builtin.Int.html#290" class="InductiveConstructor">ℤ.negsuc</a> <a id="2906" href="Cost.Size.html#2906" class="Bound">n</a> <a id="2908" class="Symbol">=</a> <a id="2910" class="Number">1</a>
<a id="2912" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="2935" class="Symbol">(</a><a id="2936" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="2942" class="Symbol">(</a><a id="2943" href="Builtin.Signature.html#2191" class="InductiveConstructor">pair</a> <a id="2948" href="Cost.Size.html#2948" class="Bound">t</a> <a id="2950" href="Cost.Size.html#2950" class="Bound">u</a><a id="2951" class="Symbol">)</a> <a id="2953" class="Symbol">(</a><a id="2954" href="Cost.Size.html#2954" class="Bound">x</a> <a id="2956" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="2958" href="Cost.Size.html#2958" class="Bound">y</a><a id="2959" class="Symbol">))</a> <a id="2962" class="Symbol">=</a> <a id="2964" class="Number">1</a>

<a id="2967" class="Comment">-- This is the main sizing function for Values</a>
<a id="3014" class="Comment">-- It only measures constants. Other types should use models where the size</a>
<a id="3090" class="Comment">-- of the non-constant does not matter.</a>
<a id="defaultValueMeasure"></a><a id="3130" href="Cost.Size.html#3130" class="Function">defaultValueMeasure</a> <a id="3150" class="Symbol">:</a> <a id="3152" href="Untyped.CEK.html#1344" class="Datatype">Value</a> <a id="3158" class="Symbol">→</a> <a id="3160" href="Cost.Base.html#778" class="Function">CostingNat</a>
<a id="3171" href="Cost.Size.html#3130" class="Function">defaultValueMeasure</a> <a id="3191" class="Symbol">(</a><a id="3192" href="Untyped.CEK.html#1613" class="InductiveConstructor">V-con</a> <a id="3198" href="Cost.Size.html#3198" class="Bound">ty</a> <a id="3201" href="Cost.Size.html#3201" class="Bound">x</a><a id="3202" class="Symbol">)</a> <a id="3204" class="Symbol">=</a> <a id="3206" href="Cost.Size.html#1976" class="Function">defaultConstantMeasure</a> <a id="3229" class="Symbol">(</a><a id="3230" href="RawU.html#8032" class="InductiveConstructor">tmCon</a> <a id="3236" href="Cost.Size.html#3198" class="Bound">ty</a> <a id="3239" href="Cost.Size.html#3201" class="Bound">x</a><a id="3240" class="Symbol">)</a>
<a id="3242" href="Cost.Size.html#3130" class="CatchallClause Function">defaultValueMeasure</a><a id="3261" class="CatchallClause"> </a><a id="3262" class="CatchallClause Symbol">_</a> <a id="3264" class="Symbol">=</a> <a id="3266" class="Number">0</a>
</pre>

    </section>
  </body>
</html>