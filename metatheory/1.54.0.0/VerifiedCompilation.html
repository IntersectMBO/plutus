<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>VerifiedCompilation</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>VerifiedCompilation</h1>
    <section>
      <h1 id="verified-compilation">Verified Compilation</h1>

<h2 id="introduction">Introduction</h2>

<p>The verified compilation project is a formalization of the Untyped Plutus Core compiler optimisation transformations in Agda.
The goal is to generate a formal proof that the optimisation component of the compiler has transformed the input program correctly
with respect to the Agda specification (*). Our approach is based on Jacco Krijnen’s work on
<a href="https://www.sciencedirect.com/science/article/pii/S0167642323001338">Translation certification for smart contracts</a>.</p>

<p>(*) <strong>Note</strong>: The current implementation does not guarantee corectness in the sense of semantic equivalence between
the original and the optimised program. This is planned future work.</p>

<h2 id="implementation-overview">Implementation overview</h2>

<p>The project is divided into several Agda modules, each of which is based on an optimisation stage of the compiler.
They each contain the respective Agda formalisation of the program transformation and a decision procedure which takes
two programs as input and decides whether the transformation is applicable.</p>

<p>This module is at the top of the project hierarchy and contains the main decision procedure which verifies the entire optimisation
process. The final certification function receives a list of intermediate program ASTs produced by the compiler and outputs a file
containing the generated proof object, a.k.a. the <em>certificate</em>. The certificate can then be verified by third parties by loading
it into Agda and checking that it is correctly typed.</p>

<pre class="Agda"><a id="1536" class="Keyword">module</a> <a id="1543" href="VerifiedCompilation.html" class="Module">VerifiedCompilation</a> <a id="1563" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="1590" class="Keyword">open</a> <a id="1595" class="Keyword">import</a> <a id="1602" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1619" class="Keyword">using</a> <a id="1625" class="Symbol">(</a><a id="1626" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a><a id="1629" class="Symbol">;</a> <a id="1631" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a><a id="1634" class="Symbol">;</a> <a id="1636" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a><a id="1638" class="Symbol">;</a> <a id="1640" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬_</a><a id="1642" class="Symbol">)</a>

<a id="1645" class="Keyword">open</a> <a id="1650" class="Keyword">import</a> <a id="1657" href="Untyped.html" class="Module">Untyped</a>
<a id="1665" class="Keyword">open</a> <a id="1670" class="Keyword">import</a> <a id="1677" href="Utils.html" class="Module">Utils</a> <a id="1683" class="Symbol">as</a> <a id="1686" class="Module">U</a> <a id="1688" class="Keyword">using</a> <a id="1694" class="Symbol">(</a><a id="1695" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="1700" class="Symbol">;</a><a id="1701" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1708" class="Symbol">;</a><a id="1709" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="1713" class="Symbol">;</a><a id="1714" href="Utils.html#1133" class="Datatype">Either</a><a id="1720" class="Symbol">;</a><a id="1721" href="Utils.html#1166" class="InductiveConstructor">inj₁</a><a id="1725" class="Symbol">;</a><a id="1726" href="Utils.html#1190" class="InductiveConstructor">inj₂</a><a id="1730" class="Symbol">;</a><a id="1731" href="Utils.html#5301" class="Datatype">List</a><a id="1735" class="Symbol">;</a><a id="1736" href="Utils.html#5330" class="InductiveConstructor">[]</a><a id="1738" class="Symbol">;</a><a id="1739" href="Utils.html#5345" class="InductiveConstructor Operator">_∷_</a><a id="1742" class="Symbol">;</a><a id="1743" href="Utils.html#5063" class="Record Operator">_×_</a><a id="1746" class="Symbol">;</a><a id="1747" href="Utils.html#4009" class="InductiveConstructor Operator">_,_</a><a id="1750" class="Symbol">)</a>
<a id="1752" class="Keyword">open</a> <a id="1757" class="Keyword">import</a> <a id="1764" href="RawU.html" class="Module">RawU</a> <a id="1769" class="Keyword">using</a> <a id="1775" class="Symbol">(</a><a id="1776" href="RawU.html#8077" class="Datatype">Untyped</a><a id="1783" class="Symbol">)</a>
<a id="1785" class="Keyword">open</a> <a id="1790" class="Keyword">import</a> <a id="1797" href="Data.String.html" class="Module">Data.String</a> <a id="1809" class="Keyword">using</a> <a id="1815" class="Symbol">(</a><a id="1816" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="1822" class="Symbol">)</a>
<a id="1824" class="Keyword">open</a> <a id="1829" class="Keyword">import</a> <a id="1836" href="Agda.Builtin.IO.html" class="Module">Agda.Builtin.IO</a> <a id="1852" class="Keyword">using</a> <a id="1858" class="Symbol">(</a><a id="1859" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a><a id="1861" class="Symbol">)</a>
<a id="1863" class="Keyword">open</a> <a id="1868" class="Keyword">import</a> <a id="1875" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="1893" class="Keyword">using</a> <a id="1899" class="Symbol">(</a><a id="1900" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="1901" class="Symbol">)</a>
<a id="1903" class="Keyword">import</a> <a id="1910" href="VerifiedCompilation.UCaseOfCase.html" class="Module">VerifiedCompilation.UCaseOfCase</a> <a id="1942" class="Symbol">as</a> <a id="1945" class="Module">UCC</a>
<a id="1949" class="Keyword">import</a> <a id="1956" href="VerifiedCompilation.UForceDelay.html" class="Module">VerifiedCompilation.UForceDelay</a> <a id="1988" class="Symbol">as</a> <a id="1991" class="Module">UFD</a>
<a id="1995" class="Keyword">import</a> <a id="2002" href="VerifiedCompilation.UFloatDelay.html" class="Module">VerifiedCompilation.UFloatDelay</a> <a id="2034" class="Symbol">as</a> <a id="2037" class="Module">UFlD</a>
<a id="2042" class="Keyword">import</a> <a id="2049" href="VerifiedCompilation.UCSE.html" class="Module">VerifiedCompilation.UCSE</a> <a id="2074" class="Symbol">as</a> <a id="2077" class="Module">UCSE</a>
<a id="2082" class="Keyword">import</a> <a id="2089" href="VerifiedCompilation.UInline.html" class="Module">VerifiedCompilation.UInline</a> <a id="2117" class="Symbol">as</a> <a id="2120" class="Module">UInline</a>
<a id="2128" class="Keyword">import</a> <a id="2135" href="VerifiedCompilation.UCaseReduce.html" class="Module">VerifiedCompilation.UCaseReduce</a> <a id="2167" class="Symbol">as</a> <a id="2170" class="Module">UCR</a>
<a id="2174" class="Keyword">open</a> <a id="2179" class="Keyword">import</a> <a id="2186" href="Data.Empty.html" class="Module">Data.Empty</a> <a id="2197" class="Keyword">using</a> <a id="2203" class="Symbol">(</a><a id="2204" href="Data.Empty.html#914" class="Function">⊥</a><a id="2205" class="Symbol">)</a>
<a id="2207" class="Keyword">open</a> <a id="2212" class="Keyword">import</a> <a id="2219" href="Untyped.Equality.html" class="Module">Untyped.Equality</a> <a id="2236" class="Keyword">using</a> <a id="2242" class="Symbol">(</a><a id="2243" href="Untyped.Equality.html#2068" class="Record">DecEq</a><a id="2248" class="Symbol">)</a>
<a id="2250" class="Keyword">open</a> <a id="2255" class="Keyword">import</a> <a id="2262" href="VerifiedCompilation.UntypedTranslation.html" class="Module">VerifiedCompilation.UntypedTranslation</a> <a id="2301" class="Keyword">using</a> <a id="2307" class="Symbol">(</a><a id="2308" href="VerifiedCompilation.UntypedTranslation.html#1565" class="Function">Relation</a><a id="2316" class="Symbol">)</a>
<a id="2318" class="Keyword">import</a> <a id="2325" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="2340" class="Symbol">as</a> <a id="2343" class="Module">Unary</a> <a id="2349" class="Keyword">using</a> <a id="2355" class="Symbol">(</a><a id="2356" href="Relation.Unary.html#4543" class="Function">Decidable</a><a id="2365" class="Symbol">)</a>
<a id="2367" class="Keyword">import</a> <a id="2374" href="Agda.Builtin.Int.html" class="Module">Agda.Builtin.Int</a>
<a id="2391" class="Keyword">import</a> <a id="2398" href="Relation.Nary.html" class="Module">Relation.Nary</a> <a id="2412" class="Symbol">as</a> <a id="2415" class="Module">Nary</a> <a id="2420" class="Keyword">using</a> <a id="2426" class="Symbol">(</a><a id="2427" href="Relation.Nary.html#6405" class="Function">Decidable</a><a id="2436" class="Symbol">)</a>
<a id="2438" class="Keyword">open</a> <a id="2443" class="Keyword">import</a> <a id="2450" href="VerifiedCompilation.Certificate.html" class="Module">VerifiedCompilation.Certificate</a> <a id="2482" class="Keyword">using</a> <a id="2488" class="Symbol">(</a><a id="2489" href="VerifiedCompilation.Certificate.html#1112" class="Datatype">ProofOrCE</a><a id="2498" class="Symbol">;</a> <a id="2500" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a><a id="2502" class="Symbol">;</a> <a id="2504" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a><a id="2509" class="Symbol">;</a> <a id="2511" href="VerifiedCompilation.Certificate.html#1874" class="Function">pcePointwise</a><a id="2523" class="Symbol">;</a> <a id="2525" href="VerifiedCompilation.Certificate.html#1544" class="Function">MatchOrCE</a><a id="2534" class="Symbol">;</a> <a id="2536" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="2549" class="Symbol">)</a>
<a id="2551" class="Keyword">open</a> <a id="2556" class="Keyword">import</a> <a id="2563" href="Agda.Builtin.Sigma.html" class="Module">Agda.Builtin.Sigma</a> <a id="2582" class="Keyword">using</a> <a id="2588" class="Symbol">(</a><a id="2589" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="2590" class="Symbol">;</a> <a id="2592" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="2595" class="Symbol">)</a>
</pre>
<h2 id="compiler-optimisation-traces">Compiler optimisation traces</h2>

<p>A <code class="language-plaintext highlighter-rouge">Trace</code> represents a sequence of optimisation transformations applied to a program. It is a list of pairs of ASTs
and a tag (<code class="language-plaintext highlighter-rouge">SimplifierTag</code>), where each pair represents the before and after of a transformation application and the
tag indicates which transformation was applied.
The <code class="language-plaintext highlighter-rouge">Transformation</code> type is a sum type that represents the possible transformations which are implemented in their
respective modules.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTrace?</code> decision procedure is at the core of the certification process. It produces the proof that the given
list of ASTs are in relation with one another according to the transformations implemented in the project.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTransformation?</code> decision procedure just dispatches to the decision procedure indicated by the tag.</p>

<p><strong>TODO</strong>: The <code class="language-plaintext highlighter-rouge">Trace</code> type or decision procedure should also enforce that the second element of a pair is the first
element of the next pair in the list. This might not be necessary if we decide that we can assume that the function
which produces a <code class="language-plaintext highlighter-rouge">Trace</code> always produces a correct one, although it might be useful to make this explicit in the type.</p>
<pre class="Agda">
<a id="3741" class="Keyword">data</a> <a id="Transformation"></a><a id="3746" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="3761" class="Symbol">:</a> <a id="3763" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="3777" class="Symbol">→</a> <a id="3779" href="VerifiedCompilation.UntypedTranslation.html#1565" class="Function">Relation</a> <a id="3788" class="Keyword">where</a>
  <a id="Transformation.isCoC"></a><a id="3796" href="VerifiedCompilation.html#3796" class="InductiveConstructor">isCoC</a> <a id="3802" class="Symbol">:</a> <a id="3804" class="Symbol">{</a><a id="3805" href="VerifiedCompilation.html#3805" class="Bound">X</a> <a id="3807" class="Symbol">:</a> <a id="3809" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3812" class="Symbol">}</a> <a id="3829" class="Symbol">→</a> <a id="3831" class="Symbol">{</a><a id="3832" href="VerifiedCompilation.html#3832" class="Bound">ast</a> <a id="3836" href="VerifiedCompilation.html#3836" class="Bound">ast&#39;</a> <a id="3841" class="Symbol">:</a> <a id="3843" href="VerifiedCompilation.html#3805" class="Bound">X</a> <a id="3845" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="3846" class="Symbol">}</a> <a id="3848" class="Symbol">→</a> <a id="3850" href="VerifiedCompilation.UCaseOfCase.html#2366" class="Function">UCC.CaseOfCase</a> <a id="3865" href="VerifiedCompilation.html#3832" class="Bound">ast</a> <a id="3869" href="VerifiedCompilation.html#3836" class="Bound">ast&#39;</a> <a id="3874" class="Symbol">→</a> <a id="3876" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="3891" href="VerifiedCompilation.Certificate.html#767" class="InductiveConstructor">SimplifierTag.caseOfCaseT</a> <a id="3917" href="VerifiedCompilation.html#3832" class="Bound">ast</a> <a id="3921" href="VerifiedCompilation.html#3836" class="Bound">ast&#39;</a>
  <a id="Transformation.isFD"></a><a id="3928" href="VerifiedCompilation.html#3928" class="InductiveConstructor">isFD</a> <a id="3933" class="Symbol">:</a> <a id="3935" class="Symbol">{</a><a id="3936" href="VerifiedCompilation.html#3936" class="Bound">X</a> <a id="3938" class="Symbol">:</a> <a id="3940" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3943" class="Symbol">}</a> <a id="3960" class="Symbol">→</a> <a id="3962" class="Symbol">{</a><a id="3963" href="VerifiedCompilation.html#3963" class="Bound">ast</a> <a id="3967" href="VerifiedCompilation.html#3967" class="Bound">ast&#39;</a> <a id="3972" class="Symbol">:</a> <a id="3974" href="VerifiedCompilation.html#3936" class="Bound">X</a> <a id="3976" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="3977" class="Symbol">}</a> <a id="3979" class="Symbol">→</a> <a id="3981" href="VerifiedCompilation.UForceDelay.html#7280" class="Function">UFD.ForceDelay</a> <a id="3996" href="VerifiedCompilation.html#3963" class="Bound">ast</a> <a id="4000" href="VerifiedCompilation.html#3967" class="Bound">ast&#39;</a> <a id="4005" class="Symbol">→</a> <a id="4007" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="4022" href="VerifiedCompilation.Certificate.html#703" class="InductiveConstructor">SimplifierTag.forceDelayT</a> <a id="4048" href="VerifiedCompilation.html#3963" class="Bound">ast</a> <a id="4052" href="VerifiedCompilation.html#3967" class="Bound">ast&#39;</a>
  <a id="Transformation.isFlD"></a><a id="4059" href="VerifiedCompilation.html#4059" class="InductiveConstructor">isFlD</a> <a id="4065" class="Symbol">:</a> <a id="4067" class="Symbol">{</a><a id="4068" href="VerifiedCompilation.html#4068" class="Bound">X</a> <a id="4070" class="Symbol">:</a> <a id="4072" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4075" class="Symbol">}</a> <a id="4092" class="Symbol">→</a> <a id="4094" class="Symbol">{</a><a id="4095" href="VerifiedCompilation.html#4095" class="Bound">ast</a> <a id="4099" href="VerifiedCompilation.html#4099" class="Bound">ast&#39;</a> <a id="4104" class="Symbol">:</a> <a id="4106" href="VerifiedCompilation.html#4068" class="Bound">X</a> <a id="4108" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4109" class="Symbol">}</a> <a id="4111" class="Symbol">→</a> <a id="4113" href="VerifiedCompilation.UFloatDelay.html#6071" class="Function">UFlD.FloatDelay</a> <a id="4129" href="VerifiedCompilation.html#4095" class="Bound">ast</a> <a id="4133" href="VerifiedCompilation.html#4099" class="Bound">ast&#39;</a> <a id="4138" class="Symbol">→</a> <a id="4140" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="4155" href="VerifiedCompilation.Certificate.html#673" class="InductiveConstructor">SimplifierTag.floatDelayT</a> <a id="4181" href="VerifiedCompilation.html#4095" class="Bound">ast</a> <a id="4185" href="VerifiedCompilation.html#4099" class="Bound">ast&#39;</a>
  <a id="Transformation.isCSE"></a><a id="4192" href="VerifiedCompilation.html#4192" class="InductiveConstructor">isCSE</a> <a id="4198" class="Symbol">:</a> <a id="4200" class="Symbol">{</a><a id="4201" href="VerifiedCompilation.html#4201" class="Bound">X</a> <a id="4203" class="Symbol">:</a> <a id="4205" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4208" class="Symbol">}</a> <a id="4225" class="Symbol">→</a> <a id="4227" class="Symbol">{</a><a id="4228" href="VerifiedCompilation.html#4228" class="Bound">ast</a> <a id="4232" href="VerifiedCompilation.html#4232" class="Bound">ast&#39;</a> <a id="4237" class="Symbol">:</a> <a id="4239" href="VerifiedCompilation.html#4201" class="Bound">X</a> <a id="4241" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4242" class="Symbol">}</a> <a id="4244" class="Symbol">→</a> <a id="4246" href="VerifiedCompilation.UCSE.html#1885" class="Function">UCSE.UntypedCSE</a> <a id="4262" href="VerifiedCompilation.html#4228" class="Bound">ast</a> <a id="4266" href="VerifiedCompilation.html#4232" class="Bound">ast&#39;</a> <a id="4271" class="Symbol">→</a> <a id="4273" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="4288" href="VerifiedCompilation.Certificate.html#853" class="InductiveConstructor">SimplifierTag.cseT</a> <a id="4307" href="VerifiedCompilation.html#4228" class="Bound">ast</a> <a id="4311" href="VerifiedCompilation.html#4232" class="Bound">ast&#39;</a>
  <a id="4318" class="Comment">-- FIXME: Inline currently rejects some valid translations so is disabled.</a>
  <a id="Transformation.inlineNotImplemented"></a><a id="4395" href="VerifiedCompilation.html#4395" class="InductiveConstructor">inlineNotImplemented</a> <a id="4416" class="Symbol">:</a> <a id="4418" class="Symbol">{</a><a id="4419" href="VerifiedCompilation.html#4419" class="Bound">X</a> <a id="4421" class="Symbol">:</a> <a id="4423" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4426" class="Symbol">}</a> <a id="4443" class="Symbol">→</a> <a id="4445" class="Symbol">{</a><a id="4446" href="VerifiedCompilation.html#4446" class="Bound">ast</a> <a id="4450" href="VerifiedCompilation.html#4450" class="Bound">ast&#39;</a> <a id="4455" class="Symbol">:</a> <a id="4457" href="VerifiedCompilation.html#4419" class="Bound">X</a> <a id="4459" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4460" class="Symbol">}</a> <a id="4462" class="Symbol">→</a> <a id="4464" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="4479" href="VerifiedCompilation.Certificate.html#827" class="InductiveConstructor">SimplifierTag.inlineT</a> <a id="4501" href="VerifiedCompilation.html#4446" class="Bound">ast</a> <a id="4505" href="VerifiedCompilation.html#4450" class="Bound">ast&#39;</a>
  <a id="Transformation.isCaseReduce"></a><a id="4512" href="VerifiedCompilation.html#4512" class="InductiveConstructor">isCaseReduce</a> <a id="4525" class="Symbol">:</a> <a id="4527" class="Symbol">{</a><a id="4528" href="VerifiedCompilation.html#4528" class="Bound">X</a> <a id="4530" class="Symbol">:</a> <a id="4532" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4535" class="Symbol">}</a> <a id="4552" class="Symbol">→</a> <a id="4554" class="Symbol">{</a><a id="4555" href="VerifiedCompilation.html#4555" class="Bound">ast</a> <a id="4559" href="VerifiedCompilation.html#4559" class="Bound">ast&#39;</a> <a id="4564" class="Symbol">:</a> <a id="4566" href="VerifiedCompilation.html#4528" class="Bound">X</a> <a id="4568" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4569" class="Symbol">}</a> <a id="4571" class="Symbol">→</a> <a id="4573" href="VerifiedCompilation.UCaseReduce.html#2992" class="Function">UCR.UCaseReduce</a> <a id="4589" href="VerifiedCompilation.html#4555" class="Bound">ast</a> <a id="4593" href="VerifiedCompilation.html#4559" class="Bound">ast&#39;</a> <a id="4598" class="Symbol">→</a> <a id="4600" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="4615" href="VerifiedCompilation.Certificate.html#797" class="InductiveConstructor">SimplifierTag.caseReduceT</a> <a id="4641" href="VerifiedCompilation.html#4555" class="Bound">ast</a> <a id="4645" href="VerifiedCompilation.html#4559" class="Bound">ast&#39;</a>
  <a id="Transformation.forceCaseDelayNotImplemented"></a><a id="4652" href="VerifiedCompilation.html#4652" class="InductiveConstructor">forceCaseDelayNotImplemented</a> <a id="4681" class="Symbol">:</a> <a id="4683" class="Symbol">{</a><a id="4684" href="VerifiedCompilation.html#4684" class="Bound">X</a> <a id="4686" class="Symbol">:</a> <a id="4688" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4691" class="Symbol">}</a> <a id="4708" class="Symbol">→</a> <a id="4710" class="Symbol">{</a><a id="4711" href="VerifiedCompilation.html#4711" class="Bound">ast</a> <a id="4715" href="VerifiedCompilation.html#4715" class="Bound">ast&#39;</a> <a id="4720" class="Symbol">:</a> <a id="4722" href="VerifiedCompilation.html#4684" class="Bound">X</a> <a id="4724" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4725" class="Symbol">}</a> <a id="4727" class="Symbol">→</a> <a id="4729" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="4744" href="VerifiedCompilation.Certificate.html#733" class="InductiveConstructor">SimplifierTag.forceCaseDelayT</a> <a id="4774" href="VerifiedCompilation.html#4711" class="Bound">ast</a> <a id="4778" href="VerifiedCompilation.html#4715" class="Bound">ast&#39;</a>

<a id="4784" class="Keyword">data</a> <a id="Trace"></a><a id="4789" href="VerifiedCompilation.html#4789" class="Datatype">Trace</a> <a id="4795" class="Symbol">:</a> <a id="4797" class="Symbol">{</a> <a id="4799" href="VerifiedCompilation.html#4799" class="Bound">X</a> <a id="4801" class="Symbol">:</a> <a id="4803" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="4807" class="Symbol">}</a> <a id="4809" class="Symbol"></a> <a id="4825" class="Symbol">→</a> <a id="4827" href="Utils.html#5301" class="Datatype">List</a> <a id="4832" class="Symbol">(</a><a id="4833" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="4847" href="Utils.html#5063" class="Record Operator">×</a> <a id="4849" class="Symbol">(</a><a id="4850" href="VerifiedCompilation.html#4799" class="Bound">X</a> <a id="4852" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4853" class="Symbol">)</a> <a id="4855" href="Utils.html#5063" class="Record Operator">×</a> <a id="4857" class="Symbol">(</a><a id="4858" href="VerifiedCompilation.html#4799" class="Bound">X</a> <a id="4860" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4861" class="Symbol">))</a> <a id="4864" class="Symbol">→</a> <a id="4866" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="4871" class="Keyword">where</a>
  <a id="Trace.empty"></a><a id="4879" href="VerifiedCompilation.html#4879" class="InductiveConstructor">empty</a> <a id="4885" class="Symbol">:</a> <a id="4887" class="Symbol">{</a><a id="4888" href="VerifiedCompilation.html#4888" class="Bound">X</a> <a id="4890" class="Symbol">:</a> <a id="4892" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4895" class="Symbol">}</a> <a id="4912" class="Symbol">→</a> <a id="4914" href="VerifiedCompilation.html#4789" class="Datatype">Trace</a> <a id="4920" class="Symbol">{</a><a id="4921" href="VerifiedCompilation.html#4888" class="Bound">X</a><a id="4922" class="Symbol">}</a> <a id="4924" href="Utils.html#5330" class="InductiveConstructor">[]</a>
  <a id="Trace.cons"></a><a id="4929" href="VerifiedCompilation.html#4929" class="InductiveConstructor">cons</a>
    <a id="4938" class="Symbol">:</a> <a id="4940" class="Symbol">{</a><a id="4941" href="VerifiedCompilation.html#4941" class="Bound">X</a> <a id="4943" class="Symbol">:</a> <a id="4945" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4948" class="Symbol">}</a>
    <a id="4969" class="Symbol">{</a><a id="4970" href="VerifiedCompilation.html#4970" class="Bound">tag</a> <a id="4974" class="Symbol">:</a> <a id="4976" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="4989" class="Symbol">}</a> <a id="4991" class="Symbol">{</a><a id="4992" href="VerifiedCompilation.html#4992" class="Bound">x</a> <a id="4994" href="VerifiedCompilation.html#4994" class="Bound">x&#39;</a> <a id="4997" class="Symbol">:</a> <a id="4999" href="VerifiedCompilation.html#4941" class="Bound">X</a> <a id="5001" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="5002" class="Symbol">}</a>
    <a id="5008" class="Symbol">{</a><a id="5009" href="VerifiedCompilation.html#5009" class="Bound">xs</a> <a id="5012" class="Symbol">:</a> <a id="5014" href="Utils.html#5301" class="Datatype">List</a> <a id="5019" class="Symbol">(</a><a id="5020" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="5034" href="Utils.html#5063" class="Record Operator">×</a> <a id="5036" class="Symbol">(</a><a id="5037" href="VerifiedCompilation.html#4941" class="Bound">X</a> <a id="5039" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="5040" class="Symbol">)</a> <a id="5042" href="Utils.html#5063" class="Record Operator">×</a> <a id="5044" class="Symbol">(</a><a id="5045" href="VerifiedCompilation.html#4941" class="Bound">X</a> <a id="5047" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="5048" class="Symbol">))}</a>
    <a id="5056" class="Symbol">→</a> <a id="5058" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="5073" href="VerifiedCompilation.html#4970" class="Bound">tag</a> <a id="5077" href="VerifiedCompilation.html#4992" class="Bound">x</a> <a id="5079" href="VerifiedCompilation.html#4994" class="Bound">x&#39;</a>
    <a id="5086" class="Symbol">→</a> <a id="5088" href="VerifiedCompilation.html#4789" class="Datatype">Trace</a> <a id="5094" href="VerifiedCompilation.html#5009" class="Bound">xs</a>
    <a id="5101" class="Symbol">→</a> <a id="5103" href="VerifiedCompilation.html#4789" class="Datatype">Trace</a> <a id="5109" class="Symbol">((</a><a id="5111" href="VerifiedCompilation.html#4970" class="Bound">tag</a> <a id="5115" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="5117" href="VerifiedCompilation.html#4992" class="Bound">x</a> <a id="5119" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="5121" href="VerifiedCompilation.html#4994" class="Bound">x&#39;</a><a id="5123" class="Symbol">)</a> <a id="5125" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="5127" href="VerifiedCompilation.html#5009" class="Bound">xs</a><a id="5129" class="Symbol">)</a>

<a id="isTransformation?"></a><a id="5132" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="5150" class="Symbol">:</a> <a id="5152" class="Symbol">{</a><a id="5153" href="VerifiedCompilation.html#5153" class="Bound">X</a> <a id="5155" class="Symbol">:</a> <a id="5157" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="5160" class="Symbol">}</a> <a id="5162" class="Symbol"></a> <a id="5178" class="Symbol">→</a> <a id="5180" class="Symbol">(</a><a id="5181" href="VerifiedCompilation.html#5181" class="Bound">tag</a> <a id="5185" class="Symbol">:</a> <a id="5187" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="5200" class="Symbol">)</a> <a id="5202" class="Symbol">→</a> <a id="5204" href="VerifiedCompilation.Certificate.html#1544" class="Function">MatchOrCE</a> <a id="5214" class="Symbol">{</a><a id="5215" class="Argument">X</a> <a id="5217" class="Symbol">=</a> <a id="5219" href="VerifiedCompilation.html#5153" class="Bound">X</a> <a id="5221" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="5222" class="Symbol">}</a> <a id="5224" class="Symbol">(</a><a id="5225" href="VerifiedCompilation.html#3746" class="Datatype">Transformation</a> <a id="5240" href="VerifiedCompilation.html#5181" class="Bound">tag</a><a id="5243" class="Symbol">)</a>
<a id="5245" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="5263" href="VerifiedCompilation.html#5263" class="Bound">tag</a> <a id="5267" href="VerifiedCompilation.html#5267" class="Bound">ast</a> <a id="5271" href="VerifiedCompilation.html#5271" class="Bound">ast&#39;</a> <a id="5276" class="Keyword">with</a> <a id="5281" href="VerifiedCompilation.html#5263" class="Bound">tag</a>
<a id="5285" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="5303" href="VerifiedCompilation.html#5303" class="Bound">tag</a> <a id="5307" href="VerifiedCompilation.html#5307" class="Bound">ast</a> <a id="5311" href="VerifiedCompilation.html#5311" class="Bound">ast&#39;</a> <a id="5316" class="Symbol">|</a> <a id="5318" href="VerifiedCompilation.Certificate.html#673" class="InductiveConstructor">SimplifierTag.floatDelayT</a> <a id="5344" class="Keyword">with</a> <a id="5349" href="VerifiedCompilation.UFloatDelay.html#6207" class="Function">UFlD.isFloatDelay?</a> <a id="5368" href="VerifiedCompilation.html#5307" class="Bound">ast</a> <a id="5372" href="VerifiedCompilation.html#5311" class="Bound">ast&#39;</a>
<a id="5377" class="Symbol">...</a> <a id="5381" class="Symbol">|</a> <a id="5383" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5386" href="VerifiedCompilation.html#5386" class="Bound">¬p</a> <a id="5389" href="VerifiedCompilation.html#5389" class="Bound">t</a> <a id="5391" href="VerifiedCompilation.html#5391" class="Bound">b</a> <a id="5393" href="VerifiedCompilation.html#5393" class="Bound">a</a> <a id="5395" class="Symbol">=</a> <a id="5397" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5400" class="Symbol">(λ</a> <a id="5403" class="Symbol">{</a> <a id="5405" class="Symbol">(</a><a id="5406" href="VerifiedCompilation.html#4059" class="InductiveConstructor">isFlD</a> <a id="5412" href="VerifiedCompilation.html#5412" class="Bound">x</a><a id="5413" class="Symbol">)</a> <a id="5415" class="Symbol">→</a> <a id="5417" href="VerifiedCompilation.html#5386" class="Bound">¬p</a> <a id="5420" href="VerifiedCompilation.html#5412" class="Bound">x</a><a id="5421" class="Symbol">})</a> <a id="5424" href="VerifiedCompilation.html#5389" class="Bound">t</a> <a id="5426" href="VerifiedCompilation.html#5391" class="Bound">b</a> <a id="5428" href="VerifiedCompilation.html#5393" class="Bound">a</a>
<a id="5430" class="Symbol">...</a> <a id="5434" class="Symbol">|</a> <a id="5436" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5442" href="VerifiedCompilation.html#5442" class="Bound">p</a> <a id="5444" class="Symbol">=</a> <a id="5446" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5452" class="Symbol">(</a><a id="5453" href="VerifiedCompilation.html#4059" class="InductiveConstructor">isFlD</a> <a id="5459" href="VerifiedCompilation.html#5442" class="Bound">p</a><a id="5460" class="Symbol">)</a>
<a id="5462" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="5480" href="VerifiedCompilation.html#5480" class="Bound">tag</a> <a id="5484" href="VerifiedCompilation.html#5484" class="Bound">ast</a> <a id="5488" href="VerifiedCompilation.html#5488" class="Bound">ast&#39;</a> <a id="5493" class="Symbol">|</a> <a id="5495" href="VerifiedCompilation.Certificate.html#703" class="InductiveConstructor">SimplifierTag.forceDelayT</a> <a id="5521" class="Keyword">with</a> <a id="5526" href="VerifiedCompilation.UForceDelay.html#10897" class="Function">UFD.isForceDelay?</a> <a id="5544" href="VerifiedCompilation.html#5484" class="Bound">ast</a> <a id="5548" href="VerifiedCompilation.html#5488" class="Bound">ast&#39;</a>
<a id="5553" class="Symbol">...</a> <a id="5557" class="Symbol">|</a> <a id="5559" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5562" href="VerifiedCompilation.html#5562" class="Bound">¬p</a> <a id="5565" href="VerifiedCompilation.html#5565" class="Bound">t</a> <a id="5567" href="VerifiedCompilation.html#5567" class="Bound">b</a> <a id="5569" href="VerifiedCompilation.html#5569" class="Bound">a</a> <a id="5571" class="Symbol">=</a> <a id="5573" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5576" class="Symbol">(λ</a> <a id="5579" class="Symbol">{</a> <a id="5581" class="Symbol">(</a><a id="5582" href="VerifiedCompilation.html#3928" class="InductiveConstructor">isFD</a> <a id="5587" href="VerifiedCompilation.html#5587" class="Bound">x</a><a id="5588" class="Symbol">)</a> <a id="5590" class="Symbol">→</a> <a id="5592" href="VerifiedCompilation.html#5562" class="Bound">¬p</a> <a id="5595" href="VerifiedCompilation.html#5587" class="Bound">x</a><a id="5596" class="Symbol">})</a> <a id="5599" href="VerifiedCompilation.html#5565" class="Bound">t</a> <a id="5601" href="VerifiedCompilation.html#5567" class="Bound">b</a> <a id="5603" href="VerifiedCompilation.html#5569" class="Bound">a</a>
<a id="5605" class="Symbol">...</a> <a id="5609" class="Symbol">|</a> <a id="5611" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5617" href="VerifiedCompilation.html#5617" class="Bound">p</a> <a id="5619" class="Symbol">=</a> <a id="5621" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5627" class="Symbol">(</a><a id="5628" href="VerifiedCompilation.html#3928" class="InductiveConstructor">isFD</a> <a id="5633" href="VerifiedCompilation.html#5617" class="Bound">p</a><a id="5634" class="Symbol">)</a>
<a id="5636" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="5654" href="VerifiedCompilation.html#5654" class="Bound">tag</a> <a id="5658" href="VerifiedCompilation.html#5658" class="Bound">ast</a> <a id="5662" href="VerifiedCompilation.html#5662" class="Bound">ast&#39;</a> <a id="5667" class="Symbol">|</a> <a id="5669" href="VerifiedCompilation.Certificate.html#733" class="InductiveConstructor">SimplifierTag.forceCaseDelayT</a> <a id="5699" class="Symbol">=</a> <a id="5701" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5707" href="VerifiedCompilation.html#4652" class="InductiveConstructor">forceCaseDelayNotImplemented</a>
<a id="5736" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="5754" href="VerifiedCompilation.html#5754" class="Bound">tag</a> <a id="5758" href="VerifiedCompilation.html#5758" class="Bound">ast</a> <a id="5762" href="VerifiedCompilation.html#5762" class="Bound">ast&#39;</a> <a id="5767" class="Symbol">|</a> <a id="5769" href="VerifiedCompilation.Certificate.html#767" class="InductiveConstructor">SimplifierTag.caseOfCaseT</a> <a id="5795" class="Keyword">with</a> <a id="5800" href="VerifiedCompilation.UCaseOfCase.html#6187" class="Function">UCC.isCaseOfCase?</a> <a id="5818" href="VerifiedCompilation.html#5758" class="Bound">ast</a> <a id="5822" href="VerifiedCompilation.html#5762" class="Bound">ast&#39;</a>
<a id="5827" class="Symbol">...</a> <a id="5831" class="Symbol">|</a> <a id="5833" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5836" href="VerifiedCompilation.html#5836" class="Bound">¬p</a> <a id="5839" href="VerifiedCompilation.html#5839" class="Bound">t</a> <a id="5841" href="VerifiedCompilation.html#5841" class="Bound">b</a> <a id="5843" href="VerifiedCompilation.html#5843" class="Bound">a</a> <a id="5845" class="Symbol">=</a> <a id="5847" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5850" class="Symbol">(λ</a> <a id="5853" class="Symbol">{</a> <a id="5855" class="Symbol">(</a><a id="5856" href="VerifiedCompilation.html#3796" class="InductiveConstructor">isCoC</a> <a id="5862" href="VerifiedCompilation.html#5862" class="Bound">x</a><a id="5863" class="Symbol">)</a> <a id="5865" class="Symbol">→</a> <a id="5867" href="VerifiedCompilation.html#5836" class="Bound">¬p</a> <a id="5870" href="VerifiedCompilation.html#5862" class="Bound">x</a><a id="5871" class="Symbol">})</a> <a id="5874" href="VerifiedCompilation.html#5839" class="Bound">t</a> <a id="5876" href="VerifiedCompilation.html#5841" class="Bound">b</a> <a id="5878" href="VerifiedCompilation.html#5843" class="Bound">a</a>
<a id="5880" class="Symbol">...</a> <a id="5884" class="Symbol">|</a> <a id="5886" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5892" href="VerifiedCompilation.html#5892" class="Bound">p</a> <a id="5894" class="Symbol">=</a> <a id="5896" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5902" class="Symbol">(</a><a id="5903" href="VerifiedCompilation.html#3796" class="InductiveConstructor">isCoC</a> <a id="5909" href="VerifiedCompilation.html#5892" class="Bound">p</a><a id="5910" class="Symbol">)</a>
<a id="5912" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="5930" href="VerifiedCompilation.html#5930" class="Bound">tag</a> <a id="5934" href="VerifiedCompilation.html#5934" class="Bound">ast</a> <a id="5938" href="VerifiedCompilation.html#5938" class="Bound">ast&#39;</a> <a id="5943" class="Symbol">|</a> <a id="5945" href="VerifiedCompilation.Certificate.html#797" class="InductiveConstructor">SimplifierTag.caseReduceT</a> <a id="5971" class="Keyword">with</a> <a id="5976" href="VerifiedCompilation.UCaseReduce.html#1984" class="Function">UCR.isCaseReduce?</a> <a id="5994" href="VerifiedCompilation.html#5934" class="Bound">ast</a> <a id="5998" href="VerifiedCompilation.html#5938" class="Bound">ast&#39;</a>
<a id="6003" class="Symbol">...</a> <a id="6007" class="Symbol">|</a> <a id="6009" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6012" href="VerifiedCompilation.html#6012" class="Bound">¬p</a> <a id="6015" href="VerifiedCompilation.html#6015" class="Bound">t</a> <a id="6017" href="VerifiedCompilation.html#6017" class="Bound">b</a> <a id="6019" href="VerifiedCompilation.html#6019" class="Bound">a</a> <a id="6021" class="Symbol">=</a> <a id="6023" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6026" class="Symbol">(λ</a> <a id="6029" class="Symbol">{</a> <a id="6031" class="Symbol">(</a><a id="6032" href="VerifiedCompilation.html#4512" class="InductiveConstructor">isCaseReduce</a> <a id="6045" href="VerifiedCompilation.html#6045" class="Bound">x</a><a id="6046" class="Symbol">)</a> <a id="6048" class="Symbol">→</a> <a id="6050" href="VerifiedCompilation.html#6012" class="Bound">¬p</a> <a id="6053" href="VerifiedCompilation.html#6045" class="Bound">x</a><a id="6054" class="Symbol">})</a> <a id="6057" href="VerifiedCompilation.html#6015" class="Bound">t</a> <a id="6059" href="VerifiedCompilation.html#6017" class="Bound">b</a> <a id="6061" href="VerifiedCompilation.html#6019" class="Bound">a</a>
<a id="6063" class="Symbol">...</a> <a id="6067" class="Symbol">|</a> <a id="6069" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6075" href="VerifiedCompilation.html#6075" class="Bound">p</a> <a id="6077" class="Symbol">=</a> <a id="6079" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6085" class="Symbol">(</a><a id="6086" href="VerifiedCompilation.html#4512" class="InductiveConstructor">isCaseReduce</a> <a id="6099" href="VerifiedCompilation.html#6075" class="Bound">p</a><a id="6100" class="Symbol">)</a>
<a id="6102" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="6120" href="VerifiedCompilation.html#6120" class="Bound">tag</a> <a id="6124" href="VerifiedCompilation.html#6124" class="Bound">ast</a> <a id="6128" href="VerifiedCompilation.html#6128" class="Bound">ast&#39;</a> <a id="6133" class="Symbol">|</a> <a id="6135" href="VerifiedCompilation.Certificate.html#827" class="InductiveConstructor">SimplifierTag.inlineT</a> <a id="6157" class="Symbol">=</a> <a id="6159" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6165" href="VerifiedCompilation.html#4395" class="InductiveConstructor">inlineNotImplemented</a>
<a id="6186" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="6204" href="VerifiedCompilation.html#6204" class="Bound">tag</a> <a id="6208" href="VerifiedCompilation.html#6208" class="Bound">ast</a> <a id="6212" href="VerifiedCompilation.html#6212" class="Bound">ast&#39;</a> <a id="6217" class="Symbol">|</a> <a id="6219" href="VerifiedCompilation.Certificate.html#853" class="InductiveConstructor">SimplifierTag.cseT</a> <a id="6238" class="Keyword">with</a> <a id="6243" href="VerifiedCompilation.UCSE.html#2024" class="Function">UCSE.isUntypedCSE?</a> <a id="6262" href="VerifiedCompilation.html#6208" class="Bound">ast</a> <a id="6266" href="VerifiedCompilation.html#6212" class="Bound">ast&#39;</a>
<a id="6271" class="Symbol">...</a> <a id="6275" class="Symbol">|</a> <a id="6277" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6280" href="VerifiedCompilation.html#6280" class="Bound">¬p</a> <a id="6283" href="VerifiedCompilation.html#6283" class="Bound">t</a> <a id="6285" href="VerifiedCompilation.html#6285" class="Bound">b</a> <a id="6287" href="VerifiedCompilation.html#6287" class="Bound">a</a> <a id="6289" class="Symbol">=</a> <a id="6291" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6294" class="Symbol">(λ</a> <a id="6297" class="Symbol">{</a> <a id="6299" class="Symbol">(</a><a id="6300" href="VerifiedCompilation.html#4192" class="InductiveConstructor">isCSE</a> <a id="6306" href="VerifiedCompilation.html#6306" class="Bound">x</a><a id="6307" class="Symbol">)</a> <a id="6309" class="Symbol">→</a> <a id="6311" href="VerifiedCompilation.html#6280" class="Bound">¬p</a> <a id="6314" href="VerifiedCompilation.html#6306" class="Bound">x</a><a id="6315" class="Symbol">})</a> <a id="6318" href="VerifiedCompilation.html#6283" class="Bound">t</a> <a id="6320" href="VerifiedCompilation.html#6285" class="Bound">b</a> <a id="6322" href="VerifiedCompilation.html#6287" class="Bound">a</a>
<a id="6324" class="Symbol">...</a> <a id="6328" class="Symbol">|</a> <a id="6330" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6336" href="VerifiedCompilation.html#6336" class="Bound">p</a> <a id="6338" class="Symbol">=</a> <a id="6340" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6346" class="Symbol">(</a><a id="6347" href="VerifiedCompilation.html#4192" class="InductiveConstructor">isCSE</a> <a id="6353" href="VerifiedCompilation.html#6336" class="Bound">p</a><a id="6354" class="Symbol">)</a>

<a id="isTrace?"></a><a id="6357" href="VerifiedCompilation.html#6357" class="Function">isTrace?</a> <a id="6366" class="Symbol">:</a> <a id="6368" class="Symbol">{</a><a id="6369" href="VerifiedCompilation.html#6369" class="Bound">X</a> <a id="6371" class="Symbol">:</a> <a id="6373" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="6376" class="Symbol">}</a> <a id="6378" class="Symbol"></a> <a id="6394" class="Symbol">→</a> <a id="6396" class="Symbol">(</a><a id="6397" href="VerifiedCompilation.html#6397" class="Bound">t</a> <a id="6399" class="Symbol">:</a> <a id="6401" href="Utils.html#5301" class="Datatype">List</a> <a id="6406" class="Symbol">(</a><a id="6407" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="6421" href="Utils.html#5063" class="Record Operator">×</a> <a id="6423" class="Symbol">(</a><a id="6424" href="VerifiedCompilation.html#6369" class="Bound">X</a> <a id="6426" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="6427" class="Symbol">)</a> <a id="6429" href="Utils.html#5063" class="Record Operator">×</a> <a id="6431" class="Symbol">(</a><a id="6432" href="VerifiedCompilation.html#6369" class="Bound">X</a> <a id="6434" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="6435" class="Symbol">)))</a> <a id="6439" class="Symbol">→</a> <a id="6441" href="VerifiedCompilation.Certificate.html#1112" class="Datatype">ProofOrCE</a> <a id="6451" class="Symbol">(</a><a id="6452" href="VerifiedCompilation.html#4789" class="Datatype">Trace</a> <a id="6458" class="Symbol">{</a><a id="6459" href="VerifiedCompilation.html#6369" class="Bound">X</a><a id="6460" class="Symbol">}</a> <a id="6462" href="VerifiedCompilation.html#6397" class="Bound">t</a><a id="6463" class="Symbol">)</a>
<a id="6465" href="VerifiedCompilation.html#6357" class="Function">isTrace?</a> <a id="6474" href="Utils.html#5330" class="InductiveConstructor">[]</a> <a id="6477" class="Symbol">=</a> <a id="6479" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6485" href="VerifiedCompilation.html#4879" class="InductiveConstructor">empty</a>
<a id="6491" href="VerifiedCompilation.html#6357" class="Function">isTrace?</a> <a id="6500" class="Symbol">{</a><a id="6501" href="VerifiedCompilation.html#6501" class="Bound">X</a><a id="6502" class="Symbol">}</a> <a id="6504" class="Symbol">((</a><a id="6506" href="VerifiedCompilation.html#6506" class="Bound">tag</a> <a id="6510" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="6512" href="VerifiedCompilation.html#6512" class="Bound">x₁</a> <a id="6515" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="6517" href="VerifiedCompilation.html#6517" class="Bound">x₂</a><a id="6519" class="Symbol">)</a> <a id="6521" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="6523" href="VerifiedCompilation.html#6523" class="Bound">xs</a><a id="6525" class="Symbol">)</a> <a id="6527" class="Keyword">with</a> <a id="6532" href="VerifiedCompilation.html#6357" class="Function">isTrace?</a> <a id="6541" href="VerifiedCompilation.html#6523" class="Bound">xs</a>
<a id="6544" class="Symbol">...</a> <a id="6548" class="Symbol">|</a> <a id="6550" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6553" href="VerifiedCompilation.html#6553" class="Bound">¬p</a> <a id="6556" href="VerifiedCompilation.html#6556" class="Bound">t</a> <a id="6558" href="VerifiedCompilation.html#6558" class="Bound">b</a> <a id="6560" href="VerifiedCompilation.html#6560" class="Bound">a</a> <a id="6562" class="Symbol">=</a> <a id="6564" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6567" class="Symbol">(λ</a> <a id="6570" class="Symbol">{</a> <a id="6572" class="Symbol">(</a><a id="6573" href="VerifiedCompilation.html#4929" class="InductiveConstructor">cons</a> <a id="6578" href="VerifiedCompilation.html#6578" class="Bound">x</a> <a id="6580" href="VerifiedCompilation.html#6580" class="Bound">xx</a><a id="6582" class="Symbol">)</a> <a id="6584" class="Symbol">→</a> <a id="6586" href="VerifiedCompilation.html#6553" class="Bound">¬p</a> <a id="6589" href="VerifiedCompilation.html#6580" class="Bound">xx</a><a id="6591" class="Symbol">})</a> <a id="6594" href="VerifiedCompilation.html#6556" class="Bound">t</a> <a id="6596" href="VerifiedCompilation.html#6558" class="Bound">b</a> <a id="6598" href="VerifiedCompilation.html#6560" class="Bound">a</a>
<a id="6600" class="Symbol">...</a> <a id="6604" class="Symbol">|</a> <a id="6606" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6612" href="VerifiedCompilation.html#6612" class="Bound">pₜ</a> <a id="6615" class="Keyword">with</a> <a id="6620" href="VerifiedCompilation.html#5132" class="Function">isTransformation?</a> <a id="6638" class="Symbol">{</a><a id="6639" class="Bound">X</a><a id="6640" class="Symbol">}</a> <a id="6642" class="Bound">tag</a> <a id="6646" class="Bound">x₁</a> <a id="6649" class="Bound">x₂</a>
<a id="6652" class="Symbol">...</a>                 <a id="6672" class="Symbol">|</a> <a id="6674" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6677" href="VerifiedCompilation.html#6677" class="Bound">¬p</a> <a id="6680" href="VerifiedCompilation.html#6680" class="Bound">t</a> <a id="6682" href="VerifiedCompilation.html#6682" class="Bound">b</a> <a id="6684" href="VerifiedCompilation.html#6684" class="Bound">a</a> <a id="6686" class="Symbol">=</a> <a id="6688" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6691" class="Symbol">(λ</a> <a id="6694" class="Symbol">{</a> <a id="6696" class="Symbol">(</a><a id="6697" href="VerifiedCompilation.html#4929" class="InductiveConstructor">cons</a> <a id="6702" href="VerifiedCompilation.html#6702" class="Bound">x</a> <a id="6704" href="VerifiedCompilation.html#6704" class="Bound">xx</a><a id="6706" class="Symbol">)</a> <a id="6708" class="Symbol">→</a> <a id="6710" href="VerifiedCompilation.html#6677" class="Bound">¬p</a> <a id="6713" href="VerifiedCompilation.html#6702" class="Bound">x</a><a id="6714" class="Symbol">})</a> <a id="6717" href="VerifiedCompilation.html#6680" class="Bound">t</a> <a id="6719" href="VerifiedCompilation.html#6682" class="Bound">b</a> <a id="6721" href="VerifiedCompilation.html#6684" class="Bound">a</a>
<a id="6723" class="Symbol">...</a>                 <a id="6743" class="Symbol">|</a> <a id="6745" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6751" href="VerifiedCompilation.html#6751" class="Bound">pₑ</a> <a id="6754" class="Symbol">=</a> <a id="6756" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6762" class="Symbol">(</a><a id="6763" href="VerifiedCompilation.html#4929" class="InductiveConstructor">cons</a> <a id="6768" href="VerifiedCompilation.html#6751" class="Bound">pₑ</a> <a id="6771" class="Bound">pₜ</a><a id="6773" class="Symbol">)</a>


</pre>

<h2 id="the-certification-function">The certification function</h2>

<p>The <code class="language-plaintext highlighter-rouge">runCertifier</code> function is the top-level function which can be called by the compiler.</p>

<pre class="Agda">
<a id="6911" class="Symbol">{-#</a> <a id="6915" class="Keyword">FOREIGN</a> <a id="6923" class="Pragma">GHC</a> <a id="6927" class="Pragma">import</a> <a id="6934" class="Pragma">qualified</a> <a id="6944" class="Pragma">Data.Text.IO</a> <a id="6957" class="Pragma">as</a> <a id="6960" class="Pragma">TextIO</a> <a id="6967" class="Symbol">#-}</a>
<a id="6971" class="Symbol">{-#</a> <a id="6975" class="Keyword">FOREIGN</a> <a id="6983" class="Pragma">GHC</a> <a id="6987" class="Pragma">import</a> <a id="6994" class="Pragma">qualified</a> <a id="7004" class="Pragma">System.IO</a> <a id="7014" class="Pragma">as</a> <a id="7017" class="Pragma">IO</a> <a id="7020" class="Symbol">#-}</a>
<a id="7024" class="Symbol">{-#</a> <a id="7028" class="Keyword">FOREIGN</a> <a id="7036" class="Pragma">GHC</a> <a id="7040" class="Pragma">import</a> <a id="7047" class="Pragma">qualified</a> <a id="7057" class="Pragma">Data.Text</a> <a id="7067" class="Pragma">as</a> <a id="7070" class="Pragma">Text</a> <a id="7075" class="Symbol">#-}</a>
<a id="7079" class="Symbol">{-#</a> <a id="7083" class="Keyword">FOREIGN</a> <a id="7091" class="Pragma">GHC</a> <a id="7095" class="Pragma">import</a> <a id="7102" class="Pragma">PlutusCore.Compiler.Types</a> <a id="7128" class="Symbol">#-}</a>

<a id="7133" class="Keyword">postulate</a> <a id="FileHandle"></a><a id="7143" href="VerifiedCompilation.html#7143" class="Postulate">FileHandle</a> <a id="7154" class="Symbol">:</a> <a id="7156" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="7160" class="Symbol">{-#</a> <a id="7164" class="Keyword">COMPILE</a> <a id="7172" class="Keyword">GHC</a> <a id="7176" href="VerifiedCompilation.html#7143" class="Postulate">FileHandle</a> <a id="7187" class="Pragma">=</a> <a id="7189" class="Pragma">type</a> <a id="7194" class="Pragma">IO.Handle</a> <a id="7204" class="Symbol">#-}</a>

<a id="7209" class="Keyword">postulate</a>
  <a id="writeFile"></a><a id="7221" href="VerifiedCompilation.html#7221" class="Postulate">writeFile</a> <a id="7231" class="Symbol">:</a> <a id="7233" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7240" class="Symbol">→</a> <a id="7242" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7249" class="Symbol">→</a> <a id="7251" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7254" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="stderr"></a><a id="7258" href="VerifiedCompilation.html#7258" class="Postulate">stderr</a> <a id="7265" class="Symbol">:</a> <a id="7267" href="VerifiedCompilation.html#7143" class="Postulate">FileHandle</a>
  <a id="hPutStrLn"></a><a id="7280" href="VerifiedCompilation.html#7280" class="Postulate">hPutStrLn</a> <a id="7290" class="Symbol">:</a> <a id="7292" href="VerifiedCompilation.html#7143" class="Postulate">FileHandle</a> <a id="7303" class="Symbol">→</a> <a id="7305" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7312" class="Symbol">→</a> <a id="7314" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7317" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="putStrLn"></a><a id="7321" href="VerifiedCompilation.html#7321" class="Postulate">putStrLn</a> <a id="7330" class="Symbol">:</a> <a id="7332" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7339" class="Symbol">→</a> <a id="7341" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7344" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="7347" class="Symbol">{-#</a> <a id="7351" class="Keyword">COMPILE</a> <a id="7359" class="Keyword">GHC</a> <a id="7363" href="VerifiedCompilation.html#7221" class="Postulate">writeFile</a> <a id="7373" class="Pragma">=</a> <a id="7375" class="Pragma">\f</a> <a id="7378" class="Pragma">-&gt;</a> <a id="7381" class="Pragma">TextIO.writeFile</a> <a id="7398" class="Pragma">(Text.unpack</a> <a id="7411" class="Pragma">f)</a> <a id="7414" class="Symbol">#-}</a>
<a id="7418" class="Symbol">{-#</a> <a id="7422" class="Keyword">COMPILE</a> <a id="7430" class="Keyword">GHC</a> <a id="7434" href="VerifiedCompilation.html#7258" class="Postulate">stderr</a> <a id="7441" class="Pragma">=</a> <a id="7443" class="Pragma">IO.stderr</a> <a id="7453" class="Symbol">#-}</a>
<a id="7457" class="Symbol">{-#</a> <a id="7461" class="Keyword">COMPILE</a> <a id="7469" class="Keyword">GHC</a> <a id="7473" href="VerifiedCompilation.html#7280" class="Postulate">hPutStrLn</a> <a id="7483" class="Pragma">=</a> <a id="7485" class="Pragma">TextIO.hPutStr</a> <a id="7500" class="Symbol">#-}</a>
<a id="7504" class="Symbol">{-#</a> <a id="7508" class="Keyword">COMPILE</a> <a id="7516" class="Keyword">GHC</a> <a id="7520" href="VerifiedCompilation.html#7321" class="Postulate">putStrLn</a> <a id="7529" class="Pragma">=</a> <a id="7531" class="Pragma">TextIO.putStrLn</a> <a id="7547" class="Symbol">#-}</a>

<a id="buildPairs"></a><a id="7552" href="VerifiedCompilation.html#7552" class="Function">buildPairs</a> <a id="7563" class="Symbol">:</a> <a id="7565" class="Symbol">{</a><a id="7566" href="VerifiedCompilation.html#7566" class="Bound">X</a> <a id="7568" class="Symbol">:</a> <a id="7570" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7573" class="Symbol">}</a> <a id="7575" class="Symbol">→</a> <a id="7577" href="Utils.html#5301" class="Datatype">List</a> <a id="7582" class="Symbol">(</a><a id="7583" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7589" href="VerifiedCompilation.html#7566" class="Bound">X</a> <a id="7591" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="7592" class="Symbol">)</a> <a id="7594" class="Symbol">-&gt;</a> <a id="7597" href="Utils.html#5301" class="Datatype">List</a> <a id="7602" class="Symbol">((</a><a id="7604" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7610" href="VerifiedCompilation.html#7566" class="Bound">X</a> <a id="7612" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="7613" class="Symbol">)</a> <a id="7615" href="Utils.html#5063" class="Record Operator">×</a> <a id="7617" class="Symbol">(</a><a id="7618" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7624" href="VerifiedCompilation.html#7566" class="Bound">X</a> <a id="7626" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="7627" class="Symbol">))</a>
<a id="7630" href="VerifiedCompilation.html#7552" class="Function">buildPairs</a> <a id="7641" href="Utils.html#5330" class="InductiveConstructor">[]</a> <a id="7644" class="Symbol">=</a> <a id="7646" href="Utils.html#5330" class="InductiveConstructor">[]</a>
<a id="7649" href="VerifiedCompilation.html#7552" class="Function">buildPairs</a> <a id="7660" class="Symbol">(</a><a id="7661" href="VerifiedCompilation.html#7661" class="Bound">x</a> <a id="7663" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="7665" href="Utils.html#5330" class="InductiveConstructor">[]</a><a id="7667" class="Symbol">)</a> <a id="7669" class="Symbol">=</a> <a id="7671" class="Symbol">(</a><a id="7672" href="VerifiedCompilation.html#7661" class="Bound">x</a> <a id="7674" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="7676" href="VerifiedCompilation.html#7661" class="Bound">x</a><a id="7677" class="Symbol">)</a> <a id="7679" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="7681" href="Utils.html#5330" class="InductiveConstructor">[]</a>
<a id="7684" href="VerifiedCompilation.html#7552" class="Function">buildPairs</a> <a id="7695" class="Symbol">(</a><a id="7696" href="VerifiedCompilation.html#7696" class="Bound">x₁</a> <a id="7699" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="7701" class="Symbol">(</a><a id="7702" href="VerifiedCompilation.html#7702" class="Bound">x₂</a> <a id="7705" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="7707" href="VerifiedCompilation.html#7707" class="Bound">xs</a><a id="7709" class="Symbol">))</a> <a id="7712" class="Symbol">=</a> <a id="7714" class="Symbol">(</a><a id="7715" href="VerifiedCompilation.html#7696" class="Bound">x₁</a> <a id="7718" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="7720" href="VerifiedCompilation.html#7702" class="Bound">x₂</a><a id="7722" class="Symbol">)</a> <a id="7724" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="7726" href="VerifiedCompilation.html#7552" class="Function">buildPairs</a> <a id="7737" class="Symbol">(</a><a id="7738" href="VerifiedCompilation.html#7702" class="Bound">x₂</a> <a id="7741" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="7743" href="VerifiedCompilation.html#7707" class="Bound">xs</a><a id="7745" class="Symbol">)</a>

<a id="traverseEitherList"></a><a id="7748" href="VerifiedCompilation.html#7748" class="Function">traverseEitherList</a> <a id="7767" class="Symbol">:</a> <a id="7769" class="Symbol">{</a><a id="7770" href="VerifiedCompilation.html#7770" class="Bound">A</a> <a id="7772" href="VerifiedCompilation.html#7772" class="Bound">B</a> <a id="7774" href="VerifiedCompilation.html#7774" class="Bound">E</a> <a id="7776" class="Symbol">:</a> <a id="7778" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7781" class="Symbol">}</a> <a id="7783" class="Symbol">→</a> <a id="7785" class="Symbol">(</a><a id="7786" href="VerifiedCompilation.html#7770" class="Bound">A</a> <a id="7788" class="Symbol">→</a> <a id="7790" href="Utils.html#1133" class="Datatype">Either</a> <a id="7797" href="VerifiedCompilation.html#7774" class="Bound">E</a> <a id="7799" href="VerifiedCompilation.html#7772" class="Bound">B</a><a id="7800" class="Symbol">)</a> <a id="7802" class="Symbol">→</a> <a id="7804" href="Utils.html#5301" class="Datatype">List</a> <a id="7809" class="Symbol">(</a><a id="7810" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7824" href="Utils.html#5063" class="Record Operator">×</a> <a id="7826" href="VerifiedCompilation.html#7770" class="Bound">A</a> <a id="7828" href="Utils.html#5063" class="Record Operator">×</a> <a id="7830" href="VerifiedCompilation.html#7770" class="Bound">A</a><a id="7831" class="Symbol">)</a> <a id="7833" class="Symbol">→</a> <a id="7835" href="Utils.html#1133" class="Datatype">Either</a> <a id="7842" href="VerifiedCompilation.html#7774" class="Bound">E</a> <a id="7844" class="Symbol">(</a><a id="7845" href="Utils.html#5301" class="Datatype">List</a> <a id="7850" class="Symbol">(</a><a id="7851" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7865" href="Utils.html#5063" class="Record Operator">×</a> <a id="7867" href="VerifiedCompilation.html#7772" class="Bound">B</a> <a id="7869" href="Utils.html#5063" class="Record Operator">×</a> <a id="7871" href="VerifiedCompilation.html#7772" class="Bound">B</a><a id="7872" class="Symbol">))</a>
<a id="7875" href="VerifiedCompilation.html#7748" class="Function">traverseEitherList</a> <a id="7894" class="Symbol">_</a> <a id="7896" href="Utils.html#5330" class="InductiveConstructor">[]</a> <a id="7899" class="Symbol">=</a> <a id="7901" href="Utils.html#1190" class="InductiveConstructor">inj₂</a> <a id="7906" href="Utils.html#5330" class="InductiveConstructor">[]</a>
<a id="7909" href="VerifiedCompilation.html#7748" class="Function">traverseEitherList</a> <a id="7928" href="VerifiedCompilation.html#7928" class="Bound">f</a> <a id="7930" class="Symbol">((</a><a id="7932" href="VerifiedCompilation.html#7932" class="Bound">tag</a> <a id="7936" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="7938" href="VerifiedCompilation.html#7938" class="Bound">before</a> <a id="7945" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="7947" href="VerifiedCompilation.html#7947" class="Bound">after</a><a id="7952" class="Symbol">)</a> <a id="7954" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="7956" href="VerifiedCompilation.html#7956" class="Bound">xs</a><a id="7958" class="Symbol">)</a> <a id="7960" class="Keyword">with</a> <a id="7965" href="VerifiedCompilation.html#7928" class="Bound">f</a> <a id="7967" href="VerifiedCompilation.html#7938" class="Bound">before</a>
<a id="7974" class="Symbol">...</a> <a id="7978" class="Symbol">|</a> <a id="7980" href="Utils.html#1166" class="InductiveConstructor">inj₁</a> <a id="7985" href="VerifiedCompilation.html#7985" class="Bound">e</a> <a id="7987" class="Symbol">=</a> <a id="7989" href="Utils.html#1166" class="InductiveConstructor">inj₁</a> <a id="7994" href="VerifiedCompilation.html#7985" class="Bound">e</a>
<a id="7996" class="Symbol">...</a> <a id="8000" class="Symbol">|</a> <a id="8002" href="Utils.html#1190" class="InductiveConstructor">inj₂</a> <a id="8007" href="VerifiedCompilation.html#8007" class="Bound">b</a> <a id="8009" class="Keyword">with</a> <a id="8014" class="Bound">f</a> <a id="8016" class="Bound">after</a>
<a id="8022" class="Symbol">...</a> <a id="8026" class="Symbol">|</a> <a id="8028" href="Utils.html#1166" class="InductiveConstructor">inj₁</a> <a id="8033" href="VerifiedCompilation.html#8033" class="Bound">e</a> <a id="8035" class="Symbol">=</a> <a id="8037" href="Utils.html#1166" class="InductiveConstructor">inj₁</a> <a id="8042" href="VerifiedCompilation.html#8033" class="Bound">e</a>
<a id="8044" class="Symbol">...</a> <a id="8048" class="Symbol">|</a> <a id="8050" href="Utils.html#1190" class="InductiveConstructor">inj₂</a> <a id="8055" href="VerifiedCompilation.html#8055" class="Bound">a</a> <a id="8057" class="Keyword">with</a> <a id="8062" href="VerifiedCompilation.html#7748" class="Function">traverseEitherList</a> <a id="8081" class="Bound">f</a> <a id="8083" class="Bound">xs</a>
<a id="8086" class="Symbol">...</a> <a id="8090" class="Symbol">|</a> <a id="8092" href="Utils.html#1166" class="InductiveConstructor">inj₁</a> <a id="8097" href="VerifiedCompilation.html#8097" class="Bound">e</a> <a id="8099" class="Symbol">=</a> <a id="8101" href="Utils.html#1166" class="InductiveConstructor">inj₁</a> <a id="8106" href="VerifiedCompilation.html#8097" class="Bound">e</a>
<a id="8108" class="Symbol">...</a> <a id="8112" class="Symbol">|</a> <a id="8114" href="Utils.html#1190" class="InductiveConstructor">inj₂</a> <a id="8119" href="VerifiedCompilation.html#8119" class="Bound">xs&#39;</a> <a id="8123" class="Symbol">=</a> <a id="8125" href="Utils.html#1190" class="InductiveConstructor">inj₂</a> <a id="8130" class="Symbol">(((</a><a id="8133" class="Bound">tag</a> <a id="8137" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="8139" class="Bound">b</a> <a id="8141" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="8143" class="Bound">a</a><a id="8144" class="Symbol">))</a> <a id="8147" href="Utils.html#5345" class="InductiveConstructor Operator">∷</a> <a id="8149" href="VerifiedCompilation.html#8119" class="Bound">xs&#39;</a><a id="8152" class="Symbol">)</a>

<a id="8155" class="Keyword">data</a> <a id="Cert"></a><a id="8160" href="VerifiedCompilation.html#8160" class="Datatype">Cert</a> <a id="8165" class="Symbol">:</a> <a id="8167" href="Agda.Primitive.html#388" class="Primitive">Set₂</a> <a id="8172" class="Keyword">where</a>
  <a id="Cert.cert"></a><a id="8180" href="VerifiedCompilation.html#8180" class="InductiveConstructor">cert</a>
    <a id="8189" class="Symbol">:</a> <a id="8191" class="Symbol">{</a><a id="8192" href="VerifiedCompilation.html#8192" class="Bound">X</a> <a id="8194" class="Symbol">:</a> <a id="8196" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="8199" class="Symbol">}</a> <a id="8201" class="Symbol">{</a><a id="8202" href="VerifiedCompilation.html#8202" class="Bound">result</a> <a id="8209" class="Symbol">:</a> <a id="8211" href="Utils.html#5301" class="Datatype">List</a> <a id="8216" class="Symbol">(</a><a id="8217" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8231" href="Utils.html#5063" class="Record Operator">×</a> <a id="8233" class="Symbol">(</a><a id="8234" href="VerifiedCompilation.html#8192" class="Bound">X</a> <a id="8236" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="8237" class="Symbol">)</a> <a id="8239" href="Utils.html#5063" class="Record Operator">×</a> <a id="8241" class="Symbol">(</a><a id="8242" href="VerifiedCompilation.html#8192" class="Bound">X</a> <a id="8244" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="8245" class="Symbol">))}</a> <a id="8249" class="Symbol"></a>
    <a id="8269" class="Symbol">→</a> <a id="8271" href="VerifiedCompilation.Certificate.html#1112" class="Datatype">ProofOrCE</a> <a id="8281" class="Symbol">(</a><a id="8282" href="VerifiedCompilation.html#4789" class="Datatype">Trace</a> <a id="8288" class="Symbol">{</a><a id="8289" href="VerifiedCompilation.html#8192" class="Bound">X</a><a id="8290" class="Symbol">}</a> <a id="8292" href="VerifiedCompilation.html#8202" class="Bound">result</a><a id="8298" class="Symbol">)</a>
    <a id="8304" class="Symbol">→</a> <a id="8306" href="VerifiedCompilation.html#8160" class="Datatype">Cert</a>

<a id="runCertifier"></a><a id="8312" href="VerifiedCompilation.html#8312" class="Function">runCertifier</a> <a id="8325" class="Symbol">:</a> <a id="8327" href="Utils.html#5301" class="Datatype">List</a> <a id="8332" class="Symbol">(</a><a id="8333" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8347" href="Utils.html#5063" class="Record Operator">×</a> <a id="8349" href="RawU.html#8077" class="Datatype">Untyped</a> <a id="8357" href="Utils.html#5063" class="Record Operator">×</a> <a id="8359" href="RawU.html#8077" class="Datatype">Untyped</a><a id="8366" class="Symbol">)</a> <a id="8368" class="Symbol">→</a> <a id="8370" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8376" href="VerifiedCompilation.html#8160" class="Datatype">Cert</a>
<a id="8381" href="VerifiedCompilation.html#8312" class="Function">runCertifier</a> <a id="8394" href="VerifiedCompilation.html#8394" class="Bound">rawInput</a> <a id="8403" class="Keyword">with</a> <a id="8408" href="VerifiedCompilation.html#7748" class="Function">traverseEitherList</a> <a id="8427" class="Symbol">(</a><a id="8428" href="Untyped.html#7502" class="Function">toWellScoped</a> <a id="8441" class="Symbol">{</a><a id="8442" href="Data.Empty.html#914" class="Function">⊥</a><a id="8443" class="Symbol">})</a> <a id="8446" href="VerifiedCompilation.html#8394" class="Bound">rawInput</a>
<a id="8455" class="Symbol">...</a> <a id="8459" class="Symbol">|</a> <a id="8461" href="Utils.html#1166" class="InductiveConstructor">inj₁</a> <a id="8466" class="Symbol">_</a> <a id="8468" class="Symbol">=</a> <a id="8470" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8478" class="Symbol">...</a> <a id="8482" class="Symbol">|</a> <a id="8484" href="Utils.html#1190" class="InductiveConstructor">inj₂</a> <a id="8489" href="VerifiedCompilation.html#8489" class="Bound">inputTrace</a> <a id="8500" class="Symbol">=</a> <a id="8502" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8507" class="Symbol">(</a><a id="8508" href="VerifiedCompilation.html#8180" class="InductiveConstructor">cert</a> <a id="8513" class="Symbol">(</a><a id="8514" href="VerifiedCompilation.html#6357" class="Function">isTrace?</a> <a id="8523" href="VerifiedCompilation.html#8489" class="Bound">inputTrace</a><a id="8533" class="Symbol">))</a>

<a id="getCE"></a><a id="8537" href="VerifiedCompilation.html#8537" class="Function">getCE</a> <a id="8543" class="Symbol">:</a> <a id="8545" class="Symbol">{</a><a id="8546" href="VerifiedCompilation.html#8546" class="Bound">A</a> <a id="8548" href="VerifiedCompilation.html#8548" class="Bound">B</a> <a id="8550" class="Symbol">:</a> <a id="8552" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="8555" class="Symbol">}</a> <a id="8557" class="Symbol">→</a> <a id="8559" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8565" href="VerifiedCompilation.html#8160" class="Datatype">Cert</a> <a id="8570" class="Symbol">→</a> <a id="8572" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8578" class="Symbol">(</a><a id="8579" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="8581" class="Symbol">_</a> <a id="8583" class="Symbol">\</a><a id="8584" href="VerifiedCompilation.html#8584" class="Bound">A</a> <a id="8586" class="Symbol">→</a> <a id="8588" class="Symbol">(</a><a id="8589" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="8591" class="Symbol">_</a> <a id="8593" class="Symbol">\</a><a id="8594" href="VerifiedCompilation.html#8594" class="Bound">B</a> <a id="8596" class="Symbol">→</a> <a id="8598" class="Symbol">(</a><a id="8599" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8613" href="Utils.html#5063" class="Record Operator">×</a> <a id="8615" href="VerifiedCompilation.html#8584" class="Bound">A</a> <a id="8617" href="Utils.html#5063" class="Record Operator">×</a> <a id="8619" href="VerifiedCompilation.html#8594" class="Bound">B</a><a id="8620" class="Symbol">)))</a>
<a id="8624" href="VerifiedCompilation.html#8537" class="Function">getCE</a> <a id="8630" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8638" class="Symbol">=</a> <a id="8640" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8648" href="VerifiedCompilation.html#8537" class="Function">getCE</a> <a id="8654" class="Symbol">(</a><a id="8655" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8660" class="Symbol">(</a><a id="8661" href="VerifiedCompilation.html#8180" class="InductiveConstructor">cert</a> <a id="8666" class="Symbol">(</a><a id="8667" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="8673" class="Symbol">_)))</a> <a id="8678" class="Symbol">=</a> <a id="8680" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8688" href="VerifiedCompilation.html#8537" class="Function">getCE</a> <a id="8694" class="Symbol">(</a><a id="8695" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8700" class="Symbol">(</a><a id="8701" href="VerifiedCompilation.html#8180" class="InductiveConstructor">cert</a> <a id="8706" class="Symbol">(</a><a id="8707" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="8710" class="Symbol">_</a> <a id="8712" class="Symbol">{</a><a id="8713" href="VerifiedCompilation.html#8713" class="Bound">X</a><a id="8714" class="Symbol">}</a> <a id="8716" class="Symbol">{</a><a id="8717" href="VerifiedCompilation.html#8717" class="Bound">X&#39;</a><a id="8719" class="Symbol">}</a> <a id="8721" href="VerifiedCompilation.html#8721" class="Bound">t</a> <a id="8723" href="VerifiedCompilation.html#8723" class="Bound">b</a> <a id="8725" href="VerifiedCompilation.html#8725" class="Bound">a</a><a id="8726" class="Symbol">)))</a> <a id="8730" class="Symbol">=</a> <a id="8732" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8737" class="Symbol">(</a><a id="8738" href="VerifiedCompilation.html#8713" class="Bound">X</a> <a id="8740" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8742" href="VerifiedCompilation.html#8717" class="Bound">X&#39;</a> <a id="8745" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8747" href="VerifiedCompilation.html#8721" class="Bound">t</a> <a id="8749" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="8751" href="VerifiedCompilation.html#8723" class="Bound">b</a> <a id="8753" href="Utils.html#5107" class="InductiveConstructor Operator">,</a> <a id="8755" href="VerifiedCompilation.html#8725" class="Bound">a</a><a id="8756" class="Symbol">)</a>

<a id="8759" class="Keyword">open</a> <a id="8764" class="Keyword">import</a> <a id="8771" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="8786" class="Keyword">using</a> <a id="8792" class="Symbol">(</a><a id="8793" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="8797" class="Symbol">;</a> <a id="8799" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="8804" class="Symbol">;</a> <a id="8806" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="8810" class="Symbol">)</a>
<a id="8812" class="Keyword">open</a> <a id="8817" class="Keyword">import</a> <a id="8824" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a> <a id="8846" class="Keyword">using</a> <a id="8852" class="Symbol">(</a><a id="8853" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="8856" class="Symbol">;</a> <a id="8858" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="8862" class="Symbol">)</a>

<a id="passed?"></a><a id="8865" href="VerifiedCompilation.html#8865" class="Function">passed?</a> <a id="8873" class="Symbol">:</a> <a id="8875" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8881" href="VerifiedCompilation.html#8160" class="Datatype">Cert</a> <a id="8886" class="Symbol">→</a> <a id="8888" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="8893" href="VerifiedCompilation.html#8865" class="Function">passed?</a> <a id="8901" class="Symbol">(</a><a id="8902" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8907" class="Symbol">(</a><a id="8908" href="VerifiedCompilation.html#8180" class="InductiveConstructor">cert</a> <a id="8913" class="Symbol">(</a><a id="8914" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="8917" class="Symbol">_</a> <a id="8919" class="Symbol">_</a> <a id="8921" class="Symbol">_</a> <a id="8923" class="Symbol">_)))</a> <a id="8928" class="Symbol">=</a> <a id="8930" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="8936" href="VerifiedCompilation.html#8865" class="Function">passed?</a> <a id="8944" class="Symbol">(</a><a id="8945" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8950" class="Symbol">(</a><a id="8951" href="VerifiedCompilation.html#8180" class="InductiveConstructor">cert</a> <a id="8956" class="Symbol">(</a><a id="8957" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="8963" class="Symbol">_)))</a> <a id="8968" class="Symbol">=</a> <a id="8970" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="8975" href="VerifiedCompilation.html#8865" class="Function">passed?</a> <a id="8983" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8991" class="Symbol">=</a> <a id="8993" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>

<a id="runCertifierMain"></a><a id="9000" href="VerifiedCompilation.html#9000" class="Function">runCertifierMain</a> <a id="9017" class="Symbol">:</a> <a id="9019" href="Utils.html#5301" class="Datatype">List</a> <a id="9024" class="Symbol">(</a><a id="9025" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="9039" href="Utils.html#5063" class="Record Operator">×</a> <a id="9041" href="RawU.html#8077" class="Datatype">Untyped</a> <a id="9049" href="Utils.html#5063" class="Record Operator">×</a> <a id="9051" href="RawU.html#8077" class="Datatype">Untyped</a><a id="9058" class="Symbol">)</a> <a id="9060" class="Symbol">→</a> <a id="9062" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9068" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="9073" href="VerifiedCompilation.html#9000" class="Function">runCertifierMain</a> <a id="9090" href="VerifiedCompilation.html#9090" class="Bound">asts</a> <a id="9095" class="Keyword">with</a> <a id="9100" href="VerifiedCompilation.html#8312" class="Function">runCertifier</a> <a id="9113" href="VerifiedCompilation.html#9090" class="Bound">asts</a>
<a id="9118" class="Symbol">...</a> <a id="9122" class="Symbol">|</a> <a id="9124" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9129" class="Symbol">(</a><a id="9130" href="VerifiedCompilation.html#8180" class="InductiveConstructor">cert</a> <a id="9135" class="Symbol">(</a><a id="9136" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="9142" href="VerifiedCompilation.html#9142" class="Bound">a</a><a id="9143" class="Symbol">))</a> <a id="9146" class="Symbol">=</a> <a id="9148" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9153" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="9158" class="Symbol">...</a> <a id="9162" class="Symbol">|</a> <a id="9164" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9169" class="Symbol">(</a><a id="9170" href="VerifiedCompilation.html#8180" class="InductiveConstructor">cert</a> <a id="9175" class="Symbol">(</a><a id="9176" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="9179" href="VerifiedCompilation.html#9179" class="Bound">¬p</a> <a id="9182" href="VerifiedCompilation.html#9182" class="Bound">t</a> <a id="9184" href="VerifiedCompilation.html#9184" class="Bound">b</a> <a id="9186" href="VerifiedCompilation.html#9186" class="Bound">a</a><a id="9187" class="Symbol">))</a> <a id="9190" class="Symbol">=</a> <a id="9192" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9197" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="9203" class="Symbol">...</a> <a id="9207" class="Symbol">|</a> <a id="9209" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9217" class="Symbol">=</a> <a id="9219" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="9227" class="Symbol">{-#</a> <a id="9231" class="Keyword">COMPILE</a> <a id="9239" class="Keyword">GHC</a> <a id="9243" href="VerifiedCompilation.html#9000" class="Function">runCertifierMain</a> <a id="9260" class="Pragma">as</a> <a id="9263" class="Pragma">runCertifierMain</a> <a id="9280" class="Symbol">#-}</a>
</pre>

    </section>
  </body>
</html>