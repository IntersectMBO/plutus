<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>VerifiedCompilation</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>VerifiedCompilation</h1>
    <section>
      <h1 id="verified-compilation">Verified Compilation</h1>

<h2 id="introduction">Introduction</h2>

<p>The verified compilation project is a formalization of the Untyped Plutus Core compiler optimisation transformations in Agda.
The goal is to generate a formal proof that the optimisation component of the compiler has transformed the input program correctly
with respect to the Agda specification (*). Our approach is based on Jacco Krijnen’s work on
<a href="https://www.sciencedirect.com/science/article/pii/S0167642323001338">Translation certification for smart contracts</a>.</p>

<p>(*) <strong>Note</strong>: The current implementation does not guarantee corectness in the sense of semantic equivalence between
the original and the optimised program. This is planned future work.</p>

<h2 id="implementation-overview">Implementation overview</h2>

<p>The project is divided into several Agda modules, each of which is based on an optimisation stage of the compiler.
They each contain the respective Agda formalisation of the program transformation and a decision procedure which takes
two programs as input and decides whether the transformation is applicable.</p>

<p>This module is at the top of the project hierarchy and contains the main decision procedure which verifies the entire optimisation
process. The final certification function receives a list of intermediate program ASTs produced by the compiler and outputs a file
containing the generated proof object, a.k.a. the <em>certificate</em>. The certificate can then be verified by third parties by loading
it into Agda and checking that it is correctly typed.</p>

<pre class="Agda"><a id="1536" class="Keyword">module</a> <a id="1543" href="VerifiedCompilation.html" class="Module">VerifiedCompilation</a> <a id="1563" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="1590" class="Keyword">open</a> <a id="1595" class="Keyword">import</a> <a id="1602" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1619" class="Keyword">using</a> <a id="1625" class="Symbol">(</a><a id="1626" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a><a id="1629" class="Symbol">;</a> <a id="1631" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a><a id="1634" class="Symbol">;</a> <a id="1636" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a><a id="1638" class="Symbol">;</a> <a id="1640" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬_</a><a id="1642" class="Symbol">)</a>

<a id="1645" class="Keyword">open</a> <a id="1650" class="Keyword">import</a> <a id="1657" href="Untyped.html" class="Module">Untyped</a>
<a id="1665" class="Keyword">open</a> <a id="1670" class="Keyword">import</a> <a id="1677" href="Utils.html" class="Module">Utils</a> <a id="1683" class="Symbol">as</a> <a id="1686" class="Module">U</a> <a id="1688" class="Keyword">using</a> <a id="1694" class="Symbol">(</a><a id="1695" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="1700" class="Symbol">;</a><a id="1701" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1708" class="Symbol">;</a><a id="1709" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="1713" class="Symbol">;</a><a id="1714" href="Utils.html#1129" class="Datatype">Either</a><a id="1720" class="Symbol">;</a><a id="1721" href="Utils.html#1162" class="InductiveConstructor">inj₁</a><a id="1725" class="Symbol">;</a><a id="1726" href="Utils.html#1186" class="InductiveConstructor">inj₂</a><a id="1730" class="Symbol">;</a><a id="1731" href="Utils.html#5297" class="Datatype">List</a><a id="1735" class="Symbol">;</a><a id="1736" href="Utils.html#5326" class="InductiveConstructor">[]</a><a id="1738" class="Symbol">;</a><a id="1739" href="Utils.html#5341" class="InductiveConstructor Operator">_∷_</a><a id="1742" class="Symbol">;</a><a id="1743" href="Utils.html#5059" class="Record Operator">_×_</a><a id="1746" class="Symbol">;</a><a id="1747" href="Utils.html#4005" class="InductiveConstructor Operator">_,_</a><a id="1750" class="Symbol">)</a>
<a id="1752" class="Keyword">open</a> <a id="1757" class="Keyword">import</a> <a id="1764" href="RawU.html" class="Module">RawU</a> <a id="1769" class="Keyword">using</a> <a id="1775" class="Symbol">(</a><a id="1776" href="RawU.html#6377" class="Datatype">Untyped</a><a id="1783" class="Symbol">)</a>
<a id="1785" class="Keyword">open</a> <a id="1790" class="Keyword">import</a> <a id="1797" href="Data.String.html" class="Module">Data.String</a> <a id="1809" class="Keyword">using</a> <a id="1815" class="Symbol">(</a><a id="1816" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="1822" class="Symbol">)</a>
<a id="1824" class="Keyword">open</a> <a id="1829" class="Keyword">import</a> <a id="1836" href="Agda.Builtin.IO.html" class="Module">Agda.Builtin.IO</a> <a id="1852" class="Keyword">using</a> <a id="1858" class="Symbol">(</a><a id="1859" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a><a id="1861" class="Symbol">)</a>
<a id="1863" class="Keyword">open</a> <a id="1868" class="Keyword">import</a> <a id="1875" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="1893" class="Keyword">using</a> <a id="1899" class="Symbol">(</a><a id="1900" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="1901" class="Symbol">)</a>
<a id="1903" class="Keyword">import</a> <a id="1910" href="VerifiedCompilation.UCaseOfCase.html" class="Module">VerifiedCompilation.UCaseOfCase</a> <a id="1942" class="Symbol">as</a> <a id="1945" class="Module">UCC</a>
<a id="1949" class="Keyword">import</a> <a id="1956" href="VerifiedCompilation.UForceDelay.html" class="Module">VerifiedCompilation.UForceDelay</a> <a id="1988" class="Symbol">as</a> <a id="1991" class="Module">UFD</a>
<a id="1995" class="Keyword">import</a> <a id="2002" href="VerifiedCompilation.UFloatDelay.html" class="Module">VerifiedCompilation.UFloatDelay</a> <a id="2034" class="Symbol">as</a> <a id="2037" class="Module">UFlD</a>
<a id="2042" class="Keyword">import</a> <a id="2049" href="VerifiedCompilation.UCSE.html" class="Module">VerifiedCompilation.UCSE</a> <a id="2074" class="Symbol">as</a> <a id="2077" class="Module">UCSE</a>
<a id="2082" class="Keyword">import</a> <a id="2089" href="VerifiedCompilation.UInline.html" class="Module">VerifiedCompilation.UInline</a> <a id="2117" class="Symbol">as</a> <a id="2120" class="Module">UInline</a>
<a id="2128" class="Keyword">import</a> <a id="2135" href="VerifiedCompilation.UCaseReduce.html" class="Module">VerifiedCompilation.UCaseReduce</a> <a id="2167" class="Symbol">as</a> <a id="2170" class="Module">UCR</a>
<a id="2174" class="Keyword">open</a> <a id="2179" class="Keyword">import</a> <a id="2186" href="Data.Empty.html" class="Module">Data.Empty</a> <a id="2197" class="Keyword">using</a> <a id="2203" class="Symbol">(</a><a id="2204" href="Data.Empty.html#914" class="Function">⊥</a><a id="2205" class="Symbol">)</a>
<a id="2207" class="Keyword">open</a> <a id="2212" class="Keyword">import</a> <a id="2219" href="VerifiedCompilation.Equality.html" class="Module">VerifiedCompilation.Equality</a> <a id="2248" class="Keyword">using</a> <a id="2254" class="Symbol">(</a><a id="2255" href="VerifiedCompilation.Equality.html#2250" class="Record">DecEq</a><a id="2260" class="Symbol">)</a>
<a id="2262" class="Keyword">open</a> <a id="2267" class="Keyword">import</a> <a id="2274" href="VerifiedCompilation.UntypedTranslation.html" class="Module">VerifiedCompilation.UntypedTranslation</a> <a id="2313" class="Keyword">using</a> <a id="2319" class="Symbol">(</a><a id="2320" href="VerifiedCompilation.UntypedTranslation.html#1585" class="Function">Relation</a><a id="2328" class="Symbol">)</a>
<a id="2330" class="Keyword">import</a> <a id="2337" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="2352" class="Symbol">as</a> <a id="2355" class="Module">Unary</a> <a id="2361" class="Keyword">using</a> <a id="2367" class="Symbol">(</a><a id="2368" href="Relation.Unary.html#4543" class="Function">Decidable</a><a id="2377" class="Symbol">)</a>
<a id="2379" class="Keyword">import</a> <a id="2386" href="Agda.Builtin.Int.html" class="Module">Agda.Builtin.Int</a>
<a id="2403" class="Keyword">import</a> <a id="2410" href="Relation.Nary.html" class="Module">Relation.Nary</a> <a id="2424" class="Symbol">as</a> <a id="2427" class="Module">Nary</a> <a id="2432" class="Keyword">using</a> <a id="2438" class="Symbol">(</a><a id="2439" href="Relation.Nary.html#6405" class="Function">Decidable</a><a id="2448" class="Symbol">)</a>
<a id="2450" class="Keyword">open</a> <a id="2455" class="Keyword">import</a> <a id="2462" href="VerifiedCompilation.Certificate.html" class="Module">VerifiedCompilation.Certificate</a> <a id="2494" class="Keyword">using</a> <a id="2500" class="Symbol">(</a><a id="2501" href="VerifiedCompilation.Certificate.html#1112" class="Datatype">ProofOrCE</a><a id="2510" class="Symbol">;</a> <a id="2512" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a><a id="2514" class="Symbol">;</a> <a id="2516" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a><a id="2521" class="Symbol">;</a> <a id="2523" href="VerifiedCompilation.Certificate.html#1874" class="Function">pcePointwise</a><a id="2535" class="Symbol">;</a> <a id="2537" href="VerifiedCompilation.Certificate.html#1544" class="Function">MatchOrCE</a><a id="2546" class="Symbol">;</a> <a id="2548" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="2561" class="Symbol">)</a>
<a id="2563" class="Keyword">open</a> <a id="2568" class="Keyword">import</a> <a id="2575" href="Agda.Builtin.Sigma.html" class="Module">Agda.Builtin.Sigma</a> <a id="2594" class="Keyword">using</a> <a id="2600" class="Symbol">(</a><a id="2601" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="2602" class="Symbol">;</a> <a id="2604" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="2607" class="Symbol">)</a>
</pre>
<h2 id="compiler-optimisation-traces">Compiler optimisation traces</h2>

<p>A <code class="language-plaintext highlighter-rouge">Trace</code> represents a sequence of optimisation transformations applied to a program. It is a list of pairs of ASTs
and a tag (<code class="language-plaintext highlighter-rouge">SimplifierTag</code>), where each pair represents the before and after of a transformation application and the
tag indicates which transformation was applied.
The <code class="language-plaintext highlighter-rouge">Transformation</code> type is a sum type that represents the possible transformations which are implemented in their
respective modules.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTrace?</code> decision procedure is at the core of the certification process. It produces the proof that the given
list of ASTs are in relation with one another according to the transformations implemented in the project.</p>

<p>The <code class="language-plaintext highlighter-rouge">isTransformation?</code> decision procedure just dispatches to the decision procedure indicated by the tag.</p>

<p><strong>TODO</strong>: The <code class="language-plaintext highlighter-rouge">Trace</code> type or decision procedure should also enforce that the second element of a pair is the first
element of the next pair in the list. This might not be necessary if we decide that we can assume that the function
which produces a <code class="language-plaintext highlighter-rouge">Trace</code> always produces a correct one, although it might be useful to make this explicit in the type.</p>
<pre class="Agda">
<a id="3753" class="Keyword">data</a> <a id="Transformation"></a><a id="3758" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="3773" class="Symbol">:</a> <a id="3775" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="3789" class="Symbol">→</a> <a id="3791" href="VerifiedCompilation.UntypedTranslation.html#1585" class="Function">Relation</a> <a id="3800" class="Keyword">where</a>
  <a id="Transformation.isCoC"></a><a id="3808" href="VerifiedCompilation.html#3808" class="InductiveConstructor">isCoC</a> <a id="3814" class="Symbol">:</a> <a id="3816" class="Symbol">{</a><a id="3817" href="VerifiedCompilation.html#3817" class="Bound">X</a> <a id="3819" class="Symbol">:</a> <a id="3821" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3824" class="Symbol">}</a> <a id="3841" class="Symbol">→</a> <a id="3843" class="Symbol">{</a><a id="3844" href="VerifiedCompilation.html#3844" class="Bound">ast</a> <a id="3848" href="VerifiedCompilation.html#3848" class="Bound">ast&#39;</a> <a id="3853" class="Symbol">:</a> <a id="3855" href="VerifiedCompilation.html#3817" class="Bound">X</a> <a id="3857" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="3858" class="Symbol">}</a> <a id="3860" class="Symbol">→</a> <a id="3862" href="VerifiedCompilation.UCaseOfCase.html#2378" class="Function">UCC.CaseOfCase</a> <a id="3877" href="VerifiedCompilation.html#3844" class="Bound">ast</a> <a id="3881" href="VerifiedCompilation.html#3848" class="Bound">ast&#39;</a> <a id="3886" class="Symbol">→</a> <a id="3888" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="3903" href="VerifiedCompilation.Certificate.html#767" class="InductiveConstructor">SimplifierTag.caseOfCaseT</a> <a id="3929" href="VerifiedCompilation.html#3844" class="Bound">ast</a> <a id="3933" href="VerifiedCompilation.html#3848" class="Bound">ast&#39;</a>
  <a id="Transformation.isFD"></a><a id="3940" href="VerifiedCompilation.html#3940" class="InductiveConstructor">isFD</a> <a id="3945" class="Symbol">:</a> <a id="3947" class="Symbol">{</a><a id="3948" href="VerifiedCompilation.html#3948" class="Bound">X</a> <a id="3950" class="Symbol">:</a> <a id="3952" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3955" class="Symbol">}</a> <a id="3972" class="Symbol">→</a> <a id="3974" class="Symbol">{</a><a id="3975" href="VerifiedCompilation.html#3975" class="Bound">ast</a> <a id="3979" href="VerifiedCompilation.html#3979" class="Bound">ast&#39;</a> <a id="3984" class="Symbol">:</a> <a id="3986" href="VerifiedCompilation.html#3948" class="Bound">X</a> <a id="3988" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="3989" class="Symbol">}</a> <a id="3991" class="Symbol">→</a> <a id="3993" href="VerifiedCompilation.UForceDelay.html#7292" class="Function">UFD.ForceDelay</a> <a id="4008" href="VerifiedCompilation.html#3975" class="Bound">ast</a> <a id="4012" href="VerifiedCompilation.html#3979" class="Bound">ast&#39;</a> <a id="4017" class="Symbol">→</a> <a id="4019" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4034" href="VerifiedCompilation.Certificate.html#703" class="InductiveConstructor">SimplifierTag.forceDelayT</a> <a id="4060" href="VerifiedCompilation.html#3975" class="Bound">ast</a> <a id="4064" href="VerifiedCompilation.html#3979" class="Bound">ast&#39;</a>
  <a id="Transformation.isFlD"></a><a id="4071" href="VerifiedCompilation.html#4071" class="InductiveConstructor">isFlD</a> <a id="4077" class="Symbol">:</a> <a id="4079" class="Symbol">{</a><a id="4080" href="VerifiedCompilation.html#4080" class="Bound">X</a> <a id="4082" class="Symbol">:</a> <a id="4084" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4087" class="Symbol">}</a> <a id="4104" class="Symbol">→</a> <a id="4106" class="Symbol">{</a><a id="4107" href="VerifiedCompilation.html#4107" class="Bound">ast</a> <a id="4111" href="VerifiedCompilation.html#4111" class="Bound">ast&#39;</a> <a id="4116" class="Symbol">:</a> <a id="4118" href="VerifiedCompilation.html#4080" class="Bound">X</a> <a id="4120" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4121" class="Symbol">}</a> <a id="4123" class="Symbol">→</a> <a id="4125" href="VerifiedCompilation.UFloatDelay.html#6083" class="Function">UFlD.FloatDelay</a> <a id="4141" href="VerifiedCompilation.html#4107" class="Bound">ast</a> <a id="4145" href="VerifiedCompilation.html#4111" class="Bound">ast&#39;</a> <a id="4150" class="Symbol">→</a> <a id="4152" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4167" href="VerifiedCompilation.Certificate.html#673" class="InductiveConstructor">SimplifierTag.floatDelayT</a> <a id="4193" href="VerifiedCompilation.html#4107" class="Bound">ast</a> <a id="4197" href="VerifiedCompilation.html#4111" class="Bound">ast&#39;</a>
  <a id="Transformation.isCSE"></a><a id="4204" href="VerifiedCompilation.html#4204" class="InductiveConstructor">isCSE</a> <a id="4210" class="Symbol">:</a> <a id="4212" class="Symbol">{</a><a id="4213" href="VerifiedCompilation.html#4213" class="Bound">X</a> <a id="4215" class="Symbol">:</a> <a id="4217" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4220" class="Symbol">}</a> <a id="4237" class="Symbol">→</a> <a id="4239" class="Symbol">{</a><a id="4240" href="VerifiedCompilation.html#4240" class="Bound">ast</a> <a id="4244" href="VerifiedCompilation.html#4244" class="Bound">ast&#39;</a> <a id="4249" class="Symbol">:</a> <a id="4251" href="VerifiedCompilation.html#4213" class="Bound">X</a> <a id="4253" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4254" class="Symbol">}</a> <a id="4256" class="Symbol">→</a> <a id="4258" href="VerifiedCompilation.UCSE.html#1897" class="Function">UCSE.UntypedCSE</a> <a id="4274" href="VerifiedCompilation.html#4240" class="Bound">ast</a> <a id="4278" href="VerifiedCompilation.html#4244" class="Bound">ast&#39;</a> <a id="4283" class="Symbol">→</a> <a id="4285" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4300" href="VerifiedCompilation.Certificate.html#853" class="InductiveConstructor">SimplifierTag.cseT</a> <a id="4319" href="VerifiedCompilation.html#4240" class="Bound">ast</a> <a id="4323" href="VerifiedCompilation.html#4244" class="Bound">ast&#39;</a>
  <a id="4330" class="Comment">-- FIXME: Inline currently rejects some valid translations so is disabled.</a>
  <a id="Transformation.inlineNotImplemented"></a><a id="4407" href="VerifiedCompilation.html#4407" class="InductiveConstructor">inlineNotImplemented</a> <a id="4428" class="Symbol">:</a> <a id="4430" class="Symbol">{</a><a id="4431" href="VerifiedCompilation.html#4431" class="Bound">X</a> <a id="4433" class="Symbol">:</a> <a id="4435" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4438" class="Symbol">}</a> <a id="4455" class="Symbol">→</a> <a id="4457" class="Symbol">{</a><a id="4458" href="VerifiedCompilation.html#4458" class="Bound">ast</a> <a id="4462" href="VerifiedCompilation.html#4462" class="Bound">ast&#39;</a> <a id="4467" class="Symbol">:</a> <a id="4469" href="VerifiedCompilation.html#4431" class="Bound">X</a> <a id="4471" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4472" class="Symbol">}</a> <a id="4474" class="Symbol">→</a> <a id="4476" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4491" href="VerifiedCompilation.Certificate.html#827" class="InductiveConstructor">SimplifierTag.inlineT</a> <a id="4513" href="VerifiedCompilation.html#4458" class="Bound">ast</a> <a id="4517" href="VerifiedCompilation.html#4462" class="Bound">ast&#39;</a>
  <a id="Transformation.isCaseReduce"></a><a id="4524" href="VerifiedCompilation.html#4524" class="InductiveConstructor">isCaseReduce</a> <a id="4537" class="Symbol">:</a> <a id="4539" class="Symbol">{</a><a id="4540" href="VerifiedCompilation.html#4540" class="Bound">X</a> <a id="4542" class="Symbol">:</a> <a id="4544" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4547" class="Symbol">}</a> <a id="4564" class="Symbol">→</a> <a id="4566" class="Symbol">{</a><a id="4567" href="VerifiedCompilation.html#4567" class="Bound">ast</a> <a id="4571" href="VerifiedCompilation.html#4571" class="Bound">ast&#39;</a> <a id="4576" class="Symbol">:</a> <a id="4578" href="VerifiedCompilation.html#4540" class="Bound">X</a> <a id="4580" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4581" class="Symbol">}</a> <a id="4583" class="Symbol">→</a> <a id="4585" href="VerifiedCompilation.UCaseReduce.html#3004" class="Function">UCR.UCaseReduce</a> <a id="4601" href="VerifiedCompilation.html#4567" class="Bound">ast</a> <a id="4605" href="VerifiedCompilation.html#4571" class="Bound">ast&#39;</a> <a id="4610" class="Symbol">→</a> <a id="4612" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4627" href="VerifiedCompilation.Certificate.html#797" class="InductiveConstructor">SimplifierTag.caseReduceT</a> <a id="4653" href="VerifiedCompilation.html#4567" class="Bound">ast</a> <a id="4657" href="VerifiedCompilation.html#4571" class="Bound">ast&#39;</a>
  <a id="Transformation.forceCaseDelayNotImplemented"></a><a id="4664" href="VerifiedCompilation.html#4664" class="InductiveConstructor">forceCaseDelayNotImplemented</a> <a id="4693" class="Symbol">:</a> <a id="4695" class="Symbol">{</a><a id="4696" href="VerifiedCompilation.html#4696" class="Bound">X</a> <a id="4698" class="Symbol">:</a> <a id="4700" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4703" class="Symbol">}</a> <a id="4720" class="Symbol">→</a> <a id="4722" class="Symbol">{</a><a id="4723" href="VerifiedCompilation.html#4723" class="Bound">ast</a> <a id="4727" href="VerifiedCompilation.html#4727" class="Bound">ast&#39;</a> <a id="4732" class="Symbol">:</a> <a id="4734" href="VerifiedCompilation.html#4696" class="Bound">X</a> <a id="4736" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4737" class="Symbol">}</a> <a id="4739" class="Symbol">→</a> <a id="4741" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="4756" href="VerifiedCompilation.Certificate.html#733" class="InductiveConstructor">SimplifierTag.forceCaseDelayT</a> <a id="4786" href="VerifiedCompilation.html#4723" class="Bound">ast</a> <a id="4790" href="VerifiedCompilation.html#4727" class="Bound">ast&#39;</a>

<a id="4796" class="Keyword">data</a> <a id="Trace"></a><a id="4801" href="VerifiedCompilation.html#4801" class="Datatype">Trace</a> <a id="4807" class="Symbol">:</a> <a id="4809" class="Symbol">{</a> <a id="4811" href="VerifiedCompilation.html#4811" class="Bound">X</a> <a id="4813" class="Symbol">:</a> <a id="4815" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="4819" class="Symbol">}</a> <a id="4821" class="Symbol"></a> <a id="4837" class="Symbol">→</a> <a id="4839" href="Utils.html#5297" class="Datatype">List</a> <a id="4844" class="Symbol">(</a><a id="4845" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="4859" href="Utils.html#5059" class="Record Operator">×</a> <a id="4861" class="Symbol">(</a><a id="4862" href="VerifiedCompilation.html#4811" class="Bound">X</a> <a id="4864" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4865" class="Symbol">)</a> <a id="4867" href="Utils.html#5059" class="Record Operator">×</a> <a id="4869" class="Symbol">(</a><a id="4870" href="VerifiedCompilation.html#4811" class="Bound">X</a> <a id="4872" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="4873" class="Symbol">))</a> <a id="4876" class="Symbol">→</a> <a id="4878" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="4883" class="Keyword">where</a>
  <a id="Trace.empty"></a><a id="4891" href="VerifiedCompilation.html#4891" class="InductiveConstructor">empty</a> <a id="4897" class="Symbol">:</a> <a id="4899" class="Symbol">{</a><a id="4900" href="VerifiedCompilation.html#4900" class="Bound">X</a> <a id="4902" class="Symbol">:</a> <a id="4904" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4907" class="Symbol">}</a> <a id="4924" class="Symbol">→</a> <a id="4926" href="VerifiedCompilation.html#4801" class="Datatype">Trace</a> <a id="4932" class="Symbol">{</a><a id="4933" href="VerifiedCompilation.html#4900" class="Bound">X</a><a id="4934" class="Symbol">}</a> <a id="4936" href="Utils.html#5326" class="InductiveConstructor">[]</a>
  <a id="Trace.cons"></a><a id="4941" href="VerifiedCompilation.html#4941" class="InductiveConstructor">cons</a>
    <a id="4950" class="Symbol">:</a> <a id="4952" class="Symbol">{</a><a id="4953" href="VerifiedCompilation.html#4953" class="Bound">X</a> <a id="4955" class="Symbol">:</a> <a id="4957" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4960" class="Symbol">}</a>
    <a id="4981" class="Symbol">{</a><a id="4982" href="VerifiedCompilation.html#4982" class="Bound">tag</a> <a id="4986" class="Symbol">:</a> <a id="4988" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="5001" class="Symbol">}</a> <a id="5003" class="Symbol">{</a><a id="5004" href="VerifiedCompilation.html#5004" class="Bound">x</a> <a id="5006" href="VerifiedCompilation.html#5006" class="Bound">x&#39;</a> <a id="5009" class="Symbol">:</a> <a id="5011" href="VerifiedCompilation.html#4953" class="Bound">X</a> <a id="5013" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="5014" class="Symbol">}</a>
    <a id="5020" class="Symbol">{</a><a id="5021" href="VerifiedCompilation.html#5021" class="Bound">xs</a> <a id="5024" class="Symbol">:</a> <a id="5026" href="Utils.html#5297" class="Datatype">List</a> <a id="5031" class="Symbol">(</a><a id="5032" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="5046" href="Utils.html#5059" class="Record Operator">×</a> <a id="5048" class="Symbol">(</a><a id="5049" href="VerifiedCompilation.html#4953" class="Bound">X</a> <a id="5051" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="5052" class="Symbol">)</a> <a id="5054" href="Utils.html#5059" class="Record Operator">×</a> <a id="5056" class="Symbol">(</a><a id="5057" href="VerifiedCompilation.html#4953" class="Bound">X</a> <a id="5059" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="5060" class="Symbol">))}</a>
    <a id="5068" class="Symbol">→</a> <a id="5070" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="5085" href="VerifiedCompilation.html#4982" class="Bound">tag</a> <a id="5089" href="VerifiedCompilation.html#5004" class="Bound">x</a> <a id="5091" href="VerifiedCompilation.html#5006" class="Bound">x&#39;</a>
    <a id="5098" class="Symbol">→</a> <a id="5100" href="VerifiedCompilation.html#4801" class="Datatype">Trace</a> <a id="5106" href="VerifiedCompilation.html#5021" class="Bound">xs</a>
    <a id="5113" class="Symbol">→</a> <a id="5115" href="VerifiedCompilation.html#4801" class="Datatype">Trace</a> <a id="5121" class="Symbol">((</a><a id="5123" href="VerifiedCompilation.html#4982" class="Bound">tag</a> <a id="5127" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="5129" href="VerifiedCompilation.html#5004" class="Bound">x</a> <a id="5131" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="5133" href="VerifiedCompilation.html#5006" class="Bound">x&#39;</a><a id="5135" class="Symbol">)</a> <a id="5137" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="5139" href="VerifiedCompilation.html#5021" class="Bound">xs</a><a id="5141" class="Symbol">)</a>

<a id="isTransformation?"></a><a id="5144" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="5162" class="Symbol">:</a> <a id="5164" class="Symbol">{</a><a id="5165" href="VerifiedCompilation.html#5165" class="Bound">X</a> <a id="5167" class="Symbol">:</a> <a id="5169" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="5172" class="Symbol">}</a> <a id="5174" class="Symbol"></a> <a id="5190" class="Symbol">→</a> <a id="5192" class="Symbol">(</a><a id="5193" href="VerifiedCompilation.html#5193" class="Bound">tag</a> <a id="5197" class="Symbol">:</a> <a id="5199" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a><a id="5212" class="Symbol">)</a> <a id="5214" class="Symbol">→</a> <a id="5216" href="VerifiedCompilation.Certificate.html#1544" class="Function">MatchOrCE</a> <a id="5226" class="Symbol">{</a><a id="5227" class="Argument">X</a> <a id="5229" class="Symbol">=</a> <a id="5231" href="VerifiedCompilation.html#5165" class="Bound">X</a> <a id="5233" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="5234" class="Symbol">}</a> <a id="5236" class="Symbol">(</a><a id="5237" href="VerifiedCompilation.html#3758" class="Datatype">Transformation</a> <a id="5252" href="VerifiedCompilation.html#5193" class="Bound">tag</a><a id="5255" class="Symbol">)</a>
<a id="5257" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="5275" href="VerifiedCompilation.html#5275" class="Bound">tag</a> <a id="5279" href="VerifiedCompilation.html#5279" class="Bound">ast</a> <a id="5283" href="VerifiedCompilation.html#5283" class="Bound">ast&#39;</a> <a id="5288" class="Keyword">with</a> <a id="5293" href="VerifiedCompilation.html#5275" class="Bound">tag</a>
<a id="5297" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="5315" href="VerifiedCompilation.html#5315" class="Bound">tag</a> <a id="5319" href="VerifiedCompilation.html#5319" class="Bound">ast</a> <a id="5323" href="VerifiedCompilation.html#5323" class="Bound">ast&#39;</a> <a id="5328" class="Symbol">|</a> <a id="5330" href="VerifiedCompilation.Certificate.html#673" class="InductiveConstructor">SimplifierTag.floatDelayT</a> <a id="5356" class="Keyword">with</a> <a id="5361" href="VerifiedCompilation.UFloatDelay.html#6219" class="Function">UFlD.isFloatDelay?</a> <a id="5380" href="VerifiedCompilation.html#5319" class="Bound">ast</a> <a id="5384" href="VerifiedCompilation.html#5323" class="Bound">ast&#39;</a>
<a id="5389" class="Symbol">...</a> <a id="5393" class="Symbol">|</a> <a id="5395" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5398" href="VerifiedCompilation.html#5398" class="Bound">¬p</a> <a id="5401" href="VerifiedCompilation.html#5401" class="Bound">t</a> <a id="5403" href="VerifiedCompilation.html#5403" class="Bound">b</a> <a id="5405" href="VerifiedCompilation.html#5405" class="Bound">a</a> <a id="5407" class="Symbol">=</a> <a id="5409" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5412" class="Symbol">(λ</a> <a id="5415" class="Symbol">{</a> <a id="5417" class="Symbol">(</a><a id="5418" href="VerifiedCompilation.html#4071" class="InductiveConstructor">isFlD</a> <a id="5424" href="VerifiedCompilation.html#5424" class="Bound">x</a><a id="5425" class="Symbol">)</a> <a id="5427" class="Symbol">→</a> <a id="5429" href="VerifiedCompilation.html#5398" class="Bound">¬p</a> <a id="5432" href="VerifiedCompilation.html#5424" class="Bound">x</a><a id="5433" class="Symbol">})</a> <a id="5436" href="VerifiedCompilation.html#5401" class="Bound">t</a> <a id="5438" href="VerifiedCompilation.html#5403" class="Bound">b</a> <a id="5440" href="VerifiedCompilation.html#5405" class="Bound">a</a>
<a id="5442" class="Symbol">...</a> <a id="5446" class="Symbol">|</a> <a id="5448" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5454" href="VerifiedCompilation.html#5454" class="Bound">p</a> <a id="5456" class="Symbol">=</a> <a id="5458" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5464" class="Symbol">(</a><a id="5465" href="VerifiedCompilation.html#4071" class="InductiveConstructor">isFlD</a> <a id="5471" href="VerifiedCompilation.html#5454" class="Bound">p</a><a id="5472" class="Symbol">)</a>
<a id="5474" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="5492" href="VerifiedCompilation.html#5492" class="Bound">tag</a> <a id="5496" href="VerifiedCompilation.html#5496" class="Bound">ast</a> <a id="5500" href="VerifiedCompilation.html#5500" class="Bound">ast&#39;</a> <a id="5505" class="Symbol">|</a> <a id="5507" href="VerifiedCompilation.Certificate.html#703" class="InductiveConstructor">SimplifierTag.forceDelayT</a> <a id="5533" class="Keyword">with</a> <a id="5538" href="VerifiedCompilation.UForceDelay.html#10909" class="Function">UFD.isForceDelay?</a> <a id="5556" href="VerifiedCompilation.html#5496" class="Bound">ast</a> <a id="5560" href="VerifiedCompilation.html#5500" class="Bound">ast&#39;</a>
<a id="5565" class="Symbol">...</a> <a id="5569" class="Symbol">|</a> <a id="5571" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5574" href="VerifiedCompilation.html#5574" class="Bound">¬p</a> <a id="5577" href="VerifiedCompilation.html#5577" class="Bound">t</a> <a id="5579" href="VerifiedCompilation.html#5579" class="Bound">b</a> <a id="5581" href="VerifiedCompilation.html#5581" class="Bound">a</a> <a id="5583" class="Symbol">=</a> <a id="5585" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5588" class="Symbol">(λ</a> <a id="5591" class="Symbol">{</a> <a id="5593" class="Symbol">(</a><a id="5594" href="VerifiedCompilation.html#3940" class="InductiveConstructor">isFD</a> <a id="5599" href="VerifiedCompilation.html#5599" class="Bound">x</a><a id="5600" class="Symbol">)</a> <a id="5602" class="Symbol">→</a> <a id="5604" href="VerifiedCompilation.html#5574" class="Bound">¬p</a> <a id="5607" href="VerifiedCompilation.html#5599" class="Bound">x</a><a id="5608" class="Symbol">})</a> <a id="5611" href="VerifiedCompilation.html#5577" class="Bound">t</a> <a id="5613" href="VerifiedCompilation.html#5579" class="Bound">b</a> <a id="5615" href="VerifiedCompilation.html#5581" class="Bound">a</a>
<a id="5617" class="Symbol">...</a> <a id="5621" class="Symbol">|</a> <a id="5623" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5629" href="VerifiedCompilation.html#5629" class="Bound">p</a> <a id="5631" class="Symbol">=</a> <a id="5633" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5639" class="Symbol">(</a><a id="5640" href="VerifiedCompilation.html#3940" class="InductiveConstructor">isFD</a> <a id="5645" href="VerifiedCompilation.html#5629" class="Bound">p</a><a id="5646" class="Symbol">)</a>
<a id="5648" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="5666" href="VerifiedCompilation.html#5666" class="Bound">tag</a> <a id="5670" href="VerifiedCompilation.html#5670" class="Bound">ast</a> <a id="5674" href="VerifiedCompilation.html#5674" class="Bound">ast&#39;</a> <a id="5679" class="Symbol">|</a> <a id="5681" href="VerifiedCompilation.Certificate.html#733" class="InductiveConstructor">SimplifierTag.forceCaseDelayT</a> <a id="5711" class="Symbol">=</a> <a id="5713" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5719" href="VerifiedCompilation.html#4664" class="InductiveConstructor">forceCaseDelayNotImplemented</a>
<a id="5748" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="5766" href="VerifiedCompilation.html#5766" class="Bound">tag</a> <a id="5770" href="VerifiedCompilation.html#5770" class="Bound">ast</a> <a id="5774" href="VerifiedCompilation.html#5774" class="Bound">ast&#39;</a> <a id="5779" class="Symbol">|</a> <a id="5781" href="VerifiedCompilation.Certificate.html#767" class="InductiveConstructor">SimplifierTag.caseOfCaseT</a> <a id="5807" class="Keyword">with</a> <a id="5812" href="VerifiedCompilation.UCaseOfCase.html#6199" class="Function">UCC.isCaseOfCase?</a> <a id="5830" href="VerifiedCompilation.html#5770" class="Bound">ast</a> <a id="5834" href="VerifiedCompilation.html#5774" class="Bound">ast&#39;</a>
<a id="5839" class="Symbol">...</a> <a id="5843" class="Symbol">|</a> <a id="5845" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5848" href="VerifiedCompilation.html#5848" class="Bound">¬p</a> <a id="5851" href="VerifiedCompilation.html#5851" class="Bound">t</a> <a id="5853" href="VerifiedCompilation.html#5853" class="Bound">b</a> <a id="5855" href="VerifiedCompilation.html#5855" class="Bound">a</a> <a id="5857" class="Symbol">=</a> <a id="5859" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="5862" class="Symbol">(λ</a> <a id="5865" class="Symbol">{</a> <a id="5867" class="Symbol">(</a><a id="5868" href="VerifiedCompilation.html#3808" class="InductiveConstructor">isCoC</a> <a id="5874" href="VerifiedCompilation.html#5874" class="Bound">x</a><a id="5875" class="Symbol">)</a> <a id="5877" class="Symbol">→</a> <a id="5879" href="VerifiedCompilation.html#5848" class="Bound">¬p</a> <a id="5882" href="VerifiedCompilation.html#5874" class="Bound">x</a><a id="5883" class="Symbol">})</a> <a id="5886" href="VerifiedCompilation.html#5851" class="Bound">t</a> <a id="5888" href="VerifiedCompilation.html#5853" class="Bound">b</a> <a id="5890" href="VerifiedCompilation.html#5855" class="Bound">a</a>
<a id="5892" class="Symbol">...</a> <a id="5896" class="Symbol">|</a> <a id="5898" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5904" href="VerifiedCompilation.html#5904" class="Bound">p</a> <a id="5906" class="Symbol">=</a> <a id="5908" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="5914" class="Symbol">(</a><a id="5915" href="VerifiedCompilation.html#3808" class="InductiveConstructor">isCoC</a> <a id="5921" href="VerifiedCompilation.html#5904" class="Bound">p</a><a id="5922" class="Symbol">)</a>
<a id="5924" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="5942" href="VerifiedCompilation.html#5942" class="Bound">tag</a> <a id="5946" href="VerifiedCompilation.html#5946" class="Bound">ast</a> <a id="5950" href="VerifiedCompilation.html#5950" class="Bound">ast&#39;</a> <a id="5955" class="Symbol">|</a> <a id="5957" href="VerifiedCompilation.Certificate.html#797" class="InductiveConstructor">SimplifierTag.caseReduceT</a> <a id="5983" class="Keyword">with</a> <a id="5988" href="VerifiedCompilation.UCaseReduce.html#1996" class="Function">UCR.isCaseReduce?</a> <a id="6006" href="VerifiedCompilation.html#5946" class="Bound">ast</a> <a id="6010" href="VerifiedCompilation.html#5950" class="Bound">ast&#39;</a>
<a id="6015" class="Symbol">...</a> <a id="6019" class="Symbol">|</a> <a id="6021" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6024" href="VerifiedCompilation.html#6024" class="Bound">¬p</a> <a id="6027" href="VerifiedCompilation.html#6027" class="Bound">t</a> <a id="6029" href="VerifiedCompilation.html#6029" class="Bound">b</a> <a id="6031" href="VerifiedCompilation.html#6031" class="Bound">a</a> <a id="6033" class="Symbol">=</a> <a id="6035" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6038" class="Symbol">(λ</a> <a id="6041" class="Symbol">{</a> <a id="6043" class="Symbol">(</a><a id="6044" href="VerifiedCompilation.html#4524" class="InductiveConstructor">isCaseReduce</a> <a id="6057" href="VerifiedCompilation.html#6057" class="Bound">x</a><a id="6058" class="Symbol">)</a> <a id="6060" class="Symbol">→</a> <a id="6062" href="VerifiedCompilation.html#6024" class="Bound">¬p</a> <a id="6065" href="VerifiedCompilation.html#6057" class="Bound">x</a><a id="6066" class="Symbol">})</a> <a id="6069" href="VerifiedCompilation.html#6027" class="Bound">t</a> <a id="6071" href="VerifiedCompilation.html#6029" class="Bound">b</a> <a id="6073" href="VerifiedCompilation.html#6031" class="Bound">a</a>
<a id="6075" class="Symbol">...</a> <a id="6079" class="Symbol">|</a> <a id="6081" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6087" href="VerifiedCompilation.html#6087" class="Bound">p</a> <a id="6089" class="Symbol">=</a> <a id="6091" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6097" class="Symbol">(</a><a id="6098" href="VerifiedCompilation.html#4524" class="InductiveConstructor">isCaseReduce</a> <a id="6111" href="VerifiedCompilation.html#6087" class="Bound">p</a><a id="6112" class="Symbol">)</a>
<a id="6114" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="6132" href="VerifiedCompilation.html#6132" class="Bound">tag</a> <a id="6136" href="VerifiedCompilation.html#6136" class="Bound">ast</a> <a id="6140" href="VerifiedCompilation.html#6140" class="Bound">ast&#39;</a> <a id="6145" class="Symbol">|</a> <a id="6147" href="VerifiedCompilation.Certificate.html#827" class="InductiveConstructor">SimplifierTag.inlineT</a> <a id="6169" class="Symbol">=</a> <a id="6171" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6177" href="VerifiedCompilation.html#4407" class="InductiveConstructor">inlineNotImplemented</a>
<a id="6198" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="6216" href="VerifiedCompilation.html#6216" class="Bound">tag</a> <a id="6220" href="VerifiedCompilation.html#6220" class="Bound">ast</a> <a id="6224" href="VerifiedCompilation.html#6224" class="Bound">ast&#39;</a> <a id="6229" class="Symbol">|</a> <a id="6231" href="VerifiedCompilation.Certificate.html#853" class="InductiveConstructor">SimplifierTag.cseT</a> <a id="6250" class="Keyword">with</a> <a id="6255" href="VerifiedCompilation.UCSE.html#2036" class="Function">UCSE.isUntypedCSE?</a> <a id="6274" href="VerifiedCompilation.html#6220" class="Bound">ast</a> <a id="6278" href="VerifiedCompilation.html#6224" class="Bound">ast&#39;</a>
<a id="6283" class="Symbol">...</a> <a id="6287" class="Symbol">|</a> <a id="6289" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6292" href="VerifiedCompilation.html#6292" class="Bound">¬p</a> <a id="6295" href="VerifiedCompilation.html#6295" class="Bound">t</a> <a id="6297" href="VerifiedCompilation.html#6297" class="Bound">b</a> <a id="6299" href="VerifiedCompilation.html#6299" class="Bound">a</a> <a id="6301" class="Symbol">=</a> <a id="6303" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6306" class="Symbol">(λ</a> <a id="6309" class="Symbol">{</a> <a id="6311" class="Symbol">(</a><a id="6312" href="VerifiedCompilation.html#4204" class="InductiveConstructor">isCSE</a> <a id="6318" href="VerifiedCompilation.html#6318" class="Bound">x</a><a id="6319" class="Symbol">)</a> <a id="6321" class="Symbol">→</a> <a id="6323" href="VerifiedCompilation.html#6292" class="Bound">¬p</a> <a id="6326" href="VerifiedCompilation.html#6318" class="Bound">x</a><a id="6327" class="Symbol">})</a> <a id="6330" href="VerifiedCompilation.html#6295" class="Bound">t</a> <a id="6332" href="VerifiedCompilation.html#6297" class="Bound">b</a> <a id="6334" href="VerifiedCompilation.html#6299" class="Bound">a</a>
<a id="6336" class="Symbol">...</a> <a id="6340" class="Symbol">|</a> <a id="6342" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6348" href="VerifiedCompilation.html#6348" class="Bound">p</a> <a id="6350" class="Symbol">=</a> <a id="6352" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6358" class="Symbol">(</a><a id="6359" href="VerifiedCompilation.html#4204" class="InductiveConstructor">isCSE</a> <a id="6365" href="VerifiedCompilation.html#6348" class="Bound">p</a><a id="6366" class="Symbol">)</a>

<a id="isTrace?"></a><a id="6369" href="VerifiedCompilation.html#6369" class="Function">isTrace?</a> <a id="6378" class="Symbol">:</a> <a id="6380" class="Symbol">{</a><a id="6381" href="VerifiedCompilation.html#6381" class="Bound">X</a> <a id="6383" class="Symbol">:</a> <a id="6385" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="6388" class="Symbol">}</a> <a id="6390" class="Symbol"></a> <a id="6406" class="Symbol">→</a> <a id="6408" class="Symbol">(</a><a id="6409" href="VerifiedCompilation.html#6409" class="Bound">t</a> <a id="6411" class="Symbol">:</a> <a id="6413" href="Utils.html#5297" class="Datatype">List</a> <a id="6418" class="Symbol">(</a><a id="6419" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="6433" href="Utils.html#5059" class="Record Operator">×</a> <a id="6435" class="Symbol">(</a><a id="6436" href="VerifiedCompilation.html#6381" class="Bound">X</a> <a id="6438" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="6439" class="Symbol">)</a> <a id="6441" href="Utils.html#5059" class="Record Operator">×</a> <a id="6443" class="Symbol">(</a><a id="6444" href="VerifiedCompilation.html#6381" class="Bound">X</a> <a id="6446" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="6447" class="Symbol">)))</a> <a id="6451" class="Symbol">→</a> <a id="6453" href="VerifiedCompilation.Certificate.html#1112" class="Datatype">ProofOrCE</a> <a id="6463" class="Symbol">(</a><a id="6464" href="VerifiedCompilation.html#4801" class="Datatype">Trace</a> <a id="6470" class="Symbol">{</a><a id="6471" href="VerifiedCompilation.html#6381" class="Bound">X</a><a id="6472" class="Symbol">}</a> <a id="6474" href="VerifiedCompilation.html#6409" class="Bound">t</a><a id="6475" class="Symbol">)</a>
<a id="6477" href="VerifiedCompilation.html#6369" class="Function">isTrace?</a> <a id="6486" href="Utils.html#5326" class="InductiveConstructor">[]</a> <a id="6489" class="Symbol">=</a> <a id="6491" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6497" href="VerifiedCompilation.html#4891" class="InductiveConstructor">empty</a>
<a id="6503" href="VerifiedCompilation.html#6369" class="Function">isTrace?</a> <a id="6512" class="Symbol">{</a><a id="6513" href="VerifiedCompilation.html#6513" class="Bound">X</a><a id="6514" class="Symbol">}</a> <a id="6516" class="Symbol">((</a><a id="6518" href="VerifiedCompilation.html#6518" class="Bound">tag</a> <a id="6522" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="6524" href="VerifiedCompilation.html#6524" class="Bound">x₁</a> <a id="6527" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="6529" href="VerifiedCompilation.html#6529" class="Bound">x₂</a><a id="6531" class="Symbol">)</a> <a id="6533" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="6535" href="VerifiedCompilation.html#6535" class="Bound">xs</a><a id="6537" class="Symbol">)</a> <a id="6539" class="Keyword">with</a> <a id="6544" href="VerifiedCompilation.html#6369" class="Function">isTrace?</a> <a id="6553" href="VerifiedCompilation.html#6535" class="Bound">xs</a>
<a id="6556" class="Symbol">...</a> <a id="6560" class="Symbol">|</a> <a id="6562" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6565" href="VerifiedCompilation.html#6565" class="Bound">¬p</a> <a id="6568" href="VerifiedCompilation.html#6568" class="Bound">t</a> <a id="6570" href="VerifiedCompilation.html#6570" class="Bound">b</a> <a id="6572" href="VerifiedCompilation.html#6572" class="Bound">a</a> <a id="6574" class="Symbol">=</a> <a id="6576" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6579" class="Symbol">(λ</a> <a id="6582" class="Symbol">{</a> <a id="6584" class="Symbol">(</a><a id="6585" href="VerifiedCompilation.html#4941" class="InductiveConstructor">cons</a> <a id="6590" href="VerifiedCompilation.html#6590" class="Bound">x</a> <a id="6592" href="VerifiedCompilation.html#6592" class="Bound">xx</a><a id="6594" class="Symbol">)</a> <a id="6596" class="Symbol">→</a> <a id="6598" href="VerifiedCompilation.html#6565" class="Bound">¬p</a> <a id="6601" href="VerifiedCompilation.html#6592" class="Bound">xx</a><a id="6603" class="Symbol">})</a> <a id="6606" href="VerifiedCompilation.html#6568" class="Bound">t</a> <a id="6608" href="VerifiedCompilation.html#6570" class="Bound">b</a> <a id="6610" href="VerifiedCompilation.html#6572" class="Bound">a</a>
<a id="6612" class="Symbol">...</a> <a id="6616" class="Symbol">|</a> <a id="6618" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6624" href="VerifiedCompilation.html#6624" class="Bound">pₜ</a> <a id="6627" class="Keyword">with</a> <a id="6632" href="VerifiedCompilation.html#5144" class="Function">isTransformation?</a> <a id="6650" class="Symbol">{</a><a id="6651" class="Bound">X</a><a id="6652" class="Symbol">}</a> <a id="6654" class="Bound">tag</a> <a id="6658" class="Bound">x₁</a> <a id="6661" class="Bound">x₂</a>
<a id="6664" class="Symbol">...</a>                 <a id="6684" class="Symbol">|</a> <a id="6686" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6689" href="VerifiedCompilation.html#6689" class="Bound">¬p</a> <a id="6692" href="VerifiedCompilation.html#6692" class="Bound">t</a> <a id="6694" href="VerifiedCompilation.html#6694" class="Bound">b</a> <a id="6696" href="VerifiedCompilation.html#6696" class="Bound">a</a> <a id="6698" class="Symbol">=</a> <a id="6700" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="6703" class="Symbol">(λ</a> <a id="6706" class="Symbol">{</a> <a id="6708" class="Symbol">(</a><a id="6709" href="VerifiedCompilation.html#4941" class="InductiveConstructor">cons</a> <a id="6714" href="VerifiedCompilation.html#6714" class="Bound">x</a> <a id="6716" href="VerifiedCompilation.html#6716" class="Bound">xx</a><a id="6718" class="Symbol">)</a> <a id="6720" class="Symbol">→</a> <a id="6722" href="VerifiedCompilation.html#6689" class="Bound">¬p</a> <a id="6725" href="VerifiedCompilation.html#6714" class="Bound">x</a><a id="6726" class="Symbol">})</a> <a id="6729" href="VerifiedCompilation.html#6692" class="Bound">t</a> <a id="6731" href="VerifiedCompilation.html#6694" class="Bound">b</a> <a id="6733" href="VerifiedCompilation.html#6696" class="Bound">a</a>
<a id="6735" class="Symbol">...</a>                 <a id="6755" class="Symbol">|</a> <a id="6757" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6763" href="VerifiedCompilation.html#6763" class="Bound">pₑ</a> <a id="6766" class="Symbol">=</a> <a id="6768" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="6774" class="Symbol">(</a><a id="6775" href="VerifiedCompilation.html#4941" class="InductiveConstructor">cons</a> <a id="6780" href="VerifiedCompilation.html#6763" class="Bound">pₑ</a> <a id="6783" class="Bound">pₜ</a><a id="6785" class="Symbol">)</a>


</pre>

<h2 id="the-certification-function">The certification function</h2>

<p>The <code class="language-plaintext highlighter-rouge">runCertifier</code> function is the top-level function which can be called by the compiler.</p>

<pre class="Agda">
<a id="6923" class="Symbol">{-#</a> <a id="6927" class="Keyword">FOREIGN</a> <a id="6935" class="Pragma">GHC</a> <a id="6939" class="Pragma">import</a> <a id="6946" class="Pragma">qualified</a> <a id="6956" class="Pragma">Data.Text.IO</a> <a id="6969" class="Pragma">as</a> <a id="6972" class="Pragma">TextIO</a> <a id="6979" class="Symbol">#-}</a>
<a id="6983" class="Symbol">{-#</a> <a id="6987" class="Keyword">FOREIGN</a> <a id="6995" class="Pragma">GHC</a> <a id="6999" class="Pragma">import</a> <a id="7006" class="Pragma">qualified</a> <a id="7016" class="Pragma">System.IO</a> <a id="7026" class="Pragma">as</a> <a id="7029" class="Pragma">IO</a> <a id="7032" class="Symbol">#-}</a>
<a id="7036" class="Symbol">{-#</a> <a id="7040" class="Keyword">FOREIGN</a> <a id="7048" class="Pragma">GHC</a> <a id="7052" class="Pragma">import</a> <a id="7059" class="Pragma">qualified</a> <a id="7069" class="Pragma">Data.Text</a> <a id="7079" class="Pragma">as</a> <a id="7082" class="Pragma">Text</a> <a id="7087" class="Symbol">#-}</a>
<a id="7091" class="Symbol">{-#</a> <a id="7095" class="Keyword">FOREIGN</a> <a id="7103" class="Pragma">GHC</a> <a id="7107" class="Pragma">import</a> <a id="7114" class="Pragma">PlutusCore.Compiler.Types</a> <a id="7140" class="Symbol">#-}</a>

<a id="7145" class="Keyword">postulate</a> <a id="FileHandle"></a><a id="7155" href="VerifiedCompilation.html#7155" class="Postulate">FileHandle</a> <a id="7166" class="Symbol">:</a> <a id="7168" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="7172" class="Symbol">{-#</a> <a id="7176" class="Keyword">COMPILE</a> <a id="7184" class="Keyword">GHC</a> <a id="7188" href="VerifiedCompilation.html#7155" class="Postulate">FileHandle</a> <a id="7199" class="Pragma">=</a> <a id="7201" class="Pragma">type</a> <a id="7206" class="Pragma">IO.Handle</a> <a id="7216" class="Symbol">#-}</a>

<a id="7221" class="Keyword">postulate</a>
  <a id="writeFile"></a><a id="7233" href="VerifiedCompilation.html#7233" class="Postulate">writeFile</a> <a id="7243" class="Symbol">:</a> <a id="7245" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7252" class="Symbol">→</a> <a id="7254" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7261" class="Symbol">→</a> <a id="7263" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7266" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="stderr"></a><a id="7270" href="VerifiedCompilation.html#7270" class="Postulate">stderr</a> <a id="7277" class="Symbol">:</a> <a id="7279" href="VerifiedCompilation.html#7155" class="Postulate">FileHandle</a>
  <a id="hPutStrLn"></a><a id="7292" href="VerifiedCompilation.html#7292" class="Postulate">hPutStrLn</a> <a id="7302" class="Symbol">:</a> <a id="7304" href="VerifiedCompilation.html#7155" class="Postulate">FileHandle</a> <a id="7315" class="Symbol">→</a> <a id="7317" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7324" class="Symbol">→</a> <a id="7326" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7329" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="putStrLn"></a><a id="7333" href="VerifiedCompilation.html#7333" class="Postulate">putStrLn</a> <a id="7342" class="Symbol">:</a> <a id="7344" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7351" class="Symbol">→</a> <a id="7353" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="7356" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="7359" class="Symbol">{-#</a> <a id="7363" class="Keyword">COMPILE</a> <a id="7371" class="Keyword">GHC</a> <a id="7375" href="VerifiedCompilation.html#7233" class="Postulate">writeFile</a> <a id="7385" class="Pragma">=</a> <a id="7387" class="Pragma">\f</a> <a id="7390" class="Pragma">-&gt;</a> <a id="7393" class="Pragma">TextIO.writeFile</a> <a id="7410" class="Pragma">(Text.unpack</a> <a id="7423" class="Pragma">f)</a> <a id="7426" class="Symbol">#-}</a>
<a id="7430" class="Symbol">{-#</a> <a id="7434" class="Keyword">COMPILE</a> <a id="7442" class="Keyword">GHC</a> <a id="7446" href="VerifiedCompilation.html#7270" class="Postulate">stderr</a> <a id="7453" class="Pragma">=</a> <a id="7455" class="Pragma">IO.stderr</a> <a id="7465" class="Symbol">#-}</a>
<a id="7469" class="Symbol">{-#</a> <a id="7473" class="Keyword">COMPILE</a> <a id="7481" class="Keyword">GHC</a> <a id="7485" href="VerifiedCompilation.html#7292" class="Postulate">hPutStrLn</a> <a id="7495" class="Pragma">=</a> <a id="7497" class="Pragma">TextIO.hPutStr</a> <a id="7512" class="Symbol">#-}</a>
<a id="7516" class="Symbol">{-#</a> <a id="7520" class="Keyword">COMPILE</a> <a id="7528" class="Keyword">GHC</a> <a id="7532" href="VerifiedCompilation.html#7333" class="Postulate">putStrLn</a> <a id="7541" class="Pragma">=</a> <a id="7543" class="Pragma">TextIO.putStrLn</a> <a id="7559" class="Symbol">#-}</a>

<a id="buildPairs"></a><a id="7564" href="VerifiedCompilation.html#7564" class="Function">buildPairs</a> <a id="7575" class="Symbol">:</a> <a id="7577" class="Symbol">{</a><a id="7578" href="VerifiedCompilation.html#7578" class="Bound">X</a> <a id="7580" class="Symbol">:</a> <a id="7582" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7585" class="Symbol">}</a> <a id="7587" class="Symbol">→</a> <a id="7589" href="Utils.html#5297" class="Datatype">List</a> <a id="7594" class="Symbol">(</a><a id="7595" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7601" href="VerifiedCompilation.html#7578" class="Bound">X</a> <a id="7603" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="7604" class="Symbol">)</a> <a id="7606" class="Symbol">-&gt;</a> <a id="7609" href="Utils.html#5297" class="Datatype">List</a> <a id="7614" class="Symbol">((</a><a id="7616" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7622" href="VerifiedCompilation.html#7578" class="Bound">X</a> <a id="7624" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="7625" class="Symbol">)</a> <a id="7627" href="Utils.html#5059" class="Record Operator">×</a> <a id="7629" class="Symbol">(</a><a id="7630" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7636" href="VerifiedCompilation.html#7578" class="Bound">X</a> <a id="7638" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="7639" class="Symbol">))</a>
<a id="7642" href="VerifiedCompilation.html#7564" class="Function">buildPairs</a> <a id="7653" href="Utils.html#5326" class="InductiveConstructor">[]</a> <a id="7656" class="Symbol">=</a> <a id="7658" href="Utils.html#5326" class="InductiveConstructor">[]</a>
<a id="7661" href="VerifiedCompilation.html#7564" class="Function">buildPairs</a> <a id="7672" class="Symbol">(</a><a id="7673" href="VerifiedCompilation.html#7673" class="Bound">x</a> <a id="7675" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7677" href="Utils.html#5326" class="InductiveConstructor">[]</a><a id="7679" class="Symbol">)</a> <a id="7681" class="Symbol">=</a> <a id="7683" class="Symbol">(</a><a id="7684" href="VerifiedCompilation.html#7673" class="Bound">x</a> <a id="7686" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7688" href="VerifiedCompilation.html#7673" class="Bound">x</a><a id="7689" class="Symbol">)</a> <a id="7691" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7693" href="Utils.html#5326" class="InductiveConstructor">[]</a>
<a id="7696" href="VerifiedCompilation.html#7564" class="Function">buildPairs</a> <a id="7707" class="Symbol">(</a><a id="7708" href="VerifiedCompilation.html#7708" class="Bound">x₁</a> <a id="7711" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7713" class="Symbol">(</a><a id="7714" href="VerifiedCompilation.html#7714" class="Bound">x₂</a> <a id="7717" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7719" href="VerifiedCompilation.html#7719" class="Bound">xs</a><a id="7721" class="Symbol">))</a> <a id="7724" class="Symbol">=</a> <a id="7726" class="Symbol">(</a><a id="7727" href="VerifiedCompilation.html#7708" class="Bound">x₁</a> <a id="7730" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7732" href="VerifiedCompilation.html#7714" class="Bound">x₂</a><a id="7734" class="Symbol">)</a> <a id="7736" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7738" href="VerifiedCompilation.html#7564" class="Function">buildPairs</a> <a id="7749" class="Symbol">(</a><a id="7750" href="VerifiedCompilation.html#7714" class="Bound">x₂</a> <a id="7753" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7755" href="VerifiedCompilation.html#7719" class="Bound">xs</a><a id="7757" class="Symbol">)</a>

<a id="traverseEitherList"></a><a id="7760" href="VerifiedCompilation.html#7760" class="Function">traverseEitherList</a> <a id="7779" class="Symbol">:</a> <a id="7781" class="Symbol">{</a><a id="7782" href="VerifiedCompilation.html#7782" class="Bound">A</a> <a id="7784" href="VerifiedCompilation.html#7784" class="Bound">B</a> <a id="7786" href="VerifiedCompilation.html#7786" class="Bound">E</a> <a id="7788" class="Symbol">:</a> <a id="7790" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="7793" class="Symbol">}</a> <a id="7795" class="Symbol">→</a> <a id="7797" class="Symbol">(</a><a id="7798" href="VerifiedCompilation.html#7782" class="Bound">A</a> <a id="7800" class="Symbol">→</a> <a id="7802" href="Utils.html#1129" class="Datatype">Either</a> <a id="7809" href="VerifiedCompilation.html#7786" class="Bound">E</a> <a id="7811" href="VerifiedCompilation.html#7784" class="Bound">B</a><a id="7812" class="Symbol">)</a> <a id="7814" class="Symbol">→</a> <a id="7816" href="Utils.html#5297" class="Datatype">List</a> <a id="7821" class="Symbol">(</a><a id="7822" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7836" href="Utils.html#5059" class="Record Operator">×</a> <a id="7838" href="VerifiedCompilation.html#7782" class="Bound">A</a> <a id="7840" href="Utils.html#5059" class="Record Operator">×</a> <a id="7842" href="VerifiedCompilation.html#7782" class="Bound">A</a><a id="7843" class="Symbol">)</a> <a id="7845" class="Symbol">→</a> <a id="7847" href="Utils.html#1129" class="Datatype">Either</a> <a id="7854" href="VerifiedCompilation.html#7786" class="Bound">E</a> <a id="7856" class="Symbol">(</a><a id="7857" href="Utils.html#5297" class="Datatype">List</a> <a id="7862" class="Symbol">(</a><a id="7863" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="7877" href="Utils.html#5059" class="Record Operator">×</a> <a id="7879" href="VerifiedCompilation.html#7784" class="Bound">B</a> <a id="7881" href="Utils.html#5059" class="Record Operator">×</a> <a id="7883" href="VerifiedCompilation.html#7784" class="Bound">B</a><a id="7884" class="Symbol">))</a>
<a id="7887" href="VerifiedCompilation.html#7760" class="Function">traverseEitherList</a> <a id="7906" class="Symbol">_</a> <a id="7908" href="Utils.html#5326" class="InductiveConstructor">[]</a> <a id="7911" class="Symbol">=</a> <a id="7913" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="7918" href="Utils.html#5326" class="InductiveConstructor">[]</a>
<a id="7921" href="VerifiedCompilation.html#7760" class="Function">traverseEitherList</a> <a id="7940" href="VerifiedCompilation.html#7940" class="Bound">f</a> <a id="7942" class="Symbol">((</a><a id="7944" href="VerifiedCompilation.html#7944" class="Bound">tag</a> <a id="7948" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7950" href="VerifiedCompilation.html#7950" class="Bound">before</a> <a id="7957" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="7959" href="VerifiedCompilation.html#7959" class="Bound">after</a><a id="7964" class="Symbol">)</a> <a id="7966" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="7968" href="VerifiedCompilation.html#7968" class="Bound">xs</a><a id="7970" class="Symbol">)</a> <a id="7972" class="Keyword">with</a> <a id="7977" href="VerifiedCompilation.html#7940" class="Bound">f</a> <a id="7979" href="VerifiedCompilation.html#7950" class="Bound">before</a>
<a id="7986" class="Symbol">...</a> <a id="7990" class="Symbol">|</a> <a id="7992" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="7997" href="VerifiedCompilation.html#7997" class="Bound">e</a> <a id="7999" class="Symbol">=</a> <a id="8001" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="8006" href="VerifiedCompilation.html#7997" class="Bound">e</a>
<a id="8008" class="Symbol">...</a> <a id="8012" class="Symbol">|</a> <a id="8014" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="8019" href="VerifiedCompilation.html#8019" class="Bound">b</a> <a id="8021" class="Keyword">with</a> <a id="8026" class="Bound">f</a> <a id="8028" class="Bound">after</a>
<a id="8034" class="Symbol">...</a> <a id="8038" class="Symbol">|</a> <a id="8040" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="8045" href="VerifiedCompilation.html#8045" class="Bound">e</a> <a id="8047" class="Symbol">=</a> <a id="8049" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="8054" href="VerifiedCompilation.html#8045" class="Bound">e</a>
<a id="8056" class="Symbol">...</a> <a id="8060" class="Symbol">|</a> <a id="8062" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="8067" href="VerifiedCompilation.html#8067" class="Bound">a</a> <a id="8069" class="Keyword">with</a> <a id="8074" href="VerifiedCompilation.html#7760" class="Function">traverseEitherList</a> <a id="8093" class="Bound">f</a> <a id="8095" class="Bound">xs</a>
<a id="8098" class="Symbol">...</a> <a id="8102" class="Symbol">|</a> <a id="8104" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="8109" href="VerifiedCompilation.html#8109" class="Bound">e</a> <a id="8111" class="Symbol">=</a> <a id="8113" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="8118" href="VerifiedCompilation.html#8109" class="Bound">e</a>
<a id="8120" class="Symbol">...</a> <a id="8124" class="Symbol">|</a> <a id="8126" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="8131" href="VerifiedCompilation.html#8131" class="Bound">xs&#39;</a> <a id="8135" class="Symbol">=</a> <a id="8137" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="8142" class="Symbol">(((</a><a id="8145" class="Bound">tag</a> <a id="8149" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="8151" class="Bound">b</a> <a id="8153" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="8155" class="Bound">a</a><a id="8156" class="Symbol">))</a> <a id="8159" href="Utils.html#5341" class="InductiveConstructor Operator">∷</a> <a id="8161" href="VerifiedCompilation.html#8131" class="Bound">xs&#39;</a><a id="8164" class="Symbol">)</a>

<a id="8167" class="Keyword">data</a> <a id="Cert"></a><a id="8172" href="VerifiedCompilation.html#8172" class="Datatype">Cert</a> <a id="8177" class="Symbol">:</a> <a id="8179" href="Agda.Primitive.html#388" class="Primitive">Set₂</a> <a id="8184" class="Keyword">where</a>
  <a id="Cert.cert"></a><a id="8192" href="VerifiedCompilation.html#8192" class="InductiveConstructor">cert</a>
    <a id="8201" class="Symbol">:</a> <a id="8203" class="Symbol">{</a><a id="8204" href="VerifiedCompilation.html#8204" class="Bound">X</a> <a id="8206" class="Symbol">:</a> <a id="8208" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="8211" class="Symbol">}</a> <a id="8213" class="Symbol">{</a><a id="8214" href="VerifiedCompilation.html#8214" class="Bound">result</a> <a id="8221" class="Symbol">:</a> <a id="8223" href="Utils.html#5297" class="Datatype">List</a> <a id="8228" class="Symbol">(</a><a id="8229" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8243" href="Utils.html#5059" class="Record Operator">×</a> <a id="8245" class="Symbol">(</a><a id="8246" href="VerifiedCompilation.html#8204" class="Bound">X</a> <a id="8248" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="8249" class="Symbol">)</a> <a id="8251" href="Utils.html#5059" class="Record Operator">×</a> <a id="8253" class="Symbol">(</a><a id="8254" href="VerifiedCompilation.html#8204" class="Bound">X</a> <a id="8256" href="Untyped.html#1677" class="Datatype Operator">⊢</a><a id="8257" class="Symbol">))}</a> <a id="8261" class="Symbol"></a>
    <a id="8281" class="Symbol">→</a> <a id="8283" href="VerifiedCompilation.Certificate.html#1112" class="Datatype">ProofOrCE</a> <a id="8293" class="Symbol">(</a><a id="8294" href="VerifiedCompilation.html#4801" class="Datatype">Trace</a> <a id="8300" class="Symbol">{</a><a id="8301" href="VerifiedCompilation.html#8204" class="Bound">X</a><a id="8302" class="Symbol">}</a> <a id="8304" href="VerifiedCompilation.html#8214" class="Bound">result</a><a id="8310" class="Symbol">)</a>
    <a id="8316" class="Symbol">→</a> <a id="8318" href="VerifiedCompilation.html#8172" class="Datatype">Cert</a>

<a id="runCertifier"></a><a id="8324" href="VerifiedCompilation.html#8324" class="Function">runCertifier</a> <a id="8337" class="Symbol">:</a> <a id="8339" href="Utils.html#5297" class="Datatype">List</a> <a id="8344" class="Symbol">(</a><a id="8345" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8359" href="Utils.html#5059" class="Record Operator">×</a> <a id="8361" href="RawU.html#6377" class="Datatype">Untyped</a> <a id="8369" href="Utils.html#5059" class="Record Operator">×</a> <a id="8371" href="RawU.html#6377" class="Datatype">Untyped</a><a id="8378" class="Symbol">)</a> <a id="8380" class="Symbol">→</a> <a id="8382" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8388" href="VerifiedCompilation.html#8172" class="Datatype">Cert</a>
<a id="8393" href="VerifiedCompilation.html#8324" class="Function">runCertifier</a> <a id="8406" href="VerifiedCompilation.html#8406" class="Bound">rawInput</a> <a id="8415" class="Keyword">with</a> <a id="8420" href="VerifiedCompilation.html#7760" class="Function">traverseEitherList</a> <a id="8439" class="Symbol">(</a><a id="8440" href="Untyped.html#7365" class="Function">toWellScoped</a> <a id="8453" class="Symbol">{</a><a id="8454" href="Data.Empty.html#914" class="Function">⊥</a><a id="8455" class="Symbol">})</a> <a id="8458" href="VerifiedCompilation.html#8406" class="Bound">rawInput</a>
<a id="8467" class="Symbol">...</a> <a id="8471" class="Symbol">|</a> <a id="8473" href="Utils.html#1162" class="InductiveConstructor">inj₁</a> <a id="8478" class="Symbol">_</a> <a id="8480" class="Symbol">=</a> <a id="8482" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8490" class="Symbol">...</a> <a id="8494" class="Symbol">|</a> <a id="8496" href="Utils.html#1186" class="InductiveConstructor">inj₂</a> <a id="8501" href="VerifiedCompilation.html#8501" class="Bound">inputTrace</a> <a id="8512" class="Symbol">=</a> <a id="8514" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8519" class="Symbol">(</a><a id="8520" href="VerifiedCompilation.html#8192" class="InductiveConstructor">cert</a> <a id="8525" class="Symbol">(</a><a id="8526" href="VerifiedCompilation.html#6369" class="Function">isTrace?</a> <a id="8535" href="VerifiedCompilation.html#8501" class="Bound">inputTrace</a><a id="8545" class="Symbol">))</a>

<a id="getCE"></a><a id="8549" href="VerifiedCompilation.html#8549" class="Function">getCE</a> <a id="8555" class="Symbol">:</a> <a id="8557" class="Symbol">{</a><a id="8558" href="VerifiedCompilation.html#8558" class="Bound">A</a> <a id="8560" href="VerifiedCompilation.html#8560" class="Bound">B</a> <a id="8562" class="Symbol">:</a> <a id="8564" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="8567" class="Symbol">}</a> <a id="8569" class="Symbol">→</a> <a id="8571" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8577" href="VerifiedCompilation.html#8172" class="Datatype">Cert</a> <a id="8582" class="Symbol">→</a> <a id="8584" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8590" class="Symbol">(</a><a id="8591" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="8593" class="Symbol">_</a> <a id="8595" class="Symbol">\</a><a id="8596" href="VerifiedCompilation.html#8596" class="Bound">A</a> <a id="8598" class="Symbol">→</a> <a id="8600" class="Symbol">(</a><a id="8601" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="8603" class="Symbol">_</a> <a id="8605" class="Symbol">\</a><a id="8606" href="VerifiedCompilation.html#8606" class="Bound">B</a> <a id="8608" class="Symbol">→</a> <a id="8610" class="Symbol">(</a><a id="8611" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="8625" href="Utils.html#5059" class="Record Operator">×</a> <a id="8627" href="VerifiedCompilation.html#8596" class="Bound">A</a> <a id="8629" href="Utils.html#5059" class="Record Operator">×</a> <a id="8631" href="VerifiedCompilation.html#8606" class="Bound">B</a><a id="8632" class="Symbol">)))</a>
<a id="8636" href="VerifiedCompilation.html#8549" class="Function">getCE</a> <a id="8642" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8650" class="Symbol">=</a> <a id="8652" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8660" href="VerifiedCompilation.html#8549" class="Function">getCE</a> <a id="8666" class="Symbol">(</a><a id="8667" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8672" class="Symbol">(</a><a id="8673" href="VerifiedCompilation.html#8192" class="InductiveConstructor">cert</a> <a id="8678" class="Symbol">(</a><a id="8679" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="8685" class="Symbol">_)))</a> <a id="8690" class="Symbol">=</a> <a id="8692" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="8700" href="VerifiedCompilation.html#8549" class="Function">getCE</a> <a id="8706" class="Symbol">(</a><a id="8707" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8712" class="Symbol">(</a><a id="8713" href="VerifiedCompilation.html#8192" class="InductiveConstructor">cert</a> <a id="8718" class="Symbol">(</a><a id="8719" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="8722" class="Symbol">_</a> <a id="8724" class="Symbol">{</a><a id="8725" href="VerifiedCompilation.html#8725" class="Bound">X</a><a id="8726" class="Symbol">}</a> <a id="8728" class="Symbol">{</a><a id="8729" href="VerifiedCompilation.html#8729" class="Bound">X&#39;</a><a id="8731" class="Symbol">}</a> <a id="8733" href="VerifiedCompilation.html#8733" class="Bound">t</a> <a id="8735" href="VerifiedCompilation.html#8735" class="Bound">b</a> <a id="8737" href="VerifiedCompilation.html#8737" class="Bound">a</a><a id="8738" class="Symbol">)))</a> <a id="8742" class="Symbol">=</a> <a id="8744" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8749" class="Symbol">(</a><a id="8750" href="VerifiedCompilation.html#8725" class="Bound">X</a> <a id="8752" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8754" href="VerifiedCompilation.html#8729" class="Bound">X&#39;</a> <a id="8757" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8759" href="VerifiedCompilation.html#8733" class="Bound">t</a> <a id="8761" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="8763" href="VerifiedCompilation.html#8735" class="Bound">b</a> <a id="8765" href="Utils.html#5103" class="InductiveConstructor Operator">,</a> <a id="8767" href="VerifiedCompilation.html#8737" class="Bound">a</a><a id="8768" class="Symbol">)</a>

<a id="8771" class="Keyword">open</a> <a id="8776" class="Keyword">import</a> <a id="8783" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="8798" class="Keyword">using</a> <a id="8804" class="Symbol">(</a><a id="8805" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="8809" class="Symbol">;</a> <a id="8811" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="8816" class="Symbol">;</a> <a id="8818" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="8822" class="Symbol">)</a>
<a id="8824" class="Keyword">open</a> <a id="8829" class="Keyword">import</a> <a id="8836" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a> <a id="8858" class="Keyword">using</a> <a id="8864" class="Symbol">(</a><a id="8865" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="8868" class="Symbol">;</a> <a id="8870" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="8874" class="Symbol">)</a>

<a id="passed?"></a><a id="8877" href="VerifiedCompilation.html#8877" class="Function">passed?</a> <a id="8885" class="Symbol">:</a> <a id="8887" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8893" href="VerifiedCompilation.html#8172" class="Datatype">Cert</a> <a id="8898" class="Symbol">→</a> <a id="8900" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="8905" href="VerifiedCompilation.html#8877" class="Function">passed?</a> <a id="8913" class="Symbol">(</a><a id="8914" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8919" class="Symbol">(</a><a id="8920" href="VerifiedCompilation.html#8192" class="InductiveConstructor">cert</a> <a id="8925" class="Symbol">(</a><a id="8926" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="8929" class="Symbol">_</a> <a id="8931" class="Symbol">_</a> <a id="8933" class="Symbol">_</a> <a id="8935" class="Symbol">_)))</a> <a id="8940" class="Symbol">=</a> <a id="8942" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="8948" href="VerifiedCompilation.html#8877" class="Function">passed?</a> <a id="8956" class="Symbol">(</a><a id="8957" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8962" class="Symbol">(</a><a id="8963" href="VerifiedCompilation.html#8192" class="InductiveConstructor">cert</a> <a id="8968" class="Symbol">(</a><a id="8969" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="8975" class="Symbol">_)))</a> <a id="8980" class="Symbol">=</a> <a id="8982" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="8987" href="VerifiedCompilation.html#8877" class="Function">passed?</a> <a id="8995" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9003" class="Symbol">=</a> <a id="9005" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>

<a id="runCertifierMain"></a><a id="9012" href="VerifiedCompilation.html#9012" class="Function">runCertifierMain</a> <a id="9029" class="Symbol">:</a> <a id="9031" href="Utils.html#5297" class="Datatype">List</a> <a id="9036" class="Symbol">(</a><a id="9037" href="VerifiedCompilation.Certificate.html#645" class="Datatype">SimplifierTag</a> <a id="9051" href="Utils.html#5059" class="Record Operator">×</a> <a id="9053" href="RawU.html#6377" class="Datatype">Untyped</a> <a id="9061" href="Utils.html#5059" class="Record Operator">×</a> <a id="9063" href="RawU.html#6377" class="Datatype">Untyped</a><a id="9070" class="Symbol">)</a> <a id="9072" class="Symbol">→</a> <a id="9074" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9080" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="9085" href="VerifiedCompilation.html#9012" class="Function">runCertifierMain</a> <a id="9102" href="VerifiedCompilation.html#9102" class="Bound">asts</a> <a id="9107" class="Keyword">with</a> <a id="9112" href="VerifiedCompilation.html#8324" class="Function">runCertifier</a> <a id="9125" href="VerifiedCompilation.html#9102" class="Bound">asts</a>
<a id="9130" class="Symbol">...</a> <a id="9134" class="Symbol">|</a> <a id="9136" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9141" class="Symbol">(</a><a id="9142" href="VerifiedCompilation.html#8192" class="InductiveConstructor">cert</a> <a id="9147" class="Symbol">(</a><a id="9148" href="VerifiedCompilation.Certificate.html#1156" class="InductiveConstructor">proof</a> <a id="9154" href="VerifiedCompilation.html#9154" class="Bound">a</a><a id="9155" class="Symbol">))</a> <a id="9158" class="Symbol">=</a> <a id="9160" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9165" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="9170" class="Symbol">...</a> <a id="9174" class="Symbol">|</a> <a id="9176" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9181" class="Symbol">(</a><a id="9182" href="VerifiedCompilation.html#8192" class="InductiveConstructor">cert</a> <a id="9187" class="Symbol">(</a><a id="9188" href="VerifiedCompilation.Certificate.html#1188" class="InductiveConstructor">ce</a> <a id="9191" href="VerifiedCompilation.html#9191" class="Bound">¬p</a> <a id="9194" href="VerifiedCompilation.html#9194" class="Bound">t</a> <a id="9196" href="VerifiedCompilation.html#9196" class="Bound">b</a> <a id="9198" href="VerifiedCompilation.html#9198" class="Bound">a</a><a id="9199" class="Symbol">))</a> <a id="9202" class="Symbol">=</a> <a id="9204" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9209" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="9215" class="Symbol">...</a> <a id="9219" class="Symbol">|</a> <a id="9221" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9229" class="Symbol">=</a> <a id="9231" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="9239" class="Symbol">{-#</a> <a id="9243" class="Keyword">COMPILE</a> <a id="9251" class="Keyword">GHC</a> <a id="9255" href="VerifiedCompilation.html#9012" class="Function">runCertifierMain</a> <a id="9272" class="Pragma">as</a> <a id="9275" class="Pragma">runCertifierMain</a> <a id="9292" class="Symbol">#-}</a>
</pre>

    </section>
  </body>
</html>