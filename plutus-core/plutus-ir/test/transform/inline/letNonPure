{- 
This test checks that impure bindings are not inlined by call site inlining. 
y is impure. x occurs more than once and so it would not be inlined by unconditional inlining.
We check purity for fully applied and "acceptable" binding for call site inlining.

let ~y = trace "hello" 1
let !x = y -- so it looks small enough to inline
in addInteger x x
 -}

(let
    (nonrec)
    (termbind
      (nonstrict)
      (vardecl y (con integer))
      [ [ {(builtin trace) (con integer) } (con string "hello") ] (con integer 1) ]
    )
    (termbind (strict) (vardecl x (con integer)) y)
    [ [(builtin addInteger) x ] x ]
)
